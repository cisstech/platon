"use strict";(self.webpackChunkhome=self.webpackChunkhome||[]).push([[110],{3637:(L,g,o)=>{o.r(g),o.d(g,{MatchListModule:()=>F});var m=o(46),b=o(1016),j=o(6394),u=o(7270),n=o(7788),l=o(8500),v=o(5966),p=o(6223),M=o(6443),f=o(6610),O=o(9205);const E=["container"],P=i=>({$implicit:i});function y(i,t){1&i&&n.eu8(0,8)}function k(i,t){if(1&i&&(n.qex(0),n.DNE(1,y,1,0,"ng-container",7),n.bVm()),2&i){const e=t.$implicit;n.XpG();const s=n.sdS(7);n.R7$(),n.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",n.eq3(2,P,e))}}function w(i,t){1&i&&n.eu8(0,10)}function T(i,t){if(1&i&&(n.qex(0),n.DNE(1,w,1,0,"ng-container",9),n.bVm()),2&i){const e=t.$implicit;n.XpG();const s=n.sdS(7);n.R7$(),n.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",n.eq3(2,P,e))}}function x(i,t){if(1&i&&n.nrm(0,"nge-markdown",11),2&i){const e=t.$implicit;n.Y8G("id",e.id)("data",e.content)}}let h=class d{get sources(){return this.state.nodes.filter(t=>"source"===t.type)}get targets(){return this.state.nodes.filter(t=>"target"===t.type)}constructor(t,e){this.injector=t,this.changeDetector=e,this.stateChange=new n.bkB,this.width=0,this.height=0,this.selectedPoints=[]}ngOnInit(){var t=this;return(0,j.A)(function*(){t.state.isFilled=!1,t.jsPlumb=(0,l.UIf)({container:t.container.nativeElement,connectionsDetachable:!1,endpoint:{type:"Dot",options:{radius:6}},connector:"StateMachine",paintStyle:{strokeWidth:4,stroke:"#456"},hoverPaintStyle:{stroke:"#FF4500"},endpointHoverStyle:{stroke:"#FF4500",fill:"#FF4500"},connectionOverlays:[{type:"Arrow",options:{width:16,length:16,location:.98,id:"arrow"}}],dragOptions:{cursor:"pointer",zIndex:2e3}}),yield new Promise(e=>{(0,l.Gc4)(()=>{t.addListeners(),e()})})})()}ngAfterViewChecked(){const{offsetWidth:t,offsetHeight:e}=this.container.nativeElement;(this.width!==t||this.height!==e)&&0!==this.width&&0!==this.height&&this.jsPlumb?.repaintEverything(),this.width=t,this.height=e}ngOnDestroy(){this.jsPlumb?.reset()}onChangeState(){this.jsPlumb.batch(()=>{this.jsPlumb.selectEndpoints().each(e=>{this.state.nodes.find(s=>s.id===e.uuid)||this.jsPlumb.deleteEndpoint(e)}),this.renderEndPoints(),[...this.jsPlumb.connections].forEach(e=>{this.state.links.find(s=>s.source===e.sourceId&&s.target===e.targetId)||this.jsPlumb.deleteConnection(e)}),this.renderConnections(),this.state.disabled?(this.jsPlumb.setSuspendEvents(!0),this.jsPlumb.selectEndpoints().each(e=>{e.maxConnections=e.connections.length})):(this.jsPlumb.setSuspendEvents(!1),this.jsPlumb.selectEndpoints().each(e=>{e.maxConnections=-1})),this.selectedPoints=[],this.unselectPoints()})}trackBy(t,e){return e.id||t}renderEndPoints(){this.state.nodes.filter(t=>!this.jsPlumb.getEndpoint(t.id)).forEach(t=>{const e=document.getElementById(t.id);if(!e)return;const s=this.jsPlumb.addEndpoint(e,{uuid:t.id,source:"source"===t.type,target:"target"===t.type,anchor:"source"===t.type?"Right":"Left",maxConnections:-1});e.addEventListener("click",()=>{this.state.disabled||this.selectPoint(s,t.id)})})}renderConnections(){this.state.links.filter(t=>!this.jsPlumb.connections.find(e=>e.sourceId==t.source&&e.targetId==t.target)).forEach(t=>{const e=this.jsPlumb.getEndpoint(t.source),s=this.jsPlumb.getEndpoint(t.target);!e||!s||this.jsPlumb?.connect({source:e,target:s,anchors:["Right","Left"],cssClass:t.css})})}addListeners(){this.jsPlumb.bind(l.zUE,t=>{this.jsPlumb?.deleteConnection(t)}),this.jsPlumb.bind(l.wt,t=>{this.onCreateConnection(t.connection)}),this.jsPlumb.bind(l.p3_,t=>{this.onRemoveConnection(t.connection)})}selectPoint(t,e){if(this.selectedPoints.includes(e))return t.removeClass("selected"),void this.selectedPoints.splice(this.selectedPoints.indexOf(e),1);if(t.addClass("selected"),this.selectedPoints.push(e),this.selectedPoints.length>=2){const s=this.selectedPoints.find(a=>this.sources.find(r=>r.id===a)),c=this.selectedPoints.find(a=>this.targets.find(r=>r.id===a));if(s&&c){if(this.state.links.find(C=>C.source===s&&C.target===c))return void this.unselectPoints();this.unselectPoints();const a=this.jsPlumb.getEndpoint(s),r=this.jsPlumb.getEndpoint(c);this.jsPlumb.connect({source:a,target:r})}else{const a=this.selectedPoints[1];this.unselectPoints(),this.selectPoint(this.jsPlumb.getEndpoint(a),a)}}}unselectPoints(){this.selectedPoints.forEach(t=>{this.jsPlumb.getEndpoint(t).removeClass("selected")}),this.selectedPoints=[]}indexOfConnection(t){const e=this.state.links;for(let s=0;s<this.state.links.length;s++){const c=e[s];if(c.source===t.sourceId&&c.target===t.targetId)return s}return-1}onCreateConnection(t){-1===this.indexOfConnection(t)&&this.changeDetector.ignore(this,()=>{this.state.isFilled=!0,this.state.links.push({source:t.sourceId,target:t.targetId})}).catch(console.error)}onRemoveConnection(t){const e=this.indexOfConnection(t);-1!==e&&this.changeDetector.ignore(this,()=>{this.state.links.splice(e,1),this.state.isFilled=!0}).catch(console.error)}static#t=this.\u0275fac=function(e){return new(e||d)(n.rXU(n.zZn),n.rXU(p.D))};static#e=this.\u0275cmp=n.VBU({type:d,selectors:[["wc-match-list"]],viewQuery:function(e,s){if(1&e&&n.GBs(E,7),2&e){let c;n.mGM(c=n.lsd())&&(s.container=c.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:9,vars:7,consts:[["container",""],["nodeTemplate",""],[1,"match-list-container"],["id","match-list-sources"],[4,"ngFor","ngForOf","ngForTrackBy"],["id","match-list-targets"],[3,"stateChange","state"],["class","endpoint source",4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"endpoint","source"],["class","endpoint",4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"endpoint"],[3,"id","data"]],template:function(e,s){if(1&e){const c=n.RV6();n.j41(0,"div",2,0)(2,"div",3),n.DNE(3,k,2,4,"ng-container",4),n.k0s(),n.j41(4,"div",5),n.DNE(5,T,2,4,"ng-container",4),n.k0s()(),n.DNE(6,x,1,2,"ng-template",null,1,n.C5r),n.j41(8,"wc-base",6),n.mxI("stateChange",function(r){return n.eBV(c),n.DH7(s.state,r)||(s.state=r),n.Njj(r)}),n.k0s()}2&e&&(n.AVh("disabled",s.state.disabled),n.R7$(3),n.Y8G("ngForOf",s.sources)("ngForTrackBy",s.trackBy),n.R7$(2),n.Y8G("ngForOf",s.targets)("ngForTrackBy",s.trackBy),n.R7$(3),n.R50("state",s.state))},dependencies:[f.Sq,f.T3,O.$,m.NgeMarkdownComponent],styles:[".match-list-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:8rem;align-items:center;position:relative;min-height:100px}.match-list-container.disabled[_ngcontent-%COMP%]{cursor:not-allowed;border:dashed 1px #ccc}.match-list-container.disabled[_ngcontent-%COMP%]   nge-markdown[_ngcontent-%COMP%]{cursor:not-allowed}.match-list-container[_ngcontent-%COMP%]  svg.jtk-connector{cursor:pointer}.match-list-container[_ngcontent-%COMP%]  svg.jtk-endpoint{cursor:grab}.match-list-container[_ngcontent-%COMP%]  .jtk-endpoint.selected circle{fill:#ff4500;stroke:#ff4500}.match-list-container[_ngcontent-%COMP%]  svg.error-state, .match-list-container[_ngcontent-%COMP%]  svg.warning-state, .match-list-container[_ngcontent-%COMP%]  svg.success-state{background-color:unset!important;border:unset!important;border-radius:unset!important}.match-list-container[_ngcontent-%COMP%]  svg.error-state path{stroke:red}.match-list-container[_ngcontent-%COMP%]  svg.warning-state path{stroke:#ff0}.match-list-container[_ngcontent-%COMP%]  svg.success-state path{stroke:#0f0}#match-list-sources[_ngcontent-%COMP%]{text-align:end}#match-list-targets[_ngcontent-%COMP%]{text-align:start}nge-markdown[_ngcontent-%COMP%]{display:block;padding:1rem;border-bottom:1px solid #f5f5f5;cursor:pointer}nge-markdown[_ngcontent-%COMP%]  img{width:128px;object-fit:cover;height:auto}"],changeDetection:0})};h=(0,u.Cg)([(0,v.Er)(M.w),(0,u.Sn)("design:paramtypes",[n.zZn,p.D])],h);let F=(()=>{class i{constructor(){this.component=h}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=n.$C({type:i});static#n=this.\u0275inj=n.G2t({imports:[b.W,m.NgeMarkdownModule]})}return i})()}}]);