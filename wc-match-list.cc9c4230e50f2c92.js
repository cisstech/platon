"use strict";(self.webpackChunkhome=self.webpackChunkhome||[]).push([[110],{3637:(D,d,o)=>{o.r(d),o.d(d,{MatchListModule:()=>w});var g=o(2427),C=o(1016),P=o(6394),m=o(7270),e=o(7788),v=o(3714),M=o(5966),u=o(6223),b=o(6443),p=o(6610),O=o(9205);const y=["container"],f=i=>({$implicit:i});function k(i,t){1&i&&e.eu8(0)}function j(i,t){if(1&i&&(e.qex(0),e.DNE(1,k,1,0,"ng-container",7),e.bVm()),2&i){const n=t.$implicit;e.XpG();const s=e.sdS(7);e.R7$(),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(2,f,n))}}function E(i,t){1&i&&e.eu8(0)}function T(i,t){if(1&i&&(e.qex(0),e.DNE(1,E,1,0,"ng-container",7),e.bVm()),2&i){const n=t.$implicit;e.XpG();const s=e.sdS(7);e.R7$(),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(2,f,n))}}function L(i,t){if(1&i&&e.nrm(0,"nge-markdown",8),2&i){const n=t.$implicit;e.Y8G("id",n.id)("data",n.content)}}let h=class l{get sources(){return this.state.nodes.filter(t=>"source"===t.type)}get targets(){return this.state.nodes.filter(t=>"target"===t.type)}constructor(t,n){this.injector=t,this.changeDetector=n,this.stateChange=new e.bkB,this.width=0,this.height=0,this.selectedPoints=[]}ngOnInit(){var t=this;return(0,P.A)(function*(){t.jsPlumb=v.jsPlumb.getInstance({Container:t.container.nativeElement,ConnectionsDetachable:!1,Endpoint:["Dot",{radius:6}],Connector:"StateMachine",PaintStyle:{strokeWidth:4,stroke:"#456"},HoverPaintStyle:{stroke:"#FF4500"},EndpointHoverStyle:{stroke:"#FF4500",fill:"#FF4500"},ConnectionOverlays:[["Arrow",{width:16,length:16,location:.98,id:"arrow"}]],DragOptions:{cursor:"pointer",zIndex:2e3}}),yield new Promise(n=>{t.jsPlumb.ready(()=>{t.addListeners(),n()})})})()}ngAfterViewChecked(){const{offsetWidth:t,offsetHeight:n}=this.container.nativeElement;(this.width!==t||this.height!==n)&&0!==this.width&&0!==this.height&&this.jsPlumb?.repaintEverything(),this.width=t,this.height=n}ngOnDestroy(){this.jsPlumb?.reset()}onChangeState(){this.jsPlumb.batch(()=>{this.jsPlumb.reset(!0),this.jsPlumb.setSuspendEvents(this.state.disabled),this.renderEndPoints(),this.renderConnections()})}trackBy(t,n){return n.id||t}renderEndPoints(){this.state.nodes.forEach(t=>{this.jsPlumb?.addEndpoint(t.id,{id:t.id,isSource:"source"===t.type,isTarget:"target"===t.type,anchor:"source"===t.type?"Right":"Left",maxConnections:this.state.disabled?0:-1})})}renderConnections(){this.state.links.forEach(t=>{!t.source||!t.target||this.jsPlumb?.connect({source:t.source,target:t.target,anchors:["RightMiddle","LeftMiddle"],cssClass:t.css})})}addListeners(){this.jsPlumb.bind("click",t=>{this.jsPlumb?.deleteConnection(t)}),this.jsPlumb.bind("connection",t=>{this.onCreateConnection(t.connection)}),this.jsPlumb.bind("connectionDetached",t=>{this.onRemoveConnection(t.connection)}),this.jsPlumb.bind("endpointClick",t=>{if(this.selectPoint(t),this.selectedPoints.length>=2){const s=this.selectedPoints.find(a=>this.sources.find(r=>r.id===a.getElement().id)),c=this.selectedPoints.find(a=>this.targets.find(r=>r.id===a.getElement().id));if(s&&c&&!this.state.links.find(a=>a.source===s.getElement().id&&a.target===c.getElement().id))this.unselectPoints(),this.state.links.push({source:s.getElement().id,target:c.getElement().id}),this.renderConnections();else{const a=this.selectedPoints[1];this.unselectPoints(),this.selectPoint(a)}}})}selectPoint(t){const n=t.canvas;n.classList.remove("selected"),n.classList.add("selected"),this.selectedPoints.push(t)}unselectPoints(){this.selectedPoints.forEach(t=>{t.canvas.classList.remove("selected")}),this.selectedPoints=[]}indexOfConnection(t){const n=this.state.links;for(let s=0;s<this.state.links.length;s++){const c=n[s];if(c.source===t.sourceId&&c.target===t.targetId)return s}return-1}onCreateConnection(t){-1===this.indexOfConnection(t)&&this.changeDetector.ignore(this,()=>{this.state.links.push({source:t.sourceId,target:t.targetId})}).catch(console.error)}onRemoveConnection(t){const n=this.indexOfConnection(t);-1!==n&&this.changeDetector.ignore(this,()=>{this.state.links.splice(n,1)}).catch(console.error)}static#t=this.\u0275fac=function(n){return new(n||l)(e.rXU(e.zZn),e.rXU(u.D))};static#e=this.\u0275cmp=e.VBU({type:l,selectors:[["wc-match-list"]],viewQuery:function(n,s){if(1&n&&e.GBs(y,7),2&n){let c;e.mGM(c=e.lsd())&&(s.container=c.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:9,vars:7,consts:[["container",""],["nodeTemplate",""],[1,"match-list-container"],[1,"match-list-sources"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"match-list-targets"],[3,"stateChange","state"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id","data"]],template:function(n,s){if(1&n){const c=e.RV6();e.j41(0,"div",2,0)(2,"div",3),e.DNE(3,j,2,4,"ng-container",4),e.k0s(),e.j41(4,"div",5),e.DNE(5,T,2,4,"ng-container",4),e.k0s()(),e.DNE(6,L,1,2,"ng-template",null,1,e.C5r),e.j41(8,"wc-base",6),e.mxI("stateChange",function(r){return e.eBV(c),e.DH7(s.state,r)||(s.state=r),e.Njj(r)}),e.k0s()}2&n&&(e.AVh("disabled",s.state.disabled),e.R7$(3),e.Y8G("ngForOf",s.sources)("ngForTrackBy",s.trackBy),e.R7$(2),e.Y8G("ngForOf",s.targets)("ngForTrackBy",s.trackBy),e.R7$(3),e.R50("state",s.state))},dependencies:[p.Sq,p.T3,O.$,g.NgeMarkdownComponent],styles:[".match-list-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:8rem;align-items:center;position:relative;min-height:100px}.match-list-container.disabled[_ngcontent-%COMP%]{cursor:not-allowed;border:dashed 1px #ccc}.match-list-container[_ngcontent-%COMP%]  svg.jtk-connector{cursor:pointer}.match-list-container[_ngcontent-%COMP%]  .jtk-endpoint svg{cursor:pointer}.match-list-container[_ngcontent-%COMP%]  .jtk-endpoint.selected circle{fill:#ff4500;stroke:#ff4500}.match-list-container[_ngcontent-%COMP%]  svg.error-state, .match-list-container[_ngcontent-%COMP%]  svg.warning-state, .match-list-container[_ngcontent-%COMP%]  svg.success-state{background-color:unset!important;border:unset!important;border-radius:unset!important}.match-list-container[_ngcontent-%COMP%]  svg.error-state path{stroke:red}.match-list-container[_ngcontent-%COMP%]  svg.warning-state path{stroke:#ff0}.match-list-container[_ngcontent-%COMP%]  svg.success-state path{stroke:#0f0}.match-list-sources[_ngcontent-%COMP%]{text-align:end}.match-list-targets[_ngcontent-%COMP%]{text-align:start}nge-markdown[_ngcontent-%COMP%]{display:block;padding:1rem;border-bottom:1px solid #f5f5f5}nge-markdown[_ngcontent-%COMP%]  img{width:128px;object-fit:cover;height:auto}"],changeDetection:0})};h=(0,m.Cg)([(0,M.Er)(b.w),(0,m.Sn)("design:paramtypes",[e.zZn,u.D])],h);let w=(()=>{class i{constructor(){this.component=h}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[C.W,g.NgeMarkdownModule]})}return i})()}}]);