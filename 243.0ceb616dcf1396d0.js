(self.webpackChunkhome=self.webpackChunkhome||[]).push([[243],{9205:(se,Ft,J)=>{"use strict";J.d(Ft,{$:()=>f});var h=J(7788),X=J(6359),ot=J(5293),Z=J(6610),tt=J(2919);const l=["container"];function D(n,x){if(1&n&&(h.qex(0),h.nrm(1,"nge-monaco-viewer",1),h.nI1(2,"json"),h.bVm()),2&n){const T=h.XpG();h.R7$(),h.Y8G("code",h.bMT(2,1,T.state))}}let f=(()=>{class n{constructor(T,j){this.api=T,this.elementRef=j,this.stateChange=new h.bkB}ngOnInit(){const T=this.elementRef.nativeElement;T.parentElement?.setAttribute("id",(0,ot.A)());const j=T.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(j||""),this.observer=new MutationObserver(k=>{k.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(T.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(T){return T.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(T):T}onChangeAttributes(T){const G=Array.from(this.elementRef.nativeElement.parentElement.attributes),O=G.find(U=>"data-script-id"===U.name);if(O){const U=document.querySelector(`script[id="${O.value}"]`);return void(U&&this.stateChange.emit(this.parseValue(U.textContent||"{}")))}if(G.find(U=>"state"===U.name)&&T)return;const e={},I=this.definition?.schema?.properties||{};let M=!1;for(const U of G)if(U.name in I){M=!0;try{e[U.name]=this.parseValue(U.value)}catch{console.warn(`Invalid value "${U.value}" for ${U.name} attribute`)}}M&&this.stateChange.emit(e)}static#t=this.\u0275fac=function(j){return new(j||n)(h.rXU(X.h),h.rXU(h.aKT))};static#e=this.\u0275cmp=h.VBU({type:n,selectors:[["wc-base"]],viewQuery:function(j,k){if(1&j&&h.GBs(l,5),2&j){let G;h.mGM(G=h.lsd())&&(k.container=G.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(j,k){1&j&&h.DNE(0,D,3,3,"ng-container",0),2&j&&h.Y8G("ngIf",null==k.state?null:k.state.debug)},dependencies:[Z.bT,tt.x1,Z.TG],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return n})()},1016:(se,Ft,J)=>{"use strict";J.d(Ft,{W:()=>Z});var h=J(6610),X=J(2919),ot=J(7788);let Z=(()=>{class tt{static#t=this.\u0275fac=function(f){return new(f||tt)};static#e=this.\u0275mod=ot.$C({type:tt});static#n=this.\u0275inj=ot.G2t({imports:[h.MD,X.OZ,h.MD]})}return tt})()},6223:(se,Ft,J)=>{"use strict";J.d(Ft,{D:()=>Z});var h=J(6394),X=J(7788),ot=J(5689);let Z=(()=>{class tt{batch(D,f){const n=D.$__suspendChanges__$;D.$__suspendChanges__$=!0,f(),D.onChangeState&&D.onChangeState(),D.$__changeDetector__$||(D.$__changeDetector__$=D.injector.get(X.gRc)),D.$__changeDetector__$.detectChanges(),D.$__suspendChanges__$=n}ignore(D,f){return(0,h.A)(function*(){const n=D.$__suspendChanges__$;D.$__suspendChanges__$=!0;const x=yield f();return D.$__changeDetector__$||(D.$__changeDetector__$=D.injector.get(X.gRc)),D.$__changeDetector__$.detectChanges(),D.$__suspendChanges__$=n,x})()}changes(D){if(!D.$__stateCopy__$)return D.$__stateCopy__$=(0,ot.A4)(D.$__state__$),[];const f=[];return new Set(Object.keys(D.$__state__$).concat(Object.keys(D.$__stateCopy__$))).forEach(x=>{(0,ot.bD)(D.$__state__$[x],D.$__stateCopy__$[x])||f.push(x)}),D.$__stateCopy__$=(0,ot.A4)(D.$__state__$),f}static#t=this.\u0275fac=function(f){return new(f||tt)};static#e=this.\u0275prov=X.jDH({token:tt,factory:tt.\u0275fac,providedIn:"root"})}return tt})()},3714:function(se,Ft){(function(){typeof Math.sgn>"u"&&(Math.sgn=function(P){return 0==P?0:P>0?1:-1});var h_subtract=function(P,A){return{x:P.x-A.x,y:P.y-A.y}},h_dotProduct=function(P,A){return P.x*A.x+P.y*A.y},h_square=function(P){return Math.sqrt(P.x*P.x+P.y*P.y)},h_scale=function(P,A){return{x:P.x*A,y:P.y*A}},ot=Math.pow(2,-65),Z=function(P,A){for(var N=[],V=l(P,A),g=A.length-1,a=D(V,2*g-1,N,0),s=h_subtract(P,A[0]),p=h_square(s),c=0,w=0;w<a;w++){s=h_subtract(P,T(A,g,N[w],null,null));var B=h_square(s);B<p&&(p=B,c=N[w])}return s=h_subtract(P,A[g]),(B=h_square(s))<p&&(p=B,c=1),{location:c,distance:p}},l=function(P,A){for(var N=A.length-1,V=2*N-1,g=[],d=[],a=[],s=[],p=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],c=0;c<=N;c++)g[c]=h_subtract(A[c],P);for(c=0;c<=N-1;c++)d[c]=h_subtract(A[c+1],A[c]),d[c]=h_scale(d[c],3);for(var w=0;w<=N-1;w++)for(var B=0;B<=N;B++)a[w]||(a[w]=[]),a[w][B]=h_dotProduct(d[w],g[B]);for(c=0;c<=V;c++)s[c]||(s[c]=[]),s[c].y=0,s[c].x=parseFloat(c)/V;for(var H=N,W=N-1,Q=0;Q<=H+W;Q++){var et=Math.max(0,Q-W),$=Math.min(Q,H);for(c=et;c<=$;c++){var it=Q-c;s[c+it].y+=a[it][c]*p[it][c]}}return s},D=function(P,A,N,V){var a,s,g=[],d=[],p=[],c=[];switch(f(P,A)){case 0:return 0;case 1:if(V>=64)return N[0]=(P[0].x+P[A].x)/2,1;if(n(P,A))return N[0]=x(P,A),1}T(P,A,.5,g,d),a=D(g,A,p,V+1),s=D(d,A,c,V+1);for(var w=0;w<a;w++)N[w]=p[w];for(w=0;w<s;w++)N[w+a]=c[w];return a+s},f=function(P,A){var V,g,N=0;V=g=Math.sgn(P[0].y);for(var d=1;d<=A;d++)(V=Math.sgn(P[d].y))!=g&&N++,g=V;return N},n=function(P,A){var V,g,d,s,p,c,$,ct,dt;s=P[0].y-P[A].y,p=P[A].x-P[0].x,c=P[0].x*P[A].y-P[A].x*P[0].y,ct=dt=0;for(var gt=1;gt<A;gt++){var Pt=s*P[gt].x+p*P[gt].y+c;Pt>ct?ct=Pt:Pt<dt&&(dt=Pt)}return V=(1*(c-ct)-0*($=p))*(1/(0*$-1*s)),g=(1*(c-dt)-0*($=p))*(1/(0*$-1*s)),d=Math.min(V,g),Math.max(V,g)-d<ot?1:0},x=function(P,A){var g=P[A].x-P[0].x,d=P[A].y-P[0].y;return 0+1/(0*g-1*d)*(g*(P[0].y-0)-d*(P[0].x-0))*1},T=function(P,A,N,V,g){for(var d=[[]],a=0;a<=A;a++)d[0][a]=P[a];for(var s=1;s<=A;s++)for(a=0;a<=A-s;a++)d[s]||(d[s]=[]),d[s][a]||(d[s][a]={}),d[s][a].x=(1-N)*d[s-1][a].x+N*d[s-1][a+1].x,d[s][a].y=(1-N)*d[s-1][a].y+N*d[s-1][a+1].y;if(null!=V)for(a=0;a<=A;a++)V[a]=d[a][0];if(null!=g)for(a=0;a<=A;a++)g[a]=d[A-a][a];return d[A][0]},j={},G=function(P,A){for(var N=function(P){var A=j[P];if(!A){var g=function(B){return function(H){return B}},d=function(){return function(B){return B}},a=function(){return function(B){return 1-B}},s=function(B){return function(H){for(var W=1,Q=0;Q<B.length;Q++)W*=B[Q](H);return W}};(A=[]).push(new function(){return function(B){return Math.pow(B,P)}});for(var p=1;p<P;p++){for(var c=[new g(P)],w=0;w<P-p;w++)c.push(new d);for(w=0;w<p;w++)c.push(new a);A.push(new s(c))}A.push(new function(){return function(B){return Math.pow(1-B,P)}}),j[P]=A}return A}(P.length-1),V=0,g=0,d=0;d<P.length;d++)V+=P[d].x*N[d](A),g+=P[d].y*N[d](A);return{x:V,y:g}},O=function(P,A){return Math.sqrt(Math.pow(P.x-A.x,2)+Math.pow(P.y-A.y,2))},r=function(P){return P[0].x===P[1].x&&P[0].y===P[1].y},e=function(P,A,N){if(r(P))return{point:P[0],location:A};for(var V=G(P,A),g=0,d=A,a=N>0?1:-1,s=null;g<Math.abs(N);)s=G(P,d+=.005*a),g+=O(s,V),V=s;return{point:s,location:d}},F=function(P,A){var N=G(P,A),V=G(P.slice(0,P.length-1),A),g=V.y-N.y;return 0===g?1/0:Math.atan(g/(V.x-N.x))},o=function(P,A,N,V,g){var d=V-A,a=P-N,s=P*(A-V)+A*(N-P),p=function y(P){return[v(P,"x"),v(P,"y")]}(g),w=S.apply(null,[d*p[0][0]+a*p[1][0],d*p[0][1]+a*p[1][1],d*p[0][2]+a*p[1][2],d*p[0][3]+a*p[1][3]+s]),B=[];if(null!=w)for(var H=0;H<3;H++){var it,W=w[H],Q=Math.pow(W,2),et=Math.pow(W,3),$=[p[0][0]*et+p[0][1]*Q+p[0][2]*W+p[0][3],p[1][0]*et+p[1][1]*Q+p[1][2]*W+p[1][3]];it=N-P!=0?($[0]-P)/(N-P):($[1]-A)/(V-A),W>=0&&W<=1&&it>=0&&it<=1&&B.push($)}return B};function v(P,A){return[3*P[1][A]-P[0][A]+-3*P[2][A]+P[3][A],3*P[0][A]-6*P[1][A]+3*P[2][A],-3*P[0][A]+3*P[1][A],P[0][A]]}function m(P){return P<0?-1:P>0?1:0}function S(P,A,N,V){var w,B,g=A/P,d=N/P,a=V/P,s=(3*d-Math.pow(g,2))/9,p=(9*g*d-27*a-2*Math.pow(g,3))/54,c=Math.pow(s,3)+Math.pow(p,2),H=[];if(c>=0)w=m(p+Math.sqrt(c))*Math.pow(Math.abs(p+Math.sqrt(c)),1/3),B=m(p-Math.sqrt(c))*Math.pow(Math.abs(p-Math.sqrt(c)),1/3),H[0]=-g/3+(w+B),H[1]=-g/3-(w+B)/2,H[2]=-g/3-(w+B)/2,0!==Math.abs(Math.sqrt(3)*(w-B)/2)&&(H[1]=-1,H[2]=-1);else{var W=Math.acos(p/Math.sqrt(-Math.pow(s,3)));H[0]=2*Math.sqrt(-s)*Math.cos(W/3)-g/3,H[1]=2*Math.sqrt(-s)*Math.cos((W+2*Math.PI)/3)-g/3,H[2]=2*Math.sqrt(-s)*Math.cos((W+4*Math.PI)/3)-g/3}for(var Q=0;Q<3;Q++)(H[Q]<0||H[Q]>1)&&(H[Q]=-1);return H}var R=this.jsBezier={distanceFromCurve:Z,gradientAtPoint:F,gradientAtPointAlongCurveFrom:function(P,A,N){var V=e(P,A,N);return V.location>1&&(V.location=1),V.location<0&&(V.location=0),F(P,V.location)},nearestPointOnCurve:function(P,A){var N=Z(P,A);return{point:T(A,A.length-1,N.location,null,null),location:N.location}},pointOnCurve:G,pointAlongCurveFrom:function(P,A,N){return e(P,A,N).point},perpendicularToCurveAt:function(P,A,N,V){var g=e(P,A,V=V??0),d=F(P,g.location),a=Math.atan(-1/d),s=N/2*Math.sin(a),p=N/2*Math.cos(a);return[{x:g.point.x+p,y:g.point.y+s},{x:g.point.x-p,y:g.point.y-s}]},locationAlongCurveFrom:function(P,A,N){return e(P,A,N).location},getLength:function(P){var A=(new Date).getTime();if(r(P))return 0;for(var N=G(P,0),V=0,g=0,a=null;g<1;)a=G(P,g+=.005),V+=O(a,N),N=a;return console.log("length",(new Date).getTime()-A),V},lineIntersection:o,boxIntersection:function(P,A,N,V,g){var d=[];return d.push.apply(d,o(P,A,P+N,A,g)),d.push.apply(d,o(P+N,A,P+N,A+V,g)),d.push.apply(d,o(P+N,A+V,P,A+V,g)),d.push.apply(d,o(P,A+V,P,A,g)),d},boundingBoxIntersection:function(P,A){var N=[];return N.push.apply(N,o(P.x,P.y,P.x+P.w,P.y,A)),N.push.apply(N,o(P.x+P.w,P.y,P.x+P.w,P.y+P.h,A)),N.push.apply(N,o(P.x+P.w,P.y+P.h,P.x,P.y+P.h,A)),N.push.apply(N,o(P.x,P.y+P.h,P.x,P.y,A)),N},version:"0.9.0"};Ft.jsBezier=R}).call(typeof window<"u"?window:this),function(){"use strict";var h=this.Biltong={version:"0.4.0"};Ft.Biltong=h;var X=function(O){return"[object Array]"===Object.prototype.toString.call(O)},ot=function(O,r,e){return e(O=X(O)?O:[O.x,O.y],r=X(r)?r:[r.x,r.y])},Z=h.gradient=function(O,r){return ot(O,r,function(e,I){return I[0]==e[0]?I[1]>e[1]?1/0:-1/0:I[1]==e[1]?I[0]>e[0]?0:-0:(I[1]-e[1])/(I[0]-e[0])})},D=(h.normal=function(O,r){return-1/Z(O,r)},h.lineLength=function(O,r){return ot(O,r,function(e,I){return Math.sqrt(Math.pow(I[1]-e[1],2)+Math.pow(I[0]-e[0],2))})},h.quadrant=function(O,r){return ot(O,r,function(e,I){return I[0]>e[0]||I[0]==e[0]?I[1]>e[1]?2:1:I[1]>e[1]?3:4})}),T=(h.theta=function(O,r){return ot(O,r,function(e,I){var M=Z(e,I),U=Math.atan(M),F=D(e,I);return(4==F||3==F)&&(U+=Math.PI),U<0&&(U+=2*Math.PI),U})},h.intersects=function(O,r){var e=O.x,I=O.x+O.w,M=O.y,U=O.y+O.h,F=r.x,t=r.x+r.w,u=r.y,o=r.y+r.h;return e<=F&&F<=I&&M<=u&&u<=U||e<=t&&t<=I&&M<=u&&u<=U||e<=F&&F<=I&&M<=o&&o<=U||e<=t&&F<=I&&M<=o&&o<=U||F<=e&&e<=t&&u<=M&&M<=o||F<=I&&I<=t&&u<=M&&M<=o||F<=e&&e<=t&&u<=U&&U<=o||F<=I&&e<=t&&u<=U&&U<=o},h.encloses=function(O,r,e){var U=O.y,F=O.y+O.h,o=r.y,b=r.y+r.h,C=function(v,y,m,S){return e?v<=y&&m>=S:v<y&&m>S};return C(O.x,r.x,O.x+O.w,r.x+r.w)&&C(U,o,F,b)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),j=[null,[-1,-1],[-1,1],[1,1],[1,-1]];h.pointOnLine=function(O,r,e){var I=Z(O,r),M=D(O,r),U=e>0?T[M]:j[M],F=Math.atan(I),t=Math.abs(e*Math.sin(F))*U[1],u=Math.abs(e*Math.cos(F))*U[0];return{x:O.x+u,y:O.y+t}},h.perpendicularLineTo=function(O,r,e){var I=Z(O,r),M=Math.atan(-1/I),U=e/2*Math.sin(M),F=e/2*Math.cos(M);return[{x:r.x+F,y:r.y+U},{x:r.x-F,y:r.y-U}]}}.call(typeof window<"u"?window:this),function(){"use strict";function J(s,p,c,w,B,H,W,Q){return new Touch({target:p,identifier:a(),pageX:c,pageY:w,screenX:B,screenY:H,clientX:W||B,clientY:Q||H})}function X(s,p,c,w,B,H,W,Q){return function h(){var s=[];return Array.prototype.push.apply(s,arguments),s.item=function(p){return this[p]},s}(J.apply(null,arguments))}var ot=this,Z=function(s,p,c){for(var w=(c=c||s.parentNode).querySelectorAll(p),B=0;B<w.length;B++)if(w[B]===s)return!0;return!1},tt=function(s){return"string"==typeof s||s.constructor===String?document.getElementById(s):s},l=function(s){return s.srcElement||s.target},D=function(s,p,c,w){if(w){if(typeof s.path<"u"&&s.path.indexOf)return{path:s.path,end:s.path.indexOf(c)};var B={path:[],end:-1},H=function(W){B.path.push(W),W===c?B.end=B.path.length-1:null!=W.parentNode&&H(W.parentNode)};return H(p),B}return{path:[p],end:1}},f=function(s,p){for(var c=0,w=s.length;c<w&&s[c]!=p;c++);c<s.length&&s.splice(c,1)},n=1,x=function(s,p,c){var w=n++;return s.__ta=s.__ta||{},s.__ta[p]=s.__ta[p]||{},s.__ta[p][w]=c,c.__tauid=w,w},j=function(s,p,c,w){if(null==s)return c;var B=s.split(","),H=function(W){H.__tauid=c.__tauid;var Q=l(W),et=Q,$=D(W,Q,p,null!=s);if(-1!=$.end)for(var it=0;it<$.end;it++){et=$.path[it];for(var ct=0;ct<B.length;ct++)Z(et,B[ct],p)&&c.apply(et,arguments)}};return k(c,w,H),H},k=function(s,p,c){s.__taExtra=s.__taExtra||[],s.__taExtra.push([p,c])},G=function(s,p,c,w){if(U&&t[p]){var B=j(w,s,c,t[p]);V(s,t[p],B,c)}"focus"===p&&null==s.getAttribute("tabindex")&&s.setAttribute("tabindex","1"),V(s,p,j(w,s,c,p),c)},r={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},e=function(s,p){return function(c,w,B,H){if("contextmenu"==w&&F)G(c,w,B,H);else{if(null==c.__taTapHandler){var W=c.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},$=function(){W.down=!1},it=function(){W.taps=0};G(c,"mousedown",function(ct){for(var dt=l(ct),gt=D(ct,dt,c,null!=H),Pt=!1,pt=0;pt<gt.end;pt++){if(Pt)return;dt=gt.path[pt];for(var yt=0;yt<W.downSelectors.length;yt++)if(null==W.downSelectors[yt]||Z(dt,W.downSelectors[yt],c)){W.down=!0,setTimeout($,s),setTimeout(it,p),Pt=!0;break}}}),G(c,"mouseup",function(ct){if(W.down){var gt,Pt,dt=l(ct);W.taps++;var pt=N(ct);for(var yt in r)if(r.hasOwnProperty(yt)){var K=r[yt];if(K.touches===pt&&(1===K.taps||K.taps===W.taps))for(var q=0;q<W[yt].length;q++){Pt=D(ct,dt,c,null!=W[yt][q][1]);for(var nt=0;nt<Pt.end;nt++)if(gt=Pt.path[nt],null==W[yt][q][1]||Z(gt,W[yt][q][1],c)){W[yt][q][0].apply(gt,[ct]);break}}}}})}c.__taTapHandler.downSelectors.push(H),c.__taTapHandler[w].push([B,H]),B.__taUnstore=function(){f(c.__taTapHandler[w],B)}}}},I=function(s,p,c,w){for(var B in c.__tamee[s])c.__tamee[s].hasOwnProperty(B)&&c.__tamee[s][B].apply(w,[p])},M=function(){var s=[];return function(p,c,w,B){if(!p.__tamee){p.__tamee={over:!1,mouseenter:[],mouseexit:[]};var H=function(Q){var et=l(Q);(null==B&&et==p&&!p.__tamee.over||Z(et,B,p)&&(null==et.__tamee||!et.__tamee.over))&&(I("mouseenter",Q,p,et),et.__tamee=et.__tamee||{},et.__tamee.over=!0,s.push(et))},W=function(Q){for(var et=l(Q),$=0;$<s.length;$++)et==s[$]&&!Z(Q.relatedTarget||Q.toElement,"*",et)&&(et.__tamee.over=!1,s.splice($,1),I("mouseexit",Q,p,et))};V(p,"mouseover",j(B,p,H,"mouseover"),H),V(p,"mouseout",j(B,p,W,"mouseout"),W)}w.__taUnstore=function(){delete p.__tamee[c][w.__tauid]},x(p,c,w),p.__tamee[c][w.__tauid]=w}},U="ontouchstart"in document.documentElement||navigator.maxTouchPoints,F="onmousedown"in document.documentElement,t={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},C=function(){var s=-1;if("Microsoft Internet Explorer"==navigator.appName){var p=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(p)&&(s=parseFloat(RegExp.$1))}return s}(),v=C>-1&&C<9,y=function(s,p){if(null==s)return[0,0];var c=A(s),w=P(c,0);return[w[p+"X"],w[p+"Y"]]},m=function(s){return null==s?[0,0]:v?[s.clientX+document.documentElement.scrollLeft,s.clientY+document.documentElement.scrollTop]:y(s,"page")},P=function(s,p){return s.item?s.item(p):s[p]},A=function(s){return s.touches&&s.touches.length>0?s.touches:s.changedTouches&&s.changedTouches.length>0?s.changedTouches:s.targetTouches&&s.targetTouches.length>0?s.targetTouches:[s]},N=function(s){return A(s).length},V=function(s,p,c,w){if(x(s,p,c),w.__tauid=c.__tauid,s.addEventListener)s.addEventListener(p,c,!1);else if(s.attachEvent){var B=p+c.__tauid;s["e"+B]=c,s[B]=function(){s["e"+B]&&s["e"+B](window.event)},s.attachEvent("on"+p,s[B])}},g=function(s,p,c){null!=c&&d(s,function(){var w=tt(this);if(function(s,p,c){if(s.__ta&&s.__ta[p]&&delete s.__ta[p][c.__tauid],c.__taExtra){for(var w=0;w<c.__taExtra.length;w++)g(s,c.__taExtra[w][0],c.__taExtra[w][1]);c.__taExtra.length=0}c.__taUnstore&&c.__taUnstore()}(w,p,c),null!=c.__tauid)if(w.removeEventListener)w.removeEventListener(p,c,!1),U&&t[p]&&w.removeEventListener(t[p],c,!1);else if(this.detachEvent){var B=p+c.__tauid;w[B]&&w.detachEvent("on"+p,w[B]),w[B]=null,w["e"+B]=null}c.__taTouchProxy&&g(s,c.__taTouchProxy[1],c.__taTouchProxy[0])})},d=function(s,p){if(null!=s){s=typeof Window<"u"&&"unknown"!=typeof s.top&&s==s.top?[s]:"string"!=typeof s&&null==s.tagName&&null!=s.length?s:"string"==typeof s?document.querySelectorAll(s):[s];for(var c=0;c<s.length;c++)p.apply(s[c])}},a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var p=16*Math.random()|0;return("x"==s?p:3&p|8).toString(16)})};ot.Mottle=function(s){var p=(s=s||{}).clickThreshold||250,c=s.dblClickThreshold||450,w=new M,B=new e(p,c),H=s.smartClicks;this.remove=function(Q){return d(Q,function(){var et=tt(this);if(et.__ta)for(var $ in et.__ta)if(et.__ta.hasOwnProperty($))for(var it in et.__ta[$])et.__ta[$].hasOwnProperty(it)&&g(et,$,et.__ta[$][it]);et.parentNode&&et.parentNode.removeChild(et)}),this},this.on=function(Q,et,$,it){return function(Q,et,$,it){null!=$&&d(Q,function(){var ct=tt(this);H&&"click"===et?function(s,p,c,w){null==s.__taSmartClicks&&(G(s,"mousedown",function(Q){s.__tad=m(Q)},w),G(s,"mouseup",function(Q){s.__tau=m(Q)},w),G(s,"click",function(Q){if(s.__tad&&s.__tau&&s.__tad[0]===s.__tau[0]&&s.__tad[1]===s.__tau[1])for(var et=0;et<s.__taSmartClicks.length;et++)s.__taSmartClicks[et].apply(l(Q),[Q])},w),s.__taSmartClicks=[]),s.__taSmartClicks.push(c),c.__taUnstore=function(){f(s.__taSmartClicks,c)}}(ct,0,$,it):"tap"===et||"dbltap"===et||"contextmenu"===et?B(ct,et,$,it):"mouseenter"===et||"mouseexit"==et?w(ct,et,$,it):G(ct,et,$,it)})}(arguments[0],arguments[1],arguments[arguments.length-1],4==arguments.length?arguments[2]:null),this},this.off=function(Q,et,$){return g(Q,et,$),this},this.trigger=function(Q,et,$,it){var ct=F&&(typeof MouseEvent>"u"||null==$||$.constructor===MouseEvent),dt=U&&!F&&t[et]?t[et]:et,gt=!(U&&!F&&t[et]),Pt=m($),pt=function(s){return y(s,"screen")}($),yt=function(s){return y(s,"client")}($);return d(Q,function(){var q,K=tt(this);$=$||{screenX:pt[0],screenY:pt[1],clientX:yt[0],clientY:yt[1]};var nt=function(Ot){it&&(Ot.payload=it)},ut={TouchEvent:function(Ot){var Gt=X(window,K,0,Pt[0],Pt[1],pt[0],pt[1],yt[0],yt[1]);(Ot.initTouchEvent||Ot.initEvent)(dt,!0,!0,window,null,pt[0],pt[1],yt[0],yt[1],!1,!1,!1,!1,Gt,Gt,Gt,1,0)},MouseEvents:function(Ot){Ot.initMouseEvent(dt,!0,!0,window,0,pt[0],pt[1],yt[0],yt[1],!1,!1,!1,!1,1,K)}};if(document.createEvent){var xt=!gt&&!ct&&U&&t[et]?"TouchEvent":"MouseEvents";q=document.createEvent(xt),ut[xt](q),nt(q),K.dispatchEvent(q)}else document.createEventObject&&((q=document.createEventObject()).eventType=q.eventName=dt,q.screenX=pt[0],q.screenY=pt[1],q.clientX=yt[0],q.clientY=yt[1],nt(q),K.fireEvent("on"+dt,q))}),this}},ot.Mottle.consume=function(s,p){s.stopPropagation?s.stopPropagation():s.returnValue=!1,!p&&s.preventDefault&&s.preventDefault()},ot.Mottle.pageLocation=m,ot.Mottle.setForceTouchEvents=function(s){U=s},ot.Mottle.setForceMouseEvents=function(s){F=s},ot.Mottle.version="0.8.0",Ft.Mottle=ot.Mottle}.call(typeof window>"u"?this:window),function(){"use strict";var J=this,h=function(g,d,a){return-1===g.indexOf(d)&&(a?g.unshift(d):g.push(d),!0)},X=function(g,d){var a=g.indexOf(d);-1!==a&&g.splice(a,1)},Z=function(g){return null!=g&&("string"==typeof g||g.constructor===String)},l=function(g,d,a){for(var s=(a=a||g.parentNode).querySelectorAll(d),p=0;p<s.length;p++)if(s[p]===g)return!0;return!1},D=function(g,d,a){if(l(d,a,g))return d;for(var s=d.parentNode;null!=s&&s!==g;){if(l(s,a,g))return s;s=s.parentNode}},n=function(){var g=-1;if("Microsoft Internet Explorer"===navigator.appName){var d=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(d)&&(g=parseFloat(RegExp.$1))}return g}(),j=n>-1&&n<9,k=9===n,G=function(g){if(j)return[g.clientX+document.documentElement.scrollLeft,g.clientY+document.documentElement.scrollTop];var d=r(g),a=O(d,0);return k?[a.pageX||a.clientX,a.pageY||a.clientY]:[a.pageX,a.pageY]},O=function(g,d){return g.item?g.item(d):g[d]},r=function(g){return g.touches&&g.touches.length>0?g.touches:g.changedTouches&&g.changedTouches.length>0?g.changedTouches:g.targetTouches&&g.targetTouches.length>0?g.targetTouches:[g]},e={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},M=["stop","start","drag","drop","over","out","beforeStart"],U=function(){},F=function(){return!0},t=function(g,d,a){for(var s=0;s<g.length;s++)g[s]!=a&&d(g[s])},u=function(g,d,a,s){t(g,function(p){p.setActive(d),d&&p.updatePosition(),a&&p.setHover(s,d)})},o=function(g,d){if(null!=g){g=Z(g)||null!=g.tagName||null==g.length?[g]:g;for(var a=0;a<g.length;a++)d.apply(g[a],[g[a]])}},b=function(g){g.stopPropagation?(g.stopPropagation(),g.preventDefault()):g.returnValue=!1},y=function(g,d,a,s){this.params=d||{},this.el=g,this.params.addClass(this.el,this._class),this.uuid=A();var p=!0;return this.setEnabled=function(c){p=c},this.isEnabled=function(){return p},this.toggleEnabled=function(){p=!p},this.setScope=function(c){this.scopes=c?c.split(/\s+/):[s]},this.addScope=function(c){var w={};for(var B in o(this.scopes,function(H){w[H]=!0}),o(c?c.split(/\s+/):[],function(H){w[H]=!0}),this.scopes=[],w)this.scopes.push(B)},this.removeScope=function(c){var w={};for(var B in o(this.scopes,function(H){w[H]=!0}),o(c?c.split(/\s+/):[],function(H){delete w[H]}),this.scopes=[],w)this.scopes.push(B)},this.toggleScope=function(c){var w={};for(var B in o(this.scopes,function(H){w[H]=!0}),o(c?c.split(/\s+/):[],function(H){w[H]?delete w[H]:w[H]=!0}),this.scopes=[],w)this.scopes.push(B)},this.setScope(d.scope),this.k=d.katavorio,d.katavorio},m=function(){return!0},S=function(){return!1},R=function(g,d,a,s){this._class=a.draggable;var p=y.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var Pt,pt,ut,mt,xt,Ot,c=[0,0],w=null,B=null,H=[0,0],W=!1,Q=[0,0],et=!1!==this.params.consumeStartEvent,$=this.el,it=this.params.clone,dt=!1!==d.multipleDrop,gt=!1,yt=null,K=[],q=null,nt=d.ghostProxyParent;if(Pt=!0===d.ghostProxy?m:d.ghostProxy&&"function"==typeof d.ghostProxy?d.ghostProxy:function(st,bt){return!(!q||!q.useGhostProxy)&&q.useGhostProxy(st,bt)},pt=d.makeGhostProxy?d.makeGhostProxy:function(st){return q&&q.makeGhostProxy?q.makeGhostProxy(st):st.cloneNode(!0)},d.selector){var Gt=g.getAttribute("katavorio-draggable");null==Gt&&(Gt=""+(new Date).getTime(),g.setAttribute("katavorio-draggable",Gt)),K.push(d)}var Ut=d.snapThreshold,re=function(st,bt,Ct,_t,Dt){var Rt=bt*Math.floor(st[0]/bt),i=Rt+bt,E=Math.abs(st[0]-Rt)<=_t?Rt:Math.abs(i-st[0])<=_t?i:st[0],L=Ct*Math.floor(st[1]/Ct),Y=L+Ct;return[E,Math.abs(st[1]-L)<=Dt?L:Math.abs(Y-st[1])<=Dt?Y:st[1]]};this.posses=[],this.posseRoles={},this.toGrid=function(st){return null==this.params.grid?st:re(st,this.params.grid[0],this.params.grid[1],this.params.grid?this.params.grid[0]/2:Ut||5,this.params.grid?this.params.grid[1]/2:Ut||5)},this.snap=function(st,bt){if(null!=$){st=st||(this.params.grid?this.params.grid[0]:10),bt=bt||(this.params.grid?this.params.grid[1]:10);var Ct=this.params.getPosition($),At=re(Ct,st,bt,this.params.grid?this.params.grid[0]/2:Ut,this.params.grid?this.params.grid[1]/2:Ut);return this.params.setPosition($,At),At}},this.setUseGhostProxy=function(st){Pt=st?m:S};var Yt,te,Jt=function(st){return!1===d.allowNegative?[Math.max(0,st[0]),Math.max(0,st[1])]:st},Ht=function(st){Yt="function"==typeof st?st:st?function(bt,Ct,_t,Dt){return Jt([Math.max(0,Math.min(_t.w-Dt[0],bt[0])),Math.max(0,Math.min(_t.h-Dt[1],bt[1]))])}.bind(this):function(bt){return Jt(bt)}}.bind(this);Ht("function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(st){Ht(st)},this.setRevert=function(st){te=st},this.params.revert&&(te=this.params.revert);var Vt={},qt=this.setFilter=function(st,bt){if(st){var Ct=function(st){return"function"==typeof st?(st._katavorioId=A(),st._katavorioId):st}(st);Vt[Ct]=[function(_t){var At,Dt=_t.srcElement||_t.target;return Z(st)?At=l(Dt,st,g):"function"==typeof st&&(At=st(_t,g)),At},!1!==bt]}};this.addFilter=qt,this.removeFilter=function(st){delete Vt["function"==typeof st?st._katavorioId:st]},this.clearAllFilters=function(){Vt={}},this.canDrag=this.params.canDrag||F;var ae,Mt=[],It=[];this.addSelector=function(st){st.selector&&K.push(st)},this.downListener=function(st){if(!st.defaultPrevented&&(this.rightButtonCanDrag||3!==st.which&&2!==st.button)&&this.isEnabled()&&this.canDrag()){var Ct=function(st){for(var bt in Vt){var Ct=Vt[bt],_t=Ct[0](st);if(Ct[1]&&(_t=!_t),!_t)return!1}return!0}(st)&&function(g,d,a){return!l(g.srcElement||g.target,a.getInputFilterSelector(),d)}(st,this.el,this.k);if(Ct){if(q=null,yt=null,K.length>0){var _t=function(g,d,a){for(var s=null,p=d.getAttribute("katavorio-draggable"),c=null!=p?"[katavorio-draggable='"+p+"'] ":"",w=0;w<g.length;w++)if(null!=(s=D(d,a,c+g[w].selector))){if(g[w].filter){var B=l(a,g[w].filter,s);if(!0===g[w].filterExclude&&!B||B)return null}return[g[w],s]}return null}(K,this.el,st.target||st.srcElement);if(null!=_t&&(q=_t[0],yt=_t[1]),null==yt)return}else yt=this.el;if(it)if($=yt.cloneNode(!0),this.params.addClass($,e.clonedDrag),$.setAttribute("id",null),$.style.position="absolute",null!=this.params.parent){var Dt=this.params.getPosition(this.el);$.style.left=Dt[0]+"px",$.style.top=Dt[1]+"px",this.params.parent.appendChild($)}else{var At=function(g){var d=g.getBoundingClientRect(),a=document.body,s=document.documentElement,p=window.pageYOffset||s.scrollTop||a.scrollTop,c=window.pageXOffset||s.scrollLeft||a.scrollLeft,W=d.left+c-(s.clientLeft||a.clientLeft||0);return{top:Math.round(d.top+p-(s.clientTop||a.clientTop||0)),left:Math.round(W)}}(yt);$.style.left=At.left+"px",$.style.top=At.top+"px",document.body.appendChild($)}else $=yt;et&&b(st),c=G(st),$&&$.parentNode&&(Q=[$.parentNode.scrollLeft,$.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),p.markSelection(this),p.markPosses(this),this.params.addClass(document.body,a.noSelect),Wt("beforeStart",{el:this.el,pos:w,e:st,drag:this})}else this.params.consumeFilteredEvents&&b(st)}}.bind(this),this.moveListener=function(st){if(c){if(!W)if(!1!==Wt("start",{el:this.el,pos:w,e:st,drag:this})){if(!c)return;this.mark(!0),W=!0}else this.abort();if(c){It.length=0;var Ct=G(st),_t=Ct[0]-c[0],Dt=Ct[1]-c[1],At=this.params.ignoreZoom?1:p.getZoom();$&&$.parentNode&&(_t+=$.parentNode.scrollLeft-Q[0],Dt+=$.parentNode.scrollTop-Q[1]),this.moveBy(_t/=At,Dt/=At,st),p.updateSelection(_t,Dt,this),p.updatePosses(_t,Dt,this)}}}.bind(this),this.upListener=function(st){c&&(c=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,a.noSelect),this.unmark(st),p.unmarkSelection(this,st),p.unmarkPosses(this,st),this.stop(st),p.notifyPosseDragStop(this,st),W=!1,It.length=0,it?($&&$.parentNode&&$.parentNode.removeChild($),$=null):te&&!0===te($,this.params.getPosition($))&&(this.params.setPosition($,w),Wt("revert",$)))}.bind(this),this.getFilters=function(){return Vt},this.abort=function(){null!=c&&this.upListener()},this.getDragElement=function(st){return st?yt||this.el:$||this.el};var Tt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};d.events.start&&Tt.start.push(d.events.start),d.events.beforeStart&&Tt.beforeStart.push(d.events.beforeStart),d.events.stop&&Tt.stop.push(d.events.stop),d.events.drag&&Tt.drag.push(d.events.drag),d.events.revert&&Tt.revert.push(d.events.revert),this.on=function(st,bt){Tt[st]&&Tt[st].push(bt)},this.off=function(st,bt){if(Tt[st]){for(var Ct=[],_t=0;_t<Tt[st].length;_t++)Tt[st][_t]!==bt&&Ct.push(Tt[st][_t]);Tt[st]=Ct}};var zt,Wt=function(st,bt){var Ct=null;if(q&&q[st])Ct=q[st](bt);else if(Tt[st])for(var _t=0;_t<Tt[st].length;_t++)try{var Dt=Tt[st][_t](bt);null!=Dt&&(Ct=Dt)}catch{}return Ct};this.notifyStart=function(st){Wt("start",{el:this.el,pos:this.params.getPosition($),e:st,drag:this})},this.stop=function(st,bt){if(bt||W){var Ct=[],_t=p.getSelection(),Dt=this.params.getPosition($);if(_t.length>0)for(var At=0;At<_t.length;At++){var Rt=this.params.getPosition(_t[At].el);Ct.push([_t[At].el,{left:Rt[0],top:Rt[1]},_t[At]])}else Ct.push([$,{left:Dt[0],top:Dt[1]},this]);Wt("stop",{el:$,pos:zt||Dt,finalPos:Dt,e:st,drag:this,selection:Ct})}},this.mark=function(st){var bt;w=this.params.getPosition($),B=this.params.getPosition($,!0),H=[B[0]-w[0],B[1]-w[1]],this.size=this.params.getSize($),Mt=p.getMatchingDroppables(this),u(Mt,!0,!1,this),this.params.addClass($,this.params.dragClass||a.drag),bt=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle($):this.params.getSize($.parentNode),ae={w:bt[0],h:bt[1]},xt=0,Ot=0,st&&p.notifySelectionDragStart(this)},this.unmark=function(st,bt){if(u(Mt,!1,!0,this),gt&&Pt(yt,$)?(zt=[$.offsetLeft-xt,$.offsetTop-Ot],$.parentNode.removeChild($),$=yt):zt=null,this.params.removeClass($,this.params.dragClass||a.drag),Mt.length=0,gt=!1,!bt){It.length>0&&zt&&d.setPosition(yt,zt),It.sort(N);for(var Ct=0;Ct<It.length&&!0!==It[Ct].drop(this,st);Ct++);}},this.moveBy=function(st,bt,Ct){It.length=0;var _t=this.toGrid([w[0]+st,w[1]+bt]),Dt=function(st,bt,Ct,_t){return null!=q&&q.constrain&&"function"==typeof q.constrain?q.constrain(st,bt,Ct,_t):Yt(st,bt,Ct,_t)}(_t,$,ae,this.size);if(Pt(this.el,$))if(_t[0]!==Dt[0]||_t[1]!==Dt[1]){if(!gt){var At=pt(yt);d.addClass(At,e.ghostProxy),nt?(nt.appendChild(At),ut=d.getPosition(yt.parentNode,!0),mt=d.getPosition(d.ghostProxyParent,!0),xt=ut[0]-mt[0],Ot=ut[1]-mt[1]):yt.parentNode.appendChild(At),$=At,gt=!0}Dt=_t}else gt&&($.parentNode.removeChild($),$=yt,gt=!1,ut=null,mt=null,xt=0,Ot=0);var Rt={x:Dt[0],y:Dt[1],w:this.size[0],h:this.size[1]},i={x:Rt.x+H[0],y:Rt.y+H[1],w:Rt.w,h:Rt.h},E=null;this.params.setPosition($,[Dt[0]+xt,Dt[1]+Ot]);for(var _=0;_<Mt.length;_++)this.params.intersects(i,{x:Mt[_].pagePosition[0],y:Mt[_].pagePosition[1],w:Mt[_].size[0],h:Mt[_].size[1]})&&(dt||null==E||E===Mt[_].el)&&Mt[_].canDrop(this)?(E||(E=Mt[_].el),It.push(Mt[_]),Mt[_].setHover(this,!0,Ct)):Mt[_].isHover()&&Mt[_].setHover(this,!1,Ct);Wt("drag",{el:this.el,pos:Dt,e:Ct,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?qt(this.params.handle,!1):qt(this.params.filter,this.params.filterExclude)},P=function(g,d,a,s){this._class=a.droppable,this.params=d||{},this.rank=d.rank||0,this._activeClass=this.params.activeClass||a.active,this._hoverClass=this.params.hoverClass||a.hover,y.apply(this,arguments);var p=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(c){this.params[c?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(c){return!0},this.isHover=function(){return p},this.setHover=function(c,w,B){(w||null==this.el._katavorioDragHover||this.el._katavorioDragHover===c.el._katavorio)&&(this.params[w?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=w?c.el._katavorio:null,p!==w&&this.params.events[w?"over":"out"]({el:this.el,e:B,drag:c,drop:this}),p=w)},this.drop=function(c,w){return this.params.events.drop({drag:c,e:w,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,p=null}},A=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(g){var d=16*Math.random()|0;return("x"===g?d:3&d|8).toString(16)})},N=function(g,d){return g.rank<d.rank?1:g.rank>d.rank?-1:0},V=function(g){return null==g||null==(g="string"==typeof g||g.constructor===String?document.getElementById(g):g)?null:(g._katavorio=g._katavorio||A(),g)};J.Katavorio=function(g){var d=[],a={};this._dragsByScope={},this._dropsByScope={};var s=1,p=function(K,q){o(K,function(nt){for(var ut=0;ut<nt.scopes.length;ut++)q[nt.scopes[ut]]=q[nt.scopes[ut]]||[],q[nt.scopes[ut]].push(nt)})},c=function(K,q){var nt=0;return o(K,function(ut){for(var mt=0;mt<ut.scopes.length;mt++)if(q[ut.scopes[mt]]){var xt=g.indexOf(q[ut.scopes[mt]],ut);-1!==xt&&(q[ut.scopes[mt]].splice(xt,1),nt++)}}),nt>0},B=(this.getMatchingDroppables=function(K){for(var q=[],nt={},ut=0;ut<K.scopes.length;ut++){var mt=this._dropsByScope[K.scopes[ut]];if(mt)for(var xt=0;xt<mt.length;xt++)mt[xt].canDrop(K)&&!nt[mt[xt].uuid]&&(mt[xt].allowLoopback||mt[xt].el!==K.el)&&(nt[mt[xt].uuid]=!0,q.push(mt[xt]))}return q.sort(N),q},function(K){K=K||{};var nt,q={events:{}};for(nt in g)q[nt]=g[nt];for(nt in K)q[nt]=K[nt];for(nt=0;nt<M.length;nt++)q.events[M[nt]]=K[M[nt]]||U;return q.katavorio=this,q}.bind(this)),H=function(K,q){for(var nt=0;nt<M.length;nt++)q[M[nt]]&&K.on(M[nt],q[M[nt]])}.bind(this),W={},Q=g.css||{},et=g.scope||"katavorio-drag-scope";for(var $ in e)W[$]=e[$];for(var $ in Q)W[$]=Q[$];var it=g.inputFilterSelector||"input,textarea,select,button,option";this.getInputFilterSelector=function(){return it},this.setInputFilterSelector=function(K){return it=K,this},this.draggable=function(K,q){var nt=[];return o(K,function(ut){if(null!=(ut=V(ut)))if(null==ut._katavorioDrag){var mt=B(q);ut._katavorioDrag=new R(ut,mt,W,et),p(ut._katavorioDrag,this._dragsByScope),nt.push(ut._katavorioDrag),g.addClass(ut,mt.selector?W.delegatedDraggable:W.draggable)}else H(ut._katavorioDrag,q)}.bind(this)),nt},this.droppable=function(K,q){var nt=[];return o(K,function(ut){if(null!=(ut=V(ut))){var mt=new P(ut,B(q),W,et);ut._katavorioDrop=ut._katavorioDrop||[],ut._katavorioDrop.push(mt),p(mt,this._dropsByScope),nt.push(mt),g.addClass(ut,W.droppable)}}.bind(this)),nt},this.select=function(K){return o(K,function(){var q=V(this);q&&q._katavorioDrag&&(a[q._katavorio]||(d.push(q._katavorioDrag),a[q._katavorio]=[q,d.length-1],g.addClass(q,W.selected)))}),this},this.deselect=function(K){return o(K,function(){var q=V(this);if(q&&q._katavorio&&a[q._katavorio]){for(var ut=[],mt=0;mt<d.length;mt++)d[mt].el!==q&&ut.push(d[mt]);d=ut,delete a[q._katavorio],g.removeClass(q,W.selected)}}),this},this.deselectAll=function(){for(var K in a)g.removeClass(a[K][0],W.selected);d.length=0,a={}},this.markSelection=function(K){t(d,function(q){q.mark()},K)},this.markPosses=function(K){K.posses&&o(K.posses,function(q){K.posseRoles[q]&&pt[q]&&t(pt[q].members,function(nt){nt.mark()},K)})},this.unmarkSelection=function(K,q){t(d,function(nt){nt.unmark(q)},K)},this.unmarkPosses=function(K,q){K.posses&&o(K.posses,function(nt){K.posseRoles[nt]&&pt[nt]&&t(pt[nt].members,function(ut){ut.unmark(q,!0)},K)})},this.getSelection=function(){return d.slice(0)},this.updateSelection=function(K,q,nt){t(d,function(ut){ut.moveBy(K,q)},nt)};var ct=function(K,q){q.posses&&o(q.posses,function(nt){q.posseRoles[nt]&&pt[nt]&&t(pt[nt].members,function(ut){K(ut)},q)})};this.updatePosses=function(K,q,nt){ct(function(ut){ut.moveBy(K,q)},nt)},this.notifyPosseDragStop=function(K,q){ct(function(nt){nt.stop(q,!0)},K)},this.notifySelectionDragStop=function(K,q){t(d,function(nt){nt.stop(q,!0)},K)},this.notifySelectionDragStart=function(K,q){t(d,function(nt){nt.notifyStart(q)},K)},this.setZoom=function(K){s=K},this.getZoom=function(){return s};var dt=function(K,q,nt,ut){o(K,function(mt){c(mt,nt),mt[ut](q),p(mt,nt)})};o(["set","add","remove","toggle"],function(K){this[K+"Scope"]=function(q,nt){dt(q._katavorioDrag,nt,this._dragsByScope,K+"Scope"),dt(q._katavorioDrop,nt,this._dropsByScope,K+"Scope")}.bind(this),this[K+"DragScope"]=function(q,nt){dt(q.constructor===R?q:q._katavorioDrag,nt,this._dragsByScope,K+"Scope")}.bind(this),this[K+"DropScope"]=function(q,nt){dt(q.constructor===P?q:q._katavorioDrop,nt,this._dropsByScope,K+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(K,q){for(var nt in this._dragsByScope)t(this._dragsByScope[nt],function(ut){ut.snap(K,q)})},this.getDragsForScope=function(K){return this._dragsByScope[K]},this.getDropsForScope=function(K){return this._dropsByScope[K]};var gt=function(K,q,nt){if((K=V(K))[q]){var ut=d.indexOf(K[q]);ut>=0&&d.splice(ut,1),c(K[q],nt)&&o(K[q],function(mt){mt.destroy()}),delete K[q]}},Pt=function(K,q,nt,ut){(K=V(K))[q]&&K[q].off(nt,ut)};this.elementRemoved=function(K){K._katavorioDrag&&this.destroyDraggable(K),K._katavorioDrop&&this.destroyDroppable(K)},this.destroyDraggable=function(K,q,nt){1===arguments.length?gt(K,"_katavorioDrag",this._dragsByScope):Pt(K,"_katavorioDrag",q,nt)},this.destroyDroppable=function(K,q,nt){1===arguments.length?gt(K,"_katavorioDrop",this._dropsByScope):Pt(K,"_katavorioDrop",q,nt)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},d=[],a={},pt={}};var pt={},yt=function(K,q,nt){var Ot,ut=Z(q)?q:q.id,mt=!!Z(q)||!1!==q.active,xt=pt[ut]||(pt[ut]=Ot={name:ut,members:[]},Ot);return o(K,function(Ot){if(Ot._katavorioDrag){if(nt&&null!=Ot._katavorioDrag.posseRoles[xt.name])return;h(xt.members,Ot._katavorioDrag),h(Ot._katavorioDrag.posses,xt.name),Ot._katavorioDrag.posseRoles[xt.name]=mt}}),xt};this.addToPosse=function(K,q){for(var nt=[],ut=1;ut<arguments.length;ut++)nt.push(yt(K,arguments[ut]));return 1===nt.length?nt[0]:nt},this.setPosse=function(K,q){for(var nt=[],ut=1;ut<arguments.length;ut++)nt.push(yt(K,arguments[ut],!0).name);return o(K,function(mt){if(mt._katavorioDrag){var xt=function(g,d){for(var a=[],s=0;s<g.length;s++)-1===d.indexOf(g[s])&&a.push(g[s]);return a}(mt._katavorioDrag.posses,nt);Array.prototype.push.apply([],mt._katavorioDrag.posses);for(var Gt=0;Gt<xt.length;Gt++)this.removeFromPosse(mt,xt[Gt])}}.bind(this)),1===nt.length?nt[0]:nt},this.removeFromPosse=function(K,q){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var nt=1;nt<arguments.length;nt++)q=arguments[nt],o(K,function(ut){if(ut._katavorioDrag&&ut._katavorioDrag.posses){var mt=ut._katavorioDrag;o(q,function(xt){X(pt[xt].members,mt),X(mt.posses,xt),delete mt.posseRoles[xt]})}})},this.removeFromAllPosses=function(K){o(K,function(q){if(q._katavorioDrag&&q._katavorioDrag.posses){var nt=q._katavorioDrag;o(nt.posses,function(ut){X(pt[ut].members,nt)}),nt.posses.length=0,nt.posseRoles={}}})},this.setPosseState=function(K,q,nt){var ut=pt[q];ut&&o(K,function(mt){mt._katavorioDrag&&mt._katavorioDrag.posses&&(mt._katavorioDrag.posseRoles[ut.name]=nt)})}},J.Katavorio.version="1.0.0",Ft.Katavorio=J.Katavorio}.call(typeof window<"u"?window:this),function(){var J=this;J.jsPlumbUtil=J.jsPlumbUtil||{};var h=J.jsPlumbUtil;function X(g){return"[object Array]"===Object.prototype.toString.call(g)}function Z(g){return"string"==typeof g}function tt(g){return"boolean"==typeof g}function D(g){return null!=g&&"[object Object]"===Object.prototype.toString.call(g)}function f(g){return"[object Date]"===Object.prototype.toString.call(g)}function n(g){return"[object Function]"===Object.prototype.toString.call(g)}function j(g){if(Z(g))return""+g;if(tt(g))return!!g;if(f(g))return new Date(g.getTime());if(n(g))return g;if(X(g)){for(var d=[],a=0;a<g.length;a++)d.push(j(g[a]));return d}if(D(g)){var s={};for(var p in g)s[p]=j(g[p]);return s}return g}function k(g,d,a,s){var c,w,p={},B={};for(a=a||[],s=s||[],w=0;w<a.length;w++)p[a[w]]=!0;for(w=0;w<s.length;w++)B[s[w]]=!0;var H=j(g);for(w in d)if(null==H[w]||B[w])H[w]=d[w];else if(Z(d[w])||tt(d[w]))p[w]?((c=[]).push.apply(c,X(H[w])?H[w]:[H[w]]),c.push.apply(c,tt(d[w])?d[w]:[d[w]]),H[w]=c):H[w]=d[w];else if(X(d[w]))c=[],X(H[w])&&c.push.apply(c,H[w]),c.push.apply(c,d[w]),H[w]=c;else if(D(d[w]))for(var W in D(H[w])||(H[w]={}),d[w])H[w][W]=d[w][W];return H}function e(g,d){if(g)for(var a=0;a<g.length;a++)if(d(g[a]))return a;return-1}function M(g,d){var a=g.indexOf(d);return a>-1&&g.splice(a,1),-1!==a}function F(g,d,a,s){var p=g[d];return null==p&&(g[d]=p=[]),p[s?"unshift":"push"](a),p}Ft.jsPlumbUtil=h,h.isArray=X,h.isNumber=function ot(g){return"[object Number]"===Object.prototype.toString.call(g)},h.isString=Z,h.isBoolean=tt,h.isNull=function l(g){return null==g},h.isObject=D,h.isDate=f,h.isFunction=n,h.isNamedFunction=function x(g){return n(g)&&null!=g.name&&g.name.length>0},h.isEmpty=function T(g){for(var d in g)if(g.hasOwnProperty(d))return!1;return!0},h.clone=j,h.merge=k,h.replace=function G(g,d,a){if(null!=g){var p=g;return d.replace(/([^\.])+/g,function(c,w,B,H){var W=c.match(/([^\[0-9]+){1}(\[)([0-9+])/),et=function(){return p[W[1]]||(p[W[1]]=[],p[W[1]])};if(B+c.length>=H.length)W?et()[W[3]]=a:p[c]=a;else if(W){var $=et();p=$[W[3]]||($[W[3]]={},$[W[3]])}else p=p[c]||(p[c]={},p[c]);return""}),g}},h.functionChain=function O(g,d,a){for(var s=0;s<a.length;s++){var p=a[s][0][a[s][1]].apply(a[s][0],a[s][2]);if(p===d)return p}return g},h.populate=function r(g,d,a,s){var c=function(w){if(null!=w){if(Z(w))return function(w){var B=w.match(/(\${.*?})/g);if(null!=B)for(var H=0;H<B.length;H++){var W=d[B[H].substring(2,B[H].length-1)]||"";null!=W&&(w=w.replace(B[H],W))}return w}(w);if(n(w)&&!s&&(null==a||0===(w.name||"").indexOf(a)))return w(d);if(X(w)){for(var B=[],H=0;H<w.length;H++)B.push(c(w[H]));return B}if(D(w)){var W={};for(var Q in w)W[Q]=c(w[Q]);return W}return w}};return c(g)},h.findWithFunction=e,h.removeWithFunction=function I(g,d){var a=e(g,d);return a>-1&&g.splice(a,1),-1!==a},h.remove=M,h.addWithFunction=function U(g,d,a){-1===e(g,a)&&g.push(d)},h.addToList=F,h.suggest=function t(g,d,a){return-1===g.indexOf(d)&&(a?g.unshift(d):g.push(d),!0)},h.extend=function u(g,d,a){var s;d=X(d)?d:[d];var p=function(H){for(var W=H.__proto__;null!=W;)if(null!=W.prototype){for(var Q in W.prototype)W.prototype.hasOwnProperty(Q)&&!g.prototype.hasOwnProperty(Q)&&(g.prototype[Q]=W.prototype[Q]);W=W.prototype.__proto__}else W=null};for(s=0;s<d.length;s++){for(var c in d[s].prototype)d[s].prototype.hasOwnProperty(c)&&!g.prototype.hasOwnProperty(c)&&(g.prototype[c]=d[s].prototype[c]);p(d[s])}var w=function(H,W){return function(){for(s=0;s<d.length;s++)d[s].prototype[H]&&d[s].prototype[H].apply(this,arguments);return W.apply(this,arguments)}},B=function(H){for(var W in H)g.prototype[W]=w(W,H[W])};if(arguments.length>2)for(s=2;s<arguments.length;s++)B(arguments[s]);return g};for(var o=[],b=0;b<256;b++)o[b]=(b<16?"0":"")+b.toString(16);function C(){var g=4294967295*Math.random()|0,d=4294967295*Math.random()|0,a=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return o[255&g]+o[g>>8&255]+o[g>>16&255]+o[g>>24&255]+"-"+o[255&d]+o[d>>8&255]+"-"+o[d>>16&15|64]+o[d>>24&255]+"-"+o[63&a|128]+o[a>>8&255]+"-"+o[a>>16&255]+o[a>>24&255]+o[255&s]+o[s>>8&255]+o[s>>16&255]+o[s>>24&255]}function R(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];if(h.logEnabled&&typeof console<"u")try{console.log(arguments[arguments.length-1])}catch{}}h.uuid=C,h.fastTrim=function v(g){if(null==g)return null;for(var d=g.replace(/^\s\s*/,""),a=/\s/,s=d.length;a.test(d.charAt(--s)););return d.slice(0,s+1)},h.each=function y(g,d){g=null==g.length||"string"==typeof g?[g]:g;for(var a=0;a<g.length;a++)d(g[a])},h.map=function m(g,d){for(var a=[],s=0;s<g.length;s++)a.push(d(g[s]));return a},h.mergeWithParents=function S(g,d,a){a=a||"parent";var s=function(H){return H?d[H]:null},p=function(H){return H?s(H[a]):null},c=function(H,W){if(null==H)return W;var Q=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];"override"===W.mergeStrategy&&Array.prototype.push.apply(Q,["events","overlays"]);var et=k(H,W,[],Q);return c(p(H),et)},w=function(H){if(null==H)return{};if("string"==typeof H)return s(H);if(H.length){for(var W=!1,Q=0,et=void 0;!W&&Q<H.length;)(et=w(H[Q]))?W=!0:Q++;return et}},B=w(g);return B?c(p(B),B):{}},h.logEnabled=!0,h.log=R,h.wrap=function P(g,d,a){return function(){var s=null;try{null!=d&&(s=d.apply(this,arguments))}catch(p){R("jsPlumb function failed : "+p)}if(null!=g&&(null==a||s!==a))try{s=g.apply(this,arguments)}catch(p){R("wrapped function failed : "+p)}return s}};var A=function(){return function g(){var d=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(a,s,p){var c=function(B){F(d._listeners,B,s,p),s.__jsPlumb=s.__jsPlumb||{},s.__jsPlumb[C()]=B};if("string"==typeof a)c(a);else if(null!=a.length)for(var w=0;w<a.length;w++)c(a[w]);return d},this.fire=function(a,s,p){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[a]){var c=this._listeners[a].length,w=0,B=!1,H=null;if(!this.shouldFireEvent||this.shouldFireEvent(a,s,p))for(;!B&&w<c&&!1!==H;){if(this.eventsToDieOn[a])this._listeners[a][w].apply(this,[s,p]);else try{H=this._listeners[a][w].apply(this,[s,p])}catch(W){R("jsPlumb: fire failed for event "+a+" : "+W)}w++,(null==this._listeners||null==this._listeners[a])&&(B=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var a=d.queue.pop();a&&d.fire.apply(d,a)},this.unbind=function(a,s){if(0===arguments.length)this._listeners={};else if(1===arguments.length){if("string"==typeof a)delete this._listeners[a];else if(a.__jsPlumb)for(var c in a.__jsPlumb)M(this._listeners[a.__jsPlumb[c]]||[],a)}else 2===arguments.length&&M(this._listeners[a]||[],s);return this},this.getListener=function(a){return d._listeners[a]},this.setSuspendEvents=function(a){d.eventsSuspended=a},this.isSuspendEvents=function(){return d.eventsSuspended},this.silently=function(a){d.setSuspendEvents(!0);try{a()}catch(s){R("Cannot execute silent function "+s)}d.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var a in d._listeners)d._listeners[a]=null}}}();function N(g,d,a){var s=[g[0]-d[0],g[1]-d[1]],p=Math.cos(a/360*Math.PI*2),c=Math.sin(a/360*Math.PI*2);return[s[0]*p-s[1]*c+d[0],s[1]*p+s[0]*c+d[1],p,c]}h.EventGenerator=A,h.rotatePoint=N,h.rotateAnchorOrientation=function V(g,d){var a=N(g,[0,0],d);return[Math.round(a[0]),Math.round(a[1])]}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this;J.jsPlumbUtil.matchesSelector=function(h,X,ot){for(var Z=(ot=ot||h.parentNode).querySelectorAll(X),tt=0;tt<Z.length;tt++)if(Z[tt]===h)return!0;return!1},J.jsPlumbUtil.consume=function(h,X){h.stopPropagation?h.stopPropagation():h.returnValue=!1,!X&&h.preventDefault&&h.preventDefault()},J.jsPlumbUtil.sizeElement=function(h,X,ot,Z,tt){h&&(h.style.height=tt+"px",h.height=tt,h.style.width=Z+"px",h.width=Z,h.style.left=X+"px",h.style.top=ot+"px")}}.call(typeof window<"u"?window:this),function(){var J={deriveAnchor:function(Z,tt,l,D){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[Z][tt]}},X=function(Z,tt){this.count=0,this.instance=Z,this.lists={},this.options=tt||{},this.instance.addList=function(l,D){return this.listManager.addList(l,D)},this.instance.removeList=function(l){this.listManager.removeList(l)},this.instance.bind("manageElement",function(l){for(var D=this.instance.getSelector(l.el,"[jtk-scrollable-list]"),f=0;f<D.length;f++)this.addList(D[f])}.bind(this)),this.instance.bind("unmanageElement",function(l){this.removeList(l.el)}),this.instance.bind("connection",function(l,D){null==D&&(this._maybeUpdateParentList(l.source),this._maybeUpdateParentList(l.target))}.bind(this))};this.jsPlumbListManager=X,X.prototype={addList:function(Z,tt){var l=this.instance.extend({},J);this.instance.extend(l,this.options),tt=this.instance.extend(l,tt||{});var D=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[D]=new ot(this.instance,Z,tt,D)},removeList:function(Z){var tt=this.lists[Z._jsPlumbList];tt&&(tt.destroy(),delete this.lists[Z._jsPlumbList])},_maybeUpdateParentList:function(Z){for(var tt=Z.parentNode,l=this.instance.getContainer();null!=tt&&tt!==l;){if(null!=tt._jsPlumbList&&null!=this.lists[tt._jsPlumbList])return void tt._jsPlumbScrollHandler();tt=tt.parentNode}}};var ot=function(Z,tt,l,D){function f(j,k,G,O){return l.anchor?l.anchor:l.deriveAnchor(j,k,G,O)}function n(j,k,G,O){return l.deriveEndpoint?l.deriveEndpoint(j,k,G,O):l.endpoint?l.endpoint:G.type}tt._jsPlumbList=D;var T=function(j){for(var k=Z.getSelector(tt,".jtk-managed"),G=Z.getId(tt),O=0;O<k.length;O++){if(k[O].offsetTop<tt.scrollTop)k[O]._jsPlumbProxies||(k[O]._jsPlumbProxies=k[O]._jsPlumbProxies||[],Z.select({source:k[O]}).each(function(e){Z.proxyConnection(e,0,tt,G,function(){return n("top",0,e.endpoints[0],e)},function(){return f("top",0,e.endpoints[0],e)}),k[O]._jsPlumbProxies.push([e,0])}),Z.select({target:k[O]}).each(function(e){Z.proxyConnection(e,1,tt,G,function(){return n("top",1,e.endpoints[1],e)},function(){return f("top",1,e.endpoints[1],e)}),k[O]._jsPlumbProxies.push([e,1])}));else if(k[O].offsetTop+k[O].offsetHeight>tt.scrollTop+tt.offsetHeight)k[O]._jsPlumbProxies||(k[O]._jsPlumbProxies=k[O]._jsPlumbProxies||[],Z.select({source:k[O]}).each(function(e){Z.proxyConnection(e,0,tt,G,function(){return n("bottom",0,e.endpoints[0],e)},function(){return f("bottom",0,e.endpoints[0],e)}),k[O]._jsPlumbProxies.push([e,0])}),Z.select({target:k[O]}).each(function(e){Z.proxyConnection(e,1,tt,G,function(){return n("bottom",1,e.endpoints[1],e)},function(){return f("bottom",1,e.endpoints[1],e)}),k[O]._jsPlumbProxies.push([e,1])}));else if(k[O]._jsPlumbProxies){for(var r=0;r<k[O]._jsPlumbProxies.length;r++)Z.unproxyConnection(k[O]._jsPlumbProxies[r][0],k[O]._jsPlumbProxies[r][1],G);delete k[O]._jsPlumbProxies}Z.revalidate(k[O])}!function x(j){for(var k=j.parentNode,G=Z.getContainer();null!=k&&k!==G;){if(Z.hasClass(k,"jtk-managed"))return void Z.recalculateOffsets(k);k=k.parentNode}}(tt)};Z.setAttribute(tt,"jtk-scrollable-list","true"),tt._jsPlumbScrollHandler=T,Z.on(tt,"scroll",T),T(),this.destroy=function(){Z.off(tt,"scroll",T),delete tt._jsPlumbScrollHandler;for(var j=Z.getSelector(tt,".jtk-managed"),k=Z.getId(tt),G=0;G<j.length;G++)if(j[G]._jsPlumbProxies){for(var O=0;O<j[G]._jsPlumbProxies.length;O++)Z.unproxyConnection(j[G]._jsPlumbProxies[O][0],j[G]._jsPlumbProxies[O][1],k);delete j[G]._jsPlumbProxies}}}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,h=J.jsPlumbUtil,X=function(r){if(r._jsPlumb.paintStyle&&r._jsPlumb.hoverPaintStyle){var e={};O.extend(e,r._jsPlumb.paintStyle),O.extend(e,r._jsPlumb.hoverPaintStyle),delete r._jsPlumb.hoverPaintStyle,e.gradient&&r._jsPlumb.paintStyle.fill&&delete e.gradient,r._jsPlumb.hoverPaintStyle=e}},ot=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],l=function(r){return null==r?null:r.split(" ")},D=function(r,e,I){for(var M in e)r[M]=I},n=function(r,e,I){if(r.getDefaultType){var M=r.getTypeDescriptor(),U={},F=r.getDefaultType(),t=h.merge({},F);D(U,F,"__default");for(var u=0,o=r._jsPlumb.types.length;u<o;u++){var b=r._jsPlumb.types[u];if("__default"!==b){var C=r._jsPlumb.instance.getType(b,M);if(null!=C){var v=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],y=[];"override"===C.mergeStrategy?Array.prototype.push.apply(v,["events","overlays","cssClass"]):y.push("cssClass"),t=h.merge(t,C,y,v),D(U,C,b)}}}e&&(t=h.populate(t,e,"_")),r.applyType(t,I,U),I||r.repaint()}},x=J.jsPlumbUIComponent=function(r){h.EventGenerator.apply(this,arguments);var I=arguments,U=this.idPrefix+(new Date).getTime();this._jsPlumb={instance:r._jsPlumb,parameters:r.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:r.beforeDetach,beforeDrop:r.beforeDrop,overlayPlacements:[],hoverClass:r.hoverClass||r._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(y,m,S){this._jsPlumb.typeCache[S]=this._jsPlumb.typeCache[S]||{},this._jsPlumb.typeCache[S][y]=m},this.getCachedTypeItem=function(y,m){return this._jsPlumb.typeCache[m]?this._jsPlumb.typeCache[m][y]:null},this.getId=function(){return U};var F=r.overlays||[],t={};if(this.defaultOverlayKeys){for(var u=0;u<this.defaultOverlayKeys.length;u++)Array.prototype.push.apply(F,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[u]]||[]);for(u=0;u<F.length;u++){var o=O.convertToFullOverlaySpec(F[u]);t[o[1].id]=o}}var b={overlays:t,parameters:r.parameters||{},scope:r.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return b},this.appendToDefaultType=function(y){for(var m in y)b[m]=y[m]},r.events)for(var C in r.events)this.bind(C,r.events[C]);this.clone=function(){var y=Object.create(this.constructor.prototype);return this.constructor.apply(y,I),y}.bind(this),this.isDetachAllowed=function(y){var m=!0;if(this._jsPlumb.beforeDetach)try{m=this._jsPlumb.beforeDetach(y)}catch(S){h.log("jsPlumb: beforeDetach callback failed",S)}return m},this.isDropAllowed=function(y,m,S,R,P,A,N){var V=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:y,targetId:m,scope:S,connection:R,dropEndpoint:P,source:A,target:N});if(this._jsPlumb.beforeDrop)try{V=this._jsPlumb.beforeDrop({sourceId:y,targetId:m,scope:S,connection:R,dropEndpoint:P,source:A,target:N})}catch(g){h.log("jsPlumb: beforeDrop callback failed",g)}return V};var v=[];this.setListenerComponent=function(y){for(var m=0;m<v.length;m++)v[m][3]=y}},T=function(r,e){var M=r._jsPlumb.instance.getType(r._jsPlumb.types[e],r.getTypeDescriptor());null!=M&&M.cssClass&&r.canvas&&r._jsPlumb.instance.removeClass(r.canvas,M.cssClass)};h.extend(J.jsPlumbUIComponent,h.EventGenerator,{getParameter:function(r){return this._jsPlumb.parameters[r]},setParameter:function(r,e){this._jsPlumb.parameters[r]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(r){this._jsPlumb.parameters=r},getClass:function(){return O.getClass(this.canvas)},hasClass:function(r){return O.hasClass(this.canvas,r)},addClass:function(r){O.addClass(this.canvas,r)},removeClass:function(r){O.removeClass(this.canvas,r)},updateClasses:function(r,e){O.updateClasses(this.canvas,r,e)},setType:function(r,e,I){this.clearTypes(),this._jsPlumb.types=l(r)||[],n(this,e,I)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(r,e){n(this,r,e)},hasType:function(r){return-1!==this._jsPlumb.types.indexOf(r)},addType:function(r,e,I){var M=l(r),U=!1;if(null!=M){for(var F=0,t=M.length;F<t;F++)this.hasType(M[F])||(this._jsPlumb.types.push(M[F]),U=!0);U&&n(this,e,I)}},removeType:function(r,e,I){var M=l(r),U=!1,F=function(o){var b=this._jsPlumb.types.indexOf(o);return-1!==b&&(T(this,b),this._jsPlumb.types.splice(b,1),!0)}.bind(this);if(null!=M){for(var t=0,u=M.length;t<u;t++)U=F(M[t])||U;U&&n(this,e,I)}},clearTypes:function(r,e){for(var I=this._jsPlumb.types.length,M=0;M<I;M++)T(this,0),this._jsPlumb.types.splice(0,1);n(this,r,e)},toggleType:function(r,e,I){var M=l(r);if(null!=M){for(var U=0,F=M.length;U<F;U++){var t=this._jsPlumb.types.indexOf(M[U]);-1!==t?(T(this,t),this._jsPlumb.types.splice(t,1)):this._jsPlumb.types.push(M[U])}n(this,e,I)}},applyType:function(r,e){if(this.setPaintStyle(r.paintStyle,e),this.setHoverPaintStyle(r.hoverPaintStyle,e),r.parameters)for(var I in r.parameters)this.setParameter(I,r.parameters[I]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(r,e){this._jsPlumb.paintStyle=r,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,X(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(r,e){this._jsPlumb.hoverPaintStyle=r,X(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(r){(r||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(r,e,I){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=r;var M=r?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[M](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[M](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=r?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(I=I||jsPlumbUtil.uuid(),this.repaint({timestamp:I,recalc:!1}))),this.getAttachedElements&&!e&&function(r,e,I,M){var U=r.getAttachedElements();if(U)for(var F=0,t=U.length;F<t;F++)(!M||M!==U[F])&&U[F].setHover(e,!0,I)}(this,r,jsPlumbUtil.uuid(),this)}}});var j=0,G=J.jsPlumbInstance=function(r){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},r&&O.extend(this.Defaults,r),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},h.EventGenerator.apply(this);var e=this,I=function(){var r=j+1;return j++,r}(),M=e.bind,U={},F=1,t=function(i){if(null==i)return null;if(3===i.nodeType||8===i.nodeType)return{el:i,text:!0};var E=e.getElement(i);return{el:E,id:h.isString(i)&&null==E?i:K(E)}};for(var u in this.getInstanceIndex=function(){return I},this.setZoom=function(i,E){return e.fire("zoom",F=i),E&&e.repaintEverything(),!0},this.getZoom=function(){return F},this.Defaults)U[u]=this.Defaults[u];var o,b=[];this.unbindContainer=function(){if(null!=o&&b.length>0)for(var i=0;i<b.length;i++)e.off(o,b[i][0],b[i][1])},this.setContainer=function(i){this.unbindContainer(),i=this.getElement(i),this.select().each(function(lt){lt.moveParent(i)}),this.selectEndpoints().each(function(lt){lt.moveParent(i)});var E=o;o=i,b.length=0;for(var _={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},L=function(lt,ht,Et){var vt=ht.srcElement||ht.target,St=(vt&&vt.parentNode?vt.parentNode._jsPlumb:null)||(vt?vt._jsPlumb:null)||(vt&&vt.parentNode&&vt.parentNode.parentNode?vt.parentNode.parentNode._jsPlumb:null);St&&(St.fire(lt,St,ht),e.fire(Et&&_[Et+lt]||lt,St.component||St,ht))},Y=function(lt,ht,Et){b.push([lt,Et]),e.on(o,lt,ht,Et)},z=function(lt){Y(lt,".jtk-connector",function(ht){L(lt,ht)}),Y(lt,".jtk-endpoint",function(ht){L(lt,ht,"endpoint")}),Y(lt,".jtk-overlay",function(ht){L(lt,ht)})},rt=0;rt<ot.length;rt++)z(ot[rt]);for(var ft in R){var at=R[ft].el;at.parentNode===E&&(E.removeChild(at),o.appendChild(at))}},this.getContainer=function(){return o},this.bind=function(i,E){"ready"===i&&v?E():M.apply(e,[i,E])},e.importDefaults=function(i){for(var E in i)e.Defaults[E]=i[E];return i.Container&&e.setContainer(i.Container),e},e.restoreDefaults=function(){return e.Defaults=O.extend({},U),e};var C=null,v=!1,y=[],m={},S={},R={},P={},A={},V=!1,g=[],d=!1,a=null,s=this.Defaults.Scope,p=1,c=function(){return""+p++},w=function(i,E){o?o.appendChild(i):E?this.getElement(E).appendChild(i):this.appendToRoot(i)}.bind(this),B=function(i,E,_,L){var Y={c:[],e:[]};if(!d&&null!=(i=e.getElement(i))){var z=K(i),rt=i.querySelectorAll(".jtk-managed");null==_&&(_=jsPlumbUtil.uuid()),It({elId:z,offset:E,recalc:!1,timestamp:_});for(var at=0;at<rt.length;at++)It({elId:rt[at].getAttribute("id"),recalc:!0,timestamp:_});var lt=e.router.redraw(z,E,_,null,L);if(Array.prototype.push.apply(Y.c,lt.c),Array.prototype.push.apply(Y.e,lt.e),rt)for(var ht=0;ht<rt.length;ht++)lt=e.router.redraw(rt[ht].getAttribute("id"),null,_,null,L,!0),Array.prototype.push.apply(Y.c,lt.c),Array.prototype.push.apply(Y.e,lt.e)}return Y},H=function(i){return S[i]},et=function(i,E){var _=O.extend({},i);if(E&&O.extend(_,E),_.source&&(_.source.endpoint?_.sourceEndpoint=_.source:_.source=e.getElement(_.source)),_.target&&(_.target.endpoint?_.targetEndpoint=_.target:_.target=e.getElement(_.target)),i.uuids&&(_.sourceEndpoint=H(i.uuids[0]),_.targetEndpoint=H(i.uuids[1])),_.sourceEndpoint&&_.sourceEndpoint.isFull())h.log(e,"could not add connection; source endpoint is full");else{if(!_.targetEndpoint||!_.targetEndpoint.isFull()){if(!_.type&&_.sourceEndpoint&&(_.type=_.sourceEndpoint.connectionType),_.sourceEndpoint&&_.sourceEndpoint.connectorOverlays){_.overlays=_.overlays||[];for(var L=0,Y=_.sourceEndpoint.connectorOverlays.length;L<Y;L++)_.overlays.push(_.sourceEndpoint.connectorOverlays[L])}_.sourceEndpoint&&_.sourceEndpoint.scope&&(_.scope=_.sourceEndpoint.scope),!_["pointer-events"]&&_.sourceEndpoint&&_.sourceEndpoint.connectorPointerEvents&&(_["pointer-events"]=_.sourceEndpoint.connectorPointerEvents);var rt=function(ft,at,lt,ht){if(_[ft]&&!_[ft].endpoint&&!_[ft+"Endpoint"]&&!_.newConnection){var vt=lt[K(_[ft])];if(vt=vt?vt[ht]:null){if(!vt.enabled)return!1;var St=O.extend({},vt.def);delete St.label;var wt=null!=vt.endpoint&&vt.endpoint._jsPlumb?vt.endpoint:function(ft,at,lt){var ht=function(i,E){var _=O.extend({},i);for(var L in E)E[L]&&(_[L]=E[L]);return _}(at,{anchor:_.anchors?_.anchors[lt]:_.anchor,endpoint:_.endpoints?_.endpoints[lt]:_.endpoint,paintStyle:_.endpointStyles?_.endpointStyles[lt]:_.endpointStyle,hoverPaintStyle:_.endpointHoverStyles?_.endpointHoverStyles[lt]:_.endpointHoverStyle});return e.addEndpoint(ft,ht)}(_[ft],St,at);if(wt.isFull())return!1;_[ft+"Endpoint"]=wt,!_.scope&&St.scope&&(_.scope=St.scope),vt.uniqueEndpoint?vt.endpoint?wt.finalEndpoint=vt.endpoint:(vt.endpoint=wt,wt.setDeleteOnEmpty(!1)):wt.setDeleteOnEmpty(!0),0===at&&vt.def.connectorOverlays&&(_.overlays=_.overlays||[],Array.prototype.push.apply(_.overlays,vt.def.connectorOverlays))}}};return!1!==rt("source",0,this.sourceEndpointDefinitions,_.type||"default")&&!1!==rt("target",1,this.targetEndpointDefinitions,_.type||"default")?(_.sourceEndpoint&&_.targetEndpoint&&(function(i,E){for(var _=i.scope.split(/\s/),L=E.scope.split(/\s/),Y=0;Y<_.length;Y++)for(var z=0;z<L.length;z++)if(L[z]===_[Y])return!0;return!1}(_.sourceEndpoint,_.targetEndpoint)||(_=null)),_):void 0}h.log(e,"could not add connection; target endpoint is full")}}.bind(e),$=function(i){var E=e.Defaults.ConnectionType||e.getDefaultConnectionType();i._jsPlumb=e,i.newConnection=$,i.newEndpoint=ct,i.endpointsByUUID=S,i.endpointsByElement=m,i.finaliseConnection=it,i.id="con_"+c();var _=new E(i);return _.isDetachable()&&(_.endpoints[0].initDraggable("_jsPlumbSource"),_.endpoints[1].initDraggable("_jsPlumbTarget")),_},it=e.finaliseConnection=function(i,E,_,L){E=E||{},i.suspendedEndpoint||y.push(i),i.pending=null,i.endpoints[0].isTemporarySource=!1,!1!==L&&e.router.newConnection(i),B(i.source),E.doNotFireConnectionEvent||!1===E.fireEvent||e.fire("connection",{connection:i,source:i.source,target:i.target,sourceId:i.sourceId,targetId:i.targetId,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1]},_)},ct=function(i,E){var _=e.Defaults.EndpointType||O.Endpoint,L=O.extend({},i);L._jsPlumb=e,L.newConnection=$,L.newEndpoint=ct,L.endpointsByUUID=S,L.endpointsByElement=m,L.fireDetachEvent=ut,L.elementId=E||K(L.source);var Y=new _(L);return Y.id="ep_"+c(),Mt(L.elementId,L.source),O.headless||e.getDragManager().endpointAdded(L.source,E),Y},dt=function(i,E,_){var L=m[i];if(L&&L.length)for(var Y=0,z=L.length;Y<z;Y++){for(var rt=0,ft=L[Y].connections.length;rt<ft;rt++)if(E(L[Y].connections[rt]))return;_&&_(L[Y])}},Pt=function(i,E,_){E="block"===E;var L=null;_&&(L=function(z){z.setVisible(E,!0,!0)});var Y=t(i);dt(Y.id,function(z){E&&_?z.endpoints[z.sourceId===Y.id?1:0].isVisible()&&z.setVisible(!0):z.setVisible(E)},L)},K=function(i,E,_){if(h.isString(i))return i;if(null==i)return null;var L=e.getAttribute(i,"id");return(!L||"undefined"===L)&&(2===arguments.length&&void 0!==arguments[1]?L=E:(1===arguments.length||3===arguments.length&&!arguments[2])&&(L="jsPlumb_"+I+"_"+c()),_||e.setAttribute(i,"id",L)),L};this.setConnectionBeingDragged=function(i){V=i},this.isConnectionBeingDragged=function(){return V},this.getManagedElements=function(){return R},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(i,E,_){var L=O.extend({},_=_||{});O.extend(L,E),L.endpoint=L.endpoint||e.Defaults.Endpoint,L.paintStyle=L.paintStyle||e.Defaults.EndpointStyle;for(var Y=[],z=h.isArray(i)||null!=i.length&&!h.isString(i)?i:[i],rt=0,ft=z.length;rt<ft;rt++){L.source=e.getElement(z[rt]),ee(L.source);var at=K(L.source),lt=ct(L,at),ht=Mt(at,L.source,null,!d).info.o;h.addToList(m,at,lt),d||lt.paint({anchorLoc:lt.anchor.compute({xy:[ht.left,ht.top],wh:g[at],element:lt,timestamp:a,rotation:this.getRotation(at)}),timestamp:a}),Y.push(lt)}return 1===Y.length?Y[0]:Y},this.addEndpoints=function(i,E,_){for(var L=[],Y=0,z=E.length;Y<z;Y++){var rt=e.addEndpoint(i,E[Y],_);h.isArray(rt)?Array.prototype.push.apply(L,rt):L.push(rt)}return L},this.animate=function(i,E,_){if(!this.animationSupported)return!1;_=_||{};var L=e.getElement(i),Y=K(L),z=O.animEvents.step,rt=O.animEvents.complete;_[z]=h.wrap(_[z],function(){e.revalidate(Y)}),_[rt]=h.wrap(_[rt],function(){e.revalidate(Y)}),e.doAnimate(L,E,_)},this.checkCondition=function(i,E){var _=e.getListener(i),L=!0;if(_&&_.length>0){var Y=Array.prototype.slice.call(arguments,1);try{for(var z=0,rt=_.length;z<rt;z++)L=L&&_[z].apply(_[z],Y)}catch(ft){h.log(e,"cannot check condition ["+i+"]"+ft)}}return L},this.connect=function(i,E){var L,_=et(i,E);if(_){if(null==_.source&&null==_.sourceEndpoint)return void h.log("Cannot establish connection - source does not exist");if(null==_.target&&null==_.targetEndpoint)return void h.log("Cannot establish connection - target does not exist");ee(_.source),L=$(_),it(L,_)}return L};var q=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],nt=function(i,E,_,L){var Y,at,lt,z=q[_],rt=i[z.elId],ht=i.endpoints[_],Et={index:_,originalSourceId:0===_?rt:i.sourceId,newSourceId:i.sourceId,originalTargetId:1===_?rt:i.targetId,newTargetId:i.targetId,connection:i};if(E.constructor===O.Endpoint)(Y=E).addConnection(i),E=Y.element;else if(at=K(E),lt=this[z.epDefs][at],at===i[z.elId])Y=null;else if(lt)for(var vt in lt){if(!lt[vt].enabled)return;Y=null!=lt[vt].endpoint&&lt[vt].endpoint._jsPlumb?lt[vt].endpoint:this.addEndpoint(E,lt[vt].def),lt[vt].uniqueEndpoint&&(lt[vt].endpoint=Y),Y.addConnection(i)}else Y=i.makeEndpoint(0===_,E,at);return null!=Y&&(ht.detachFromConnection(i),i.endpoints[_]=Y,i[z.el]=Y.element,i[z.elId]=Y.elementId,Et[0===_?"newSourceId":"newTargetId"]=Y.elementId,mt(Et),L||i.repaint()),Et.element=E,Et}.bind(this);this.setSource=function(i,E,_){var L=nt(i,E,0,_);this.router.sourceOrTargetChanged(L.originalSourceId,L.newSourceId,i,L.el,0)},this.setTarget=function(i,E,_){var L=nt(i,E,1,_);this.router.sourceOrTargetChanged(L.originalTargetId,L.newTargetId,i,L.el,1)},this.deleteEndpoint=function(i,E,_){var L="string"==typeof i?S[i]:i;return L&&e.deleteObject({endpoint:L,dontUpdateHover:E,deleteAttachedObjects:_}),e},this.deleteEveryEndpoint=function(){var i=e.setSuspendDrawing(!0);for(var E in m){var _=m[E];if(_&&_.length)for(var L=0,Y=_.length;L<Y;L++)e.deleteEndpoint(_[L],!0)}m={},R={},S={},P={},A={},e.router.reset();var z=e.getDragManager();return z&&z.reset(),i||e.setSuspendDrawing(!1),e};var ut=function(i,E,_){var L=e.Defaults.ConnectionType||e.getDefaultConnectionType(),z=i.constructor===L?{connection:i,source:i.source,target:i.target,sourceId:i.sourceId,targetId:i.targetId,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1]}:i;E&&e.fire("connectionDetached",z,_),e.fire("internal.connectionDetached",z,_),e.router.connectionDetached(z)},mt=e.fireMoveEvent=function(i,E){e.fire("connectionMoved",i,E)};this.unregisterEndpoint=function(i){for(var E in i._jsPlumb.uuid&&(S[i._jsPlumb.uuid]=null),e.router.deleteEndpoint(i),m){var _=m[E];if(_){for(var L=[],Y=0,z=_.length;Y<z;Y++)_[Y]!==i&&L.push(_[Y]);m[E]=L}m[E].length<1&&delete m[E]}};var xt="isDetachAllowed";this.deleteConnection=function(i,E){return!(null==i||(E=E||{},!E.force&&!h.functionChain(!0,!1,[[i.endpoints[0],xt,[i]],[i.endpoints[1],xt,[i]],[i,xt,[i]],[e,"checkCondition",["beforeDetach",i]]]))||(i.setHover(!1),ut(i,!i.pending&&!1!==E.fireEvent,E.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),h.removeWithFunction(y,function(_){return i.id===_.id}),i.cleanup(),i.destroy(),0))},this.deleteEveryConnection=function(i){i=i||{};var E=y.length,_=0;return e.batch(function(){for(var L=0;L<E;L++)_+=e.deleteConnection(y[0],i)?1:0}),_},this.deleteConnectionsForElement=function(i,E){E=E||{},i=e.getElement(i);var _=K(i),L=m[_];if(L&&L.length)for(var Y=0,z=L.length;Y<z;Y++)L[Y].deleteEveryConnection(E);return e},this.deleteObject=function(i){var E={endpoints:{},connections:{},endpointCount:0,connectionCount:0},_=!1!==i.deleteAttachedObjects,L=function(ht){null!=ht&&null==E.connections[ht.id]&&(!i.dontUpdateHover&&null!=ht._jsPlumb&&ht.setHover(!1),E.connections[ht.id]=ht,E.connectionCount++)};for(var z in i.connection?L(i.connection):function(ht){if(null!=ht&&null==E.endpoints[ht.id]&&(!i.dontUpdateHover&&null!=ht._jsPlumb&&ht.setHover(!1),E.endpoints[ht.id]=ht,E.endpointCount++,_))for(var Et=0;Et<ht.connections.length;Et++)L(ht.connections[Et])}(i.endpoint),E.connections){var rt=E.connections[z];if(rt._jsPlumb){h.removeWithFunction(y,function(ht){return rt.id===ht.id}),ut(rt,!1!==i.fireEvent&&!rt.pending,i.originalEvent);var ft=null==i.deleteAttachedObjects?null:!i.deleteAttachedObjects;rt.endpoints[0].detachFromConnection(rt,null,ft),rt.endpoints[1].detachFromConnection(rt,null,ft),rt.cleanup(!0),rt.destroy(!0)}}for(var at in E.endpoints){var lt=E.endpoints[at];lt._jsPlumb&&(e.unregisterEndpoint(lt),lt.cleanup(!0),lt.destroy(!0))}return E};var Yt=function(i,E,_){return function(){return function(i,E,_,L){for(var Y=0,z=i.length;Y<z;Y++)i[Y][E].apply(i[Y],_);return L(i)}(i,E,arguments,_)}},Jt=function(i,E){return function(){return function(i,E,_){for(var L=[],Y=0,z=i.length;Y<z;Y++)L.push([i[Y][E].apply(i[Y],_),i[Y]]);return L}(i,E,arguments)}},Ht=function(i,E){var _=[];if(i)if("string"==typeof i){if("*"===i)return i;_.push(i)}else if(E)_=i;else if(i.length)for(var L=0,Y=i.length;L<Y;L++)_.push(t(i[L]).id);else _.push(t(i).id);return _},Xt=function(i,E,_){return"*"===i||(i.length>0?-1!==i.indexOf(E):!_)};this.getConnections=function(i,E){i?i.constructor===String&&(i={scope:i}):i={};for(var _=i.scope||e.getDefaultScope(),L=Ht(_,!0),Y=Ht(i.source),z=Ht(i.target),rt=!E&&L.length>1?{}:[],ft=function(St,wt){if(!E&&L.length>1){var jt=rt[St];null==jt&&(jt=rt[St]=[]),jt.push(wt)}else rt.push(wt)},at=0,lt=y.length;at<lt;at++){var ht=y[at],Et=ht.proxies&&ht.proxies[0]?ht.proxies[0].originalEp.elementId:ht.sourceId,vt=ht.proxies&&ht.proxies[1]?ht.proxies[1].originalEp.elementId:ht.targetId;Xt(L,ht.scope)&&Xt(Y,Et)&&Xt(z,vt)&&ft(ht.scope,ht)}return rt};var te=function(i,E){return function(_){for(var L=0,Y=i.length;L<Y;L++)_(i[L]);return E(i)}},de=function(i){return function(E){return i[E]}},Vt=function(i,E){var z,rt,_={length:i.length,each:te(i,E),get:de(i)},L=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],Y=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(z=0,rt=L.length;z<rt;z++)_[L[z]]=Yt(i,L[z],E);for(z=0,rt=Y.length;z<rt;z++)_[Y[z]]=Jt(i,Y[z]);return _},Qt=function(i){var E=Vt(i,Qt);return O.extend(E,{setDetachable:Yt(i,"setDetachable",Qt),setReattach:Yt(i,"setReattach",Qt),setConnector:Yt(i,"setConnector",Qt),delete:function(){for(var _=0,L=i.length;_<L;_++)e.deleteConnection(i[_])},isDetachable:Jt(i,"isDetachable"),isReattach:Jt(i,"isReattach")})},qt=function(i){var E=Vt(i,qt);return O.extend(E,{setEnabled:Yt(i,"setEnabled",qt),setAnchor:Yt(i,"setAnchor",qt),isEnabled:Jt(i,"isEnabled"),deleteEveryConnection:function(){for(var _=0,L=i.length;_<L;_++)i[_].deleteEveryConnection()},delete:function(){for(var _=0,L=i.length;_<L;_++)e.deleteEndpoint(i[_])}})};this.select=function(i){return(i=i||{}).scope=i.scope||"*",Qt(i.connections||e.getConnections(i,!0))},this.selectEndpoints=function(i){(i=i||{}).scope=i.scope||"*";var E=!i.element&&!i.source&&!i.target,_=E?"*":Ht(i.element),L=E?"*":Ht(i.source),Y=E?"*":Ht(i.target),z=Ht(i.scope,!0),rt=[];for(var ft in m){var at=Xt(_,ft,!0),lt=Xt(L,ft,!0),ht="*"!==L,Et=Xt(Y,ft,!0),vt="*"!==Y;if(at||lt||Et)t:for(var St=0,wt=m[ft].length;St<wt;St++){var jt=m[ft][St];if(Xt(z,jt.scope,!0)){if(ht&&L.length>0&&!jt.isSource||vt&&Y.length>0&&!jt.isTarget)continue t;rt.push(jt)}}}return qt(rt)},this.getAllConnections=function(){return y},this.getDefaultScope=function(){return s},this.getEndpoint=H,this.getEndpoints=function(i){return m[t(i).id]||[]},this.getDefaultEndpointType=function(){return O.Endpoint},this.getDefaultConnectionType=function(){return O.Connection},this.getId=K,this.draw=B,this.info=t,this.appendElement=w;var oe=!1;this.isHoverSuspended=function(){return oe},this.setHoverSuspended=function(i){oe=i},this.hide=function(i,E){return Pt(i,"none",E),e},this.idstamp=c;var ee=function(i){if(!o&&i){var E=e.getElement(i);E.offsetParent&&e.setContainer(E.offsetParent)}},Mt=e.manage=function(i,E,_,L){return R[i]?L&&(R[i].info=It({elId:i,timestamp:a,recalc:!0})):(R[i]={el:E,endpoints:[],connections:[],rotation:0},R[i].info=It({elId:i,timestamp:a}),e.addClass(E,"jtk-managed"),_||e.fire("manageElement",{id:i,info:R[i].info,el:E})),R[i]};this.unmanage=function(i){if(R[i]){var E=R[i].el;e.removeClass(E,"jtk-managed"),delete R[i],e.fire("unmanageElement",{id:i,el:E})}},this.rotate=function(i,E,_){return R[i]&&(R[i].rotation=E,R[i].el.style.transform="rotate("+E+"deg)",R[i].el.style.transformOrigin="center center",!0!==_)?this.revalidate(i):{c:[],e:[]}},this.getRotation=function(i){return R[i]&&R[i].rotation||0};var It=function(i){var z,E=i.timestamp,_=i.recalc,L=i.offset,Y=i.elId;return d&&!E&&(E=a),!_&&E&&E===A[Y]?{o:i.offset||P[Y],s:g[Y]}:(_||!L&&null==P[Y]?null!=(z=R[Y]?R[Y].el:null)&&(g[Y]=e.getSize(z),P[Y]=e.getOffset(z),A[Y]=E):(P[Y]=L||P[Y],null==g[Y]&&null!=(z=R[Y].el)&&(g[Y]=e.getSize(z)),A[Y]=E),P[Y]&&!P[Y].right&&(P[Y].right=P[Y].left+g[Y][0],P[Y].bottom=P[Y].top+g[Y][1],P[Y].width=g[Y][0],P[Y].height=g[Y][1],P[Y].centerx=P[Y].left+P[Y].width/2,P[Y].centery=P[Y].top+P[Y].height/2),{o:P[Y],s:g[Y]})};this.updateOffset=It,this.init=function(){v||(e.Defaults.Container&&e.setContainer(e.Defaults.Container),e.router=new J.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,v=!0,e.fire("ready",e))}.bind(this),this.log=C,this.jsPlumbUIComponent=x,this.makeAnchor=function(){var i,E=function(ft,at){if(J.jsPlumb.Anchors[ft])return new J.jsPlumb.Anchors[ft](at);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+ft+"'"}};if(0===arguments.length)return null;var _=arguments[0],L=arguments[1],z=null;if(_.compute&&_.getOrientation)return _;if("string"==typeof _)z=E(arguments[0],{elementId:L,jsPlumbInstance:e});else if(h.isArray(_))if(h.isArray(_[0])||h.isString(_[0]))2===_.length&&h.isObject(_[1])?h.isString(_[0])?(i=J.jsPlumb.extend({elementId:L,jsPlumbInstance:e},_[1]),z=E(_[0],i)):(i=J.jsPlumb.extend({elementId:L,jsPlumbInstance:e,anchors:_[0]},_[1]),z=new J.jsPlumb.DynamicAnchor(i)):z=new O.DynamicAnchor({anchors:_,selector:null,elementId:L,jsPlumbInstance:e});else{var rt={x:_[0],y:_[1],orientation:_.length>=4?[_[2],_[3]]:[0,0],offsets:_.length>=6?[_[4],_[5]]:[0,0],elementId:L,jsPlumbInstance:e,cssClass:7===_.length?_[6]:null};(z=new J.jsPlumb.Anchor(rt)).clone=function(){return new J.jsPlumb.Anchor(rt)}}return z.id||(z.id="anchor_"+c()),z},this.makeAnchors=function(i,E,_){for(var L=[],Y=0,z=i.length;Y<z;Y++)"string"==typeof i[Y]?L.push(J.jsPlumb.Anchors[i[Y]]({elementId:E,jsPlumbInstance:_})):h.isArray(i[Y])&&L.push(e.makeAnchor(i[Y],E,_));return L},this.makeDynamicAnchor=function(i,E){return new J.jsPlumb.DynamicAnchor({anchors:i,selector:E,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Wt=function(i,E,_,L,Y){var z=new x(E),rt=E._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return i.def.enabled},isFull:function(){var at=e.select({target:i.id}).length;return i.def.maxConnections>0&&at>=i.def.maxConnections},element:i.el,elementId:i.id,isSource:L,isTarget:Y,addClass:function(at){e.addClass(i.el,at)},removeClass:function(at){e.removeClass(i.el,at)},onDrop:function(at){at.endpoints[0].anchor.locked=!1},isDropAllowed:function(){return z.isDropAllowed.apply(z,arguments)},isRedrop:function(at){return null!=at.suspendedElement&&null!=at.suspendedEndpoint&&at.suspendedEndpoint.element===i.el},getEndpoint:function(at){var lt=i.def.endpoint;if(null==lt||null==lt._jsPlumb){var ht=e.deriveEndpointAndAnchorSpec(at.getType().join(" "),!0),Et=ht.endpoints?J.jsPlumb.extend(E,{endpoint:i.def.def.endpoint||ht.endpoints[1]}):E;ht.anchors&&(Et=J.jsPlumb.extend(Et,{anchor:i.def.def.anchor||ht.anchors[1]})),(lt=e.addEndpoint(i.el,Et))._mtNew=!0}if(E.uniqueEndpoint&&(i.def.endpoint=lt),lt.setDeleteOnEmpty(!0),at.isDetachable()&&lt.initDraggable(),null!=lt.anchor.positionFinder){var vt=e.getUIPosition(arguments,e.getZoom()),St=e.getOffset(i.el),wt=e.getSize(i.el),jt=null==vt?[0,0]:lt.anchor.positionFinder(vt,St,wt,lt.anchor.constructorParams);lt.anchor.x=jt[0],lt.anchor.y=jt[1]}return lt},maybeCleanup:function(at){at._mtNew&&0===at.connections.length?e.deleteObject({endpoint:at}):delete at._mtNew}}),ft=J.jsPlumb.dragEvents.drop;return _.scope=_.scope||E.scope||e.Defaults.Scope,_[ft]=h.wrap(_[ft],rt,!0),_.rank=E.rank||0,Y&&(_[J.jsPlumb.dragEvents.over]=function(){return!0}),!1===E.allowLoopback&&(_.canDrop=function(at){return at.getDragElement()._jsPlumbRelatedElement!==i.el}),e.initDroppable(i.el,_,"internal"),rt};this.makeTarget=function(i,E,_){var L=J.jsPlumb.extend({_jsPlumb:this},_);J.jsPlumb.extend(L,E);for(var Y=L.maxConnections||-1,z=function(lt){var ht=t(lt),Et=ht.id,vt=J.jsPlumb.extend({},L.dropOptions||{}),St=L.connectionType||"default";this.targetEndpointDefinitions[Et]=this.targetEndpointDefinitions[Et]||{},ee(Et),ht.el._isJsPlumbGroup&&null==vt.rank&&(vt.rank=-1);var wt={def:J.jsPlumb.extend({},L),uniqueEndpoint:L.uniqueEndpoint,maxConnections:Y,enabled:!0};L.createEndpoint&&(wt.uniqueEndpoint=!0,wt.endpoint=e.addEndpoint(lt,wt.def),wt.endpoint.setDeleteOnEmpty(!1)),ht.def=wt,this.targetEndpointDefinitions[Et][St]=wt,Wt(ht,L,vt,!0===L.isSource,!0),ht.el._katavorioDrop[ht.el._katavorioDrop.length-1].targetDef=wt}.bind(this),rt=i.length&&i.constructor!==String?i:[i],ft=0,at=rt.length;ft<at;ft++)z(rt[ft]);return this},this.unmakeTarget=function(i,E){var _=t(i);return e.destroyDroppable(_.el,"internal"),E||delete this.targetEndpointDefinitions[_.id],this},this.makeSource=function(i,E,_){var L=J.jsPlumb.extend({_jsPlumb:this},_);J.jsPlumb.extend(L,E);var Y=L.connectionType||"default",z=e.deriveEndpointAndAnchorSpec(Y);L.endpoint=L.endpoint||z.endpoints[0],L.anchor=L.anchor||z.anchors[0];for(var rt=L.maxConnections||-1,ft=L.onMaxConnections,at=function(vt){var St=vt.id,wt=this.getElement(vt.el);this.sourceEndpointDefinitions[St]=this.sourceEndpointDefinitions[St]||{},ee(St);var jt={def:J.jsPlumb.extend({},L),uniqueEndpoint:L.uniqueEndpoint,maxConnections:rt,enabled:!0};L.createEndpoint&&(jt.uniqueEndpoint=!0,jt.endpoint=e.addEndpoint(i,jt.def),jt.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[St][Y]=jt,vt.def=jt;var le=J.jsPlumb.dragEvents.stop,ue=J.jsPlumb.dragEvents.drag,$t=J.jsPlumb.extend({},L.dragOptions||{}),ge=$t.drag,pe=$t.stop,kt=null,he=!1;$t.scope=$t.scope||L.scope,$t[ue]=h.wrap($t[ue],function(){ge&&ge.apply(this,arguments),he=!1}),$t[le]=h.wrap($t[le],function(){if(pe&&pe.apply(this,arguments),this.currentlyDragging=!1,null!=kt._jsPlumb){var Lt=kt.anchor,ce=kt.connections[0],Kt=this.makeAnchor(L.anchor||this.Defaults.Anchor,St,this),ne=kt.element;if(null!=Kt.positionFinder){var Bt=e.getOffset(ne),Zt=this.getSize(ne),ie=Kt.positionFinder({left:Bt.left+Lt.x*Zt[0],top:Bt.top+Lt.y*Zt[1]},Bt,Zt,Kt.constructorParams);Kt.x=ie[0],Kt.y=ie[1]}kt.setAnchor(Kt,!0),kt.repaint(),this.repaint(kt.elementId),null!=ce&&this.repaint(ce.targetId)}}.bind(this));var ve=function(Nt){if(3!==Nt.which&&2!==Nt.button){St=this.getId(this.getElement(vt.el));var Lt=this.sourceEndpointDefinitions[St][Y];if(Lt.enabled){if(L.filter){var ce=h.isString(L.filter)?function(i,E,_,L,Y){for(var z=i.target||i.srcElement,rt=!1,ft=L.getSelector(E,_),at=0;at<ft.length;at++)if(ft[at]===z){rt=!0;break}return Y?!rt:rt}(Nt,vt.el,L.filter,this,L.filterExclude):L.filter(Nt,vt.el);if(!1===ce)return}var Kt=this.select({source:St}).length;if(Lt.maxConnections>=0&&Kt>=Lt.maxConnections)return ft&&ft({element:vt.el,maxConnections:rt},Nt),!1;var ne=J.jsPlumb.getPositionOnElement(Nt,wt,F),Bt={};J.jsPlumb.extend(Bt,Lt.def),Bt.isTemporarySource=!0,Bt.anchor=[ne[0],ne[1],0,0],Bt.dragOptions=$t,Lt.def.scope&&(Bt.scope=Lt.def.scope),kt=this.addEndpoint(St,Bt),he=!0,kt.setDeleteOnEmpty(!0),Lt.uniqueEndpoint&&(Lt.endpoint?kt.finalEndpoint=Lt.endpoint:(Lt.endpoint=kt,kt.setDeleteOnEmpty(!1)));var Zt=function(){e.off(kt.canvas,"mouseup",Zt),e.off(vt.el,"mouseup",Zt),he&&(he=!1,e.deleteEndpoint(kt))};e.on(kt.canvas,"mouseup",Zt),e.on(vt.el,"mouseup",Zt);var fe={};if(Lt.def.extract)for(var ie in Lt.def.extract){var me=(Nt.srcElement||Nt.target).getAttribute(ie);me&&(fe[Lt.def.extract[ie]]=me)}e.trigger(kt.canvas,"mousedown",Nt,fe),h.consume(Nt)}}}.bind(this);this.on(vt.el,"mousedown",ve),jt.trigger=ve,L.filter&&(h.isString(L.filter)||h.isFunction(L.filter))&&e.setDragFilter(vt.el,L.filter);var ye=J.jsPlumb.extend({},L.dropOptions||{});Wt(vt,L,ye,!0,!0===L.isTarget)}.bind(this),lt=i.length&&i.constructor!==String?i:[i],ht=0,Et=lt.length;ht<Et;ht++)at(t(lt[ht]));return this},this.unmakeSource=function(i,E,_){var L=t(i);e.destroyDroppable(L.el,"internal");var Y=this.sourceEndpointDefinitions[L.id];if(Y)for(var z in Y)if(null==E||E===z){var rt=Y[z].trigger;rt&&e.off(L.el,"mousedown",rt),_||delete this.sourceEndpointDefinitions[L.id][z]}return this},this.unmakeEverySource=function(){for(var i in this.sourceEndpointDefinitions)e.unmakeSource(i,null,!0);return this.sourceEndpointDefinitions={},this};var zt=function(i,E,_){E=h.isArray(E)?E:[E];var L=K(i);_=_||"default";for(var Y=0;Y<E.length;Y++){var z=this[E[Y]][L];if(z&&z[_])return z[_].def.scope||this.Defaults.Scope}}.bind(this),st=function(i,E,_,L){_=h.isArray(_)?_:[_];var Y=K(i);L=L||"default";for(var z=0;z<_.length;z++){var rt=this[_[z]][Y];rt&&rt[L]&&(rt[L].def.scope=E)}}.bind(this);this.getScope=function(i,E){return zt(i,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(i){return zt(i,"sourceEndpointDefinitions")},this.getTargetScope=function(i){return zt(i,"targetEndpointDefinitions")},this.setScope=function(i,E,_){this.setSourceScope(i,E,_),this.setTargetScope(i,E,_)},this.setSourceScope=function(i,E,_){st(i,E,"sourceEndpointDefinitions",_),this.setDragScope(i,E)},this.setTargetScope=function(i,E,_){st(i,E,"targetEndpointDefinitions",_),this.setDropScope(i,E)},this.unmakeEveryTarget=function(){for(var i in this.targetEndpointDefinitions)e.unmakeTarget(i,!0);return this.targetEndpointDefinitions={},this};var bt=function(i,E,_,L,Y){var rt,ft,at,z="source"===i?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(Y=Y||"default",E.length&&!h.isString(E)){rt=[];for(var lt=0,ht=E.length;lt<ht;lt++)z[(ft=t(E[lt])).id]&&z[ft.id][Y]&&(rt[lt]=z[ft.id][Y].enabled,z[ft.id][Y].enabled=at=L?!rt[lt]:_,e[at?"removeClass":"addClass"](ft.el,"jtk-"+i+"-disabled"))}else{var Et=(ft=t(E)).id;z[Et]&&z[Et][Y]&&(rt=z[Et][Y].enabled,z[Et][Y].enabled=at=L?!rt:_,e[at?"removeClass":"addClass"](ft.el,"jtk-"+i+"-disabled"))}return rt}.bind(this),Ct=function(i,E){if(null!=i){if(h.isString(i)||!i.length)return E.apply(this,[i]);if(i.length)return E.apply(this,[i[0]])}}.bind(this);this.toggleSourceEnabled=function(i,E){return bt("source",i,null,!0,E),this.isSourceEnabled(i,E)},this.setSourceEnabled=function(i,E,_){return bt("source",i,E,null,_)},this.isSource=function(i,E){return E=E||"default",Ct(i,function(_){var L=this.sourceEndpointDefinitions[t(_).id];return null!=L&&null!=L[E]}.bind(this))},this.isSourceEnabled=function(i,E){return E=E||"default",Ct(i,function(_){var L=this.sourceEndpointDefinitions[t(_).id];return L&&L[E]&&!0===L[E].enabled}.bind(this))},this.toggleTargetEnabled=function(i,E){return bt("target",i,null,!0,E),this.isTargetEnabled(i,E)},this.isTarget=function(i,E){return E=E||"default",Ct(i,function(_){var L=this.targetEndpointDefinitions[t(_).id];return null!=L&&null!=L[E]}.bind(this))},this.isTargetEnabled=function(i,E){return E=E||"default",Ct(i,function(_){var L=this.targetEndpointDefinitions[t(_).id];return L&&L[E]&&!0===L[E].enabled}.bind(this))},this.setTargetEnabled=function(i,E,_){return bt("target",i,E,null,_)},this.ready=function(i){e.bind("ready",i)},this.repaint=function(i,E,_){return function(i,E){if("object"==typeof i&&i.length)for(var _=0,L=i.length;_<L;_++)E(i[_]);else E(i);return e}(i,function(L){B(L,E,_)})},this.revalidate=function(i,E,_){var L=_?i:e.getId(i);e.updateOffset({elId:L,recalc:!0,timestamp:E});var Y=e.getDragManager();return Y&&Y.updateOffsets(L),B(i,null,E)},this.repaintEverything=function(){var E,i=jsPlumbUtil.uuid();for(E in m)e.updateOffset({elId:E,recalc:!0,timestamp:i});for(E in m)B(E,null,i);return this},this.removeAllEndpoints=function(i,E,_){_=_||[];var L=function(Y){var ft,at,z=t(Y),rt=m[z.id];if(rt)for(_.push(z),ft=0,at=rt.length;ft<at;ft++)e.deleteEndpoint(rt[ft],!1);if(delete m[z.id],E&&z.el&&3!==z.el.nodeType&&8!==z.el.nodeType)for(ft=0,at=z.el.childNodes.length;ft<at;ft++)L(z.el.childNodes[ft])};return L(i),this};var Dt=function(i,E){e.removeAllEndpoints(i.id,!0,E);for(var _=e.getDragManager(),L=function(z){_&&_.elementRemoved(z.id),e.router.elementRemoved(z.id),e.isSource(z.el)&&e.unmakeSource(z.el),e.isTarget(z.el)&&e.unmakeTarget(z.el),e.destroyDraggable(z.el),e.destroyDroppable(z.el),delete e.floatingConnections[z.id],delete R[z.id],delete P[z.id],z.el&&(e.removeElement(z.el),z.el._jsPlumb=null)},Y=1;Y<E.length;Y++)L(E[Y]);L(i)};this.remove=function(i,E){var _=t(i),L=[];return _.text&&_.el.parentNode?_.el.parentNode.removeChild(_.el):_.id&&e.batch(function(){Dt(_,L)},!0===E),e},this.empty=function(i,E){var _=[],L=function(Y,z){var rt=t(Y);if(rt.text)rt.el.parentNode.removeChild(rt.el);else if(rt.el){for(;rt.el.childNodes.length>0;)L(rt.el.childNodes[0]);z||Dt(rt,_)}};return e.batch(function(){L(i,!0)},!1===E),e},this.reset=function(i){e.silently(function(){oe=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),i||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},y.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),o=null,b=null};var At=function(i){i.canvas&&i.canvas.parentNode&&i.canvas.parentNode.removeChild(i.canvas),i.cleanup(),i.destroy()};this.clear=function(){e.select().each(At),e.selectEndpoints().each(At),m={},S={}},this.setDefaultScope=function(i){return s=i,e},this.deriveEndpointAndAnchorSpec=function(i,E){for(var _=((E?"":"default ")+i).split(/[\s]/),L=null,Y=null,z=null,rt=null,ft=0;ft<_.length;ft++){var at=e.getType(_[ft],"connection");at&&(at.endpoints&&(L=at.endpoints),at.endpoint&&(Y=at.endpoint),at.anchors&&(rt=at.anchors),at.anchor&&(z=at.anchor))}return{endpoints:L||[Y,Y],anchors:rt||[z,z]}},this.setId=function(i,E,_){var L;h.isString(i)?L=i:(i=this.getElement(i),L=this.getId(i));var Y=this.getConnections({source:L,scope:"*"},!0),z=this.getConnections({target:L,scope:"*"},!0);E=""+E,_?i=this.getElement(E):(i=this.getElement(L),this.setAttribute(i,"id",E)),m[E]=m[L]||[];for(var rt=0,ft=m[E].length;rt<ft;rt++)m[E][rt].setElementId(E),m[E][rt].setReferenceElement(i);delete m[L],this.sourceEndpointDefinitions[E]=this.sourceEndpointDefinitions[L],delete this.sourceEndpointDefinitions[L],this.targetEndpointDefinitions[E]=this.targetEndpointDefinitions[L],delete this.targetEndpointDefinitions[L],this.router.changeId(L,E);var at=this.getDragManager();at&&at.changeId(L,E),R[E]=R[L],delete R[L];var lt=function(ht,Et,vt){for(var St=0,wt=ht.length;St<wt;St++)ht[St].endpoints[Et].setElementId(E),ht[St].endpoints[Et].setReferenceElement(i),ht[St][vt+"Id"]=E,ht[St][vt]=i};lt(Y,0,"source"),lt(z,1,"target"),this.repaint(E)},this.setDebugLog=function(i){C=i},this.setSuspendDrawing=function(i,E){var _=d;return d=i,a=i?(new Date).getTime():null,E&&this.repaintEverything(),_},this.isSuspendDrawing=function(){return d},this.getSuspendedAt=function(){return a},this.batch=function(i,E){var _=this.isSuspendDrawing();_||this.setSuspendDrawing(!0);try{i()}catch(L){h.log("Function run while suspended failed",L)}_||this.setSuspendDrawing(!1,!E)},this.doWhileSuspended=this.batch,this.getCachedData=function(i){var E=P[i];return E?{o:E,s:g[i]}:It({elId:i})},this.show=function(i,E){return Pt(i,"block",E),e},this.toggleVisible=function(i,E){var _=null;E&&(_=function(L){var Y=L.isVisible();L.setVisible(!Y)}),dt(i,function(L){var Y=L.isVisible();L.setVisible(!Y)},_)},this.addListener=this.bind;var Rt=[];this.registerFloatingConnection=function(i,E,_){Rt[i.id]=E,h.addToList(m,i.id,_)},this.getFloatingConnectionFor=function(i){return Rt[i]},this.listManager=new J.jsPlumbListManager(this,this.Defaults.ListStyle)};h.extend(J.jsPlumbInstance,h.EventGenerator,{setAttribute:function(r,e,I){this.setAttribute(r,e,I)},getAttribute:function(r,e){return this.getAttribute(J.jsPlumb.getElement(r),e)},convertToFullOverlaySpec:function(r){return h.isString(r)&&(r=[r,{}]),r[1].id=r[1].id||h.uuid(),r},registerConnectionType:function(r,e){if(this._connectionTypes[r]=J.jsPlumb.extend({},e),e.overlays){for(var I={},M=0;M<e.overlays.length;M++){var U=this.convertToFullOverlaySpec(e.overlays[M]);I[U[1].id]=U}this._connectionTypes[r].overlays=I}},registerConnectionTypes:function(r){for(var e in r)this.registerConnectionType(e,r[e])},registerEndpointType:function(r,e){if(this._endpointTypes[r]=J.jsPlumb.extend({},e),e.overlays){for(var I={},M=0;M<e.overlays.length;M++){var U=this.convertToFullOverlaySpec(e.overlays[M]);I[U[1].id]=U}this._endpointTypes[r].overlays=I}},registerEndpointTypes:function(r){for(var e in r)this.registerEndpointType(e,r[e])},getType:function(r,e){return"connection"===e?this._connectionTypes[r]:this._endpointTypes[r]},setIdChanged:function(r,e){this.setId(r,e,!0)},setParent:function(r,e){var I=this.getElement(r),M=this.getId(I),U=this.getElement(e),F=this.getId(U),t=this.getDragManager();I.parentNode.removeChild(I),U.appendChild(I),t&&t.setParent(I,M,U,F)},extend:function(r,e,I){var M;if(I)for(M=0;M<I.length;M++)r[I[M]]=e[I[M]];else for(M in e)r[M]=e[M];return r},floatingConnections:{},getFloatingAnchorIndex:function(r){return r.endpoints[0].isFloating()?0:r.endpoints[1].isFloating()?1:-1},proxyConnection:function(r,e,I,M,U,F){var t,u=r.endpoints[e].elementId,o=r.endpoints[e];r.proxies=r.proxies||[],(t=r.proxies[e]?r.proxies[e].ep:this.addEndpoint(I,{endpoint:U(r,e),anchor:F(r,e),parameters:{isProxyEndpoint:!0}})).setDeleteOnEmpty(!0),r.proxies[e]={ep:t,originalEp:o},this.router.sourceOrTargetChanged(u,M,r,I,0===e?0:1),o.detachFromConnection(r,null,!0),t.connections=[r],r.endpoints[e]=t,o.setVisible(!1),r.setVisible(!0),this.revalidate(I)},unproxyConnection:function(r,e,I){if(null!=r._jsPlumb&&null!=r.proxies&&null!=r.proxies[e]){var M=r.proxies[e].originalEp.element,U=r.proxies[e].originalEp.elementId;r.endpoints[e]=r.proxies[e].originalEp,this.router.sourceOrTargetChanged(I,U,r,M,0===e?0:1),r.proxies[e].ep.detachFromConnection(r,null),r.proxies[e].originalEp.addConnection(r),r.isVisible()&&r.proxies[e].originalEp.setVisible(!0),delete r.proxies[e]}}});var O=new G;J.jsPlumb=O,O.getInstance=function(r,e){var I=new G(r);if(e)for(var M in e)I[M]=e[M];return I.init(),I},O.each=function(r,e){if(null!=r)if("string"==typeof r)e(O.getElement(r));else if(null!=r.length)for(var I=0;I<r.length;I++)e(O.getElement(r[I]));else e(r)},Ft.jsPlumb=O}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,h=J.jsPlumb,X=J.jsPlumbUtil,ot="__label";h.OverlayCapableJsPlumbUIComponent=function(l){J.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},l.label&&(this.getDefaultType().overlays[ot]=["Label",{label:l.label,location:l.labelLocation||this.defaultLabelLocation||.5,labelStyle:l.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:ot}]),this.setListenerComponent=function(D){if(this._jsPlumb)for(var f in this._jsPlumb.overlays)this._jsPlumb.overlays[f].setListenerComponent(D)}},h.OverlayCapableJsPlumbUIComponent.applyType=function(l,D){if(D.overlays){var n,f={};for(n in D.overlays){var x=l._jsPlumb.overlays[D.overlays[n][1].id];if(x)x.updateFrom(D.overlays[n][1]),f[D.overlays[n][1].id]=!0,x.reattach(l._jsPlumb.instance,l);else{var T=l.getCachedTypeItem("overlay",D.overlays[n][1].id);null!=T?(T.reattach(l._jsPlumb.instance,l),T.setVisible(!0),T.updateFrom(D.overlays[n][1]),l._jsPlumb.overlays[T.id]=T):T=l.addOverlay(D.overlays[n],!0),f[T.id]=!0}}for(n in l._jsPlumb.overlays)null==f[l._jsPlumb.overlays[n].id]&&l.removeOverlay(l._jsPlumb.overlays[n].id,!0)}},X.extend(h.OverlayCapableJsPlumbUIComponent,J.jsPlumbUIComponent,{setHover:function(l,D){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var f in this._jsPlumb.overlays)this._jsPlumb.overlays[f][l?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(l,D){var f=function(l,D){var f=null;if(X.isArray(D)){var n=D[0],x=h.extend({component:l,_jsPlumb:l._jsPlumb.instance},D[1]);3===D.length&&h.extend(x,D[2]),f=new(h.Overlays[l._jsPlumb.instance.getRenderMode()][n])(x)}else f=D.constructor===String?new(h.Overlays[l._jsPlumb.instance.getRenderMode()][D])({component:l,_jsPlumb:l._jsPlumb.instance}):D;return f.id=f.id||X.uuid(),l.cacheTypeItem("overlay",f,f.id),l._jsPlumb.overlays[f.id]=f,f}(this,l);if(this.getData&&"Label"===f.type&&X.isArray(l)){var n=this.getData();if(n){var j=n?n[l[1].labelLocationAttribute||"labelLocation"]:null;j&&(f.loc=j)}}return D||this.repaint(),f},getOverlay:function(l){return this._jsPlumb.overlays[l]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(l){var D=this.getOverlay(l);D&&D.hide()},hideOverlays:function(){for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l].hide()},showOverlay:function(l){var D=this.getOverlay(l);D&&D.show()},showOverlays:function(){for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l].show()},removeAllOverlays:function(l){for(var D in this._jsPlumb.overlays)this._jsPlumb.overlays[D].cleanup&&this._jsPlumb.overlays[D].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},l||this.repaint()},removeOverlay:function(l,D){var f=this._jsPlumb.overlays[l];f&&(f.setVisible(!1),!D&&f.cleanup&&f.cleanup(),delete this._jsPlumb.overlays[l],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[l],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[l])},removeOverlays:function(){for(var l=0,D=arguments.length;l<D;l++)this.removeOverlay(arguments[l])},moveParent:function(l){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),l.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var D in this.canvas.parentNode.removeChild(this.canvas),l.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[D].isAppendedAtTopLevel){var f=this._jsPlumb.overlays[D].getElement();f.parentNode.removeChild(f),l.appendChild(f)}},getLabel:function(){var l=this.getOverlay(ot);return null!=l?l.getLabel():null},getLabelOverlay:function(){return this.getOverlay(ot)},setLabel:function(l){var D=this.getOverlay(ot);D?l.constructor===String||l.constructor===Function?D.setLabel(l):(l.label&&D.setLabel(l.label),l.location&&D.setLocation(l.location)):(D=function(l,D){var n=h.extend({cssClass:D.cssClass,labelStyle:l.labelStyle,id:ot,component:l,_jsPlumb:l._jsPlumb.instance},D);return new(h.Overlays[l._jsPlumb.instance.getRenderMode()].Label)(n)}(this,l.constructor===String||l.constructor===Function?{label:l}:l),this._jsPlumb.overlays[ot]=D),this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(l){for(var D in this._jsPlumb.overlays)this._jsPlumb.overlays[D].cleanup(l),this._jsPlumb.overlays[D].destroy(l);l&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(l){this[l?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(l,D){this._jsPlumb.overlayPositions[l.id]=D},getAbsoluteOverlayPosition:function(l){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[l.id]:null},_clazzManip:function(l,D,f){if(!f)for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n][l+"Class"](D)},addClass:function(l,D){this._clazzManip("add",l,D)},removeClass:function(l,D){this._clazzManip("remove",l,D)}})}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,h=J.jsPlumb,X=J.jsPlumbUtil,l=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];h.Endpoint=function(f){var n=f._jsPlumb,x=f.newConnection,T=f.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],h.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:f.connectionType,maxConnections:null==f.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:f.maxConnections,paintStyle:f.endpointStyle||f.paintStyle||f.style||this._jsPlumb.instance.Defaults.EndpointStyle||h.Defaults.EndpointStyle,hoverPaintStyle:f.endpointHoverStyle||f.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||h.Defaults.EndpointHoverStyle,connectorStyle:f.connectorStyle,connectorHoverStyle:f.connectorHoverStyle,connectorClass:f.connectorClass,connectorHoverClass:f.connectorHoverClass,connectorOverlays:f.connectorOverlays,connector:f.connector,connectorTooltip:f.connectorTooltip}),this._jsPlumb.enabled=!1!==f.enabled,this._jsPlumb.visible=!0,this.element=h.getElement(f.source),this._jsPlumb.uuid=f.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(f.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=f.elementId,this.dragProxy=f.dragProxy,this._jsPlumb.connectionCost=f.connectionCost,this._jsPlumb.connectionsDirected=f.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var k=!0===f.deleteOnEmpty;this.setDeleteOnEmpty=function(F){k=F};var G=function(){var F=n.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var t=n.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(F),this.addClass(t),h.updateClasses(this.element,t,F)}.bind(this);this.prepareAnchor=function(F){var t=this._jsPlumb.instance.makeAnchor(F,this.elementId,n);return t.bind("anchorChanged",function(u){this.fire("anchorChanged",{endpoint:this,anchor:u}),G()}.bind(this)),t},this.setPreparedAnchor=function(F,t){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=F,G(),t||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(F,t){var u=this.prepareAnchor(F);return this.setPreparedAnchor(u,t),this};var O=function(F){if(this.connections.length>0)for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(F,!1);else this.setHover(F)}.bind(this);this.bind("mouseover",function(){O(!0)}),this.bind("mouseout",function(){O(!1)}),f._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(F,t){var b,u=function(C,v){var y=n.getRenderMode();if(h.Endpoints[y][C])return new h.Endpoints[y][C](v);if(!n.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+C+"'"}},o={_jsPlumb:this._jsPlumb.instance,cssClass:f.cssClass,container:f.container,tooltip:f.tooltip,connectorTooltip:f.connectorTooltip,endpoint:this};return X.isString(F)?b=u(F,o):X.isArray(F)?(o=X.merge(F[1],o),b=u(F[0],o)):b=F.clone(),b.clone=function(){return X.isString(F)?u(F,o):X.isArray(F)?(o=X.merge(F[1],o),u(F[0],o)):void 0}.bind(this),b.typeId=t,b},this.setEndpoint=function(F,t){var u=this.prepareEndpoint(F);this.setPreparedEndpoint(u,!0)},this.setPreparedEndpoint=function(F,t){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=F,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},h.extend(this,f,l),this.isSource=f.isSource||!1,this.isTemporarySource=f.isTemporarySource||!1,this.isTarget=f.isTarget||!1,this.connections=f.connections||[],this.connectorPointerEvents=f["connector-pointer-events"],this.scope=f.scope||n.getDefaultScope(),this.timestamp=null,this.reattachConnections=f.reattach||n.Defaults.ReattachConnections,this.connectionsDetachable=n.Defaults.ConnectionsDetachable,(!1===f.connectionsDetachable||!1===f.detachable)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==f.dragAllowedWhenFull,f.onMaxConnections&&this.bind("maxConnections",f.onMaxConnections),this.addConnection=function(F){this.connections.push(F),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)},this.detachFromConnection=function(F,t,u){(t=t??this.connections.indexOf(F))>=0&&(this.connections.splice(t,1),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)),!u&&k&&0===this.connections.length&&n.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==u})},this.deleteEveryConnection=function(F){for(var t=this.connections.length,u=0;u<t;u++)n.deleteConnection(this.connections[0],F)},this.detachFrom=function(F,t,u){for(var o=[],b=0;b<this.connections.length;b++)(this.connections[b].endpoints[1]===F||this.connections[b].endpoints[0]===F)&&o.push(this.connections[b]);for(var C=0,v=o.length;C<v;C++)n.deleteConnection(o[0]);return this},this.getElement=function(){return this.element},this.setElement=function(F){var t=this._jsPlumb.instance.getId(F),u=this.elementId;return X.removeWithFunction(f.endpointsByElement[this.elementId],function(o){return o.id===this.id}.bind(this)),this.element=h.getElement(F),this.elementId=n.getId(this.element),n.router.rehomeEndpoint(this,u,this.element),n.dragManager.endpointAdded(this.element),X.addToList(f.endpointsByElement,t,this),this},this.makeInPlaceCopy=function(){var F=this.anchor.getCurrentLocation({element:this}),t=this.anchor.getOrientation(this),u=this.anchor.getCssClass();return T({dropOptions:f.dropOptions,anchor:{bind:function(){},compute:function(){return[F[0],F[1]]},getCurrentLocation:function(){return[F[0],F[1]]},getOrientation:function(){return t},getCssClass:function(){return u}},source:this.element,paintStyle:this.getPaintStyle(),endpoint:f.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(F){var t=(F=F||{}).timestamp,u=!1!==F.recalc;if(!t||this.timestamp!==t){var o=n.updateOffset({elId:this.elementId,timestamp:t}),b=F.offset?F.offset.o:o.o;if(null!=b){var C=F.anchorPoint,v=F.connectorPaintStyle;if(null==C){var m={xy:[b.left,b.top],wh:F.dimensions||o.s,element:this,timestamp:t};if(u&&this.anchor.isDynamic&&this.connections.length>0){var S=function(f,n){var x=0;if(null!=n)for(var T=0;T<f.connections.length;T++)if(f.connections[T].sourceId===n||f.connections[T].targetId===n){x=T;break}return f.connections[x]}(this,F.elementWithPrecedence),R=S.endpoints[0]===this?1:0,P=0===R?S.sourceId:S.targetId,A=n.getCachedData(P),N=A.o,V=A.s;m.index=0===R?1:0,m.connection=S,m.txy=[N.left,N.top],m.twh=V,m.tElement=S.endpoints[R],m.tRotation=n.getRotation(P)}else this.connections.length>0&&(m.connection=this.connections[0]);m.rotation=n.getRotation(this.elementId),C=this.anchor.compute(m)}for(var g in this.endpoint.compute(C,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,v||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=t,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(g)){var d=this._jsPlumb.overlays[g];d.isVisible()&&(this._jsPlumb.overlayPlacements[g]=d.draw(this.endpoint,this._jsPlumb.paintStyleInUse),d.paint(this._jsPlumb.overlayPlacements[g]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var r=!1;this.initDraggable=function(){if(!r&&h.isDragSupported(this.element)){var P,F={id:null,element:null},t=null,u=!1,o=null,b=function(f,n,x){var T=!1;return{drag:function(){if(T)return T=!1,!0;if(n.element){var j=x.getUIPosition(arguments,x.getZoom());null!=j&&x.setPosition(n.element,j),x.repaint(n.element,j),f.paint({anchorPoint:f.anchor.getCurrentLocation({element:f})})}},stopDrag:function(){T=!0}}}(this,F,n),C=f.dragOptions||{},y=h.dragEvents.start,m=h.dragEvents.stop,S=h.dragEvents.drag,R=h.dragEvents.beforeStart,N=function(g){t=this.connectorSelector();var d=!0;this.isEnabled()||(d=!1),null==t&&!this.isSource&&!this.isTemporarySource&&(d=!1),this.isSource&&this.isFull()&&!(null!=t&&this.dragAllowedWhenFull)&&(d=!1),null!=t&&!t.isDetachable(this)&&(this.isFull()?d=!1:t=null);var a=n.checkCondition(null==t?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:t});if(!1===a?d=!1:"object"==typeof a?h.extend(a,P||{}):a=P||{},!1===d)return n.stopDrag&&n.stopDrag(this.canvas),b.stopDrag(),!1;for(var s=0;s<this.connections.length;s++)this.connections[s].setHover(!1);this.addClass("endpointDrag"),n.setConnectionBeingDragged(!0),t&&!this.isFull()&&this.isSource&&(t=null),n.updateOffset({elId:this.elementId});var p=this._jsPlumb.instance.getOffset(this.canvas),c=this.canvas,w=this._jsPlumb.instance.getSize(this.canvas);(function(f,n,x,T){var j=n.createElement("div",{position:"absolute"});n.appendElement(j);var k=n.getId(j);n.setPosition(j,x),j.style.width=T[0]+"px",j.style.height=T[1]+"px",n.manage(k,j,!0),f.id=k,f.element=j})(F,n,p,w),n.setAttributes(this.canvas,{dragId:F.id,elId:this.elementId});var B=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var H=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);H.endpoints[1]&&(B=H.endpoints[1])}var W=this._jsPlumb.instance.makeAnchor("Center");W.isFloating=!0,this._jsPlumb.floatingEndpoint=function(f,n,x,T,j,k,G,O){return G({paintStyle:f,endpoint:x,anchor:new h.FloatingAnchor({reference:n,referenceCanvas:T,jsPlumbInstance:k}),source:j,scope:O})}(this.getPaintStyle(),W,B,this.canvas,F.element,n,T,this.scope);var Q=this._jsPlumb.floatingEndpoint.anchor;if(null==t)this.setHover(!1,!1),(t=x({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:F.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:f.connectorStyle,hoverPaintStyle:f.connectorHoverStyle,connector:f.connector,overlays:f.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:f.scope,data:a})).pending=!0,t.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.anchor=Q,n.fire("connectionDrag",t),n.router.newConnection(t);else{u=!0,t.setHover(!1);var et=t.endpoints[0].id===this.id?0:1;this.detachFromConnection(t,null,!0);var $=n.getDragScope(c);n.setAttribute(this.canvas,"originalScope",$),n.fire("connectionDrag",t),0===et?(o=[t.source,t.sourceId,c,$],n.router.sourceOrTargetChanged(t.endpoints[et].elementId,F.id,t,F.element,0)):(o=[t.target,t.targetId,c,$],n.router.sourceOrTargetChanged(t.endpoints[et].elementId,F.id,t,F.element,1)),t.suspendedEndpoint=t.endpoints[et],t.suspendedElement=t.endpoints[et].getElement(),t.suspendedElementId=t.endpoints[et].elementId,t.suspendedElementType=0===et?"source":"target",t.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=t.suspendedEndpoint,t.endpoints[et]=this._jsPlumb.floatingEndpoint,t.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass)}n.registerFloatingConnection(F,t,this._jsPlumb.floatingEndpoint),n.currentlyDragging=!0}.bind(this),V=function(){if(n.setConnectionBeingDragged(!1),t&&null!=t.endpoints){var g=n.getDropEvent(arguments),d=n.getFloatingAnchorIndex(t);if(t.endpoints[0===d?1:0].anchor.locked=!1,t.removeClass(n.draggingClass),this._jsPlumb&&(t.deleteConnectionNow||t.endpoints[d]===this._jsPlumb.floatingEndpoint)&&u&&t.suspendedEndpoint){0===d?(t.floatingElement=t.source,t.floatingId=t.sourceId,t.floatingEndpoint=t.endpoints[0],t.floatingIndex=0,t.source=o[0],t.sourceId=o[1]):(t.floatingElement=t.target,t.floatingId=t.targetId,t.floatingEndpoint=t.endpoints[1],t.floatingIndex=1,t.target=o[0],t.targetId=o[1]);var a=this._jsPlumb.floatingEndpoint;n.setDragScope(o[2],o[3]),t.endpoints[d]=t.suspendedEndpoint,t.isReattach()||t._forceReattach||t._forceDetach||!n.deleteConnection(t,{originalEvent:g})?(t.setHover(!1),t._forceDetach=null,t._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(t),t.suspendedEndpoint.addConnection(t),1===d?n.router.sourceOrTargetChanged(t.floatingId,t.targetId,t,t.target,d):n.router.sourceOrTargetChanged(t.floatingId,t.sourceId,t,t.source,d),n.repaint(o[1])):n.deleteObject({endpoint:a})}this.deleteAfterDragStop?n.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),n.fire("connectionDragStop",t,g),t.pending&&n.fire("connectionAborted",t,g),n.currentlyDragging=!1,t.suspendedElement=null,t.suspendedEndpoint=null,t=null}F&&F.element&&n.remove(F.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);(C=h.extend({},C)).scope=this.scope||C.scope,C[R]=X.wrap(C[R],function(g){P=g.e.payload||{}},!1),C[y]=X.wrap(C[y],N,!1),C[S]=X.wrap(C[S],b.drag),C[m]=X.wrap(C[m],V),C.multipleDrop=!1,C.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&!1!==this.connectionsDetachable}.bind(this),n.initDraggable(this.canvas,C,"internal"),this.canvas._jsPlumbRelatedElement=this.element,r=!0}},this.setEndpoint(f.endpoint||this._jsPlumb.instance.Defaults.Endpoint||h.Defaults.Endpoint,!0),this.setAnchor(f.anchor?f.anchor:f.anchors?f.anchors:n.Defaults.Anchor||"Top",!0);var M=["default",f.type||""].join(" ");this.addType(M,f.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var U=function(F,t,u,o){if(h.isDropSupported(this.element)){var b=f.dropOptions||n.Defaults.DropOptions||h.Defaults.DropOptions;(b=h.extend({},b)).scope=b.scope||this.scope;var C=h.dragEvents.drop,v=h.dragEvents.over,y=h.dragEvents.out,m=this,S=n.EndpointDropHandler({getEndpoint:function(){return m},jsPlumb:n,enabled:function(){return null==u||u.isEnabled()},isFull:function(){return u.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(R){m.addClass(R)},removeClass:function(R){m.removeClass(R)},isDropAllowed:function(){return m.isDropAllowed.apply(m,arguments)},reference:o,isRedrop:function(R,P){return R.suspendedEndpoint&&P.reference&&R.suspendedEndpoint.id===P.reference.id}});b[C]=X.wrap(b[C],S,!0),b[v]=X.wrap(b[v],function(){var R=h.getDragObject(arguments),P=n.getAttribute(h.getElement(R),"dragId"),A=n.getFloatingConnectionFor(P);if(null!=A){var N=n.getFloatingAnchorIndex(A);if(this.isTarget&&0!==N||A.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===A.suspendedEndpoint.id){var g=n.checkCondition("checkDropAllowed",{sourceEndpoint:A.endpoints[N],targetEndpoint:this,connection:A});this[(g?"add":"remove")+"Class"](n.endpointDropAllowedClass),this[(g?"remove":"add")+"Class"](n.endpointDropForbiddenClass),A.endpoints[N].anchor.over(this.anchor,this)}}}.bind(this)),b[y]=X.wrap(b[y],function(){var R=h.getDragObject(arguments),P=null==R?null:n.getAttribute(h.getElement(R),"dragId"),A=P?n.getFloatingConnectionFor(P):null;if(null!=A){var N=n.getFloatingAnchorIndex(A);(this.isTarget&&0!==N||A.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===A.suspendedEndpoint.id)&&(this.removeClass(n.endpointDropAllowedClass),this.removeClass(n.endpointDropForbiddenClass),A.endpoints[N].anchor.out())}}.bind(this)),n.initDroppable(F,b,"internal",t)}}.bind(this);return this.anchor.isFloating||U(this.canvas,!(f._transient||this.anchor.isFloating),this,f.reference),this},X.extend(h.Endpoint,h.OverlayCapableJsPlumbUIComponent,{setVisible:function(f,n,x){if(this._jsPlumb.visible=f,this.canvas&&(this.canvas.style.display=f?"block":"none"),this[f?"showOverlays":"hideOverlays"](),!n)for(var T=0;T<this.connections.length;T++)if(this.connections[T].setVisible(f),!x){var j=this===this.connections[T].endpoints[0]?1:0;1===this.connections[T].endpoints[j].connections.length&&this.connections[T].endpoints[j].setVisible(f,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(f,n){this.setPaintStyle(f.endpointStyle||f.paintStyle,n),this.setHoverPaintStyle(f.endpointHoverStyle||f.hoverPaintStyle,n),null!=f.maxConnections&&(this._jsPlumb.maxConnections=f.maxConnections),f.scope&&(this.scope=f.scope),h.extend(this,f,l),null!=f.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,f.cssClass),h.OverlayCapableJsPlumbUIComponent.applyType(this,f)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(f){this._jsPlumb.enabled=f},cleanup:function(){h.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"")),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(f){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(f)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(f){var n=!1;if(f)for(var x=0;x<this.connections.length;x++)if(this.connections[x].endpoints[1]===f||this.connections[x].endpoints[0]===f){n=!0;break}return n},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(f){this._jsPlumb.connectionCost=f},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(f){this._jsPlumb.connectionsDirected=f},setElementId:function(f){this.elementId=f,this.anchor.elementId=f},setReferenceElement:function(f){this.element=h.getElement(f)},setDragAllowedWhenFull:function(f){this.dragAllowedWhenFull=f},equals:function(f){return this.anchor.equals(f.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(f){return this.anchor.compute(f)}}),J.jsPlumbInstance.prototype.EndpointDropHandler=function(f){return function(n){var x=f.jsPlumb;f.removeClass(x.endpointDropAllowedClass),f.removeClass(x.endpointDropForbiddenClass);var T=x.getDropEvent(arguments),j=x.getDragObject(arguments),k=x.getAttribute(j,"dragId"),O=(x.getAttribute(j,"elId"),x.getAttribute(j,"originalScope")),r=x.getFloatingConnectionFor(k);if(null!=r){var e=null!=r.suspendedEndpoint;if(!e||null!=r.suspendedEndpoint._jsPlumb){var I=f.getEndpoint(r);if(null!=I){if(f.isRedrop(r,f))return r._forceReattach=!0,r.setHover(!1),void(f.maybeCleanup&&f.maybeCleanup(I));var M=x.getFloatingAnchorIndex(r);if(0===M&&!f.isSource||1===M&&!f.isTarget)return void(f.maybeCleanup&&f.maybeCleanup(I));f.onDrop&&f.onDrop(r),O&&x.setDragScope(j,O);var U=f.isFull(n);if(U&&I.fire("maxConnections",{endpoint:this,connection:r,maxConnections:I._jsPlumb.maxConnections},T),!U&&f.enabled()){var F=!0;0===M?(r.floatingElement=r.source,r.floatingId=r.sourceId,r.floatingEndpoint=r.endpoints[0],r.floatingIndex=0,r.source=f.element,r.sourceId=x.getId(f.element)):(r.floatingElement=r.target,r.floatingId=r.targetId,r.floatingEndpoint=r.endpoints[1],r.floatingIndex=1,r.target=f.element,r.targetId=x.getId(f.element)),e&&r.suspendedEndpoint.id!==I.id&&(!r.isDetachAllowed(r)||!r.endpoints[M].isDetachAllowed(r)||!r.suspendedEndpoint.isDetachAllowed(r)||!x.checkCondition("beforeDetach",r))&&(F=!1);var t=function(o){r.endpoints[M].detachFromConnection(r),r.suspendedEndpoint&&r.suspendedEndpoint.detachFromConnection(r),r.endpoints[M]=I,I.addConnection(r);var b=I.getParameters();for(var C in b)r.setParameter(C,b[C]);if(e){var v=r.suspendedEndpoint.elementId;x.fireMoveEvent({index:M,originalSourceId:0===M?v:r.sourceId,newSourceId:0===M?I.elementId:r.sourceId,originalTargetId:1===M?v:r.targetId,newTargetId:1===M?I.elementId:r.targetId,originalSourceEndpoint:0===M?r.suspendedEndpoint:r.endpoints[0],newSourceEndpoint:0===M?I:r.endpoints[0],originalTargetEndpoint:1===M?r.suspendedEndpoint:r.endpoints[1],newTargetEndpoint:1===M?I:r.endpoints[1],connection:r},T)}else b.draggable&&x.initDraggable(this.element,f.dragOptions,"internal",x);1===M?x.router.sourceOrTargetChanged(r.floatingId,r.targetId,r,r.target,1):x.router.sourceOrTargetChanged(r.floatingId,r.sourceId,r,r.source,0),r.endpoints[0].finalEndpoint&&(r.endpoints[0].detachFromConnection(r),r.endpoints[0]=r.endpoints[0].finalEndpoint,r.endpoints[0].addConnection(r)),X.isObject(o)&&r.mergeData(o),x.finaliseConnection(r,null,T,!1),r.setHover(!1),x.revalidate(r.endpoints[0].element)}.bind(this);if(F=F&&f.isDropAllowed(r.sourceId,r.targetId,r.scope,r,I))return t(F),!0;r.suspendedEndpoint&&(r.endpoints[M]=r.suspendedEndpoint,r.setHover(!1),r._forceDetach=!0,0===M?(r.source=r.suspendedEndpoint.element,r.sourceId=r.suspendedEndpoint.elementId):(r.target=r.suspendedEndpoint.element,r.targetId=r.suspendedEndpoint.elementId),r.suspendedEndpoint.addConnection(r),1===M?x.router.sourceOrTargetChanged(r.floatingId,r.targetId,r,r.target,1):x.router.sourceOrTargetChanged(r.floatingId,r.sourceId,r,r.source,0),x.repaint(r.sourceId),r._forceDetach=!1)}f.maybeCleanup&&f.maybeCleanup(I),x.currentlyDragging=!1}}}}}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,h=J.jsPlumb,X=J.jsPlumbUtil,ot=function(l,D,f,n,x){if(h.Connectors[D]=h.Connectors[D]||{},null==h.Connectors[D][f]){if(null==h.Connectors[f]){if(l.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+f+"'")}h.Connectors[D][f]=function(){h.Connectors[f].apply(this,arguments),h.ConnectorRenderers[D].apply(this,arguments)},X.extend(h.Connectors[D][f],[h.Connectors[f],h.ConnectorRenderers[D]])}return new h.Connectors[D][f](n,x)},Z=function(l,D,f){return l?f.makeAnchor(l,D,f):null},tt=function(l,D,f,n){null!=D&&(D._jsPlumbConnections=D._jsPlumbConnections||{},n?delete D._jsPlumbConnections[l.id]:D._jsPlumbConnections[l.id]=!0,X.isEmpty(D._jsPlumbConnections)?f.removeClass(D,f.connectedClass):f.addClass(D,f.connectedClass))};h.Connection=function(l){var D=l.newEndpoint;this.id=l.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=l.previousConnection,this.source=h.getElement(l.source),this.target=h.getElement(l.target),h.OverlayCapableJsPlumbUIComponent.apply(this,arguments),l.sourceEndpoint?(this.source=l.sourceEndpoint.getElement(),this.sourceId=l.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),l.targetEndpoint?(this.target=l.targetEndpoint.getElement(),this.targetId=l.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=l.scope,this.endpoints=[],this.endpointStyles=[];var f=this._jsPlumb.instance;f.manage(this.sourceId,this.source),f.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:l.cssClass,container:l.container,"pointer-events":l["pointer-events"],editorParams:l.editorParams,overlays:l.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(b,C,v,y,m){return v=v||this._jsPlumb.instance.getId(C),this.prepareEndpoint(f,D,this,y,b?0:1,l,C,v,m)},l.type&&(l.endpoints=l.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(l.type).endpoints);var n=this.makeEndpoint(!0,this.source,this.sourceId,l.sourceEndpoint),x=this.makeEndpoint(!1,this.target,this.targetId,l.targetEndpoint);n&&X.addToList(l.endpointsByElement,this.sourceId,n),x&&X.addToList(l.endpointsByElement,this.targetId,x),this.scope||(this.scope=this.endpoints[0].scope),null!=l.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(l.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(l.deleteEndpointsOnEmpty));var T=f.Defaults.ConnectionsDetachable;!1===l.detachable&&(T=!1),!1===this.endpoints[0].connectionsDetachable&&(T=!1),!1===this.endpoints[1].connectionsDetachable&&(T=!1),this.appendToDefaultType({detachable:T,reattach:l.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||f.Defaults.ReattachConnections,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||l.paintStyle||f.Defaults.PaintStyle||h.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||l.hoverPaintStyle||f.Defaults.HoverPaintStyle||h.Defaults.HoverPaintStyle});var k=f.getSuspendedAt();if(!f.isSuspendDrawing()){var G=f.getCachedData(this.sourceId),O=G.o,r=G.s,e=f.getCachedData(this.targetId),I=e.o,M=e.s,U=k||jsPlumbUtil.uuid(),F=this.endpoints[0].anchor.compute({xy:[O.left,O.top],wh:r,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[I.left,I.top],twh:M,tElement:this.endpoints[1],timestamp:U,rotation:f.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:F,timestamp:U}),F=this.endpoints[1].anchor.compute({xy:[I.left,I.top],wh:M,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[O.left,O.top],twh:r,tElement:this.endpoints[0],timestamp:U,rotation:f.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:F,timestamp:U})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(b){return!1!==this._jsPlumb.detachable&&(null!=b?!0===b.connectionsDetachable:!0===this._jsPlumb.detachable)},this.setDetachable=function(b){this._jsPlumb.detachable=!0===b},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(b){this._jsPlumb.reattach=!0===b},this._jsPlumb.cost=l.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=l.directed,null==l.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var t=h.extend({},this.endpoints[1].getParameters());h.extend(t,this.endpoints[0].getParameters()),h.extend(t,this.getParameters()),this.setParameters(t),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||l.connector||f.Defaults.Connector||h.Defaults.Connector,!0);var u=null!=l.data&&X.isObject(l.data)?l.data:{};this.getData=function(){return u},this.setData=function(b){u=b||{}},this.mergeData=function(b){u=h.extend(u,b)};var o=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,l.type].join(" ");/[^\s]/.test(o)&&this.addType(o,l.data,!0),this.updateConnectedClass()},X.extend(h.Connection,h.OverlayCapableJsPlumbUIComponent,{applyType:function(l,D,f){var n=null;null!=l.connector&&(null==(n=this.getCachedTypeItem("connector",f.connector))&&(n=this.prepareConnector(l.connector,f.connector),this.cacheTypeItem("connector",n,f.connector)),this.setPreparedConnector(n)),null!=l.detachable&&this.setDetachable(l.detachable),null!=l.reattach&&this.setReattach(l.reattach),l.scope&&(this.scope=l.scope),null!=l.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,l.cssClass);var x=null;l.anchor?null==(x=this.getCachedTypeItem("anchors",f.anchor))&&(x=[this._jsPlumb.instance.makeAnchor(l.anchor),this._jsPlumb.instance.makeAnchor(l.anchor)],this.cacheTypeItem("anchors",x,f.anchor)):l.anchors&&null==(x=this.getCachedTypeItem("anchors",f.anchors))&&(x=[this._jsPlumb.instance.makeAnchor(l.anchors[0]),this._jsPlumb.instance.makeAnchor(l.anchors[1])],this.cacheTypeItem("anchors",x,f.anchors)),null!=x&&(this.endpoints[0].anchor=x[0],this.endpoints[1].anchor=x[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),h.OverlayCapableJsPlumbUIComponent.applyType(this,l)},addClass:function(l,D){D&&(this.endpoints[0].addClass(l),this.endpoints[1].addClass(l),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(l)),this.connector&&this.connector.addClass(l)},removeClass:function(l,D){D&&(this.endpoints[0].removeClass(l),this.endpoints[1].removeClass(l),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(l)),this.connector&&this.connector.removeClass(l)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(l){this._jsPlumb.visible=l,this.connector&&this.connector.setVisible(l),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(l){this._jsPlumb&&(tt(this,this.source,this._jsPlumb.instance,l),tt(this,this.target,this._jsPlumb.instance,l))},setHover:function(l){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(l),J.jsPlumb[l?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),J.jsPlumb[l?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(l){this._jsPlumb.cost=l},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(l,D){var x,f={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},n=this._jsPlumb.instance.getRenderMode();return X.isString(l)?x=ot(this._jsPlumb.instance,n,l,f,this):X.isArray(l)&&(x=ot(this._jsPlumb.instance,n,l[0],1===l.length?f:X.merge(l[1],f),this)),null!=D&&(x.typeId=D),x},setPreparedConnector:function(l,D,f,n){if(this.connector!==l){var x,T="";if(null!=this.connector&&(T=(x=this.connector).getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=l,n&&this.cacheTypeItem("connector",l,n),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(T),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=x)for(var j=this.getOverlays(),k=0;k<j.length;k++)j[k].transfer&&j[k].transfer(this.connector);f||this.setListenerComponent(this.connector),D||this.repaint()}},setConnector:function(l,D,f,n){var x=this.prepareConnector(l,n);this.setPreparedConnector(x,D,f,n)},paint:function(l){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){var D=(l=l||{}).timestamp,n=this.targetId;if(null==D||D!==this._jsPlumb.lastPaintedAt){var k=this._jsPlumb.instance.updateOffset({elId:this.sourceId}).o,G=this._jsPlumb.instance.updateOffset({elId:n}).o,O=this.endpoints[0],r=this.endpoints[1],e=O.anchor.getCurrentLocation({xy:[k.left,k.top],wh:[k.width,k.height],element:O,timestamp:D,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),I=r.anchor.getCurrentLocation({xy:[G.left,G.top],wh:[G.width,G.height],element:r,timestamp:D,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:e,targetPos:I,sourceOrientation:O.anchor.getOrientation(O),targetOrientation:r.anchor.getOrientation(r),sourceEndpoint:this.endpoints[0],targetEndpoint:this.endpoints[1],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:k,targetInfo:G});var M={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var U in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(U)){var F=this._jsPlumb.overlays[U];F.isVisible()&&(this._jsPlumb.overlayPlacements[U]=F.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(F)),M.minX=Math.min(M.minX,this._jsPlumb.overlayPlacements[U].minX),M.maxX=Math.max(M.maxX,this._jsPlumb.overlayPlacements[U].maxX),M.minY=Math.min(M.minY,this._jsPlumb.overlayPlacements[U].minY),M.maxY=Math.max(M.maxY,this._jsPlumb.overlayPlacements[U].maxY))}var t=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,u=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),o={xmin:Math.min(this.connector.bounds.minX-(t+u),M.minX),ymin:Math.min(this.connector.bounds.minY-(t+u),M.minY),xmax:Math.max(this.connector.bounds.maxX+(t+u),M.maxX),ymax:Math.max(this.connector.bounds.maxY+(t+u),M.maxY)};for(var b in this.connector.paintExtents=o,this.connector.paint(this._jsPlumb.paintStyleInUse,null,o),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(b)){var C=this._jsPlumb.overlays[b];C.isVisible()&&C.paint(this._jsPlumb.overlayPlacements[b],o)}}this._jsPlumb.lastPaintedAt=D}},repaint:function(l){var D=jsPlumb.extend(l||{},{});D.elId=this.sourceId,this.paint(D)},prepareEndpoint:function(l,D,f,n,x,T,j,k,G){var O;if(n)f.endpoints[x]=n,n.addConnection(f);else{T.endpoints||(T.endpoints=[null,null]);var r=G||T.endpoints[x]||T.endpoint||l.Defaults.Endpoints[x]||h.Defaults.Endpoints[x]||l.Defaults.Endpoint||h.Defaults.Endpoint;T.endpointStyles||(T.endpointStyles=[null,null]),T.endpointHoverStyles||(T.endpointHoverStyles=[null,null]);var e=T.endpointStyles[x]||T.endpointStyle||l.Defaults.EndpointStyles[x]||h.Defaults.EndpointStyles[x]||l.Defaults.EndpointStyle||h.Defaults.EndpointStyle;null==e.fill&&null!=T.paintStyle&&(e.fill=T.paintStyle.stroke),null==e.outlineStroke&&null!=T.paintStyle&&(e.outlineStroke=T.paintStyle.outlineStroke),null==e.outlineWidth&&null!=T.paintStyle&&(e.outlineWidth=T.paintStyle.outlineWidth);var I=T.endpointHoverStyles[x]||T.endpointHoverStyle||l.Defaults.EndpointHoverStyles[x]||h.Defaults.EndpointHoverStyles[x]||l.Defaults.EndpointHoverStyle||h.Defaults.EndpointHoverStyle;null!=T.hoverPaintStyle&&(null==I&&(I={}),null==I.fill&&(I.fill=T.hoverPaintStyle.stroke));var M=T.anchors?T.anchors[x]:T.anchor?T.anchor:Z(l.Defaults.Anchors[x],k,l)||Z(h.Defaults.Anchors[x],k,l)||Z(l.Defaults.Anchor,k,l)||Z(h.Defaults.Anchor,k,l);O=D({paintStyle:e,hoverPaintStyle:I,endpoint:r,connections:[f],uuid:T.uuids?T.uuids[x]:null,anchor:M,source:j,scope:T.scope,reattach:T.reattach||l.Defaults.ReattachConnections,detachable:T.detachable||l.Defaults.ConnectionsDetachable}),null==n&&O.setDeleteOnEmpty(!0),f.endpoints[x]=O,!1===T.drawEndpoints&&O.setVisible(!1,!0,!0)}return O},replaceEndpoint:function(l,D){var f=this.endpoints[l],n=f.elementId,x=this._jsPlumb.instance.getEndpoints(n),T=x.indexOf(f),j=this.makeEndpoint(0===l,f.element,n,null,D);this.endpoints[l]=j,x.splice(T,1,j),this._jsPlumb.instance.deleteObject({endpoint:f,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:f,current:j}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,h=J.jsPlumbUtil,X=J.jsPlumb;X.AnchorManager=function(l){var D={},f={},n={},x={},T=this,j={},k=l.jsPlumbInstance,G={},r=function(o,b){return b[0][0]-o[0][0]},e=function(o,b){return(o[0][0]<0?-Math.PI-o[0][0]:Math.PI-o[0][0])-(b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0])},I={top:e,right:r,bottom:r,left:e},U=function(o,b){var C=k.getCachedData(o),v=C.s,y=C.o,m=function(S,R,P,A,N,V,g){if(A.length>0)for(var d=function(o,b){return o.sort(b)}(A,I[S]),p=function(o,b,C,v,y,m,S,R){for(var P=[],A=b[y?0:1]/(v.length+1),N=0;N<v.length;N++){var V=(N+1)*A,g=m*b[y?1:0];S&&(V=b[y?0:1]-V);var d=y?V:g,a=C.left+d,s=d/b[0],p=y?g:V,c=C.top+p,w=p/b[1];if(0!==R){var B=jsPlumbUtil.rotatePoint([a,c],[C.centerx,C.centery],R);a=B[0],c=B[1]}P.push([a,c,s,w,v[N][1],v[N][2]])}return P}(0,R,P,d,N,V,"right"===S||"top"===S,k.getRotation(o)),c=function(Q,et){f[Q.id]=[et[0],et[1],et[2],et[3]],n[Q.id]=g},w=0;w<p.length;w++){var B=p[w][4],W=B.endpoints[1].elementId===o;B.endpoints[0].elementId===o&&c(B.endpoints[0],p[w]),W&&c(B.endpoints[1],p[w])}};m("bottom",v,y,b.bottom,!0,1,[0,1]),m("top",v,y,b.top,!0,0,[0,-1]),m("left",v,y,b.left,!1,0,[-1,0]),m("right",v,y,b.right,!1,1,[1,0])};this.reset=function(){D={},x={},j={}},this.addFloatingConnection=function(o,b){G[o]=b},this.newConnection=function(o){var b=o.sourceId,C=o.targetId,v=o.endpoints,y=!0,m=function(S,R,P,A,N){b===C&&P.isContinuous&&(o._jsPlumb.instance.removeElement(v[1].canvas),y=!1),h.addToList(x,A,[N,R,P.constructor===X.DynamicAnchor])};m(0,v[0],v[0].anchor,C,o),y&&m(0,v[1],v[1].anchor,b,o)};var F=function(o){!function(b,C){if(b){var v=function(y){return y[4]===C};h.removeWithFunction(b.top,v),h.removeWithFunction(b.left,v),h.removeWithFunction(b.bottom,v),h.removeWithFunction(b.right,v)}}(j[o.elementId],o.id)};this.connectionDetached=function(o,b){var C=o.connection||o,y=o.targetId,S=function(R,P,A,N,V){h.removeWithFunction(x[N],function(g){return g[0].id===V.id})};S(0,0,0,o.sourceId,C),S(0,0,0,y,C),C.floatingId&&(S(0,0,0,C.floatingId,C),F(C.floatingEndpoint)),F(C.endpoints[0]),F(C.endpoints[1]),b||(T.redraw(C.sourceId),C.targetId!==C.sourceId&&T.redraw(C.targetId))},this.addEndpoint=function(o,b){h.addToList(D,b,o)},this.changeId=function(o,b){x[b]=x[o],D[b]=D[o],delete x[o],delete D[o]},this.getConnectionsFor=function(o){return x[o]||[]},this.getEndpointsFor=function(o){return D[o]||[]},this.deleteEndpoint=function(o){h.removeWithFunction(D[o.elementId],function(b){return b.id===o.id}),F(o)},this.elementRemoved=function(o){delete G[o],delete D[o],D[o]=[]};var t=function(o,b,C,v,y,m,S,R,P,A,N,V){var H,W,d=-1,a=v.endpoints[S],s=a.id,p=[1,0][S],c=[[b,C],v,y,m,s],w=o[P],B=a._continuousAnchorEdge?o[a._continuousAnchorEdge]:null;if(B){var Q=h.findWithFunction(B,function($){return $[4]===s});if(-1!==Q)for(B.splice(Q,1),H=0;H<B.length;H++)h.addWithFunction(N,W=B[H][1],function($){return $.id===W.id}),h.addWithFunction(V,B[H][1].endpoints[S],function($){return $.id===W.endpoints[S].id}),h.addWithFunction(V,B[H][1].endpoints[p],function($){return $.id===W.endpoints[p].id})}for(H=0;H<w.length;H++)1===l.idx&&w[H][3]===m&&-1===d&&(d=H),h.addWithFunction(N,W=w[H][1],function($){return $.id===W.id}),h.addWithFunction(V,w[H][1].endpoints[S],function($){return $.id===W.endpoints[S].id}),h.addWithFunction(V,w[H][1].endpoints[p],function($){return $.id===W.endpoints[p].id});w.splice(R?-1!==d?d:0:w.length,0,c),a._continuousAnchorEdge=P};this.sourceOrTargetChanged=function(o,b,C,v,y){if(0===y){if(o!==b){C.sourceId=b,C.source=v,h.removeWithFunction(x[o],function(A){return A[0].id===C.id});var m=h.findWithFunction(x[C.targetId],function(A){return A[0].id===C.id});m>-1&&(x[C.targetId][m][0]=C,x[C.targetId][m][1]=C.endpoints[0],x[C.targetId][m][2]=C.endpoints[0].anchor.constructor===X.DynamicAnchor),h.addToList(x,b,[C,C.endpoints[1],C.endpoints[1].anchor.constructor===X.DynamicAnchor]),C.endpoints[1].anchor.isContinuous&&(C.source===C.target?C._jsPlumb.instance.removeElement(C.endpoints[1].canvas):null==C.endpoints[1].canvas.parentNode&&C._jsPlumb.instance.appendElement(C.endpoints[1].canvas)),C.updateConnectedClass()}}else if(1===y){var S=C.endpoints[0].elementId;C.target=v,C.targetId=b;var R=h.findWithFunction(x[S],function(A){return A[0].id===C.id}),P=h.findWithFunction(x[o],function(A){return A[0].id===C.id});-1!==R&&(x[S][R][0]=C,x[S][R][1]=C.endpoints[1],x[S][R][2]=C.endpoints[1].anchor.constructor===X.DynamicAnchor),P>-1&&(x[o].splice(P,1),h.addToList(x,b,[C,C.endpoints[0],C.endpoints[0].anchor.constructor===X.DynamicAnchor])),C.updateConnectedClass()}},this.rehomeEndpoint=function(o,b,C){var v=D[b]||[],y=k.getId(C);if(y!==b){var m=v.indexOf(o);if(m>-1){var S=v.splice(m,1)[0];T.add(S,y)}}for(var R=0;R<o.connections.length;R++)o.connections[R].sourceId===b?T.sourceOrTargetChanged(b,o.elementId,o.connections[R],o.element,0):o.connections[R].targetId===b&&T.sourceOrTargetChanged(b,o.elementId,o.connections[R],o.element,1)},this.redraw=function(o,b,C,v,y,m){var S=[],R=[],P=[];if(!k.isSuspendDrawing()){var A=D[o]||[],N=x[o]||[];C=C||jsPlumbUtil.uuid(),v=v||{left:0,top:0},b&&(b={left:b.left+v.left,top:b.top+v.top});for(var V=k.updateOffset({elId:o,offset:b,recalc:!1,timestamp:C}),g={},d=0;d<N.length;d++){var a=N[d][0],s=a.sourceId,p=a.targetId,c=a.endpoints[0].anchor.isContinuous,w=a.endpoints[1].anchor.isContinuous;if(c||w){var B=s+"_"+p,H=g[B],W=a.sourceId===o?1:0,Q=k.getRotation(p),et=k.getRotation(s);c&&!j[s]&&(j[s]={top:[],right:[],bottom:[],left:[]}),w&&!j[p]&&(j[p]={top:[],right:[],bottom:[],left:[]}),o!==p&&k.updateOffset({elId:p,timestamp:C}),o!==s&&k.updateOffset({elId:s,timestamp:C});var $=k.getCachedData(p),it=k.getCachedData(s);p===s&&(c||w)?(t(j[s],-Math.PI/2,0,a,!1,p,0,!1,"top",0,S,R),t(j[p],-Math.PI/2,0,a,!1,s,1,!1,"top",0,S,R)):(H||(H=this.calculateOrientation(s,p,it.o,$.o,a.endpoints[0].anchor,a.endpoints[1].anchor,a,et,Q),g[B]=H),c&&t(j[s],H.theta,0,a,!1,p,0,!1,H.a[0],0,S,R),w&&t(j[p],H.theta2,-1,a,!0,s,1,!0,H.a[1],0,S,R)),c&&h.addWithFunction(P,s,function(pt){return pt===s}),w&&h.addWithFunction(P,p,function(pt){return pt===p}),h.addWithFunction(S,a,function(pt){return pt.id===a.id}),(c&&0===W||w&&1===W)&&h.addWithFunction(R,a.endpoints[W],function(pt){return pt.id===a.endpoints[W].id})}}for(d=0;d<A.length;d++)0===A[d].connections.length&&A[d].anchor.isContinuous&&(j[o]||(j[o]={top:[],right:[],bottom:[],left:[]}),t(j[o],-Math.PI/2,0,{endpoints:[A[d],A[d]],paint:function(){}},!1,o,0,!1,A[d].anchor.getDefaultFace(),0,S,R),h.addWithFunction(P,o,function(pt){return pt===o}));for(d=0;d<P.length;d++)U(P[d],j[P[d]]);for(d=0;d<A.length;d++)A[d].paint({timestamp:C,offset:V,dimensions:V.s,recalc:!0!==m});for(d=0;d<R.length;d++){var ct=k.getCachedData(R[d].elementId);R[d].paint({timestamp:null,offset:ct,dimensions:ct.s})}for(d=0;d<N.length;d++){var dt=N[d][1];if(dt.anchor.constructor===X.DynamicAnchor){dt.paint({elementWithPrecedence:o,timestamp:C}),h.addWithFunction(S,N[d][0],function(pt){return pt.id===N[d][0].id});for(var gt=0;gt<dt.connections.length;gt++)dt.connections[gt]!==N[d][0]&&h.addWithFunction(S,dt.connections[gt],function(pt){return pt.id===dt.connections[gt].id})}else h.addWithFunction(S,N[d][0],function(pt){return pt.id===N[d][0].id})}var Pt=G[o];for(Pt&&Pt.paint({timestamp:C,recalc:!1,elId:o}),d=0;d<S.length;d++)S[d].paint({elId:o,timestamp:null,recalc:!1,clearEdits:y})}return{c:S,e:R}};var u=function(o){h.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=o.faces||["top","right","bottom","left"],C=!1!==o.clockwise,v={},y={top:"bottom",right:"left",left:"right",bottom:"top"},m={top:"right",right:"bottom",left:"top",bottom:"left"},S={top:"left",right:"top",left:"bottom",bottom:"right"},R=C?m:S,P=C?S:m,A=o.cssClass||"",N=null,V=null,g=["left","right"],d=["top","bottom"],a=null,s=0;s<b.length;s++)v[b[s]]=!0;this.getDefaultFace=function(){return 0===b.length?"top":b[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(p){return v[p]?p:v[y[p]]?y[p]:v[R[p]]?R[p]:v[P[p]]?P[p]:p},this.isEdgeSupported=function(p){return null==a?null==V?!0===v[p]:V===p:-1!==a.indexOf(p)},this.setCurrentFace=function(p,c){N=p,c&&null!=V&&(V=N)},this.getCurrentFace=function(){return N},this.getSupportedFaces=function(){var p=[];for(var c in v)v[c]&&p.push(c);return p},this.lock=function(){V=N},this.unlock=function(){V=null},this.isLocked=function(){return null!=V},this.lockCurrentAxis=function(){null!=N&&(a="left"===N||"right"===N?g:d)},this.unlockCurrentAxis=function(){a=null},this.compute=function(p){return f[p.element.id]||[0,0]},this.getCurrentLocation=function(p){return f[p.element.id]||[0,0]},this.getOrientation=function(p){return n[p.id]||[0,0]},this.getCssClass=function(){return A}};k.continuousAnchorFactory={get:function(o){return new u(o)},clear:function(o){delete f[o]}}},X.AnchorManager.prototype.calculateOrientation=function(l,D,f,n,x,T,j,k,G){var r=["left","top","right","bottom"];if(l===D)return{orientation:"identity",a:["top","top"]};var e=Math.atan2(n.centery-f.centery,n.centerx-f.centerx),I=Math.atan2(f.centery-n.centery,f.centerx-n.centerx),M=[],U={};!function(C,v){for(var y=0;y<C.length;y++)if(U[C[y]]={left:[v[y][0].left,v[y][0].centery],right:[v[y][0].right,v[y][0].centery],top:[v[y][0].centerx,v[y][0].top],bottom:[v[y][0].centerx,v[y][0].bottom]},0!==v[y][1])for(var m in U[C[y]])U[C[y]][m]=jsPlumbUtil.rotatePoint(U[C[y]][m],[v[y][0].centerx,v[y][0].centery],v[y][1])}(["source","target"],[[f,k],[n,G]]);for(var F=0;F<r.length;F++)for(var t=0;t<r.length;t++)M.push({source:r[F],target:r[t],dist:Biltong.lineLength(U.source[r[F]],U.target[r[t]])});M.sort(function(C,v){return C.dist<v.dist?-1:C.dist>v.dist?1:0});for(var u=M[0].source,o=M[0].target,b=0;b<M.length&&(u=x.isContinuous&&x.locked?x.getCurrentFace():!x.isContinuous||x.isEdgeSupported(M[b].source)?M[b].source:null,o=T.isContinuous&&T.locked?T.getCurrentFace():!T.isContinuous||T.isEdgeSupported(M[b].target)?M[b].target:null,null==u||null==o);b++);return x.isContinuous&&x.setCurrentFace(u),T.isContinuous&&T.setCurrentFace(o),{a:[u,o],theta:e,theta2:I}},X.Anchor=function(l){this.x=l.x||0,this.y=l.y||0,this.elementId=l.elementId,this.cssClass=l.cssClass||"",this.orientation=l.orientation||[0,0],this.lastReturnValue=null,this.offsets=l.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=!1!==l.relocatable,this.snapOnRelocate=!1!==l.snapOnRelocate,this.locked=!1,h.EventGenerator.apply(this),this.compute=function(D){var f=D.xy,n=D.wh,x=D.timestamp;if(x&&x===this.timestamp)return this.lastReturnValue;var T=[f[0]+this.x*n[0]+this.offsets[0],f[1]+this.y*n[1]+this.offsets[1],this.x,this.y],j=D.rotation;if(null!=j&&0!==j){var k=jsPlumbUtil.rotatePoint(T,[f[0]+n[0]/2,f[1]+n[1]/2],j);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*k[2]-this._unrotatedOrientation[1]*k[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*k[2]+this._unrotatedOrientation[0]*k[3]),this.lastReturnValue=[k[0],k[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=T;return this.timestamp=x,this.lastReturnValue},this.getCurrentLocation=function(D){return D=D||{},null==this.lastReturnValue||null!=D.timestamp&&this.timestamp!==D.timestamp?this.compute(D):this.lastReturnValue},this.setPosition=function(D,f,n,x,T){(!this.locked||T)&&(this.x=D,this.y=f,this.orientation=[n,x],this.lastReturnValue=null)}},h.extend(X.Anchor,h.EventGenerator,{equals:function(l){if(!l)return!1;var D=l.getOrientation(),f=this.getOrientation();return this.x===l.x&&this.y===l.y&&this.offsets[0]===l.offsets[0]&&this.offsets[1]===l.offsets[1]&&f[0]===D[0]&&f[1]===D[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),X.FloatingAnchor=function(l){X.Anchor.apply(this,arguments);var D=l.reference,n=X.getSize(l.referenceCanvas),j=null,k=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(G){var O=G.xy,r=[O[0]+n[0]/2,O[1]+n[1]/2];return k=r,r},this.getOrientation=function(G){if(j)return j;var O=D.getOrientation(G);return[0*Math.abs(O[0])*-1,0*Math.abs(O[1])*-1]},this.over=function(G,O){j=G.getOrientation(O)},this.out=function(){j=null},this.getCurrentLocation=function(G){return k??this.compute(G)}},h.extend(X.FloatingAnchor,X.Anchor);var ot=function(l,D,f){return l.constructor===X.Anchor?l:D.makeAnchor(l,f,D)};X.DynamicAnchor=function(l){X.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=l.elementId,this.jsPlumbInstance=l.jsPlumbInstance;for(var D=0;D<l.anchors.length;D++)this.anchors[D]=ot(l.anchors[D],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var f=this.anchors.length>0?this.anchors[0]:null,n=f,T=function(k,G,O,r,e,I,M){var U=r[0]+k.x*e[0],F=r[1]+k.y*e[1],t=r[0]+e[0]/2,u=r[1]+e[1]/2;if(null!=I&&0!==I){var o=jsPlumbUtil.rotatePoint([U,F],[t,u],I);U=o[0],F=o[1]}return Math.sqrt(Math.pow(G-U,2)+Math.pow(O-F,2))+Math.sqrt(Math.pow(t-U,2)+Math.pow(u-F,2))},j=l.selector||function(k,G,O,r,e,I,M){for(var U=O[0]+r[0]/2,F=O[1]+r[1]/2,t=-1,u=1/0,o=0;o<M.length;o++){var b=T(M[o],U,F,k,G,e);b<u&&(t=o+0,u=b)}return M[t]};this.compute=function(k){var G=k.xy,O=k.wh,r=k.txy,e=k.twh,I=k.rotation,M=k.tRotation;return this.timestamp=k.timestamp,this.locked||null==r||null==e?(this.lastReturnValue=f.compute(k),this.lastReturnValue):(k.timestamp=null,f=j(G,O,r,e,I,M,this.anchors),this.x=f.x,this.y=f.y,f!==n&&this.fire("anchorChanged",f),n=f,this.lastReturnValue=f.compute(k),this.lastReturnValue)},this.getCurrentLocation=function(k){return null!=f?f.getCurrentLocation(k):null},this.getOrientation=function(k){return null!=f?f.getOrientation(k):[0,0]},this.over=function(k,G){f?.over(k,G)},this.out=function(){f?.out()},this.setAnchor=function(k){f=k},this.getCssClass=function(){return f&&f.getCssClass()||""},this.setAnchorCoordinates=function(k){var G=jsPlumbUtil.findWithFunction(this.anchors,function(O){return O.x===k[0]&&O.y===k[1]});return-1!==G&&(this.setAnchor(this.anchors[G]),!0)}},h.extend(X.DynamicAnchor,X.Anchor);var Z=function(l,D,f,n,x,T){X.Anchors[x]=function(j){var k=j.jsPlumbInstance.makeAnchor([l,D,f,n,0,0],j.elementId,j.jsPlumbInstance);return k.type=x,T&&T(k,j),k}};Z(.5,0,0,-1,"TopCenter"),Z(.5,1,0,1,"BottomCenter"),Z(0,.5,-1,0,"LeftMiddle"),Z(1,.5,1,0,"RightMiddle"),Z(.5,0,0,-1,"Top"),Z(.5,1,0,1,"Bottom"),Z(0,.5,-1,0,"Left"),Z(1,.5,1,0,"Right"),Z(.5,.5,0,0,"Center"),Z(1,0,0,-1,"TopRight"),Z(1,1,0,1,"BottomRight"),Z(0,0,0,-1,"TopLeft"),Z(0,1,0,1,"BottomLeft"),X.Defaults.DynamicAnchors=function(l){return l.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],l.elementId,l.jsPlumbInstance)},X.Anchors.AutoDefault=function(l){var D=l.jsPlumbInstance.makeDynamicAnchor(X.Defaults.DynamicAnchors(l));return D.type="AutoDefault",D};var tt=function(l,D){X.Anchors[l]=function(f){var n=f.jsPlumbInstance.makeAnchor(["Continuous",{faces:D}],f.elementId,f.jsPlumbInstance);return n.type=l,n}};X.Anchors.Continuous=function(l){return l.jsPlumbInstance.continuousAnchorFactory.get(l)},tt("ContinuousLeft",["left"]),tt("ContinuousTop",["top"]),tt("ContinuousBottom",["bottom"]),tt("ContinuousRight",["right"]),Z(0,0,0,0,"Assign",function(l,D){var f=D.position||"Fixed";l.positionFinder=f.constructor===String?D.jsPlumbInstance.AnchorPositionFinders[f]:f,l.constructorParams=D}),J.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(l,D,f){return[(l.left-D.left)/f[0],(l.top-D.top)/f[1]]},Grid:function(l,D,f,n){var T=l.top-D.top,j=f[0]/n.grid[0],k=f[1]/n.grid[1],G=Math.floor((l.left-D.left)/j),O=Math.floor(T/k);return[(G*j+j/2)/f[0],(O*k+k/2)/f[1]]}},X.Anchors.Perimeter=function(l){var D=(l=l||{}).anchorCount||60,f=l.shape;if(!f)throw new Error("no shape supplied to Perimeter Anchor type");var n=function(){for(var e=.5,I=2*Math.PI/D,M=0,U=[],F=0;F<D;F++){var t=e+e*Math.sin(M),u=e+e*Math.cos(M);U.push([t,u,0,0]),M+=I}return U},x=function(e){for(var I=D/e.length,M=[],U=function(t,u,o,b,C,v,y){for(var m=(o-t)/(I=D*C),S=(b-u)/I,R=0;R<I;R++)M.push([t+m*R,u+S*R,v??0,y??0])},F=0;F<e.length;F++)U.apply(null,e[F]);return M},T=function(e){for(var I=[],M=0;M<e.length;M++)I.push([e[M][0],e[M][1],e[M][2],e[M][3],1/e.length,e[M][4],e[M][5]]);return x(I)},j=function(){return T([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},k={Circle:n,Ellipse:n,Diamond:function(){return T([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:j,Square:j,Triangle:function(){return T([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(e){for(var I=e.points,M=[],U=0,F=0;F<I.length-1;F++){var t=Math.sqrt(Math.pow(I[F][2]-I[F][0])+Math.pow(I[F][3]-I[F][1]));U+=t,M.push([I[F][0],I[F][1],I[F+1][0],I[F+1][1],t])}for(var u=0;u<M.length;u++)M[u][4]=M[u][4]/U;return x(M)}};if(!k[f])throw new Error("Shape ["+f+"] is unknown by Perimeter Anchor type");var O=k[f](l);l.rotation&&(O=function(e,I){for(var M=[],U=I/180*Math.PI,F=0;F<e.length;F++){var t=e[F][0]-.5,u=e[F][1]-.5;M.push([t*Math.cos(U)-u*Math.sin(U)+.5,t*Math.sin(U)+u*Math.cos(U)+.5,e[F][2],e[F][3]])}return M}(O,l.rotation));var r=l.jsPlumbInstance.makeDynamicAnchor(O);return r.type="Perimeter",r}}.call(typeof window<"u"?window:this),function(){"use strict";var X=this.jsPlumb;X.DefaultRouter=function(ot){this.jsPlumbInstance=ot,this.anchorManager=new X.AnchorManager({jsPlumbInstance:ot}),this.sourceOrTargetChanged=function(Z,tt,l,D,f){this.anchorManager.sourceOrTargetChanged(Z,tt,l,D,f)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(Z,tt){this.anchorManager.changeId(Z,tt)},this.elementRemoved=function(Z){this.anchorManager.elementRemoved(Z)},this.newConnection=function(Z){this.anchorManager.newConnection(Z)},this.connectionDetached=function(Z,tt){this.anchorManager.connectionDetached(Z,tt)},this.redraw=function(Z,tt,l,D,f,n){return this.anchorManager.redraw(Z,tt,l,D,f,n)},this.deleteEndpoint=function(Z){this.anchorManager.deleteEndpoint(Z)},this.rehomeEndpoint=function(Z,tt,l){this.anchorManager.rehomeEndpoint(Z,tt,l)},this.addEndpoint=function(Z,tt){this.anchorManager.addEndpoint(Z,tt)}}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,h=J.jsPlumb,X=J.jsPlumbUtil,ot=J.Biltong;h.Segments={AbstractSegment:function(n){this.params=n,this.findClosestPointOnPath=function(x,T){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(n.x1,n.x2),minY:Math.min(n.y1,n.y2),maxX:Math.max(n.x1,n.x2),maxY:Math.max(n.y1,n.y2)}},this.lineIntersection=function(x,T,j,k){return[]},this.boxIntersection=function(x,T,j,k){var G=[];return G.push.apply(G,this.lineIntersection(x,T,x+j,T)),G.push.apply(G,this.lineIntersection(x+j,T,x+j,T+k)),G.push.apply(G,this.lineIntersection(x+j,T+k,x,T+k)),G.push.apply(G,this.lineIntersection(x,T+k,x,T)),G},this.boundingBoxIntersection=function(x){return this.boxIntersection(x.x,x.y,x.w,x.y)}},Straight:function(n){var T,j,k,G,O,r,e;h.Segments.AbstractSegment.apply(this,arguments),this.type="Straight",this.getLength=function(){return T},this.getGradient=function(){return j},this.getCoordinates=function(){return{x1:G,y1:r,x2:O,y2:e}},this.setCoordinates=function(u){G=u.x1,r=u.y1,O=u.x2,e=u.y2,T=Math.sqrt(Math.pow(O-G,2)+Math.pow(e-r,2)),j=ot.gradient({x:G,y:r},{x:O,y:e}),k=-1/j},this.setCoordinates({x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}),this.getBounds=function(){return{minX:Math.min(G,O),minY:Math.min(r,e),maxX:Math.max(G,O),maxY:Math.max(r,e)}},this.pointOnPath=function(u,o){return 0!==u||o?1!==u||o?ot.pointOnLine({x:G,y:r},{x:O,y:e},o?u>0?u:T+u:u*T):{x:O,y:e}:{x:G,y:r}},this.gradientAtPoint=function(u){return j},this.pointAlongPathFrom=function(u,o,b){var C=this.pointOnPath(u,b),v=o<=0?{x:G,y:r}:{x:O,y:e};return o<=0&&Math.abs(o)>1&&(o*=-1),ot.pointOnLine(C,v,o)};var M=function(u,o,b){return b>=Math.min(u,o)&&b<=Math.max(u,o)},U=function(u,o,b){return Math.abs(b-u)<Math.abs(b-o)?u:o};this.findClosestPointOnPath=function(u,o){var b={d:1/0,x:null,y:null,l:null,x1:G,x2:O,y1:r,y2:e};if(0===j)b.y=r,b.x=M(G,O,u)?u:U(G,O,u);else if(j===1/0||j===-1/0)b.x=G,b.y=M(r,e,o)?o:U(r,e,o);else{var C=r-j*G,y=(o-k*u-C)/(j-k),m=j*y+C;b.x=M(G,O,y)?y:U(G,O,y),b.y=M(r,e,m)?m:U(r,e,m)}var S=ot.lineLength([b.x,b.y],[G,r]);return b.d=ot.lineLength([u,o],[b.x,b.y]),b.l=S/T,b};var t=function(u,o,b){return b>o?o<=u&&u<=b:o>=u&&u>=b};this.lineIntersection=function(u,o,b,C){var v=Math.abs(ot.gradient({x:u,y:o},{x:b,y:C})),y=Math.abs(j),m=y===1/0?G:r-y*G,S=[],R=v===1/0?u:o-v*u;if(v!==y)if(v===1/0&&0===y)t(u,G,O)&&t(r,o,C)&&(S=[u,r]);else if(0===v&&y===1/0)t(o,r,e)&&t(G,u,b)&&(S=[G,o]);else{var P,A;v===1/0?t(P=u,G,O)&&t(A=y*u+m,o,C)&&(S=[P,A]):0===v?t(A=o,r,e)&&t(P=(o-m)/y,u,b)&&(S=[P,A]):(A=y*(P=(R-m)/(y-v))+m,t(P,G,O)&&t(A,r,e)&&(S=[P,A]))}return S},this.boxIntersection=function(u,o,b,C){var v=[];return v.push.apply(v,this.lineIntersection(u,o,u+b,o)),v.push.apply(v,this.lineIntersection(u+b,o,u+b,o+C)),v.push.apply(v,this.lineIntersection(u+b,o+C,u,o+C)),v.push.apply(v,this.lineIntersection(u,o+C,u,o)),v},this.boundingBoxIntersection=function(u){return this.boxIntersection(u.x,u.y,u.w,u.h)}},Arc:function(n){h.Segments.AbstractSegment.apply(this,arguments);var T=function(U,F){return ot.theta([n.cx,n.cy],[U,F])},k=2*Math.PI;this.radius=n.r,this.anticlockwise=n.ac,this.type="Arc",n.startAngle&&n.endAngle?(this.startAngle=n.startAngle,this.endAngle=n.endAngle,this.x1=n.cx+this.radius*Math.cos(n.startAngle),this.y1=n.cy+this.radius*Math.sin(n.startAngle),this.x2=n.cx+this.radius*Math.cos(n.endAngle),this.y2=n.cy+this.radius*Math.sin(n.endAngle)):(this.startAngle=T(n.x1,n.y1),this.endAngle=T(n.x2,n.y2),this.x1=n.x1,this.y1=n.y1,this.x2=n.x2,this.y2=n.y2),this.endAngle<0&&(this.endAngle+=k),this.startAngle<0&&(this.startAngle+=k),this.sweep=Math.abs((this.endAngle<this.startAngle?this.endAngle+k:this.endAngle)-this.startAngle),this.anticlockwise&&(this.sweep=k-this.sweep);var O=2*Math.PI*this.radius,e=O*(this.sweep/k);this.getLength=function(){return e},this.getBounds=function(){return{minX:n.cx-n.r,maxX:n.cx+n.r,minY:n.cy-n.r,maxY:n.cy+n.r}};var M=function(U){var F=Math.floor(U),t=Math.ceil(U);return U-F<1e-10?F:t-U<1e-10?t:U};this.pointOnPath=function(U,F){if(0===U)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===U)return{x:this.x2,y:this.y2,theta:this.endAngle};F&&(U/=e);var t=function(U,F){if(U.anticlockwise){var t=U.startAngle<U.endAngle?U.startAngle+k:U.startAngle;return t-Math.abs(t-U.endAngle)*F}var b=Math.abs((U.endAngle<U.startAngle?U.endAngle+k:U.endAngle)-U.startAngle);return U.startAngle+b*F}(this,U),u=n.cx+n.r*Math.cos(t),o=n.cy+n.r*Math.sin(t);return{x:M(u),y:M(o),theta:t}},this.gradientAtPoint=function(U,F){var t=this.pointOnPath(U,F),u=ot.normal([n.cx,n.cy],[t.x,t.y]);return!this.anticlockwise&&(u===1/0||u===-1/0)&&(u*=-1),u},this.pointAlongPathFrom=function(U,F,t){var u=this.pointOnPath(U,t),o=F/O*2*Math.PI,C=u.theta+(this.anticlockwise?-1:1)*o;return{x:n.cx+this.radius*Math.cos(C),y:n.cy+this.radius*Math.sin(C)}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];var T=function(e,I){return Math.sqrt(Math.pow(e.x-I.x,2)+Math.pow(e.y-I.y,2))},j=function(e){var I={x:0,y:0};if(0===e)return this.curve[0];var M=this.curve.length-1;if(1===e)return this.curve[M];var U=this.curve,F=1-e;if(0===M)return this.curve[0];if(1===M)return{x:F*U[0].x+e*U[1].x,y:F*U[0].y+e*U[1].y};if(M<4){var b,C,v,t=F*F,u=e*e,o=0;return 2===M?(U=[U[0],U[1],U[2],I],b=t,C=F*e*2,v=u):3===M&&(b=t*F,C=t*e*3,v=F*u*3,o=e*u),{x:b*U[0].x+C*U[1].x+v*U[2].x+o*U[3].x,y:b*U[0].y+C*U[1].y+v*U[2].y+o*U[3].y}}return I}.bind(this),G=function(){var e;(e=this.curve)[0].x===e[1].x&&e[0].y===e[1].y&&(this.length=0);var I=function(){var I=[];for(var M=0;M<=15;M++)I.push(j(M/15));return I}();this.length=0;for(var M=0;M<15;M++)this.length+=T(I[M],I[M+1])}.bind(this);h.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier",G();var r=function(e,I,M){return M&&(I=J.jsBezier.locationAlongCurveFrom(e,I>0?0:1,I)),I};this.pointOnPath=function(e,I){return e=r(this.curve,e,I),J.jsBezier.pointOnCurve(this.curve,e)},this.gradientAtPoint=function(e,I){return e=r(this.curve,e,I),J.jsBezier.gradientAtPoint(this.curve,e)},this.pointAlongPathFrom=function(e,I,M){return e=r(this.curve,e,M),J.jsBezier.pointAlongCurveFrom(this.curve,e,I)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(e,I){var M=J.jsBezier.nearestPointOnCurve({x:e,y:I},this.curve);return{d:Math.sqrt(Math.pow(M.point.x-e,2)+Math.pow(M.point.y-I,2)),x:M.point.x,y:M.point.y,l:1-M.location,s:this}},this.lineIntersection=function(e,I,M,U){return J.jsBezier.lineIntersection(e,I,M,U,this.curve)}}},h.SegmentRenderer={getPath:function(n,x){return{Straight:function(T){var j=n.getCoordinates();return(T?"M "+j.x1+" "+j.y1+" ":"")+"L "+j.x2+" "+j.y2},Bezier:function(T){var j=n.params;return(T?"M "+j.x2+" "+j.y2+" ":"")+"C "+j.cp2x+" "+j.cp2y+" "+j.cp1x+" "+j.cp1y+" "+j.x1+" "+j.y1},Arc:function(T){var k=n.sweep>Math.PI?1:0;return(T?"M"+n.x1+" "+n.y1+" ":"")+"A "+n.radius+" "+n.params.r+" 0 "+k+","+(n.anticlockwise?0:1)+" "+n.x2+" "+n.y2}}[n.type](x)}};var Z=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};h.Connectors.AbstractConnector=function(n){Z.apply(this,arguments);var x=[],T=0,j=[],k=[],G=n.stub||0,O=X.isArray(G)?G[0]:G,r=X.isArray(G)?G[1]:G,e=n.gap||0,I=X.isArray(e)?e[0]:e,M=X.isArray(e)?e[1]:e,U=null,F=null;this.getPathData=function(){for(var y="",m=0;m<x.length;m++)y+=h.SegmentRenderer.getPath(x[m],0===m),y+=" ";return y},this.findSegmentForPoint=function(y,m){for(var S={d:1/0,s:null,x:null,y:null,l:null},R=0;R<x.length;R++){var P=x[R].findClosestPointOnPath(y,m);P.d<S.d&&(S.d=P.d,S.l=P.l,S.x=P.x,S.y=P.y,S.s=x[R],S.x1=P.x1,S.x2=P.x2,S.y1=P.y1,S.y2=P.y2,S.index=R,S.connectorLocation=j[R][0]+P.l*(j[R][1]-j[R][0]))}return S},this.lineIntersection=function(y,m,S,R){for(var P=[],A=0;A<x.length;A++)P.push.apply(P,x[A].lineIntersection(y,m,S,R));return P},this.boxIntersection=function(y,m,S,R){for(var P=[],A=0;A<x.length;A++)P.push.apply(P,x[A].boxIntersection(y,m,S,R));return P},this.boundingBoxIntersection=function(y){for(var m=[],S=0;S<x.length;S++)m.push.apply(m,x[S].boundingBoxIntersection(y));return m};var u=function(y,m){var S,R,P;if(m&&(y=y>0?y/T:(T+y)/T),1===y)S=x.length-1,P=1;else if(0===y)P=0,S=0;else if(y>=.5){for(S=0,P=0,R=j.length-1;R>-1;R--)if(j[R][1]>=y&&j[R][0]<=y){S=R,P=(y-j[R][0])/k[R];break}}else for(S=j.length-1,P=1,R=0;R<j.length;R++)if(j[R][1]>=y){S=R,P=(y-j[R][0])/k[R];break}return{segment:x[S],proportion:P,index:S}};this.setSegments=function(y){U=[],T=0;for(var m=0;m<y.length;m++)U.push(y[m]),T+=y[m].getLength()},this.getLength=function(){return T};var C=function(y){this.strokeWidth=y.strokeWidth;var m=ot.quadrant(y.sourcePos,y.targetPos),S=y.targetPos[0]<y.sourcePos[0],R=y.targetPos[1]<y.sourcePos[1],P=y.strokeWidth||1,A=y.sourceEndpoint.anchor.getOrientation(y.sourceEndpoint),N=y.targetEndpoint.anchor.getOrientation(y.targetEndpoint),V=S?y.targetPos[0]:y.sourcePos[0],g=R?y.targetPos[1]:y.sourcePos[1],d=Math.abs(y.targetPos[0]-y.sourcePos[0]),a=Math.abs(y.targetPos[1]-y.sourcePos[1]);if(0===A[0]&&0===A[1]||0===N[0]&&0===N[1]){var s=d>a?0:1,p=[1,0][s];N=[],(A=[])[s]=y.sourcePos[s]>y.targetPos[s]?-1:1,N[s]=y.sourcePos[s]>y.targetPos[s]?1:-1,A[p]=0,N[p]=0}var c=S?d+I*A[0]:I*A[0],w=R?a+I*A[1]:I*A[1],B=S?M*N[0]:d+M*N[0],H=R?M*N[1]:a+M*N[1],W=A[0]*N[0]+A[1]*N[1],Q={sx:c,sy:w,tx:B,ty:H,lw:P,xSpan:Math.abs(B-c),ySpan:Math.abs(H-w),mx:(c+B)/2,my:(w+H)/2,so:A,to:N,x:V,y:g,w:d,h:a,segment:m,startStubX:c+A[0]*O,startStubY:w+A[1]*O,endStubX:B+N[0]*r,endStubY:H+N[1]*r,isXGreaterThanStubTimes2:Math.abs(c-B)>O+r,isYGreaterThanStubTimes2:Math.abs(w-H)>O+r,opposite:-1===W,perpendicular:0===W,orthogonal:1===W,sourceAxis:0===A[0]?"y":"x",points:[V,g,d,a,c,w,B,H],stubs:[O,r]};return Q.anchorOrientation=Q.opposite?"opposite":Q.orthogonal?"orthogonal":"perpendicular",Q};return this.getSegments=function(){return x},this.updateBounds=function(y){var m=y.getBounds();this.bounds.minX=Math.min(this.bounds.minX,m.minX),this.bounds.maxX=Math.max(this.bounds.maxX,m.maxX),this.bounds.minY=Math.min(this.bounds.minY,m.minY),this.bounds.maxY=Math.max(this.bounds.maxY,m.maxY)},this.pointOnPath=function(y,m){var S=u(y,m);return S.segment&&S.segment.pointOnPath(S.proportion,!1)||[0,0]},this.gradientAtPoint=function(y,m){var S=u(y,m);return S.segment&&S.segment.gradientAtPoint(S.proportion,!1)||0},this.pointAlongPathFrom=function(y,m,S){var R=u(y,S);return R.segment&&R.segment.pointAlongPathFrom(R.proportion,m,!1)||[0,0]},this.compute=function(y){F=C.call(this,y),T=x.length=j.length=k.length=0,this._compute(F,y),this.x=F.points[0],this.y=F.points[1],this.w=F.points[2],this.h=F.points[3],this.segment=F.segment,function(){for(var y=0,m=0;m<x.length;m++){var S=x[m].getLength();k[m]=S/T,j[m]=[y,y+=S/T]}}()},{addSegment:function(y,m,S){if(S.x1!==S.x2||S.y1!==S.y2){var R=new h.Segments[m](S);x.push(R),T+=R.getLength(),y.updateBounds(R)}},prepareCompute:C,sourceStub:O,targetStub:r,maxStub:Math.max(O,r),sourceGap:I,targetGap:M,maxGap:Math.max(I,M)}},X.extend(h.Connectors.AbstractConnector,Z),h.Endpoints.AbstractEndpoint=function(n){Z.apply(this,arguments);var x=this.compute=function(T,j,k,G){var O=this._compute.apply(this,arguments);return this.x=O[0],this.y=O[1],this.w=O[2],this.h=O[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,O};return{compute:x,cssClass:n.cssClass}},X.extend(h.Endpoints.AbstractEndpoint,Z),h.Endpoints.Dot=function(n){this.type="Dot",h.Endpoints.AbstractEndpoint.apply(this,arguments),this.radius=(n=n||{}).radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(T,j,k,G){this.radius=k.radius||this.radius;var O=T[0]-this.radius,r=T[1]-this.radius,e=2*this.radius,I=2*this.radius;if(k.stroke){var M=k.strokeWidth||1;O-=M,r-=M,e+=2*M,I+=2*M}return[O,r,e,I,this.radius]}},X.extend(h.Endpoints.Dot,h.Endpoints.AbstractEndpoint),h.Endpoints.Rectangle=function(n){this.type="Rectangle",h.Endpoints.AbstractEndpoint.apply(this,arguments),this.width=(n=n||{}).width||20,this.height=n.height||20,this._compute=function(T,j,k,G){var O=k.width||this.width,r=k.height||this.height;return[T[0]-O/2,T[1]-r/2,O,r]}},X.extend(h.Endpoints.Rectangle,h.Endpoints.AbstractEndpoint);var tt=function(n){h.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};X.extend(tt,h.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(n){this._jsPlumb.displayElements.push(n)}}),h.Endpoints.Image=function(n){this.type="Image",tt.apply(this,arguments),h.Endpoints.AbstractEndpoint.apply(this,arguments);var x=n.onload,T=n.src||n.url,j=n.cssClass?" "+n.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=n.width,this._jsPlumb.heightToUse=n.height,this._jsPlumb.endpoint=n.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,x&&x(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(k,G){x=G,this._jsPlumb.img.src=k.constructor===String?k:k.src,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(T,x),this._compute=function(k,G,O,r){return this.anchorPoint=k,this._jsPlumb.ready?[k[0]-this._jsPlumb.widthToUse/2,k[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=h.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+j),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(k,G,O){this._jsPlumb.deleted||(this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0),X.sizeElement(this.canvas,this.anchorPoint[0]-this._jsPlumb.widthToUse/2,this.anchorPoint[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse))},this.paint=function(k,G){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(k,G):J.setTimeout(function(){this.paint(k,G)}.bind(this),200))}},X.extend(h.Endpoints.Image,[tt,h.Endpoints.AbstractEndpoint],{cleanup:function(n){n&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),h.Endpoints.Blank=function(n){h.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",tt.apply(this,arguments),this._compute=function(j,k,G,O){return[j[0],j[1],10,0]},this.canvas=h.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+(n.cssClass?" "+n.cssClass:"")),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(j,k){X.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},X.extend(h.Endpoints.Blank,[h.Endpoints.AbstractEndpoint,tt],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),h.Endpoints.Triangle=function(n){this.type="Triangle",h.Endpoints.AbstractEndpoint.apply(this,arguments);var x=this;(n=n||{}).width=n.width||55,n.height=n.height||55,this.width=n.width,this.height=n.height,this._compute=function(T,j,k,G){var O=k.width||x.width,r=k.height||x.height;return[T[0]-O/2,T[1]-r/2,O,r]}};var l=h.Overlays.AbstractOverlay=function(n){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=n.component,this.loc=null==n.location?.5:n.location,this.endpointLoc=null==n.endpointLocation?[.5,.5]:n.endpointLocation,this.visible=!1!==n.visible};l.prototype={cleanup:function(n){n&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(n,x){},setVisible:function(n){this.visible=n,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(n){this.loc+=n,this.component.repaint()},setLocation:function(n){this.loc=n,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},h.Overlays.Arrow=function(n){this.type="Arrow",l.apply(this,arguments),this.isAppendedAtTopLevel=!1;var x=this;this.length=(n=n||{}).length||20,this.width=n.width||20,this.id=n.id,this.direction=(n.direction||1)<0?-1:1;var T=n.paintStyle||{"stroke-width":1},j=n.foldback||.623;this.computeMaxSize=function(){return 1.5*x.width},this.elementCreated=function(k,G){if(this.path=k,n.events)for(var O in n.events)h.on(k,O,n.events[O])},this.draw=function(k,G){var O,r,e,I;if(k.pointAlongPathFrom){if(X.isString(this.loc)||this.loc>1||this.loc<0){var U=parseInt(this.loc,10),F=this.loc<0?1:0;O=k.pointAlongPathFrom(F,U,!1),r=k.pointAlongPathFrom(F,U-this.direction*this.length/2,!1),e=ot.pointOnLine(O,r,this.length)}else if(1===this.loc){if(O=k.pointOnPath(this.loc),r=k.pointAlongPathFrom(this.loc,-this.length),e=ot.pointOnLine(O,r,this.length),-1===this.direction){var t=e;e=O,O=t}}else if(0===this.loc){if(e=k.pointOnPath(this.loc),r=k.pointAlongPathFrom(this.loc,this.length),O=ot.pointOnLine(e,r,this.length),-1===this.direction){var u=e;e=O,O=u}}else O=k.pointAlongPathFrom(this.loc,this.direction*this.length/2),r=k.pointOnPath(this.loc),e=ot.pointOnLine(O,r,this.length);return{component:k,d:{hxy:O,tail:I=ot.perpendicularLineTo(O,e,this.width),cxy:ot.pointOnLine(O,e,j*this.length)},"stroke-width":T.strokeWidth||G.strokeWidth,stroke:T.stroke||G.stroke,fill:T.fill||G.stroke,minX:Math.min(O.x,I[0].x,I[1].x),maxX:Math.max(O.x,I[0].x,I[1].x),minY:Math.min(O.y,I[0].y,I[1].y),maxY:Math.max(O.y,I[0].y,I[1].y)}}return{component:k,minX:0,maxX:0,minY:0,maxY:0}}},X.extend(h.Overlays.Arrow,l,{updateFrom:function(n){this.length=n.length||this.length,this.width=n.width||this.width,this.direction=null!=n.direction?n.direction:this.direction,this.foldback=n.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),h.Overlays.PlainArrow=function(n){var x=h.extend(n=n||{},{foldback:1});h.Overlays.Arrow.call(this,x),this.type="PlainArrow"},X.extend(h.Overlays.PlainArrow,h.Overlays.Arrow),h.Overlays.Diamond=function(n){var T=h.extend(n=n||{},{length:(n.length||40)/2,foldback:2});h.Overlays.Arrow.call(this,T),this.type="Diamond"},X.extend(h.Overlays.Diamond,h.Overlays.Arrow);var D=function(n,x){return(null==n._jsPlumb.cachedDimensions||x)&&(n._jsPlumb.cachedDimensions=n.getDimensions()),n._jsPlumb.cachedDimensions},f=function(n){h.jsPlumbUIComponent.apply(this,arguments),l.apply(this,arguments);var x=this.fire;this.fire=function(){x.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=n.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=n.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=n.create,this._jsPlumb.initiallyInvisible=!1===n.visible,this.getElement=function(){if(null==this._jsPlumb.div){var T=this._jsPlumb.div=h.getElement(this._jsPlumb.create(this._jsPlumb.component));T.style.position="absolute",jsPlumb.addClass(T,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:n.cssClass?n.cssClass:"")),this._jsPlumb.instance.appendElement(T),this._jsPlumb.instance.getId(T),this.canvas=T;var j="translate(-50%, -50%)";T.style.webkitTransform=j,T.style.mozTransform=j,T.style.msTransform=j,T.style.oTransform=j,T.style.transform=j,T._jsPlumb=this,!1===n.visible&&(T.style.display="none")}return this._jsPlumb.div},this.draw=function(T,j,k){var G=D(this);if(null!=G&&2===G.length){var O={x:0,y:0};if(k)O={x:k[0],y:k[1]};else if(T.pointOnPath){var r=this.loc,e=!1;(X.isString(this.loc)||this.loc<0||this.loc>1)&&(r=parseInt(this.loc,10),e=!0),O=T.pointOnPath(r,e)}else{var I=this.loc.constructor===Array?this.loc:this.endpointLoc;O={x:I[0]*T.w,y:I[1]*T.h}}var M=O.x-G[0]/2,U=O.y-G[1]/2;return{component:T,d:{minx:M,miny:U,td:G,cxy:O},minX:M,maxX:M+G[0],minY:U,maxY:U+G[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};X.extend(f,[h.jsPlumbUIComponent,l],{getDimensions:function(){return[1,1]},setVisible:function(n){this._jsPlumb.div&&(this._jsPlumb.div.style.display=n?"block":"none",n&&this._jsPlumb.initiallyInvisible&&(D(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(n){n?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(n,x){null!=this._jsPlumb.div&&n.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var n=D(this);return Math.max(n[0],n[1])},paint:function(n,x){this._jsPlumb.initialised||(this.getElement(),n.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=n.component.x+n.d.minx+"px",this._jsPlumb.div.style.top=n.component.y+n.d.miny+"px"}}),h.Overlays.Custom=function(n){this.type="Custom",f.apply(this,arguments)},X.extend(h.Overlays.Custom,f),h.Overlays.GuideLines=function(){var n=this;n.length=50,n.strokeWidth=5,this.type="GuideLines",l.apply(this,arguments),h.jsPlumbUIComponent.apply(this,arguments),this.draw=function(x,T){var j=x.pointAlongPathFrom(n.loc,n.length/2),k=x.pointOnPath(n.loc),G=ot.pointOnLine(j,k,n.length),O=ot.perpendicularLineTo(j,G,40),r=ot.perpendicularLineTo(G,j,20);return{connector:x,head:j,tail:G,headLine:r,tailLine:O,minX:Math.min(j.x,G.x,r[0].x,r[1].x),minY:Math.min(j.y,G.y,r[0].y,r[1].y),maxX:Math.max(j.x,G.x,r[0].x,r[1].x),maxY:Math.max(j.y,G.y,r[0].y,r[1].y)}}},h.Overlays.Label=function(n){this.labelStyle=n.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var G=h.extend({create:function(){return h.createElement("div")}},n);if(h.Overlays.Custom.call(this,G),this.type="Label",this.label=n.label||"",this.labelText=null,this.labelStyle){var O=this.getElement();this.labelStyle.font=this.labelStyle.font||"12px sans-serif",O.style.font=this.labelStyle.font,O.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(O.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0&&(O.style.border=this.labelStyle.borderWidth+"px solid "+(this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black")),this.labelStyle.padding&&(O.style.padding=this.labelStyle.padding)}},X.extend(h.Overlays.Label,h.Overlays.Custom,{cleanup:function(n){n&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(n){this.label=n,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),f.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var n=this.label(this);this.getElement().innerHTML=n.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(n){null!=n.label&&this.setLabel(n.label)}})}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,h=J.jsPlumbUtil,X=J.jsPlumbInstance,ot="jtk-group-collapsed",Z="jtk-group-expanded",D="stop",f="revert",n="_groupManager",x="_jsPlumbGroup",b=function(v){var y={},m={},S={},R=this;function P(a,s){for(var p=v.getContainer();;){if(null==a||a===p)return!1;if(a===s)return!0;a=a.parentNode}}function N(a,s){for(var p=a.getEl().querySelectorAll(".jtk-managed"),c=0;c<p.length;c++)v[s?"show":"hide"](p[c],!0)}v.bind("connection",function(a){var s=v.getGroupFor(a.source),p=v.getGroupFor(a.target);null!=s&&null!=p&&s===p?(m[a.connection.id]=s,S[a.connection.id]=s):(null!=s&&(h.suggest(s.connections.source,a.connection),m[a.connection.id]=s),null!=p&&(h.suggest(p.connections.target,a.connection),S[a.connection.id]=p))}),v.bind("internal.connectionDetached",function(a){!function A(a){delete a.proxies;var p,s=m[a.id];null!=s&&(h.removeWithFunction(s.connections.source,p=function(c){return c.id===a.id}),h.removeWithFunction(s.connections.target,p),delete m[a.id]),null!=(s=S[a.id])&&(h.removeWithFunction(s.connections.source,p=function(c){return c.id===a.id}),h.removeWithFunction(s.connections.target,p),delete S[a.id])}(a.connection)}),v.bind("connectionMoved",function(a){var p=(0===a.index?m:S)[a.connection.id];if(p){var c=p.connections[0===a.index?"source":"target"],w=c.indexOf(a.connection);-1!==w&&c.splice(w,1)}}),this.addGroup=function(a){v.addClass(a.getEl(),Z),y[a.id]=a,a.manager=this,d(a),v.fire("group:add",{group:a})},this.addToGroup=function(a,s,p){if(a=this.getGroup(a)){var c=a.getEl();if(s._isJsPlumbGroup)return;var w=s._jsPlumbGroup;if(w!==a){v.removeFromDragSelection(s);var B=v.getOffset(s,!0),H=v.getOffset(a.collapsed?c:a.getDragArea(),!0);null!=w&&(w.remove(s,!1,p,!1,a),R.updateConnectionsForGroup(w)),a.add(s,p);var W=function(it,ct){var dt=0===ct?1:0;it.each(function(gt){gt.setVisible(!1),gt.endpoints[dt].element._jsPlumbGroup===a?(gt.endpoints[dt].setVisible(!1),g(gt,dt,a)):(gt.endpoints[ct].setVisible(!1),V(gt,ct,a))})};a.collapsed&&(W(v.select({source:s}),0),W(v.select({target:s}),1));var Q=v.getId(s);v.dragManager.setParent(s,Q,c,v.getId(c),B);var et={left:B.left-H.left,top:B.top-H.top};if(v.setPosition(s,et),v.dragManager.revalidateParent(s,Q,B),R.updateConnectionsForGroup(a),v.revalidate(Q),!p){var $={group:a,el:s,pos:et};w&&($.sourceGroup=w),v.fire("group:addMember",$)}}}},this.removeFromGroup=function(a,s,p){if(a=this.getGroup(a)){if(a.collapsed){var c=function(w,B){for(var H=0;H<w.length;H++){var W=w[H];if(W.proxies)for(var Q=0;Q<W.proxies.length;Q++)if(null!=W.proxies[Q]){var et=W.proxies[Q].originalEp.element;(et===s||P(et,s))&&g(W,B,a)}}};c(a.connections.source.slice(),0),c(a.connections.target.slice(),1)}a.remove(s,null,p)}},this.getGroup=function(a){var s=a;if(h.isString(a)&&null==(s=y[a]))throw new TypeError("No such group ["+a+"]");return s},this.getGroups=function(){var a=[];for(var s in y)a.push(y[s]);return a},this.removeGroup=function(a,s,p,c){a=this.getGroup(a),this.expandGroup(a,!0);var w=a[s?"removeAll":"orphanAll"](p,c);return v.remove(a.getEl()),delete y[a.id],delete v._groups[a.id],v.fire("group:remove",{group:a}),w},this.removeAllGroups=function(a,s,p){for(var c in y)this.removeGroup(y[c],a,s,p)};var V=function(a,s,p){var c=a.endpoints[0===s?1:0].element;if(!c[x]||c[x].shouldProxy()||!c[x].collapsed){var w=p.getEl(),B=v.getId(w);v.proxyConnection(a,s,w,B,function(H,W){return p.getEndpoint(H,W)},function(H,W){return p.getAnchor(H,W)})}};this.collapseGroup=function(a){if(null!=(a=this.getGroup(a))&&!a.collapsed){var s=a.getEl();if(N(a,!1),a.shouldProxy()){var p=function(c,w){for(var B=0;B<c.length;B++)V(c[B],w,a)};p(a.connections.source,0),p(a.connections.target,1)}a.collapsed=!0,v.removeClass(s,Z),v.addClass(s,ot),v.revalidate(s),v.fire("group:collapse",{group:a})}};var g=function(a,s,p){v.unproxyConnection(a,s,v.getId(p.getEl()))};function d(a){for(var s=a.getMembers().slice(),p=[],c=0;c<s.length;c++)Array.prototype.push.apply(p,s[c].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(s,p);var w=v.getConnections({source:s,scope:"*"},!0),B=v.getConnections({target:s,scope:"*"},!0),H={};a.connections.source.length=0,a.connections.target.length=0;var W=function(Q){for(var et=0;et<Q.length;et++)if(!H[Q[et].id]){H[Q[et].id]=!0;var $=v.getGroupFor(Q[et].source),it=v.getGroupFor(Q[et].target);$===a?(it!==a&&a.connections.source.push(Q[et]),m[Q[et].id]=a):it===a&&(a.connections.target.push(Q[et]),S[Q[et].id]=a)}};W(w),W(B)}this.expandGroup=function(a,s){if(null!=(a=this.getGroup(a))&&a.collapsed){var p=a.getEl();if(N(a,!0),a.shouldProxy()){var c=function(w,B){for(var H=0;H<w.length;H++)g(w[H],B,a)};c(a.connections.source,0),c(a.connections.target,1)}a.collapsed=!1,v.addClass(p,Z),v.removeClass(p,ot),v.revalidate(p),this.repaintGroup(a),s||v.fire("group:expand",{group:a})}},this.repaintGroup=function(a){for(var s=(a=this.getGroup(a)).getMembers(),p=0;p<s.length;p++)v.revalidate(s[p])},this.updateConnectionsForGroup=d,this.refreshAllGroups=function(){for(var a in y)d(y[a]),v.dragManager.updateOffsets(v.getId(y[a].getEl()))}},C=function(v,y){var m=this,S=y.el;this.getEl=function(){return S},this.id=y.id||h.uuid(),S._isJsPlumbGroup=!0;var R=this.getDragArea=function(){var it=v.getSelector(S,"[jtk-group-content]");return it&&it.length>0?it[0]:S},P=!0===y.ghost,A=P||!0===y.constrain,N=!1!==y.revert,V=!0===y.orphan,g=!0===y.prune,d=!0===y.dropOverride,a=!1!==y.proxied,s=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(it,ct){return y.anchor||"Continuous"},this.getEndpoint=function(it,ct){return y.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==y.draggable){var p={drag:function(){for(var it=0;it<s.length;it++)v.draw(s[it])},stop:function(it){v.fire("groupDragStop",jsPlumb.extend(it,{group:m}))},scope:"_jsPlumbGroupDrag"};y.dragOptions&&J.jsPlumb.extend(p,y.dragOptions),v.draggable(y.el,p)}!1!==y.droppable&&v.droppable(y.el,{drop:function(it){var ct=it.drag.el;if(!ct._isJsPlumbGroup){var dt=ct._jsPlumbGroup;if(dt!==m){if(null!=dt&&dt.overrideDrop(ct,m))return;v.getGroupManager().addToGroup(m,ct,!1)}}}});var c=function(it,ct){for(var dt=null==it.nodeType?it:[it],gt=0;gt<dt.length;gt++)ct(dt[gt])};function B(it,ct){var dt=function w(it){return it.offsetParent}(it),gt=v.getSize(dt),Pt=v.getSize(it),pt=ct[0],K=ct[1];return pt+Pt[0]>0&&pt<gt[0]&&K+Pt[1]>0&&K<gt[1]}function H(it){var ct=v.getId(it),dt=v.getOffset(it);return it.parentNode.removeChild(it),v.getContainer().appendChild(it),v.setPosition(it,dt),et(it),v.dragManager.clearParent(it,ct),[ct,dt]}function W(it){var ct=[];function dt(Pt,pt,yt){var K=null;if(!B(Pt,[pt,yt])){var q=Pt._jsPlumbGroup;g?v.remove(Pt):K=H(Pt),q.remove(Pt)}return K}for(var gt=0;gt<it.selection.length;gt++)ct.push(dt(it.selection[gt][0],it.selection[gt][1].left,it.selection[gt][1].top));return 1===ct.length?ct[0]:ct}function Q(it){var ct=v.getId(it);v.revalidate(it),v.dragManager.revalidateParent(it,ct)}function et(it){it._katavorioDrag&&((g||V)&&it._katavorioDrag.off(D,W),!g&&!V&&N&&(it._katavorioDrag.off(f,Q),it._katavorioDrag.setRevert(null)))}function $(it){it._katavorioDrag&&((g||V)&&it._katavorioDrag.on(D,W),A&&it._katavorioDrag.setConstrain(!0),P&&it._katavorioDrag.setUseGhostProxy(!0),!g&&!V&&N&&(it._katavorioDrag.on(f,Q),it._katavorioDrag.setRevert(function(ct,dt){return!B(ct,dt)})))}this.overrideDrop=function(it,ct){return d&&(N||g||V)},this.add=function(it,ct){var dt=R();c(it,function(gt){if(null!=gt._jsPlumbGroup){if(gt._jsPlumbGroup===m)return;gt._jsPlumbGroup.remove(gt,!0,ct,!1)}gt._jsPlumbGroup=m,s.push(gt),v.isAlreadyDraggable(gt)&&$(gt),gt.parentNode!==dt&&dt.appendChild(gt)}),v.getGroupManager().updateConnectionsForGroup(m)},this.remove=function(it,ct,dt,gt,Pt){c(it,function(pt){if(pt._jsPlumbGroup===m){if(delete pt._jsPlumbGroup,h.removeWithFunction(s,function(K){return K===pt}),ct)try{m.getDragArea().removeChild(pt)}catch(K){jsPlumbUtil.log("Could not remove element from Group "+K)}if(et(pt),!dt){var yt={group:m,el:pt};Pt&&(yt.targetGroup=Pt),v.fire("group:removeMember",yt)}}}),gt||v.getGroupManager().updateConnectionsForGroup(m)},this.removeAll=function(it,ct){for(var dt=0,gt=s.length;dt<gt;dt++){var Pt=s[0];m.remove(Pt,it,ct,!0),v.remove(Pt,!0)}s.length=0,v.getGroupManager().updateConnectionsForGroup(m)},this.orphanAll=function(){for(var it={},ct=0;ct<s.length;ct++){var dt=H(s[ct]);it[dt[0]]=dt[1]}return s.length=0,it},this.getMembers=function(){return s},S[x]=this,v.bind("elementDraggable",function(it){it.el._jsPlumbGroup===this&&$(it.el)}.bind(this)),this.shouldProxy=function(){return a},v.getGroupManager().addGroup(this)};X.prototype.addGroup=function(v){var y=this;if(y._groups=y._groups||{},null!=y._groups[v.id])throw new TypeError("cannot create Group ["+v.id+"]; a Group with that ID exists");if(null!=v.el[x])throw new TypeError("cannot create Group ["+v.id+"]; the given element is already a Group");var m=new C(y,v);return y._groups[m.id]=m,v.collapsed&&this.collapseGroup(m),m},X.prototype.addToGroup=function(v,y,m){var S=function(P){var A=this.getId(P);this.manage(A,P),this.getGroupManager().addToGroup(v,P,m)}.bind(this);if(Array.isArray(y))for(var R=0;R<y.length;R++)S(y[R]);else S(y)},X.prototype.removeFromGroup=function(v,y,m){this.getGroupManager().removeFromGroup(v,y,m),this.getContainer().appendChild(y)},X.prototype.removeGroup=function(v,y,m,S){return this.getGroupManager().removeGroup(v,y,m,S)},X.prototype.removeAllGroups=function(v,y,m){this.getGroupManager().removeAllGroups(v,y,m)},X.prototype.getGroup=function(v){return this.getGroupManager().getGroup(v)},X.prototype.getGroups=function(){return this.getGroupManager().getGroups()},X.prototype.expandGroup=function(v){this.getGroupManager().expandGroup(v)},X.prototype.collapseGroup=function(v){this.getGroupManager().collapseGroup(v)},X.prototype.repaintGroup=function(v){this.getGroupManager().repaintGroup(v)},X.prototype.toggleGroup=function(v){null!=(v=this.getGroupManager().getGroup(v))&&this.getGroupManager()[v.collapsed?"expandGroup":"collapseGroup"](v)},X.prototype.getGroupManager=function(){var v=this[n];return null==v&&(v=this[n]=new b(this)),v},X.prototype.removeGroupManager=function(){delete this[n]},X.prototype.getGroupFor=function(v){if(v=this.getElement(v)){for(var y=this.getContainer(),m=!1,S=null;!m;)null==v||v===y?m=!0:v[x]?(S=v[x],m=!0):v=v.parentNode;return S}}}.call(typeof window<"u"?window:this),function(){"use strict";var h=this.jsPlumb,X=this.jsPlumbUtil,ot="Straight";h.Connectors.Flowchart=function(l){this.type="Flowchart",(l=l||{}).stub=null==l.stub?30:l.stub;var D,f=h.Connectors.AbstractConnector.apply(this,arguments),n=null==l.midpoint||isNaN(l.midpoint)?.5:l.midpoint,x=!0===l.alwaysRespectStubs,T=null,j=null,G=null!=l.cornerRadius?l.cornerRadius:0,e=function(u){return u<0?-1:0===u?0:1},I=function(u){return[e(u[2]-u[0]),e(u[3]-u[1])]},M=function(u,o,b,C){if(T!==o||j!==b){var v=T??C.sx,y=j??C.sy;T=o,j=b,u.push([v,y,o,b,v===o?"v":"h"])}},U=function(u){return Math.sqrt(Math.pow(u[0]-u[2],2)+Math.pow(u[1]-u[3],2))},F=function(u){var o=[];return o.push.apply(o,u),o};this.midpoint=n,this._compute=function(u,o){D=[],T=null,j=null;var b=function(){return[u.startStubX,u.startStubY,u.endStubX,u.endStubY]},v={perpendicular:b,orthogonal:b,opposite:function(p){var c=u,w="x"===p?0:1;return!x&&{x:function(){return 1===c.so[w]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||-1===c.so[w]&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1===c.so[w]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||-1===c.so[w]&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}}[p]()?{x:[(u.sx+u.tx)/2,u.startStubY,(u.sx+u.tx)/2,u.endStubY],y:[u.startStubX,(u.sy+u.ty)/2,u.endStubX,(u.sy+u.ty)/2]}[p]:[u.startStubX,u.startStubY,u.endStubX,u.endStubY]}}[u.anchorOrientation](u.sourceAxis),y="x"===u.sourceAxis?0:1,m="x"===u.sourceAxis?1:0,S=v[y],R=v[m],P=v[y+2],A=v[m+2];M(D,v[0],v[1],u);var N=u.startStubX+(u.endStubX-u.startStubX)*n,V=u.startStubY+(u.endStubY-u.startStubY)*n,g={x:[0,1],y:[1,0]},a={perpendicular:function(p){var B={x:[[u.startStubX,u.endStubX],null,[u.endStubX,u.startStubX]],y:[[u.startStubY,u.endStubY],null,[u.endStubY,u.startStubY]]},$={x:[u.startStubY,u.endStubY],y:[u.startStubX,u.endStubX]},ct=g[p][1],dt=u.so[g[p][0]]+1,Pt=-1===u.to[ct]&&$[p][1]<$[p][0]||1===u.to[ct]&&$[p][1]>$[p][0],pt=B[p][dt][0],yt=B[p][dt][1],K={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[p][dt][u.to[ct]+1];return u.segment===K[3]||u.segment===K[2]&&Pt?{x:[[N,u.startStubY],[N,u.endStubY]],y:[[u.startStubX,V],[u.endStubX,V]]}[p]:u.segment===K[2]&&yt<pt?{x:[[u.endStubX,u.startStubY]],y:[[u.startStubX,u.endStubY]]}[p]:u.segment===K[2]&&yt>=pt||u.segment===K[1]&&!Pt?{x:[[u.startStubX,V],[u.endStubX,V],[u.endStubX,u.endStubY]],y:[[N,u.startStubY],[N,u.endStubY],[u.endStubX,u.endStubY]]}[p]:u.segment===K[0]||u.segment===K[1]&&Pt?{x:[[u.startStubX,u.endStubY],[u.endStubX,u.endStubY]],y:[[u.endStubX,u.startStubY],[u.endStubX,u.endStubY]]}[p]:void 0},orthogonal:function(p,c,w,B,H){var W=u,Q={x:-1===W.so[0]?Math.min(c,B):Math.max(c,B),y:-1===W.so[1]?Math.min(c,B):Math.max(c,B)}[p];return{x:[[Q,w],[Q,H],[B,H]],y:[[w,Q],[H,Q],[H,B]]}[p]},opposite:function(p,c,w,B){var H=u,W={x:"y",y:"x"}[p],Q={x:"height",y:"width"}[p],et=H["is"+p.toUpperCase()+"GreaterThanStubTimes2"];if(o.sourceEndpoint.elementId===o.targetEndpoint.elementId){var $=w+(1-o.sourceEndpoint.anchor[W])*o.sourceInfo[Q]+f.maxStub;return{x:[[c,$],[B,$]],y:[[$,c],[$,B]]}[p]}return!et||1===H.so[y]&&c>B||-1===H.so[y]&&c<B?{x:[[c,V],[B,V]],y:[[N,c],[N,B]]}[p]:1===H.so[y]&&c<B||-1===H.so[y]&&c>B?{x:[[N,H.sy],[N,H.ty]],y:[[H.sx,V],[H.tx,V]]}[p]:void 0}}[u.anchorOrientation](u.sourceAxis,S,R,P,A);if(a)for(var s=0;s<a.length;s++)M(D,a[s][0],a[s][1],u);M(D,v[2],v[3],u),M(D,u.tx,u.ty,u),function(u,o,b){for(var v,y,m,C=null,S=0;S<o.length-1;S++){if(C=C||F(o[S]),v=F(o[S+1]),y=I(C),m=I(v),G>0&&C[4]!==v[4]){var R=Math.min(U(C),U(v)),P=Math.min(G,R/2);C[2]-=y[0]*P,C[3]-=y[1]*P,v[0]+=m[0]*P,v[1]+=m[1]*P;var A=y[1]===m[0]&&1===m[0]||y[1]===m[0]&&0===m[0]&&y[0]!==m[1]||y[1]===m[0]&&-1===m[0],g=(v[1]>C[3]?1:-1)==(v[0]>C[2]?1:-1),d=g&&A||!g&&!A?v[0]:C[2],a=g&&A||!g&&!A?C[3]:v[1];f.addSegment(u,ot,{x1:C[0],y1:C[1],x2:C[2],y2:C[3]}),f.addSegment(u,"Arc",{r:P,x1:C[2],y1:C[3],x2:v[0],y2:v[1],cx:d,cy:a,ac:A})}else{var s=C[2]===C[0]?0:C[2]>C[0]?b.lw/2:-b.lw/2,p=C[3]===C[1]?0:C[3]>C[1]?b.lw/2:-b.lw/2;f.addSegment(u,ot,{x1:C[0]-s,y1:C[1]-p,x2:C[2]+s,y2:C[3]+p})}C=v}null!=v&&f.addSegment(u,ot,{x1:v[0],y1:v[1],x2:v[2],y2:v[3]})}(this,D,u)}},X.extend(h.Connectors.Flowchart,h.Connectors.AbstractConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var h=this.jsPlumb,X=this.jsPlumbUtil;h.Connectors.AbstractBezierConnector=function(Z){var j,tt=!1!==(Z=Z||{}).showLoopback,D=Z.margin||5,n=Z.orientation&&"clockwise"===Z.orientation,x=Z.loopbackRadius||25;return this._compute=function(k,G){var O=G.sourcePos,r=G.targetPos,e=Math.abs(O[0]-r[0]),I=Math.abs(O[1]-r[1]);if(tt&&G.sourceEndpoint.elementId===G.targetEndpoint.elementId){var M=G.sourcePos[0],U=G.sourcePos[1]-D,F=M,t=U-x,u=F-x,o=t-x;e=2*x,I=2*x,k.points[0]=u,k.points[1]=o,k.points[2]=e,k.points[3]=I,j.addSegment(this,"Arc",{loopback:!0,x1:M-u+4,y1:U-o,startAngle:0,endAngle:2*Math.PI,r:x,ac:!n,x2:M-u-4,y2:U-o,cx:F-u,cy:t-o})}else this._computeBezier(k,G,O,r,e,I)},j=h.Connectors.AbstractConnector.apply(this,arguments)},X.extend(h.Connectors.AbstractBezierConnector,h.Connectors.AbstractConnector);var ot=function(Z){Z=Z||{},this.type="Bezier";var tt=h.Connectors.AbstractBezierConnector.apply(this,arguments),l=Z.curviness||150,D=10;this.getCurviness=function(){return l},this._findControlPoint=function(f,n,x,T,j,k,G){var r=[];return k[0]!==G[0]||k[1]===G[1]?(r.push(0===G[0]?x[0]<n[0]?f[0]+D:f[0]-D:f[0]+l*G[0]),r.push(0===G[1]?x[1]<n[1]?f[1]+D:f[1]-D:f[1]+l*k[1])):(r.push(0===k[0]?n[0]<x[0]?f[0]+D:f[0]-D:f[0]-l*k[0]),r.push(0===k[1]?n[1]<x[1]?f[1]+D:f[1]-D:f[1]+l*G[1])),r},this._computeBezier=function(f,n,x,T,j,k){var G,O,r=x[0]<T[0]?j:0,e=x[1]<T[1]?k:0,I=x[0]<T[0]?0:j,M=x[1]<T[1]?0:k;G=this._findControlPoint([r,e],x,T,n.sourceEndpoint,n.targetEndpoint,f.so,f.to),O=this._findControlPoint([I,M],T,x,n.targetEndpoint,n.sourceEndpoint,f.to,f.so),tt.addSegment(this,"Bezier",{x1:r,y1:e,x2:I,y2:M,cp1x:G[0],cp1y:G[1],cp2x:O[0],cp2y:O[1]})}};h.Connectors.Bezier=ot,X.extend(ot,h.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var h=this.jsPlumb,X=this.jsPlumbUtil,tt=function(l){l=l||{},this.type="StateMachine";var j,D=h.Connectors.AbstractBezierConnector.apply(this,arguments),f=l.curviness||10,n=l.margin||5,x=l.proximityLimit||80;this._computeBezier=function(k,G,O,r,e,I){var M=G.sourcePos[0]<G.targetPos[0]?0:e,U=G.sourcePos[1]<G.targetPos[1]?0:I,F=G.sourcePos[0]<G.targetPos[0]?e:0,t=G.sourcePos[1]<G.targetPos[1]?I:0;0===G.sourcePos[2]&&(M-=n),1===G.sourcePos[2]&&(M+=n),0===G.sourcePos[3]&&(U-=n),1===G.sourcePos[3]&&(U+=n),0===G.targetPos[2]&&(F-=n),1===G.targetPos[2]&&(F+=n),0===G.targetPos[3]&&(t-=n),1===G.targetPos[3]&&(t+=n);var u=(M+F)/2,o=(U+t)/2,b=function(l,D,f,n){return l<=f&&n<=D?1:l<=f&&D<=n?2:f<=l&&n>=D?3:4}(M,U,F,t),C=Math.sqrt(Math.pow(F-M,2)+Math.pow(t-U,2));j=function(l,D,f,n,x,T,j,k,G){return k<=G?[l,D]:1===f?n[3]<=0&&x[3]>=1?[l+(n[2]<.5?-1*T:T),D]:n[2]>=1&&x[2]<=0?[l,D+(n[3]<.5?-1*j:j)]:[l+-1*T,D+-1*j]:2===f?n[3]>=1&&x[3]<=0?[l+(n[2]<.5?-1*T:T),D]:n[2]>=1&&x[2]<=0?[l,D+(n[3]<.5?-1*j:j)]:[l+T,D+-1*j]:3===f?n[3]>=1&&x[3]<=0?[l+(n[2]<.5?-1*T:T),D]:n[2]<=0&&x[2]>=1?[l,D+(n[3]<.5?-1*j:j)]:[l+-1*T,D+-1*j]:4===f?n[3]<=0&&x[3]>=1?[l+(n[2]<.5?-1*T:T),D]:n[2]<=0&&x[2]>=1?[l,D+(n[3]<.5?-1*j:j)]:[l+T,D+-1*j]:void 0}(u,o,b,G.sourcePos,G.targetPos,f,f,C,x),D.addSegment(this,"Bezier",{x1:F,y1:t,x2:M,y2:U,cp1x:j[0],cp1y:j[1],cp2x:j[0],cp2y:j[1]})}};h.Connectors.StateMachine=tt,X.extend(tt,h.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var h=this.jsPlumb,X=this.jsPlumbUtil,ot="Straight",Z=function(tt){this.type=ot;var l=h.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(D,f){l.addSegment(this,ot,{x1:D.sx,y1:D.sy,x2:D.startStubX,y2:D.startStubY}),l.addSegment(this,ot,{x1:D.startStubX,y1:D.startStubY,x2:D.endStubX,y2:D.endStubY}),l.addSegment(this,ot,{x1:D.endStubX,y1:D.endStubY,x2:D.tx,y2:D.ty})}};h.Connectors.Straight=Z,X.extend(Z,h.Connectors.AbstractConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var h=this.jsPlumb,X=this.jsPlumbUtil,ot={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Z="stroke-dasharray",tt="dashstyle",n="fill",T="stroke",G="none",e_svg="http://www.w3.org/2000/svg",I=function(m,S){for(var R in S)m.setAttribute(R,""+S[R])},M=function(m,S){return(S=S||{}).version="1.1",S.xmlns=e_svg,h.createElementNS(e_svg,m,null,null,S)},U=function(m){return"position:absolute;left:"+m[0]+"px;top:"+m[1]+"px"},F=function(m){for(var S=m.querySelectorAll(" defs,linearGradient,radialGradient"),R=0;R<S.length;R++)S[R].parentNode.removeChild(S[R])},u=function(m,S,R,P,A){if(S.setAttribute(n,R.fill?R.fill:G),S.setAttribute(T,R.stroke?R.stroke:G),R.gradient?function(m,S,R,P,A){var V,N="jsplumb_gradient_"+A._jsPlumb.instance.idstamp();F(m),V=R.gradient.offset?M("radialGradient",{id:N}):M("linearGradient",{id:N,gradientUnits:"userSpaceOnUse"});var g=M("defs");m.appendChild(g),g.appendChild(V);for(var d=0;d<R.gradient.stops.length;d++){var s=R.gradient.stops[1===A.segment||2===A.segment?d:R.gradient.stops.length-1-d][1],p=M("stop",{offset:Math.floor(100*R.gradient.stops[d][0])+"%","stop-color":s});V.appendChild(p)}S.setAttribute(R.stroke?T:n,"url(#"+N+")")}(m,S,R,0,A):(F(m),S.setAttribute("style","")),R.strokeWidth&&S.setAttribute("stroke-width",R.strokeWidth),R[tt]&&R.strokeWidth&&!R[Z]){var N=-1===R[tt].indexOf(",")?" ":",",V=R[tt].split(N),g="";V.forEach(function(a){g+=Math.floor(a*R.strokeWidth)+N}),S.setAttribute(Z,g)}else R[Z]&&S.setAttribute(Z,R[Z]);for(var d in ot)R[d]&&S.setAttribute(ot[d],R[d])},o=function(m,S,R){m.childNodes.length>R?m.insertBefore(S,m.childNodes[R]):m.appendChild(S)};X.svg={node:M,attr:I,pos:U};var b=function(m){var S=m.pointerEventsSpec||"all",R={};h.jsPlumbUIComponent.apply(this,m.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var P=m.cssClass+" "+(m.originalArgs[0].cssClass||"");this.svg=M("svg",{style:"",width:0,height:0,"pointer-events":S,position:"absolute"}),m.useDivWrapper?(this.canvas=h.createElement("div",{position:"absolute"}),X.sizeElement(this.canvas,0,0,1,1),this.canvas.className=P):(I(this.svg,{class:P}),this.canvas=this.svg),m._jsPlumb.appendElement(this.canvas,m.originalArgs[0].parent),m.useDivWrapper&&this.canvas.appendChild(this.svg);var N=[this.canvas];return this.getDisplayElements=function(){return N},this.appendDisplayElement=function(V){N.push(V)},this.paint=function(V,g,d){if(null!=V){var p,a=[this.x,this.y],s=[this.w,this.h];null!=d&&(d.xmin<0&&(a[0]+=d.xmin),d.ymin<0&&(a[1]+=d.ymin),s[0]=d.xmax+(d.xmin<0?-d.xmin:0),s[1]=d.ymax+(d.ymin<0?-d.ymin:0)),m.useDivWrapper?(X.sizeElement(this.canvas,a[0],a[1],s[0]>0?s[0]:1,s[1]>0?s[1]:1),a[0]=0,a[1]=0,p=U([0,0])):p=U([a[0],a[1]]),R.paint.apply(this,arguments),I(this.svg,{style:p,width:s[0]||1,height:s[1]||1})}},{renderer:R}};X.extend(b,h.jsPlumbUIComponent,{cleanup:function(m){m||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(m){var S=m.getContainer();this.canvas&&null==this.canvas.parentNode&&S.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&S.appendChild(this.bgCanvas)},setVisible:function(m){this.canvas&&(this.canvas.style.display=m?"block":"none")}}),h.ConnectorRenderers.svg=function(m){var S=this;b.apply(this,[{cssClass:m._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:m._jsPlumb}]).renderer.paint=function(P,A,N){var V=S.getSegments(),d=[0,0];if(N.xmin<0&&(d[0]=-N.xmin),N.ymin<0&&(d[1]=-N.ymin),V.length>0){var a={d:S.getPathData(),transform:"translate("+d[0]+","+d[1]+")","pointer-events":m["pointer-events"]||"visibleStroke"},s=null;if(P.outlineStroke){var w=P.strokeWidth+2*(P.outlineWidth||1);delete(s=h.extend({},P)).gradient,s.stroke=P.outlineStroke,s.strokeWidth=w,null==S.bgPath?(S.bgPath=M("path",a),h.addClass(S.bgPath,h.connectorOutlineClass),o(S.svg,S.bgPath,0)):I(S.bgPath,a),u(S.svg,S.bgPath,s,0,S)}null==S.path?(S.path=M("path",a),o(S.svg,S.path,P.outlineStroke?1:0)):I(S.path,a),u(S.svg,S.path,P,0,S)}}},X.extend(h.ConnectorRenderers.svg,b);var C=h.SvgEndpoint=function(m){b.apply(this,[{cssClass:m._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:m._jsPlumb}]).renderer.paint=function(R){var P=h.extend({},R);P.outlineStroke&&(P.stroke=P.outlineStroke),null==this.node?(this.node=this.makeNode(P),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),u(this.svg,this.node,P,0,this),U(this.node)}.bind(this)};X.extend(C,b),h.Endpoints.svg.Dot=function(){h.Endpoints.Dot.apply(this,arguments),C.apply(this,arguments),this.makeNode=function(m){return M("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(m){I(m,{cx:this.w/2,cy:this.h/2,r:this.radius})}},X.extend(h.Endpoints.svg.Dot,[h.Endpoints.Dot,C]),h.Endpoints.svg.Rectangle=function(){h.Endpoints.Rectangle.apply(this,arguments),C.apply(this,arguments),this.makeNode=function(m){return M("rect",{width:this.w,height:this.h})},this.updateNode=function(m){I(m,{width:this.w,height:this.h})}},X.extend(h.Endpoints.svg.Rectangle,[h.Endpoints.Rectangle,C]),h.Endpoints.svg.Image=h.Endpoints.Image,h.Endpoints.svg.Blank=h.Endpoints.Blank,h.Overlays.svg.Label=h.Overlays.Label,h.Overlays.svg.Custom=h.Overlays.Custom;var v=function(m,S){m.apply(this,S),h.jsPlumbUIComponent.apply(this,S),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(A,N){if(A.component.svg&&N){null==this.path&&(this.path=M("path",{"pointer-events":"all"}),A.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,A.component),this.canvas=A.component.svg);var V=S&&1===S.length&&S[0].cssClass||"",g=[0,0];N.xmin<0&&(g[0]=-N.xmin),N.ymin<0&&(g[1]=-N.ymin),I(this.path,{d:P(A.d),class:V,stroke:A.stroke?A.stroke:null,fill:A.fill?A.fill:null,transform:"translate("+g[0]+","+g[1]+")"})}};var P=function(A){return isNaN(A.cxy.x)||isNaN(A.cxy.y)?"":"M"+A.hxy.x+","+A.hxy.y+" L"+A.tail[0].x+","+A.tail[0].y+" L"+A.cxy.x+","+A.cxy.y+" L"+A.tail[1].x+","+A.tail[1].y+" L"+A.hxy.x+","+A.hxy.y};this.transfer=function(A){A.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),A.canvas.appendChild(this.path))}},y={cleanup:function(m){null!=this.path&&(m?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(m,S){this.path&&S.canvas&&S.canvas.appendChild(this.path)},setVisible:function(m){null!=this.path&&(this.path.style.display=m?"block":"none")}};X.extend(v,[h.jsPlumbUIComponent,h.Overlays.AbstractOverlay]),h.Overlays.svg.Arrow=function(){v.apply(this,[h.Overlays.Arrow,arguments])},X.extend(h.Overlays.svg.Arrow,[h.Overlays.Arrow,v],y),h.Overlays.svg.PlainArrow=function(){v.apply(this,[h.Overlays.PlainArrow,arguments])},X.extend(h.Overlays.svg.PlainArrow,[h.Overlays.PlainArrow,v],y),h.Overlays.svg.Diamond=function(){v.apply(this,[h.Overlays.Diamond,arguments])},X.extend(h.Overlays.svg.Diamond,[h.Overlays.Diamond,v],y),h.Overlays.svg.GuideLines=function(){var R,P,m=null,S=this;h.Overlays.GuideLines.apply(this,arguments),this.paint=function(N,V){null==m&&(m=M("path"),N.connector.svg.appendChild(m),S.attachListeners(m,N.connector),S.attachListeners(m,S),R=M("path"),N.connector.svg.appendChild(R),S.attachListeners(R,N.connector),S.attachListeners(R,S),P=M("path"),N.connector.svg.appendChild(P),S.attachListeners(P,N.connector),S.attachListeners(P,S));var g=[0,0];V.xmin<0&&(g[0]=-V.xmin),V.ymin<0&&(g[1]=-V.ymin),I(m,{d:A(N.head,N.tail),stroke:"red",fill:null,transform:"translate("+g[0]+","+g[1]+")"}),I(R,{d:A(N.tailLine[0],N.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+g[0]+","+g[1]+")"}),I(P,{d:A(N.headLine[0],N.headLine[1]),stroke:"green",fill:null,transform:"translate("+g[0]+","+g[1]+")"})};var A=function(N,V){return"M "+N.x+","+N.y+" L"+V.x+","+V.y}},X.extend(h.Overlays.svg.GuideLines,h.Overlays.GuideLines)}.call(typeof window<"u"?window:this),function(){"use strict";var t,u,J=this,h=J.jsPlumb,X=J.jsPlumbUtil,ot=J.Katavorio,Z=J.Biltong,l=function(t,u){var o="_katavorio_"+(u=u||"main"),b=t[o],C=t.getEventManager();return b||((b=new ot({bind:C.on,unbind:C.off,getSize:h.getSize,getConstrainingRectangle:function(v){return[v.parentNode.scrollWidth,v.parentNode.scrollHeight]},getPosition:function(v,y){var m=t.getOffset(v,y,v._katavorioDrag?v.offsetParent:null);return[m.left,m.top]},setPosition:function(v,y){v.style.left=y[0]+"px",v.style.top=y[1]+"px"},addClass:h.addClass,removeClass:h.removeClass,intersects:Z.intersects,indexOf:function(v,y){return v.indexOf(y)},scope:t.getDefaultScope(),css:{noSelect:t.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}})).setZoom(t.getZoom()),t[o]=b,t.bind("zoom",b.setZoom)),b},D=function(t){var u=t.el._jsPlumbDragOptions,o=!0;return u.canDrag&&(o=u.canDrag()),o&&(this.setHoverSuspended(!0),this.select({source:t.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:t.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),o},f=function(t){var u=this.getUIPosition(arguments,this.getZoom());if(null!=u){var o=t.el._jsPlumbDragOptions;this.draw(t.el,u,null,!0),o._dragging&&this.addClass(t.el,"jtk-dragged"),o._dragging=!0}},n=function(t){for(var o,u=t.selection,b=function(v){var y;null!=v[1]&&(o=this.getUIPosition([{el:v[2].el,pos:[v[1].left,v[1].top]}]),y=this.draw(v[2].el,o)),null!=v[0]._jsPlumbDragOptions&&delete v[0]._jsPlumbDragOptions._dragging,this.removeClass(v[0],"jtk-dragged"),this.select({source:v[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:v[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),t.e._drawResult=t.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(t.e._drawResult.c,y.c),Array.prototype.push.apply(t.e._drawResult.e,y.e),Array.prototype.push.apply(t.e._drawResult.a,y.a),this.getDragManager().dragEnded(v[2].el)}.bind(this),C=0;C<u.length;C++)b(u[C]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},T=function(t,u){if(null==u)return[0,0];var o=r(u),b=O(o,0);return[b[t+"X"],b[t+"Y"]]},j=T.bind(this,"page"),k=T.bind(this,"screen"),G=T.bind(this,"client"),O=function(t,u){return t.item?t.item(u):t[u]},r=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},e=function(t){var u={},o=[],b={},C={},v={};this.register=function(y){var S,m=t.getId(y);u[m]||(u[m]=y,o.push(y),b[m]={});var R=function(P){if(P)for(var A=0;A<P.childNodes.length;A++)if(3!==P.childNodes[A].nodeType&&8!==P.childNodes[A].nodeType){var N=jsPlumb.getElement(P.childNodes[A]),V=t.getId(P.childNodes[A],null,!0);if(V&&C[V]&&C[V]>0){S||(S=t.getOffset(y));var g=t.getOffset(N);b[m][V]={id:V,offset:{left:g.left-S.left,top:g.top-S.top}},v[V]=m}R(P.childNodes[A])}};R(y)},this.updateOffsets=function(y,m){if(null!=y){m=m||{};var A,S=jsPlumb.getElement(y),R=t.getId(S),P=b[R];if(P)for(var N in P)if(P.hasOwnProperty(N)){var V=jsPlumb.getElement(N),g=m[N]||t.getOffset(V);if(null==V.offsetParent&&null!=b[R][N])continue;A||(A=t.getOffset(S)),b[R][N]={id:N,offset:{left:g.left-A.left,top:g.top-A.top}},v[N]=R}}},this.endpointAdded=function(y,m){m=m||t.getId(y);var S=document.body,R=y.parentNode;for(C[m]=C[m]?C[m]+1:1;null!=R&&R!==S;){var P=t.getId(R,null,!0);if(P&&u[P]){var A=t.getOffset(R);if(null==b[P][m]){var N=t.getOffset(y);b[P][m]={id:m,offset:{left:N.left-A.left,top:N.top-A.top}},v[m]=P}break}R=R.parentNode}},this.endpointDeleted=function(y){if(C[y.elementId]&&(C[y.elementId]--,C[y.elementId]<=0))for(var m in b)b.hasOwnProperty(m)&&b[m]&&(delete b[m][y.elementId],delete v[y.elementId])},this.changeId=function(y,m){b[m]=b[y],b[y]={},v[m]=v[y],v[y]=null},this.getElementsForDraggable=function(y){return b[y]},this.elementRemoved=function(y){var m=v[y];m&&(b[m]&&delete b[m][y],delete v[y])},this.reset=function(){u={},o=[],b={},C={}},this.dragEnded=function(y){if(null!=y.offsetParent){var m=t.getId(y),S=v[m];S&&this.updateOffsets(S)}},this.setParent=function(y,m,S,R,P){var A=v[m];b[R]||(b[R]={});var N=t.getOffset(S),V=P||t.getOffset(y);A&&b[A]&&delete b[A][m],b[R][m]={id:m,offset:{left:V.left-N.left,top:V.top-N.top}},v[m]=R},this.clearParent=function(y,m){var S=v[m];S&&(delete b[S][m],delete v[m])},this.revalidateParent=function(y,m,S){var R=v[m];if(R){var P={};P[m]=S,this.updateOffsets(R,P),t.revalidate(R)}},this.getDragAncestor=function(y){var m=jsPlumb.getElement(y),S=t.getId(m),R=v[S];return R?jsPlumb.getElement(R):null}},I=function(t,u,o){u=X.fastTrim(u),typeof t.className.baseVal<"u"?t.className.baseVal=u:t.className=u;try{var b=t.classList;if(null!=b){for(;b.length>0;)b.remove(b.item(0));for(var C=0;C<o.length;C++)o[C]&&b.add(o[C])}}catch(v){X.log("JSPLUMB: cannot set class list",v)}},M=function(t){return typeof t.className.baseVal>"u"?t.className:t.className.baseVal},U=function(t,u,o){u=null==u?[]:X.isArray(u)?u:u.split(/\s+/),o=null==o?[]:X.isArray(o)?o:o.split(/\s+/);var C=M(t).split(/\s+/),v=function(y,m){for(var S=0;S<m.length;S++)if(y)-1===C.indexOf(m[S])&&C.push(m[S]);else{var R=C.indexOf(m[S]);-1!==R&&C.splice(R,1)}};v(!0,u),v(!1,o),I(t,C.join(" "),C)};J.jsPlumb.extend(J.jsPlumbInstance.prototype,{headless:!1,pageLocation:j,screenLocation:k,clientLocation:G,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new e(this)),this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,u,o,b){return this.createElementNS(null,t,u,o,b)},createElementNS:function(t,u,o,b,C){var y,v=null==t?document.createElement(u):document.createElementNS(t,u);for(y in o=o||{})v.style[y]=o[y];for(y in b&&(v.className=b),C=C||{})v.setAttribute(y,""+C[y]);return v},getAttribute:function(t,u){return null!=t.getAttribute?t.getAttribute(u):null},setAttribute:function(t,u,o){null!=t.setAttribute&&t.setAttribute(u,o)},setAttributes:function(t,u){for(var o in u)u.hasOwnProperty(o)&&t.setAttribute(o,u[o])},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg"]},getClass:M,addClass:function(t,u){jsPlumb.each(t,function(o){U(o,u)})},hasClass:function(t,u){return(t=jsPlumb.getElement(t)).classList?t.classList.contains(u):-1!==M(t).indexOf(u)},removeClass:function(t,u){jsPlumb.each(t,function(o){U(o,null,u)})},toggleClass:function(t,u){jsPlumb.hasClass(t,u)?jsPlumb.removeClass(t,u):jsPlumb.addClass(t,u)},updateClasses:function(t,u,o){jsPlumb.each(t,function(b){U(b,u,o)})},setClass:function(t,u){null!=u&&jsPlumb.each(t,function(o){I(o,u,u.split(/\s+/))})},setPosition:function(t,u){t.style.left=u.left+"px",t.style.top=u.top+"px"},getPosition:function(t){var u=function(o){var b=t.style[o];return b?b.substring(0,b.length-2):0};return{left:u("left"),top:u("top")}},getStyle:function(t,u){return typeof window.getComputedStyle<"u"?getComputedStyle(t,null).getPropertyValue(u):t.currentStyle[u]},getSelector:function(t,u){return 1===arguments.length?null!=t.nodeType?t:document.querySelectorAll(t):t.querySelectorAll(u)},getOffset:function(t,u,o){t=jsPlumb.getElement(t),o=o||this.getContainer();for(var b={left:t.offsetLeft,top:t.offsetTop},C=u||null!=o&&t!==o&&t.offsetParent!==o?t.offsetParent:null,v=function(S){null!=S&&S!==document.body&&(S.scrollTop>0||S.scrollLeft>0)&&(b.left-=S.scrollLeft,b.top-=S.scrollTop)}.bind(this);null!=C;)b.left+=C.offsetLeft,b.top+=C.offsetTop,v(C),C=u?C.offsetParent:C.offsetParent===o?null:C.offsetParent;if(null!=o&&!u&&(o.scrollTop>0||o.scrollLeft>0)){var y=null!=t.offsetParent?this.getStyle(t.offsetParent,"position"):"static",m=this.getStyle(t,"position");"absolute"!==m&&"fixed"!==m&&"absolute"!==y&&"fixed"!==y&&(b.left-=o.scrollLeft,b.top-=o.scrollTop)}return b},getPositionOnElement:function(t,u,o){var b=typeof u.getBoundingClientRect<"u"?u.getBoundingClientRect():{left:0,top:0,width:0,height:0},C=document.body,v=document.documentElement,y=window.pageYOffset||v.scrollTop||C.scrollTop,m=window.pageXOffset||v.scrollLeft||C.scrollLeft,N=b.top+y-(v.clientTop||C.clientTop||0)+0*o,V=b.left+m-(v.clientLeft||C.clientLeft||0)+0*o,g=jsPlumb.pageLocation(t);return[(g[0]-V)/(b.width||u.offsetWidth*o),(g[1]-N)/(b.height||u.offsetHeight*o)]},getAbsolutePosition:function(t){var u=function(o){var b=t.style[o];if(b)return parseFloat(b.substring(0,b.length-2))};return[u("left"),u("top")]},setAbsolutePosition:function(t,u,o,b){o?this.animate(t,{left:"+="+(u[0]-o[0]),top:"+="+(u[1]-o[1])},b):(t.style.left=u[0]+"px",t.style.top=u[1]+"px")},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(t,u){var o;return t=X.isArray(t)||null!=t.length&&!X.isString(t)?t:[t],Array.prototype.slice.call(t).forEach(function(b){(o=this.info(b)).el&&this._initDraggableIfNecessary(o.el,!0,u,o.id,!0)}.bind(this)),this},snapToGrid:function(t,u,o){var b=[],C=function(m){var S=this.info(m);if(null!=S.el&&S.el._katavorioDrag){var R=S.el._katavorioDrag.snap(u,o);this.revalidate(S.el),b.push([S.el,R])}}.bind(this);if(1===arguments.length||3===arguments.length)C(t,u,o);else{var v=this.getManagedElements();for(var y in v)C(y,arguments[0],arguments[1])}return b},initDraggable:function(t,u,o){l(this,o).draggable(t,u),t._jsPlumbDragOptions=u},destroyDraggable:function(t,u){l(this,u).destroyDraggable(t),t._jsPlumbDragOptions=null,t._jsPlumbRelatedElement=null},unbindDraggable:function(t,u,o,b){l(this,b).destroyDraggable(t,u,o)},setDraggable:function(t,u){return jsPlumb.each(t,function(o){this.isDragSupported(o)&&(this._draggableStates[this.getAttribute(o,"id")]=u,this.setElementDraggable(o,u))}.bind(this))},_draggableStates:{},toggleDraggable:function(t){var u;return jsPlumb.each(t,function(o){var b=this.getAttribute(o,"id");return this._draggableStates[b]=u=!(u=null!=this._draggableStates[b]&&this._draggableStates[b]),this.setDraggable(o,u),u}.bind(this)),u},_initDraggableIfNecessary:function(t,u,o,b,C){if(!jsPlumb.headless&&u&&jsPlumb.isDragSupported(t,this)){var y=o||this.Defaults.DragOptions;if(y=jsPlumb.extend({},y),jsPlumb.isAlreadyDraggable(t,this))o.force&&this.initDraggable(t,y);else{var m=jsPlumb.dragEvents.drag,S=jsPlumb.dragEvents.stop,R=jsPlumb.dragEvents.start;this.manage(b,t),y[R]=X.wrap(y[R],D.bind(this)),y[m]=X.wrap(y[m],f.bind(this)),y[S]=X.wrap(y[S],n.bind(this));var P=this.getId(t);this._draggableStates[P]=!0;var A=this._draggableStates[P];y.disabled=null!=A&&!A,this.initDraggable(t,y),this.getDragManager().register(t),C&&this.fire("elementDraggable",{el:t,options:y})}}},animationSupported:!0,getElement:function(t){return null==t?null:"string"==typeof(t="string"==typeof t?t:null==t.tagName&&null!=t.length&&null==t.enctype?t[0]:t)?document.getElementById(t):t},removeElement:function(t){l(this).elementRemoved(t),this.getEventManager().remove(t)},doAnimate:function(t,u,o){o=o||{};var b=this.getOffset(t),C=function(t,u){var o=function(b){if(null!=u[b]){if(X.isString(u[b])){var C=u[b].match(/-=/)?-1:1,v=u[b].substring(2);return t[b]+C*v}return u[b]}return t[b]};return[o("left"),o("top")]}(b,u),m=o.duration||250,R=m/15,P=15/m*(C[0]-b.left),A=15/m*(C[1]-b.top),N=0,V=setInterval(function(){h.setPosition(t,{left:b.left+P*(N+1),top:b.top+A*(N+1)}),null!=o.step&&o.step(N,Math.ceil(R)),++N>=R&&(window.clearInterval(V),null!=o.complete&&o.complete())},15)},destroyDroppable:function(t,u){l(this,u).destroyDroppable(t)},unbindDroppable:function(t,u,o,b){l(this,b).destroyDroppable(t,u,o)},droppable:function(t,u){var o;return t=X.isArray(t)||null!=t.length&&!X.isString(t)?t:[t],(u=u||{}).allowLoopback=!1,Array.prototype.slice.call(t).forEach(function(b){(o=this.info(b)).el&&this.initDroppable(o.el,u)}.bind(this)),this},initDroppable:function(t,u,o){l(this,o).droppable(t,u)},isAlreadyDraggable:function(t){return null!=t._katavorioDrag},isDragSupported:function(t,u){return!0},isDropSupported:function(t,u){return!0},isElementDraggable:function(t){return(t=h.getElement(t))._katavorioDrag&&t._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getUIPosition:function(t,u){var o=t[0].el;if(null==o.offsetParent)return null;var b=t[0].finalPos||t[0].pos,C={left:b[0],top:b[1]};if(o._katavorioDrag&&o.offsetParent!==this.getContainer()){var v=this.getOffset(o.offsetParent);C.left+=v.left,C.top+=v.top}return C},setDragFilter:function(t,u,o){t._katavorioDrag&&t._katavorioDrag.setFilter(u,o)},setElementDraggable:function(t,u){(t=h.getElement(t))._katavorioDrag&&t._katavorioDrag.setEnabled(u)},setDragScope:function(t,u){t._katavorioDrag&&t._katavorioDrag.k.setDragScope(t,u)},setDropScope:function(t,u){t._katavorioDrop&&t._katavorioDrop.length>0&&t._katavorioDrop[0].k.setDropScope(t,u)},addToPosse:function(t,u){var o=Array.prototype.slice.call(arguments,1),b=l(this);h.each(t,function(C){(C=[h.getElement(C)]).push.apply(C,o),b.addToPosse.apply(b,C)})},setPosse:function(t,u){var o=Array.prototype.slice.call(arguments,1),b=l(this);h.each(t,function(C){(C=[h.getElement(C)]).push.apply(C,o),b.setPosse.apply(b,C)})},removeFromPosse:function(t,u){var o=Array.prototype.slice.call(arguments,1),b=l(this);h.each(t,function(C){(C=[h.getElement(C)]).push.apply(C,o),b.removeFromPosse.apply(b,C)})},removeFromAllPosses:function(t){var u=l(this);h.each(t,function(o){u.removeFromAllPosses(h.getElement(o))})},setPosseState:function(t,u,o){var b=l(this);h.each(t,function(C){b.setPosseState(h.getElement(C),u,o)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){t._katavorioDrag&&t._katavorioDrag.abort()},addToDragSelection:function(t){var u=this.getElement(t);null!=u&&(u._isJsPlumbGroup||null==u._jsPlumbGroup)&&l(this).select(t)},removeFromDragSelection:function(t){l(this).deselect(t)},getDragSelection:function(){return l(this).getSelection()},clearDragSelection:function(){l(this).deselectAll()},trigger:function(t,u,o,b){this.getEventManager().trigger(t,u,o,b)},doReset:function(){for(var t in this)0===t.indexOf("_katavorio_")&&this[t].reset()},getEventManager:function(){return(u=this._mottle)||(u=this._mottle=new J.Mottle),u;var u},on:function(t,u,o){return this.getEventManager().on.apply(this,arguments),this},off:function(t,u,o){return this.getEventManager().off.apply(this,arguments),this}}),t=h.init,(u=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body<"u"&&null!=document.body?t():setTimeout(u,9)})()}.call(typeof window<"u"?window:this)},5293:(se,Ft,J)=>{"use strict";J.d(Ft,{A:()=>T});const X={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ot;const Z=new Uint8Array(16);function tt(){if(!ot&&(ot=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ot))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ot(Z)}const l=[];for(let j=0;j<256;++j)l.push((j+256).toString(16).slice(1));const T=function x(j,k,G){if(X.randomUUID&&!k&&!j)return X.randomUUID();const O=(j=j||{}).random||(j.rng||tt)();if(O[6]=15&O[6]|64,O[8]=63&O[8]|128,k){G=G||0;for(let r=0;r<16;++r)k[G+r]=O[r];return k}return function D(j,k=0){return l[j[k+0]]+l[j[k+1]]+l[j[k+2]]+l[j[k+3]]+"-"+l[j[k+4]]+l[j[k+5]]+"-"+l[j[k+6]]+l[j[k+7]]+"-"+l[j[k+8]]+l[j[k+9]]+"-"+l[j[k+10]]+l[j[k+11]]+l[j[k+12]]+l[j[k+13]]+l[j[k+14]]+l[j[k+15]]}(O)}}}]);