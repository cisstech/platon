"use strict";(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[163],{4605:(v,p,i)=>{i.r(p),i.d(p,{CodeEditorModule:()=>b});var o=i(9986),h=i(4048),_=i(4104),m=i(4911),t=i(4966),O=i(5839),e=i(4361),d=i(6033),f=i(6733),a=i(2996);const l=["footer"];function u(C,s){if(1&C){const r=t.EpF();t.TgZ(0,"span",10),t.NdJ("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.reset())}),t._UZ(1,"span",11),t.qZA()}}let g=class ${constructor(s,r){this.injector=s,this.changeDetector=r,this.disposables=[],this.width=0,this.height=0,this.initialCode="",this.cursor={column:0,lineNumber:0},this.decorations=[]}ngAfterViewChecked(){if(!this.editor||!this.footer)return;const s=this.footer.nativeElement.getBoundingClientRect();if(!s)return;const{width:r,height:n}=s;(this.width!==r||this.height!==n)&&(this.editor?.layout(),this.width=r,this.height=n)}ngOnDestroy(){this.disposables.forEach(s=>s.dispose())}onCreateEditor(s){this.editor=s,s.setModel(this.model=this.model||monaco.editor.createModel(this.state.code||"",this.state.language||"plaintext")),this.detectOptionsChange(),this.model.updateOptions({tabSize:this.state.tabSize,insertSpaces:!0,trimAutoWhitespace:!0}),this.editor.updateOptions({autoIndent:"advanced",lineNumbers:"on",renderWhitespace:"all",quickSuggestions:!0,glyphMargin:!1,renderControlCharacters:!0,minimap:{enabled:!0},scrollbar:{verticalScrollbarSize:4,verticalSliderSize:4}}),this.disposables.push(this.model),this.disposables.push(this.editor),this.disposables.push(this.model.onDidChangeContent(()=>{this.changeDetector.ignore(this,()=>{this.state.code=this.model?.getValue()||""})})),this.disposables.push(this.editor.onDidChangeCursorPosition(r=>{this.changeDetector.ignore(this,()=>{this.cursor=r.position})})),this.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS,()=>{},""),this.initialCode=this.state.code}onChangeState(){this.model&&(monaco.editor.setModelLanguage(this.model,this.state.language||"plaintext"),this.editor?.updateOptions({tabSize:this.state.tabSize,quickSuggestions:this.state.quickSuggestions}),this.model.setValue(this.state.code))}reset(){this.state.code=this.initialCode}goToLine(){if(!this.editor)return;const s=this.editor.getAction(o.BD);this.editor.focus(),s?.run()}quickCommand(){if(!this.editor)return;const s=this.editor.getAction(o.z_);this.editor.focus(),s?.run()}changeIndent(){if(!this.editor)return;const s=this.editor.getAction(o.UD);this.editor.focus(),s?.run()}detectOptionsChange(){if(!this.model)return;const s=this,r=this.model.updateOptions;this.model.updateOptions=function(n){r.apply(this,[n]),n.tabSize&&s.changeDetector.ignore(s,()=>{s.state.tabSize=n.tabSize||s.state.tabSize})}}static#t=this.\u0275fac=function(r){return new(r||$)(t.Y36(t.zs3),t.Y36(e.Z))};static#e=this.\u0275cmp=t.Xpm({type:$,selectors:[["wc-code-editor"]],viewQuery:function(r,n){if(1&r&&t.Gf(l,7),2&r){let c;t.iGM(c=t.CRH())&&(n.footer=c.first)}},inputs:{state:"state"},decls:14,vars:11,consts:[[3,"ready"],["footer",""],["aria-label","Raccourcies","nz-tooltip","Raccourcies",1,"footer-item",3,"click"],[1,"footer-item-icon","codicon","codicon-light-bulb"],["class","footer-item","aria-label","Remettre le code initial","nz-tooltip","Remettre le code initial",3,"click",4,"ngIf"],[1,"spacer"],["nz-tooltip","Aller \xe0 la ligne/colonne",1,"footer-item",3,"click"],["nz-tooltip","Modifier l'indentation",1,"footer-item",3,"click"],["nz-tooltip","Langage",1,"footer-item"],[3,"state","stateChange"],["aria-label","Remettre le code initial","nz-tooltip","Remettre le code initial",1,"footer-item",3,"click"],[1,"footer-item-icon","codicon","codicon-sync"]],template:function(r,n){1&r&&(t.TgZ(0,"nge-monaco-editor",0),t.NdJ("ready",function(E){return n.onCreateEditor(E)}),t.qZA(),t.TgZ(1,"footer",null,1)(3,"span",2),t.NdJ("click",function(){return n.quickCommand()}),t._UZ(4,"span",3),t.qZA(),t.YNc(5,u,2,0,"span",4),t._UZ(6,"span",5),t.TgZ(7,"span",6),t.NdJ("click",function(){return n.goToLine()}),t._uU(8),t.qZA(),t.TgZ(9,"span",7),t.NdJ("click",function(){return n.changeIndent()}),t._uU(10),t.qZA(),t.TgZ(11,"span",8),t._uU(12),t.qZA()(),t.TgZ(13,"wc-base",9),t.NdJ("stateChange",function(E){return n.state=E}),t.qZA()),2&r&&(t.Udp("--editor-height",n.state.height+"px"),t.xp6(5),t.Q6J("ngIf",n.initialCode),t.xp6(2),t.uIk("aria-label","Ln "+n.cursor.lineNumber+",Col  "+n.cursor.column),t.xp6(1),t.AsE(" Ln ",n.cursor.lineNumber,", Col ",n.cursor.column," "),t.xp6(1),t.uIk("aria-label","Espaces:"+n.state.tabSize),t.xp6(1),t.hij(" Espaces: ",n.state.tabSize," "),t.xp6(1),t.uIk("aria-label",n.state.language),t.xp6(1),t.hij(" ",n.state.language," "),t.xp6(1),t.Q6J("state",n.state))},dependencies:[f.O5,a.H,h.SY,o.RI],styles:["[_nghost-%COMP%]{display:block;height:100%}footer[_ngcontent-%COMP%]{height:22px;border:1px solid rgba(59,66,82,0);box-sizing:border-box;display:flex;align-items:center;background-color:#3b4252;color:#d8dee9;padding:.2rem 0;font-size:.8em}footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{cursor:pointer;padding:0 .6rem}footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]:hover{background-color:#d8dee933}footer[_ngcontent-%COMP%]   .footer-item-icon[_ngcontent-%COMP%]{vertical-align:text-bottom!important}.spacer[_ngcontent-%COMP%]{flex:1}"],changeDetection:0})};g=(0,m.gn)([(0,O._s)(d.e),(0,m.w6)("design:paramtypes",[t.zs3,e.Z])],g);let b=(()=>{class C{constructor(){this.component=g}static#t=this.\u0275fac=function(n){return new(n||C)};static#e=this.\u0275mod=t.oAB({type:C});static#n=this.\u0275inj=t.cJS({imports:[_.Y,h.cg,o.vS]})}return C})()},2996:(v,p,i)=>{i.d(p,{H:()=>e});var o=i(4966),h=i(4266),_=i(6733),m=i(9986);const t=["container"];function O(d,f){if(1&d&&(o.ynx(0),o._UZ(1,"nge-monaco-viewer",1),o.ALo(2,"json"),o.BQk()),2&d){const a=o.oxw();o.xp6(1),o.Q6J("code",o.lcZ(2,1,a.state))}}let e=(()=>{class d{constructor(a,l){this.api=a,this.elementRef=l,this.stateChange=new o.vpe}ngOnInit(){const a=this.elementRef.nativeElement,l=a.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(l||""),this.observer=new MutationObserver(u=>{u.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(a.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(a){return a.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(a):a}onChangeAttributes(a){const g=Array.from(this.elementRef.nativeElement.parentElement.attributes),b=g.find(c=>"cid"===c.name);if(b){const E=document.querySelector(`script[id="${b.value}"]`);return void(E&&this.stateChange.emit(this.parseValue(E.textContent||"{}")))}if(g.find(c=>"state"===c.name)&&a)return;const s={},r=this.definition?.schema?.properties||{};let n=!1;for(const c of g)if(c.name in r){n=!0;try{s[c.name]=this.parseValue(c.value)}catch{console.warn(`Invalid value "${c.value}" for ${c.name} attribute`)}}n&&this.stateChange.emit(s)}static#t=this.\u0275fac=function(l){return new(l||d)(o.Y36(h.G),o.Y36(o.SBq))};static#e=this.\u0275cmp=o.Xpm({type:d,selectors:[["wc-base"]],viewQuery:function(l,u){if(1&l&&o.Gf(t,5),2&l){let g;o.iGM(g=o.CRH())&&(u.container=g.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(l,u){1&l&&o.YNc(0,O,3,3,"ng-container",0),2&l&&o.Q6J("ngIf",null==u.state?null:u.state.debug)},dependencies:[_.O5,m.Yu,_.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return d})()},4104:(v,p,i)=>{i.d(p,{Y:()=>m});var o=i(6733),h=i(9986),_=i(4966);let m=(()=>{class t{static#t=this.\u0275fac=function(d){return new(d||t)};static#e=this.\u0275mod=_.oAB({type:t});static#n=this.\u0275inj=_.cJS({imports:[o.ez,h.vS,o.ez]})}return t})()},4361:(v,p,i)=>{i.d(p,{Z:()=>m});var o=i(4553),h=i(4966),_=i(1887);let m=(()=>{class t{batch(e,d){const f=e.$__suspendChanges__$;e.$__suspendChanges__$=!0,d(),e.onChangeState&&e.onChangeState(),e.$__changeDetector__$||(e.$__changeDetector__$=e.injector.get(h.sBO)),e.$__changeDetector__$.detectChanges(),e.$__suspendChanges__$=f}ignore(e,d){return(0,o.Z)(function*(){const f=e.$__suspendChanges__$;e.$__suspendChanges__$=!0;const a=yield d();return e.$__changeDetector__$||(e.$__changeDetector__$=e.injector.get(h.sBO)),e.$__changeDetector__$.detectChanges(),e.$__suspendChanges__$=f,a})()}changes(e){if(!e.$__stateCopy__$)return e.$__stateCopy__$=(0,_.p$)(e.$__state__$),[];const d=[];return new Set(Object.keys(e.$__state__$).concat(Object.keys(e.$__stateCopy__$))).forEach(a=>{(0,_.vZ)(e.$__state__$[a],e.$__stateCopy__$[a])||d.push(a)}),e.$__stateCopy__$=(0,_.p$)(e.$__state__$),d}static#t=this.\u0275fac=function(d){return new(d||t)};static#e=this.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);