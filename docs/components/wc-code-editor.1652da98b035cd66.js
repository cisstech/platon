"use strict";(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[163],{6656:(T,m,a)=>{a.r(m),a.d(m,{CodeEditorModule:()=>$});var i=a(9986),h=a(4048),_=a(4104),p=a(4911),t=a(4966),c=a(5839),d=a(4361),g=a(6033),C=a(6733),b=a(2996);const M=["footer"];function v(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"span",10),t.NdJ("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.reset())}),t._UZ(1,"span",11),t.qZA()}}let O=class S{constructor(n,r){this.injector=n,this.changeDetector=r,this.disposables=[],this.width=0,this.height=0,this.stateChange=new t.vpe,this.initialCode="",this.cursor={column:0,lineNumber:0},this.decorations=[]}ngAfterViewChecked(){if(!this.editor||!this.footer)return;const n=this.footer.nativeElement.getBoundingClientRect();if(!n)return;const{width:r,height:o}=n;(this.width!==r||this.height!==o)&&(this.editor?.layout(),this.width=r,this.height=o)}ngOnDestroy(){this.disposables.forEach(n=>n.dispose())}onCreateEditor(n){this.editor=n,n.setModel(this.model=this.model||monaco.editor.createModel(this.state.code||"",this.state.language||"plaintext")),this.detectOptionsChange(),this.model.updateOptions({tabSize:this.state.tabSize,insertSpaces:!0,trimAutoWhitespace:!0}),this.editor.updateOptions({autoIndent:"advanced",lineNumbers:"on",renderWhitespace:"all",quickSuggestions:!0,glyphMargin:!1,renderControlCharacters:!0,contextmenu:null==document.querySelector(".no-copy-paste"),minimap:{enabled:!0},scrollbar:{verticalScrollbarSize:4,verticalSliderSize:4}}),this.disposables.push(this.model),this.disposables.push(this.editor),this.disposables.push(this.model.onDidChangeContent(()=>{this.changeDetector.ignore(this,()=>{this.state.code=this.model?.getValue()||""})})),this.disposables.push(this.editor.onDidChangeCursorPosition(r=>{this.changeDetector.ignore(this,()=>{this.cursor=r.position})})),this.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS,()=>{},""),this.initialCode=this.state.code}onChangeState(){this.model&&(monaco.editor.setModelLanguage(this.model,this.state.language||"plaintext"),this.editor?.updateOptions({tabSize:this.state.tabSize,quickSuggestions:this.state.quickSuggestions}),this.model.setValue(this.state.code))}reset(){this.state.code=this.initialCode}goToLine(){if(!this.editor)return;const n=this.editor.getAction(i.BD);this.editor.focus(),n?.run()}quickCommand(){if(!this.editor)return;const n=this.editor.getAction(i.z_);this.editor.focus(),n?.run()}changeIndent(){if(!this.editor)return;const n=this.editor.getAction(i.UD);this.editor.focus(),n?.run()}detectOptionsChange(){if(!this.model)return;const n=this,r=this.model.updateOptions;this.model.updateOptions=function(o){r.apply(this,[o]),o.tabSize&&n.changeDetector.ignore(n,()=>{n.state.tabSize=o.tabSize||n.state.tabSize})}}static#t=this.\u0275fac=function(r){return new(r||S)(t.Y36(t.zs3),t.Y36(d.Z))};static#e=this.\u0275cmp=t.Xpm({type:S,selectors:[["wc-code-editor"]],viewQuery:function(r,o){if(1&r&&t.Gf(M,7),2&r){let u;t.iGM(u=t.CRH())&&(o.footer=u.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:14,vars:11,consts:[[3,"ready"],["footer",""],["aria-label","Raccourcies","nz-tooltip","Raccourcies",1,"footer-item",3,"click"],[1,"footer-item-icon","codicon","codicon-light-bulb"],["class","footer-item","aria-label","Remettre le code initial","nz-tooltip","Remettre le code initial",3,"click",4,"ngIf"],[1,"spacer"],["nz-tooltip","Aller \xe0 la ligne/colonne",1,"footer-item",3,"click"],["nz-tooltip","Modifier l'indentation",1,"footer-item",3,"click"],["nz-tooltip","Langage",1,"footer-item"],[3,"state","stateChange"],["aria-label","Remettre le code initial","nz-tooltip","Remettre le code initial",1,"footer-item",3,"click"],[1,"footer-item-icon","codicon","codicon-sync"]],template:function(r,o){1&r&&(t.TgZ(0,"nge-monaco-editor",0),t.NdJ("ready",function(E){return o.onCreateEditor(E)}),t.qZA(),t.TgZ(1,"footer",null,1)(3,"span",2),t.NdJ("click",function(){return o.quickCommand()}),t._UZ(4,"span",3),t.qZA(),t.YNc(5,v,2,0,"span",4),t._UZ(6,"span",5),t.TgZ(7,"span",6),t.NdJ("click",function(){return o.goToLine()}),t._uU(8),t.qZA(),t.TgZ(9,"span",7),t.NdJ("click",function(){return o.changeIndent()}),t._uU(10),t.qZA(),t.TgZ(11,"span",8),t._uU(12),t.qZA()(),t.TgZ(13,"wc-base",9),t.NdJ("stateChange",function(E){return o.state=E}),t.qZA()),2&r&&(t.Udp("--editor-height",o.state.height+"px"),t.xp6(5),t.Q6J("ngIf",o.initialCode),t.xp6(2),t.uIk("aria-label","Ln "+o.cursor.lineNumber+",Col  "+o.cursor.column),t.xp6(1),t.AsE(" Ln ",o.cursor.lineNumber,", Col ",o.cursor.column," "),t.xp6(1),t.uIk("aria-label","Espaces:"+o.state.tabSize),t.xp6(1),t.hij(" Espaces: ",o.state.tabSize," "),t.xp6(1),t.uIk("aria-label",o.state.language),t.xp6(1),t.hij(" ",o.state.language," "),t.xp6(1),t.Q6J("state",o.state))},dependencies:[C.O5,b.H,h.SY,i.RI],styles:["[_nghost-%COMP%]{display:block;height:100%}footer[_ngcontent-%COMP%]{height:22px;border:1px solid rgba(59,66,82,0);box-sizing:border-box;display:flex;align-items:center;background-color:#3b4252;color:#d8dee9;padding:.2rem 0;font-size:.8em}footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{cursor:pointer;padding:0 .6rem}footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]:hover{background-color:#d8dee933}footer[_ngcontent-%COMP%]   .footer-item-icon[_ngcontent-%COMP%]{vertical-align:text-bottom!important}.spacer[_ngcontent-%COMP%]{flex:1}"],changeDetection:0})};O=(0,p.gn)([(0,c._s)(g.e),(0,p.w6)("design:paramtypes",[t.zs3,d.Z])],O);let $=(()=>{class e{constructor(){this.component=O}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[_.Y,h.cg,i.vS]})}return e})()},2996:(T,m,a)=>{a.d(m,{H:()=>s});var i=a(4966),h=a(4266),_=a(6733),p=a(9986);const t=["container"];function A(l,f){if(1&l&&(i.ynx(0),i._UZ(1,"nge-monaco-viewer",1),i.ALo(2,"json"),i.BQk()),2&l){const c=i.oxw();i.xp6(1),i.Q6J("code",i.lcZ(2,1,c.state))}}let s=(()=>{class l{constructor(c,d){this.api=c,this.elementRef=d,this.stateChange=new i.vpe}ngOnInit(){const c=this.elementRef.nativeElement,d=c.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(d||""),this.observer=new MutationObserver(g=>{g.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(c.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(c){return c.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(c):c}onChangeAttributes(c){const C=Array.from(this.elementRef.nativeElement.parentElement.attributes),b=C.find(e=>"cid"===e.name);if(b){const n=document.querySelector(`script[id="${b.value}"]`);return void(n&&(console.log(n.textContent),this.stateChange.emit(this.parseValue(n.textContent||"{}"))))}if(C.find(e=>"state"===e.name)&&c)return;const v={},O=this.definition?.schema?.properties||{};let $=!1;for(const e of C)if(e.name in O){$=!0;try{v[e.name]=this.parseValue(e.value)}catch{console.warn(`Invalid value "${e.value}" for ${e.name} attribute`)}}$&&this.stateChange.emit(v)}static#t=this.\u0275fac=function(d){return new(d||l)(i.Y36(h.G),i.Y36(i.SBq))};static#e=this.\u0275cmp=i.Xpm({type:l,selectors:[["wc-base"]],viewQuery:function(d,g){if(1&d&&i.Gf(t,5),2&d){let C;i.iGM(C=i.CRH())&&(g.container=C.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(d,g){1&d&&i.YNc(0,A,3,3,"ng-container",0),2&d&&i.Q6J("ngIf",null==g.state?null:g.state.debug)},dependencies:[_.O5,p.Yu,_.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return l})()},4104:(T,m,a)=>{a.d(m,{Y:()=>p});var i=a(6733),h=a(9986),_=a(4966);let p=(()=>{class t{static#t=this.\u0275fac=function(l){return new(l||t)};static#e=this.\u0275mod=_.oAB({type:t});static#n=this.\u0275inj=_.cJS({imports:[i.ez,h.vS,i.ez]})}return t})()},4361:(T,m,a)=>{a.d(m,{Z:()=>p});var i=a(4553),h=a(4966),_=a(1887);let p=(()=>{class t{batch(s,l){const f=s.$__suspendChanges__$;s.$__suspendChanges__$=!0,l(),s.onChangeState&&s.onChangeState(),s.$__changeDetector__$||(s.$__changeDetector__$=s.injector.get(h.sBO)),s.$__changeDetector__$.detectChanges(),s.$__suspendChanges__$=f}ignore(s,l){return(0,i.Z)(function*(){const f=s.$__suspendChanges__$;s.$__suspendChanges__$=!0;const c=yield l();return s.$__changeDetector__$||(s.$__changeDetector__$=s.injector.get(h.sBO)),s.$__changeDetector__$.detectChanges(),s.$__suspendChanges__$=f,c})()}changes(s){if(!s.$__stateCopy__$)return s.$__stateCopy__$=(0,_.p$)(s.$__state__$),[];const l=[];return new Set(Object.keys(s.$__state__$).concat(Object.keys(s.$__stateCopy__$))).forEach(c=>{(0,_.vZ)(s.$__state__$[c],s.$__stateCopy__$[c])||l.push(c)}),s.$__stateCopy__$=(0,_.p$)(s.$__state__$),l}static#t=this.\u0275fac=function(l){return new(l||t)};static#e=this.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);