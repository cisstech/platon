(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[339],{2996:(fe,Gt,J)=>{"use strict";J.d(Gt,{H:()=>x});var u=J(4966),X=J(4266),ot=J(6733),Z=J(9986);const et=["container"];function h(c,n){if(1&c&&(u.ynx(0),u._UZ(1,"nge-monaco-viewer",1),u.ALo(2,"json"),u.BQk()),2&c){const D=u.oxw();u.xp6(1),u.Q6J("code",u.lcZ(2,1,D.state))}}let x=(()=>{class c{constructor(D,k){this.api=D,this.elementRef=k,this.stateChange=new u.vpe}ngOnInit(){const D=this.elementRef.nativeElement,k=D.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(k||""),this.observer=new MutationObserver(R=>{R.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(D.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(D){return D.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(D):D}onChangeAttributes(D){const F=Array.from(this.elementRef.nativeElement.parentElement.attributes),N=F.find(O=>"data-script-id"===O.name);if(N){const O=document.querySelector(`script[id="${N.value}"]`);return void(O&&this.stateChange.emit(this.parseValue(O.textContent||"{}")))}if(F.find(O=>"state"===O.name)&&D)return;const r={},e=this.definition?.schema?.properties||{};let T=!1;for(const O of F)if(O.name in e){T=!0;try{r[O.name]=this.parseValue(O.value)}catch{console.warn(`Invalid value "${O.value}" for ${O.name} attribute`)}}T&&this.stateChange.emit(r)}static#t=this.\u0275fac=function(k){return new(k||c)(u.Y36(X.G),u.Y36(u.SBq))};static#e=this.\u0275cmp=u.Xpm({type:c,selectors:[["wc-base"]],viewQuery:function(k,R){if(1&k&&u.Gf(et,5),2&k){let F;u.iGM(F=u.CRH())&&(R.container=F.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(k,R){1&k&&u.YNc(0,h,3,3,"ng-container",0),2&k&&u.Q6J("ngIf",null==R.state?null:R.state.debug)},dependencies:[ot.O5,Z.Yu,ot.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return c})()},4104:(fe,Gt,J)=>{"use strict";J.d(Gt,{Y:()=>Z});var u=J(6733),X=J(9986),ot=J(4966);let Z=(()=>{class et{static#t=this.\u0275fac=function(c){return new(c||et)};static#e=this.\u0275mod=ot.oAB({type:et});static#n=this.\u0275inj=ot.cJS({imports:[u.ez,X.vS,u.ez]})}return et})()},4361:(fe,Gt,J)=>{"use strict";J.d(Gt,{Z:()=>Z});var u=J(4553),X=J(4966),ot=J(1887);let Z=(()=>{class et{batch(x,c){const n=x.$__suspendChanges__$;x.$__suspendChanges__$=!0,c(),x.onChangeState&&x.onChangeState(),x.$__changeDetector__$||(x.$__changeDetector__$=x.injector.get(X.sBO)),x.$__changeDetector__$.detectChanges(),x.$__suspendChanges__$=n}ignore(x,c){return(0,u.Z)(function*(){const n=x.$__suspendChanges__$;x.$__suspendChanges__$=!0;const D=yield c();return x.$__changeDetector__$||(x.$__changeDetector__$=x.injector.get(X.sBO)),x.$__changeDetector__$.detectChanges(),x.$__suspendChanges__$=n,D})()}changes(x){if(!x.$__stateCopy__$)return x.$__stateCopy__$=(0,ot.p$)(x.$__state__$),[];const c=[];return new Set(Object.keys(x.$__state__$).concat(Object.keys(x.$__stateCopy__$))).forEach(D=>{(0,ot.vZ)(x.$__state__$[D],x.$__stateCopy__$[D])||c.push(D)}),x.$__stateCopy__$=(0,ot.p$)(x.$__state__$),c}static#t=this.\u0275fac=function(c){return new(c||et)};static#e=this.\u0275prov=X.Yz7({token:et,factory:et.\u0275fac,providedIn:"root"})}return et})()},9277:function(fe,Gt){(function(){typeof Math.sgn>"u"&&(Math.sgn=function(P){return 0==P?0:P>0?1:-1});var u_subtract=function(P,A){return{x:P.x-A.x,y:P.y-A.y}},u_dotProduct=function(P,A){return P.x*A.x+P.y*A.y},u_square=function(P){return Math.sqrt(P.x*P.x+P.y*P.y)},u_scale=function(P,A){return{x:P.x*A,y:P.y*A}},ot=Math.pow(2,-65),Z=function(P,A){for(var G=[],W=h(P,A),g=A.length-1,a=x(W,2*g-1,G,0),s=u_subtract(P,A[0]),p=u_square(s),f=0,w=0;w<a;w++){s=u_subtract(P,k(A,g,G[w],null,null));var B=u_square(s);B<p&&(p=B,f=G[w])}return s=u_subtract(P,A[g]),(B=u_square(s))<p&&(p=B,f=1),{location:f,distance:p}},h=function(P,A){for(var G=A.length-1,W=2*G-1,g=[],d=[],a=[],s=[],p=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],f=0;f<=G;f++)g[f]=u_subtract(A[f],P);for(f=0;f<=G-1;f++)d[f]=u_subtract(A[f+1],A[f]),d[f]=u_scale(d[f],3);for(var w=0;w<=G-1;w++)for(var B=0;B<=G;B++)a[w]||(a[w]=[]),a[w][B]=u_dotProduct(d[w],g[B]);for(f=0;f<=W;f++)s[f]||(s[f]=[]),s[f].y=0,s[f].x=parseFloat(f)/W;for(var H=G,V=G-1,Q=0;Q<=H+V;Q++){var tt=Math.max(0,Q-V),$=Math.min(Q,H);for(f=tt;f<=$;f++){var it=Q-f;s[f+it].y+=a[it][f]*p[it][f]}}return s},x=function(P,A,G,W){var a,s,g=[],d=[],p=[],f=[];switch(c(P,A)){case 0:return 0;case 1:if(W>=64)return G[0]=(P[0].x+P[A].x)/2,1;if(n(P,A))return G[0]=D(P,A),1}k(P,A,.5,g,d),a=x(g,A,p,W+1),s=x(d,A,f,W+1);for(var w=0;w<a;w++)G[w]=p[w];for(w=0;w<s;w++)G[w+a]=f[w];return a+s},c=function(P,A){var W,g,G=0;W=g=Math.sgn(P[0].y);for(var d=1;d<=A;d++)(W=Math.sgn(P[d].y))!=g&&G++,g=W;return G},n=function(P,A){var W,g,d,s,p,f,$,ct,dt;s=P[0].y-P[A].y,p=P[A].x-P[0].x,f=P[0].x*P[A].y-P[A].x*P[0].y,ct=dt=0;for(var gt=1;gt<A;gt++){var Pt=s*P[gt].x+p*P[gt].y+f;Pt>ct?ct=Pt:Pt<dt&&(dt=Pt)}return W=(1*(f-ct)-0*($=p))*(1/(0*$-1*s)),g=(1*(f-dt)-0*($=p))*(1/(0*$-1*s)),d=Math.min(W,g),Math.max(W,g)-d<ot?1:0},D=function(P,A){var g=P[A].x-P[0].x,d=P[A].y-P[0].y;return 0+1/(0*g-1*d)*(g*(P[0].y-0)-d*(P[0].x-0))*1},k=function(P,A,G,W,g){for(var d=[[]],a=0;a<=A;a++)d[0][a]=P[a];for(var s=1;s<=A;s++)for(a=0;a<=A-s;a++)d[s]||(d[s]=[]),d[s][a]||(d[s][a]={}),d[s][a].x=(1-G)*d[s-1][a].x+G*d[s-1][a+1].x,d[s][a].y=(1-G)*d[s-1][a].y+G*d[s-1][a+1].y;if(null!=W)for(a=0;a<=A;a++)W[a]=d[a][0];if(null!=g)for(a=0;a<=A;a++)g[a]=d[A-a][a];return d[A][0]},R={},N=function(P,A){for(var G=function(P){var A=R[P];if(!A){var g=function(B){return function(H){return B}},d=function(){return function(B){return B}},a=function(){return function(B){return 1-B}},s=function(B){return function(H){for(var V=1,Q=0;Q<B.length;Q++)V*=B[Q](H);return V}};(A=[]).push(new function(){return function(B){return Math.pow(B,P)}});for(var p=1;p<P;p++){for(var f=[new g(P)],w=0;w<P-p;w++)f.push(new d);for(w=0;w<p;w++)f.push(new a);A.push(new s(f))}A.push(new function(){return function(B){return Math.pow(1-B,P)}}),R[P]=A}return A}(P.length-1),W=0,g=0,d=0;d<P.length;d++)W+=P[d].x*G[d](A),g+=P[d].y*G[d](A);return{x:W,y:g}},M=function(P,A){return Math.sqrt(Math.pow(P.x-A.x,2)+Math.pow(P.y-A.y,2))},r=function(P){return P[0].x===P[1].x&&P[0].y===P[1].y},e=function(P,A,G){if(r(P))return{point:P[0],location:A};for(var W=N(P,A),g=0,d=A,a=G>0?1:-1,s=null;g<Math.abs(G);)s=N(P,d+=.005*a),g+=M(s,W),W=s;return{point:s,location:d}},L=function(P,A){var G=N(P,A),W=N(P.slice(0,P.length-1),A),g=W.y-G.y;return 0===g?1/0:Math.atan(g/(W.x-G.x))},o=function(P,A,G,W,g){var d=W-A,a=P-G,s=P*(A-W)+A*(G-P),p=function y(P){return[v(P,"x"),v(P,"y")]}(g),w=S.apply(null,[d*p[0][0]+a*p[1][0],d*p[0][1]+a*p[1][1],d*p[0][2]+a*p[1][2],d*p[0][3]+a*p[1][3]+s]),B=[];if(null!=w)for(var H=0;H<3;H++){var it,V=w[H],Q=Math.pow(V,2),tt=Math.pow(V,3),$=[p[0][0]*tt+p[0][1]*Q+p[0][2]*V+p[0][3],p[1][0]*tt+p[1][1]*Q+p[1][2]*V+p[1][3]];it=G-P!=0?($[0]-P)/(G-P):($[1]-A)/(W-A),V>=0&&V<=1&&it>=0&&it<=1&&B.push($)}return B};function v(P,A){return[3*P[1][A]-P[0][A]+-3*P[2][A]+P[3][A],3*P[0][A]-6*P[1][A]+3*P[2][A],-3*P[0][A]+3*P[1][A],P[0][A]]}function m(P){return P<0?-1:P>0?1:0}function S(P,A,G,W){var w,B,g=A/P,d=G/P,a=W/P,s=(3*d-Math.pow(g,2))/9,p=(9*g*d-27*a-2*Math.pow(g,3))/54,f=Math.pow(s,3)+Math.pow(p,2),H=[];if(f>=0)w=m(p+Math.sqrt(f))*Math.pow(Math.abs(p+Math.sqrt(f)),1/3),B=m(p-Math.sqrt(f))*Math.pow(Math.abs(p-Math.sqrt(f)),1/3),H[0]=-g/3+(w+B),H[1]=-g/3-(w+B)/2,H[2]=-g/3-(w+B)/2,0!==Math.abs(Math.sqrt(3)*(w-B)/2)&&(H[1]=-1,H[2]=-1);else{var V=Math.acos(p/Math.sqrt(-Math.pow(s,3)));H[0]=2*Math.sqrt(-s)*Math.cos(V/3)-g/3,H[1]=2*Math.sqrt(-s)*Math.cos((V+2*Math.PI)/3)-g/3,H[2]=2*Math.sqrt(-s)*Math.cos((V+4*Math.PI)/3)-g/3}for(var Q=0;Q<3;Q++)(H[Q]<0||H[Q]>1)&&(H[Q]=-1);return H}var I=this.jsBezier={distanceFromCurve:Z,gradientAtPoint:L,gradientAtPointAlongCurveFrom:function(P,A,G){var W=e(P,A,G);return W.location>1&&(W.location=1),W.location<0&&(W.location=0),L(P,W.location)},nearestPointOnCurve:function(P,A){var G=Z(P,A);return{point:k(A,A.length-1,G.location,null,null),location:G.location}},pointOnCurve:N,pointAlongCurveFrom:function(P,A,G){return e(P,A,G).point},perpendicularToCurveAt:function(P,A,G,W){var g=e(P,A,W=W??0),d=L(P,g.location),a=Math.atan(-1/d),s=G/2*Math.sin(a),p=G/2*Math.cos(a);return[{x:g.point.x+p,y:g.point.y+s},{x:g.point.x-p,y:g.point.y-s}]},locationAlongCurveFrom:function(P,A,G){return e(P,A,G).location},getLength:function(P){var A=(new Date).getTime();if(r(P))return 0;for(var G=N(P,0),W=0,g=0,a=null;g<1;)a=N(P,g+=.005),W+=M(a,G),G=a;return console.log("length",(new Date).getTime()-A),W},lineIntersection:o,boxIntersection:function(P,A,G,W,g){var d=[];return d.push.apply(d,o(P,A,P+G,A,g)),d.push.apply(d,o(P+G,A,P+G,A+W,g)),d.push.apply(d,o(P+G,A+W,P,A+W,g)),d.push.apply(d,o(P,A+W,P,A,g)),d},boundingBoxIntersection:function(P,A){var G=[];return G.push.apply(G,o(P.x,P.y,P.x+P.w,P.y,A)),G.push.apply(G,o(P.x+P.w,P.y,P.x+P.w,P.y+P.h,A)),G.push.apply(G,o(P.x+P.w,P.y+P.h,P.x,P.y+P.h,A)),G.push.apply(G,o(P.x,P.y+P.h,P.x,P.y,A)),G},version:"0.9.0"};Gt.jsBezier=I}).call(typeof window<"u"?window:this),function(){"use strict";var u=this.Biltong={version:"0.4.0"};Gt.Biltong=u;var X=function(M){return"[object Array]"===Object.prototype.toString.call(M)},ot=function(M,r,e){return e(M=X(M)?M:[M.x,M.y],r=X(r)?r:[r.x,r.y])},Z=u.gradient=function(M,r){return ot(M,r,function(e,T){return T[0]==e[0]?T[1]>e[1]?1/0:-1/0:T[1]==e[1]?T[0]>e[0]?0:-0:(T[1]-e[1])/(T[0]-e[0])})},x=(u.normal=function(M,r){return-1/Z(M,r)},u.lineLength=function(M,r){return ot(M,r,function(e,T){return Math.sqrt(Math.pow(T[1]-e[1],2)+Math.pow(T[0]-e[0],2))})},u.quadrant=function(M,r){return ot(M,r,function(e,T){return T[0]>e[0]||T[0]==e[0]?T[1]>e[1]?2:1:T[1]>e[1]?3:4})}),k=(u.theta=function(M,r){return ot(M,r,function(e,T){var O=Z(e,T),U=Math.atan(O),L=x(e,T);return(4==L||3==L)&&(U+=Math.PI),U<0&&(U+=2*Math.PI),U})},u.intersects=function(M,r){var e=M.x,T=M.x+M.w,O=M.y,U=M.y+M.h,L=r.x,t=r.x+r.w,l=r.y,o=r.y+r.h;return e<=L&&L<=T&&O<=l&&l<=U||e<=t&&t<=T&&O<=l&&l<=U||e<=L&&L<=T&&O<=o&&o<=U||e<=t&&L<=T&&O<=o&&o<=U||L<=e&&e<=t&&l<=O&&O<=o||L<=T&&T<=t&&l<=O&&O<=o||L<=e&&e<=t&&l<=U&&U<=o||L<=T&&e<=t&&l<=U&&U<=o},u.encloses=function(M,r,e){var U=M.y,L=M.y+M.h,o=r.y,b=r.y+r.h,C=function(v,y,m,S){return e?v<=y&&m>=S:v<y&&m>S};return C(M.x,r.x,M.x+M.w,r.x+r.w)&&C(U,o,L,b)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),R=[null,[-1,-1],[-1,1],[1,1],[1,-1]];u.pointOnLine=function(M,r,e){var T=Z(M,r),O=x(M,r),U=e>0?k[O]:R[O],L=Math.atan(T),t=Math.abs(e*Math.sin(L))*U[1],l=Math.abs(e*Math.cos(L))*U[0];return{x:M.x+l,y:M.y+t}},u.perpendicularLineTo=function(M,r,e){var T=Z(M,r),O=Math.atan(-1/T),U=e/2*Math.sin(O),L=e/2*Math.cos(O);return[{x:r.x+L,y:r.y+U},{x:r.x-L,y:r.y-U}]}}.call(typeof window<"u"?window:this),function(){"use strict";function J(s,p,f,w,B,H,V,Q){return new Touch({target:p,identifier:a(),pageX:f,pageY:w,screenX:B,screenY:H,clientX:V||B,clientY:Q||H})}function X(s,p,f,w,B,H,V,Q){return function u(){var s=[];return Array.prototype.push.apply(s,arguments),s.item=function(p){return this[p]},s}(J.apply(null,arguments))}var ot=this,Z=function(s,p,f){for(var w=(f=f||s.parentNode).querySelectorAll(p),B=0;B<w.length;B++)if(w[B]===s)return!0;return!1},et=function(s){return"string"==typeof s||s.constructor===String?document.getElementById(s):s},h=function(s){return s.srcElement||s.target},x=function(s,p,f,w){if(w){if(typeof s.path<"u"&&s.path.indexOf)return{path:s.path,end:s.path.indexOf(f)};var B={path:[],end:-1},H=function(V){B.path.push(V),V===f?B.end=B.path.length-1:null!=V.parentNode&&H(V.parentNode)};return H(p),B}return{path:[p],end:1}},c=function(s,p){for(var f=0,w=s.length;f<w&&s[f]!=p;f++);f<s.length&&s.splice(f,1)},n=1,D=function(s,p,f){var w=n++;return s.__ta=s.__ta||{},s.__ta[p]=s.__ta[p]||{},s.__ta[p][w]=f,f.__tauid=w,w},R=function(s,p,f,w){if(null==s)return f;var B=s.split(","),H=function(V){H.__tauid=f.__tauid;var Q=h(V),tt=Q,$=x(V,Q,p,null!=s);if(-1!=$.end)for(var it=0;it<$.end;it++){tt=$.path[it];for(var ct=0;ct<B.length;ct++)Z(tt,B[ct],p)&&f.apply(tt,arguments)}};return F(f,w,H),H},F=function(s,p,f){s.__taExtra=s.__taExtra||[],s.__taExtra.push([p,f])},N=function(s,p,f,w){if(U&&t[p]){var B=R(w,s,f,t[p]);W(s,t[p],B,f)}"focus"===p&&null==s.getAttribute("tabindex")&&s.setAttribute("tabindex","1"),W(s,p,R(w,s,f,p),f)},r={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},e=function(s,p){return function(f,w,B,H){if("contextmenu"==w&&L)N(f,w,B,H);else{if(null==f.__taTapHandler){var V=f.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},$=function(){V.down=!1},it=function(){V.taps=0};N(f,"mousedown",function(ct){for(var dt=h(ct),gt=x(ct,dt,f,null!=H),Pt=!1,pt=0;pt<gt.end;pt++){if(Pt)return;dt=gt.path[pt];for(var yt=0;yt<V.downSelectors.length;yt++)if(null==V.downSelectors[yt]||Z(dt,V.downSelectors[yt],f)){V.down=!0,setTimeout($,s),setTimeout(it,p),Pt=!0;break}}}),N(f,"mouseup",function(ct){if(V.down){var gt,Pt,dt=h(ct);V.taps++;var pt=G(ct);for(var yt in r)if(r.hasOwnProperty(yt)){var K=r[yt];if(K.touches===pt&&(1===K.taps||K.taps===V.taps))for(var q=0;q<V[yt].length;q++){Pt=x(ct,dt,f,null!=V[yt][q][1]);for(var nt=0;nt<Pt.end;nt++)if(gt=Pt.path[nt],null==V[yt][q][1]||Z(gt,V[yt][q][1],f)){V[yt][q][0].apply(gt,[ct]);break}}}}})}f.__taTapHandler.downSelectors.push(H),f.__taTapHandler[w].push([B,H]),B.__taUnstore=function(){c(f.__taTapHandler[w],B)}}}},T=function(s,p,f,w){for(var B in f.__tamee[s])f.__tamee[s].hasOwnProperty(B)&&f.__tamee[s][B].apply(w,[p])},O=function(){var s=[];return function(p,f,w,B){if(!p.__tamee){p.__tamee={over:!1,mouseenter:[],mouseexit:[]};var H=function(Q){var tt=h(Q);(null==B&&tt==p&&!p.__tamee.over||Z(tt,B,p)&&(null==tt.__tamee||!tt.__tamee.over))&&(T("mouseenter",Q,p,tt),tt.__tamee=tt.__tamee||{},tt.__tamee.over=!0,s.push(tt))},V=function(Q){for(var tt=h(Q),$=0;$<s.length;$++)tt==s[$]&&!Z(Q.relatedTarget||Q.toElement,"*",tt)&&(tt.__tamee.over=!1,s.splice($,1),T("mouseexit",Q,p,tt))};W(p,"mouseover",R(B,p,H,"mouseover"),H),W(p,"mouseout",R(B,p,V,"mouseout"),V)}w.__taUnstore=function(){delete p.__tamee[f][w.__tauid]},D(p,f,w),p.__tamee[f][w.__tauid]=w}},U="ontouchstart"in document.documentElement||navigator.maxTouchPoints,L="onmousedown"in document.documentElement,t={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},C=function(){var s=-1;if("Microsoft Internet Explorer"==navigator.appName){var p=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(p)&&(s=parseFloat(RegExp.$1))}return s}(),v=C>-1&&C<9,y=function(s,p){if(null==s)return[0,0];var f=A(s),w=P(f,0);return[w[p+"X"],w[p+"Y"]]},m=function(s){return null==s?[0,0]:v?[s.clientX+document.documentElement.scrollLeft,s.clientY+document.documentElement.scrollTop]:y(s,"page")},P=function(s,p){return s.item?s.item(p):s[p]},A=function(s){return s.touches&&s.touches.length>0?s.touches:s.changedTouches&&s.changedTouches.length>0?s.changedTouches:s.targetTouches&&s.targetTouches.length>0?s.targetTouches:[s]},G=function(s){return A(s).length},W=function(s,p,f,w){if(D(s,p,f),w.__tauid=f.__tauid,s.addEventListener)s.addEventListener(p,f,!1);else if(s.attachEvent){var B=p+f.__tauid;s["e"+B]=f,s[B]=function(){s["e"+B]&&s["e"+B](window.event)},s.attachEvent("on"+p,s[B])}},g=function(s,p,f){null!=f&&d(s,function(){var w=et(this);if(function(s,p,f){if(s.__ta&&s.__ta[p]&&delete s.__ta[p][f.__tauid],f.__taExtra){for(var w=0;w<f.__taExtra.length;w++)g(s,f.__taExtra[w][0],f.__taExtra[w][1]);f.__taExtra.length=0}f.__taUnstore&&f.__taUnstore()}(w,p,f),null!=f.__tauid)if(w.removeEventListener)w.removeEventListener(p,f,!1),U&&t[p]&&w.removeEventListener(t[p],f,!1);else if(this.detachEvent){var B=p+f.__tauid;w[B]&&w.detachEvent("on"+p,w[B]),w[B]=null,w["e"+B]=null}f.__taTouchProxy&&g(s,f.__taTouchProxy[1],f.__taTouchProxy[0])})},d=function(s,p){if(null!=s){s=typeof Window<"u"&&"unknown"!=typeof s.top&&s==s.top?[s]:"string"!=typeof s&&null==s.tagName&&null!=s.length?s:"string"==typeof s?document.querySelectorAll(s):[s];for(var f=0;f<s.length;f++)p.apply(s[f])}},a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var p=16*Math.random()|0;return("x"==s?p:3&p|8).toString(16)})};ot.Mottle=function(s){var p=(s=s||{}).clickThreshold||250,f=s.dblClickThreshold||450,w=new O,B=new e(p,f),H=s.smartClicks;this.remove=function(Q){return d(Q,function(){var tt=et(this);if(tt.__ta)for(var $ in tt.__ta)if(tt.__ta.hasOwnProperty($))for(var it in tt.__ta[$])tt.__ta[$].hasOwnProperty(it)&&g(tt,$,tt.__ta[$][it]);tt.parentNode&&tt.parentNode.removeChild(tt)}),this},this.on=function(Q,tt,$,it){return function(Q,tt,$,it){null!=$&&d(Q,function(){var ct=et(this);H&&"click"===tt?function(s,p,f,w){null==s.__taSmartClicks&&(N(s,"mousedown",function(Q){s.__tad=m(Q)},w),N(s,"mouseup",function(Q){s.__tau=m(Q)},w),N(s,"click",function(Q){if(s.__tad&&s.__tau&&s.__tad[0]===s.__tau[0]&&s.__tad[1]===s.__tau[1])for(var tt=0;tt<s.__taSmartClicks.length;tt++)s.__taSmartClicks[tt].apply(h(Q),[Q])},w),s.__taSmartClicks=[]),s.__taSmartClicks.push(f),f.__taUnstore=function(){c(s.__taSmartClicks,f)}}(ct,0,$,it):"tap"===tt||"dbltap"===tt||"contextmenu"===tt?B(ct,tt,$,it):"mouseenter"===tt||"mouseexit"==tt?w(ct,tt,$,it):N(ct,tt,$,it)})}(arguments[0],arguments[1],arguments[arguments.length-1],4==arguments.length?arguments[2]:null),this},this.off=function(Q,tt,$){return g(Q,tt,$),this},this.trigger=function(Q,tt,$,it){var ct=L&&(typeof MouseEvent>"u"||null==$||$.constructor===MouseEvent),dt=U&&!L&&t[tt]?t[tt]:tt,gt=!(U&&!L&&t[tt]),Pt=m($),pt=function(s){return y(s,"screen")}($),yt=function(s){return y(s,"client")}($);return d(Q,function(){var q,K=et(this);$=$||{screenX:pt[0],screenY:pt[1],clientX:yt[0],clientY:yt[1]};var nt=function(Ot){it&&(Ot.payload=it)},ut={TouchEvent:function(Ot){var Rt=X(window,K,0,Pt[0],Pt[1],pt[0],pt[1],yt[0],yt[1]);(Ot.initTouchEvent||Ot.initEvent)(dt,!0,!0,window,null,pt[0],pt[1],yt[0],yt[1],!1,!1,!1,!1,Rt,Rt,Rt,1,0)},MouseEvents:function(Ot){Ot.initMouseEvent(dt,!0,!0,window,0,pt[0],pt[1],yt[0],yt[1],!1,!1,!1,!1,1,K)}};if(document.createEvent){var xt=!gt&&!ct&&U&&t[tt]?"TouchEvent":"MouseEvents";q=document.createEvent(xt),ut[xt](q),nt(q),K.dispatchEvent(q)}else document.createEventObject&&((q=document.createEventObject()).eventType=q.eventName=dt,q.screenX=pt[0],q.screenY=pt[1],q.clientX=yt[0],q.clientY=yt[1],nt(q),K.fireEvent("on"+dt,q))}),this}},ot.Mottle.consume=function(s,p){s.stopPropagation?s.stopPropagation():s.returnValue=!1,!p&&s.preventDefault&&s.preventDefault()},ot.Mottle.pageLocation=m,ot.Mottle.setForceTouchEvents=function(s){U=s},ot.Mottle.setForceMouseEvents=function(s){L=s},ot.Mottle.version="0.8.0",Gt.Mottle=ot.Mottle}.call(typeof window>"u"?this:window),function(){"use strict";var J=this,u=function(g,d,a){return-1===g.indexOf(d)&&(a?g.unshift(d):g.push(d),!0)},X=function(g,d){var a=g.indexOf(d);-1!==a&&g.splice(a,1)},Z=function(g){return null!=g&&("string"==typeof g||g.constructor===String)},h=function(g,d,a){for(var s=(a=a||g.parentNode).querySelectorAll(d),p=0;p<s.length;p++)if(s[p]===g)return!0;return!1},x=function(g,d,a){if(h(d,a,g))return d;for(var s=d.parentNode;null!=s&&s!==g;){if(h(s,a,g))return s;s=s.parentNode}},n=function(){var g=-1;if("Microsoft Internet Explorer"===navigator.appName){var d=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(d)&&(g=parseFloat(RegExp.$1))}return g}(),R=n>-1&&n<9,F=9===n,N=function(g){if(R)return[g.clientX+document.documentElement.scrollLeft,g.clientY+document.documentElement.scrollTop];var d=r(g),a=M(d,0);return F?[a.pageX||a.clientX,a.pageY||a.clientY]:[a.pageX,a.pageY]},M=function(g,d){return g.item?g.item(d):g[d]},r=function(g){return g.touches&&g.touches.length>0?g.touches:g.changedTouches&&g.changedTouches.length>0?g.changedTouches:g.targetTouches&&g.targetTouches.length>0?g.targetTouches:[g]},e={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},O=["stop","start","drag","drop","over","out","beforeStart"],U=function(){},L=function(){return!0},t=function(g,d,a){for(var s=0;s<g.length;s++)g[s]!=a&&d(g[s])},l=function(g,d,a,s){t(g,function(p){p.setActive(d),d&&p.updatePosition(),a&&p.setHover(s,d)})},o=function(g,d){if(null!=g){g=Z(g)||null!=g.tagName||null==g.length?[g]:g;for(var a=0;a<g.length;a++)d.apply(g[a],[g[a]])}},b=function(g){g.stopPropagation?(g.stopPropagation(),g.preventDefault()):g.returnValue=!1},y=function(g,d,a,s){this.params=d||{},this.el=g,this.params.addClass(this.el,this._class),this.uuid=A();var p=!0;return this.setEnabled=function(f){p=f},this.isEnabled=function(){return p},this.toggleEnabled=function(){p=!p},this.setScope=function(f){this.scopes=f?f.split(/\s+/):[s]},this.addScope=function(f){var w={};for(var B in o(this.scopes,function(H){w[H]=!0}),o(f?f.split(/\s+/):[],function(H){w[H]=!0}),this.scopes=[],w)this.scopes.push(B)},this.removeScope=function(f){var w={};for(var B in o(this.scopes,function(H){w[H]=!0}),o(f?f.split(/\s+/):[],function(H){delete w[H]}),this.scopes=[],w)this.scopes.push(B)},this.toggleScope=function(f){var w={};for(var B in o(this.scopes,function(H){w[H]=!0}),o(f?f.split(/\s+/):[],function(H){w[H]?delete w[H]:w[H]=!0}),this.scopes=[],w)this.scopes.push(B)},this.setScope(d.scope),this.k=d.katavorio,d.katavorio},m=function(){return!0},S=function(){return!1},I=function(g,d,a,s){this._class=a.draggable;var p=y.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var Pt,pt,ut,mt,xt,Ot,f=[0,0],w=null,B=null,H=[0,0],V=!1,Q=[0,0],tt=!1!==this.params.consumeStartEvent,$=this.el,it=this.params.clone,dt=!1!==d.multipleDrop,gt=!1,yt=null,K=[],q=null,nt=d.ghostProxyParent;if(Pt=!0===d.ghostProxy?m:d.ghostProxy&&"function"==typeof d.ghostProxy?d.ghostProxy:function(st,bt){return!(!q||!q.useGhostProxy)&&q.useGhostProxy(st,bt)},pt=d.makeGhostProxy?d.makeGhostProxy:function(st){return q&&q.makeGhostProxy?q.makeGhostProxy(st):st.cloneNode(!0)},d.selector){var Rt=g.getAttribute("katavorio-draggable");null==Rt&&(Rt=""+(new Date).getTime(),g.setAttribute("katavorio-draggable",Rt)),K.push(d)}var Ut=d.snapThreshold,se=function(st,bt,Ct,_t,Dt){var Ft=bt*Math.floor(st[0]/bt),i=Ft+bt,E=Math.abs(st[0]-Ft)<=_t?Ft:Math.abs(i-st[0])<=_t?i:st[0],j=Ct*Math.floor(st[1]/Ct),Y=j+Ct;return[E,Math.abs(st[1]-j)<=Dt?j:Math.abs(Y-st[1])<=Dt?Y:st[1]]};this.posses=[],this.posseRoles={},this.toGrid=function(st){return null==this.params.grid?st:se(st,this.params.grid[0],this.params.grid[1],this.params.grid?this.params.grid[0]/2:Ut||5,this.params.grid?this.params.grid[1]/2:Ut||5)},this.snap=function(st,bt){if(null!=$){st=st||(this.params.grid?this.params.grid[0]:10),bt=bt||(this.params.grid?this.params.grid[1]:10);var Ct=this.params.getPosition($),At=se(Ct,st,bt,this.params.grid?this.params.grid[0]/2:Ut,this.params.grid?this.params.grid[1]/2:Ut);return this.params.setPosition($,At),At}},this.setUseGhostProxy=function(st){Pt=st?m:S};var Yt,te,Jt=function(st){return!1===d.allowNegative?[Math.max(0,st[0]),Math.max(0,st[1])]:st},Ht=function(st){Yt="function"==typeof st?st:st?function(bt,Ct,_t,Dt){return Jt([Math.max(0,Math.min(_t.w-Dt[0],bt[0])),Math.max(0,Math.min(_t.h-Dt[1],bt[1]))])}.bind(this):function(bt){return Jt(bt)}}.bind(this);Ht("function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(st){Ht(st)},this.setRevert=function(st){te=st},this.params.revert&&(te=this.params.revert);var Wt={},qt=this.setFilter=function(st,bt){if(st){var Ct=function(st){return"function"==typeof st?(st._katavorioId=A(),st._katavorioId):st}(st);Wt[Ct]=[function(_t){var At,Dt=_t.srcElement||_t.target;return Z(st)?At=h(Dt,st,g):"function"==typeof st&&(At=st(_t,g)),At},!1!==bt]}};this.addFilter=qt,this.removeFilter=function(st){delete Wt["function"==typeof st?st._katavorioId:st]},this.clearAllFilters=function(){Wt={}},this.canDrag=this.params.canDrag||L;var oe,Mt=[],It=[];this.addSelector=function(st){st.selector&&K.push(st)},this.downListener=function(st){if(!st.defaultPrevented&&(this.rightButtonCanDrag||3!==st.which&&2!==st.button)&&this.isEnabled()&&this.canDrag()){var Ct=function(st){for(var bt in Wt){var Ct=Wt[bt],_t=Ct[0](st);if(Ct[1]&&(_t=!_t),!_t)return!1}return!0}(st)&&function(g,d,a){return!h(g.srcElement||g.target,a.getInputFilterSelector(),d)}(st,this.el,this.k);if(Ct){if(q=null,yt=null,K.length>0){var _t=function(g,d,a){for(var s=null,p=d.getAttribute("katavorio-draggable"),f=null!=p?"[katavorio-draggable='"+p+"'] ":"",w=0;w<g.length;w++)if(null!=(s=x(d,a,f+g[w].selector))){if(g[w].filter){var B=h(a,g[w].filter,s);if(!0===g[w].filterExclude&&!B||B)return null}return[g[w],s]}return null}(K,this.el,st.target||st.srcElement);if(null!=_t&&(q=_t[0],yt=_t[1]),null==yt)return}else yt=this.el;if(it)if($=yt.cloneNode(!0),this.params.addClass($,e.clonedDrag),$.setAttribute("id",null),$.style.position="absolute",null!=this.params.parent){var Dt=this.params.getPosition(this.el);$.style.left=Dt[0]+"px",$.style.top=Dt[1]+"px",this.params.parent.appendChild($)}else{var At=function(g){var d=g.getBoundingClientRect(),a=document.body,s=document.documentElement,p=window.pageYOffset||s.scrollTop||a.scrollTop,f=window.pageXOffset||s.scrollLeft||a.scrollLeft,V=d.left+f-(s.clientLeft||a.clientLeft||0);return{top:Math.round(d.top+p-(s.clientTop||a.clientTop||0)),left:Math.round(V)}}(yt);$.style.left=At.left+"px",$.style.top=At.top+"px",document.body.appendChild($)}else $=yt;tt&&b(st),f=N(st),$&&$.parentNode&&(Q=[$.parentNode.scrollLeft,$.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),p.markSelection(this),p.markPosses(this),this.params.addClass(document.body,a.noSelect),Vt("beforeStart",{el:this.el,pos:w,e:st,drag:this})}else this.params.consumeFilteredEvents&&b(st)}}.bind(this),this.moveListener=function(st){if(f){if(!V)if(!1!==Vt("start",{el:this.el,pos:w,e:st,drag:this})){if(!f)return;this.mark(!0),V=!0}else this.abort();if(f){It.length=0;var Ct=N(st),_t=Ct[0]-f[0],Dt=Ct[1]-f[1],At=this.params.ignoreZoom?1:p.getZoom();$&&$.parentNode&&(_t+=$.parentNode.scrollLeft-Q[0],Dt+=$.parentNode.scrollTop-Q[1]),this.moveBy(_t/=At,Dt/=At,st),p.updateSelection(_t,Dt,this),p.updatePosses(_t,Dt,this)}}}.bind(this),this.upListener=function(st){f&&(f=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,a.noSelect),this.unmark(st),p.unmarkSelection(this,st),p.unmarkPosses(this,st),this.stop(st),p.notifyPosseDragStop(this,st),V=!1,It.length=0,it?($&&$.parentNode&&$.parentNode.removeChild($),$=null):te&&!0===te($,this.params.getPosition($))&&(this.params.setPosition($,w),Vt("revert",$)))}.bind(this),this.getFilters=function(){return Wt},this.abort=function(){null!=f&&this.upListener()},this.getDragElement=function(st){return st?yt||this.el:$||this.el};var Tt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};d.events.start&&Tt.start.push(d.events.start),d.events.beforeStart&&Tt.beforeStart.push(d.events.beforeStart),d.events.stop&&Tt.stop.push(d.events.stop),d.events.drag&&Tt.drag.push(d.events.drag),d.events.revert&&Tt.revert.push(d.events.revert),this.on=function(st,bt){Tt[st]&&Tt[st].push(bt)},this.off=function(st,bt){if(Tt[st]){for(var Ct=[],_t=0;_t<Tt[st].length;_t++)Tt[st][_t]!==bt&&Ct.push(Tt[st][_t]);Tt[st]=Ct}};var zt,Vt=function(st,bt){var Ct=null;if(q&&q[st])Ct=q[st](bt);else if(Tt[st])for(var _t=0;_t<Tt[st].length;_t++)try{var Dt=Tt[st][_t](bt);null!=Dt&&(Ct=Dt)}catch{}return Ct};this.notifyStart=function(st){Vt("start",{el:this.el,pos:this.params.getPosition($),e:st,drag:this})},this.stop=function(st,bt){if(bt||V){var Ct=[],_t=p.getSelection(),Dt=this.params.getPosition($);if(_t.length>0)for(var At=0;At<_t.length;At++){var Ft=this.params.getPosition(_t[At].el);Ct.push([_t[At].el,{left:Ft[0],top:Ft[1]},_t[At]])}else Ct.push([$,{left:Dt[0],top:Dt[1]},this]);Vt("stop",{el:$,pos:zt||Dt,finalPos:Dt,e:st,drag:this,selection:Ct})}},this.mark=function(st){var bt;w=this.params.getPosition($),B=this.params.getPosition($,!0),H=[B[0]-w[0],B[1]-w[1]],this.size=this.params.getSize($),Mt=p.getMatchingDroppables(this),l(Mt,!0,!1,this),this.params.addClass($,this.params.dragClass||a.drag),bt=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle($):this.params.getSize($.parentNode),oe={w:bt[0],h:bt[1]},xt=0,Ot=0,st&&p.notifySelectionDragStart(this)},this.unmark=function(st,bt){if(l(Mt,!1,!0,this),gt&&Pt(yt,$)?(zt=[$.offsetLeft-xt,$.offsetTop-Ot],$.parentNode.removeChild($),$=yt):zt=null,this.params.removeClass($,this.params.dragClass||a.drag),Mt.length=0,gt=!1,!bt){It.length>0&&zt&&d.setPosition(yt,zt),It.sort(G);for(var Ct=0;Ct<It.length&&!0!==It[Ct].drop(this,st);Ct++);}},this.moveBy=function(st,bt,Ct){It.length=0;var _t=this.toGrid([w[0]+st,w[1]+bt]),Dt=function(st,bt,Ct,_t){return null!=q&&q.constrain&&"function"==typeof q.constrain?q.constrain(st,bt,Ct,_t):Yt(st,bt,Ct,_t)}(_t,$,oe,this.size);if(Pt(this.el,$))if(_t[0]!==Dt[0]||_t[1]!==Dt[1]){if(!gt){var At=pt(yt);d.addClass(At,e.ghostProxy),nt?(nt.appendChild(At),ut=d.getPosition(yt.parentNode,!0),mt=d.getPosition(d.ghostProxyParent,!0),xt=ut[0]-mt[0],Ot=ut[1]-mt[1]):yt.parentNode.appendChild(At),$=At,gt=!0}Dt=_t}else gt&&($.parentNode.removeChild($),$=yt,gt=!1,ut=null,mt=null,xt=0,Ot=0);var Ft={x:Dt[0],y:Dt[1],w:this.size[0],h:this.size[1]},i={x:Ft.x+H[0],y:Ft.y+H[1],w:Ft.w,h:Ft.h},E=null;this.params.setPosition($,[Dt[0]+xt,Dt[1]+Ot]);for(var _=0;_<Mt.length;_++)this.params.intersects(i,{x:Mt[_].pagePosition[0],y:Mt[_].pagePosition[1],w:Mt[_].size[0],h:Mt[_].size[1]})&&(dt||null==E||E===Mt[_].el)&&Mt[_].canDrop(this)?(E||(E=Mt[_].el),It.push(Mt[_]),Mt[_].setHover(this,!0,Ct)):Mt[_].isHover()&&Mt[_].setHover(this,!1,Ct);Vt("drag",{el:this.el,pos:Dt,e:Ct,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?qt(this.params.handle,!1):qt(this.params.filter,this.params.filterExclude)},P=function(g,d,a,s){this._class=a.droppable,this.params=d||{},this.rank=d.rank||0,this._activeClass=this.params.activeClass||a.active,this._hoverClass=this.params.hoverClass||a.hover,y.apply(this,arguments);var p=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(f){this.params[f?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(f){return!0},this.isHover=function(){return p},this.setHover=function(f,w,B){(w||null==this.el._katavorioDragHover||this.el._katavorioDragHover===f.el._katavorio)&&(this.params[w?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=w?f.el._katavorio:null,p!==w&&this.params.events[w?"over":"out"]({el:this.el,e:B,drag:f,drop:this}),p=w)},this.drop=function(f,w){return this.params.events.drop({drag:f,e:w,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,p=null}},A=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(g){var d=16*Math.random()|0;return("x"===g?d:3&d|8).toString(16)})},G=function(g,d){return g.rank<d.rank?1:g.rank>d.rank?-1:0},W=function(g){return null==g||null==(g="string"==typeof g||g.constructor===String?document.getElementById(g):g)?null:(g._katavorio=g._katavorio||A(),g)};J.Katavorio=function(g){var d=[],a={};this._dragsByScope={},this._dropsByScope={};var s=1,p=function(K,q){o(K,function(nt){for(var ut=0;ut<nt.scopes.length;ut++)q[nt.scopes[ut]]=q[nt.scopes[ut]]||[],q[nt.scopes[ut]].push(nt)})},f=function(K,q){var nt=0;return o(K,function(ut){for(var mt=0;mt<ut.scopes.length;mt++)if(q[ut.scopes[mt]]){var xt=g.indexOf(q[ut.scopes[mt]],ut);-1!==xt&&(q[ut.scopes[mt]].splice(xt,1),nt++)}}),nt>0},B=(this.getMatchingDroppables=function(K){for(var q=[],nt={},ut=0;ut<K.scopes.length;ut++){var mt=this._dropsByScope[K.scopes[ut]];if(mt)for(var xt=0;xt<mt.length;xt++)mt[xt].canDrop(K)&&!nt[mt[xt].uuid]&&(mt[xt].allowLoopback||mt[xt].el!==K.el)&&(nt[mt[xt].uuid]=!0,q.push(mt[xt]))}return q.sort(G),q},function(K){K=K||{};var nt,q={events:{}};for(nt in g)q[nt]=g[nt];for(nt in K)q[nt]=K[nt];for(nt=0;nt<O.length;nt++)q.events[O[nt]]=K[O[nt]]||U;return q.katavorio=this,q}.bind(this)),H=function(K,q){for(var nt=0;nt<O.length;nt++)q[O[nt]]&&K.on(O[nt],q[O[nt]])}.bind(this),V={},Q=g.css||{},tt=g.scope||"katavorio-drag-scope";for(var $ in e)V[$]=e[$];for(var $ in Q)V[$]=Q[$];var it=g.inputFilterSelector||"input,textarea,select,button,option";this.getInputFilterSelector=function(){return it},this.setInputFilterSelector=function(K){return it=K,this},this.draggable=function(K,q){var nt=[];return o(K,function(ut){if(null!=(ut=W(ut)))if(null==ut._katavorioDrag){var mt=B(q);ut._katavorioDrag=new I(ut,mt,V,tt),p(ut._katavorioDrag,this._dragsByScope),nt.push(ut._katavorioDrag),g.addClass(ut,mt.selector?V.delegatedDraggable:V.draggable)}else H(ut._katavorioDrag,q)}.bind(this)),nt},this.droppable=function(K,q){var nt=[];return o(K,function(ut){if(null!=(ut=W(ut))){var mt=new P(ut,B(q),V,tt);ut._katavorioDrop=ut._katavorioDrop||[],ut._katavorioDrop.push(mt),p(mt,this._dropsByScope),nt.push(mt),g.addClass(ut,V.droppable)}}.bind(this)),nt},this.select=function(K){return o(K,function(){var q=W(this);q&&q._katavorioDrag&&(a[q._katavorio]||(d.push(q._katavorioDrag),a[q._katavorio]=[q,d.length-1],g.addClass(q,V.selected)))}),this},this.deselect=function(K){return o(K,function(){var q=W(this);if(q&&q._katavorio&&a[q._katavorio]){for(var ut=[],mt=0;mt<d.length;mt++)d[mt].el!==q&&ut.push(d[mt]);d=ut,delete a[q._katavorio],g.removeClass(q,V.selected)}}),this},this.deselectAll=function(){for(var K in a)g.removeClass(a[K][0],V.selected);d.length=0,a={}},this.markSelection=function(K){t(d,function(q){q.mark()},K)},this.markPosses=function(K){K.posses&&o(K.posses,function(q){K.posseRoles[q]&&pt[q]&&t(pt[q].members,function(nt){nt.mark()},K)})},this.unmarkSelection=function(K,q){t(d,function(nt){nt.unmark(q)},K)},this.unmarkPosses=function(K,q){K.posses&&o(K.posses,function(nt){K.posseRoles[nt]&&pt[nt]&&t(pt[nt].members,function(ut){ut.unmark(q,!0)},K)})},this.getSelection=function(){return d.slice(0)},this.updateSelection=function(K,q,nt){t(d,function(ut){ut.moveBy(K,q)},nt)};var ct=function(K,q){q.posses&&o(q.posses,function(nt){q.posseRoles[nt]&&pt[nt]&&t(pt[nt].members,function(ut){K(ut)},q)})};this.updatePosses=function(K,q,nt){ct(function(ut){ut.moveBy(K,q)},nt)},this.notifyPosseDragStop=function(K,q){ct(function(nt){nt.stop(q,!0)},K)},this.notifySelectionDragStop=function(K,q){t(d,function(nt){nt.stop(q,!0)},K)},this.notifySelectionDragStart=function(K,q){t(d,function(nt){nt.notifyStart(q)},K)},this.setZoom=function(K){s=K},this.getZoom=function(){return s};var dt=function(K,q,nt,ut){o(K,function(mt){f(mt,nt),mt[ut](q),p(mt,nt)})};o(["set","add","remove","toggle"],function(K){this[K+"Scope"]=function(q,nt){dt(q._katavorioDrag,nt,this._dragsByScope,K+"Scope"),dt(q._katavorioDrop,nt,this._dropsByScope,K+"Scope")}.bind(this),this[K+"DragScope"]=function(q,nt){dt(q.constructor===I?q:q._katavorioDrag,nt,this._dragsByScope,K+"Scope")}.bind(this),this[K+"DropScope"]=function(q,nt){dt(q.constructor===P?q:q._katavorioDrop,nt,this._dropsByScope,K+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(K,q){for(var nt in this._dragsByScope)t(this._dragsByScope[nt],function(ut){ut.snap(K,q)})},this.getDragsForScope=function(K){return this._dragsByScope[K]},this.getDropsForScope=function(K){return this._dropsByScope[K]};var gt=function(K,q,nt){if((K=W(K))[q]){var ut=d.indexOf(K[q]);ut>=0&&d.splice(ut,1),f(K[q],nt)&&o(K[q],function(mt){mt.destroy()}),delete K[q]}},Pt=function(K,q,nt,ut){(K=W(K))[q]&&K[q].off(nt,ut)};this.elementRemoved=function(K){K._katavorioDrag&&this.destroyDraggable(K),K._katavorioDrop&&this.destroyDroppable(K)},this.destroyDraggable=function(K,q,nt){1===arguments.length?gt(K,"_katavorioDrag",this._dragsByScope):Pt(K,"_katavorioDrag",q,nt)},this.destroyDroppable=function(K,q,nt){1===arguments.length?gt(K,"_katavorioDrop",this._dropsByScope):Pt(K,"_katavorioDrop",q,nt)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},d=[],a={},pt={}};var pt={},yt=function(K,q,nt){var Ot,ut=Z(q)?q:q.id,mt=!!Z(q)||!1!==q.active,xt=pt[ut]||(pt[ut]=Ot={name:ut,members:[]},Ot);return o(K,function(Ot){if(Ot._katavorioDrag){if(nt&&null!=Ot._katavorioDrag.posseRoles[xt.name])return;u(xt.members,Ot._katavorioDrag),u(Ot._katavorioDrag.posses,xt.name),Ot._katavorioDrag.posseRoles[xt.name]=mt}}),xt};this.addToPosse=function(K,q){for(var nt=[],ut=1;ut<arguments.length;ut++)nt.push(yt(K,arguments[ut]));return 1===nt.length?nt[0]:nt},this.setPosse=function(K,q){for(var nt=[],ut=1;ut<arguments.length;ut++)nt.push(yt(K,arguments[ut],!0).name);return o(K,function(mt){if(mt._katavorioDrag){var xt=function(g,d){for(var a=[],s=0;s<g.length;s++)-1===d.indexOf(g[s])&&a.push(g[s]);return a}(mt._katavorioDrag.posses,nt);Array.prototype.push.apply([],mt._katavorioDrag.posses);for(var Rt=0;Rt<xt.length;Rt++)this.removeFromPosse(mt,xt[Rt])}}.bind(this)),1===nt.length?nt[0]:nt},this.removeFromPosse=function(K,q){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var nt=1;nt<arguments.length;nt++)q=arguments[nt],o(K,function(ut){if(ut._katavorioDrag&&ut._katavorioDrag.posses){var mt=ut._katavorioDrag;o(q,function(xt){X(pt[xt].members,mt),X(mt.posses,xt),delete mt.posseRoles[xt]})}})},this.removeFromAllPosses=function(K){o(K,function(q){if(q._katavorioDrag&&q._katavorioDrag.posses){var nt=q._katavorioDrag;o(nt.posses,function(ut){X(pt[ut].members,nt)}),nt.posses.length=0,nt.posseRoles={}}})},this.setPosseState=function(K,q,nt){var ut=pt[q];ut&&o(K,function(mt){mt._katavorioDrag&&mt._katavorioDrag.posses&&(mt._katavorioDrag.posseRoles[ut.name]=nt)})}},J.Katavorio.version="1.0.0",Gt.Katavorio=J.Katavorio}.call(typeof window<"u"?window:this),function(){var J=this;J.jsPlumbUtil=J.jsPlumbUtil||{};var u=J.jsPlumbUtil;function X(g){return"[object Array]"===Object.prototype.toString.call(g)}function Z(g){return"string"==typeof g}function et(g){return"boolean"==typeof g}function x(g){return null!=g&&"[object Object]"===Object.prototype.toString.call(g)}function c(g){return"[object Date]"===Object.prototype.toString.call(g)}function n(g){return"[object Function]"===Object.prototype.toString.call(g)}function R(g){if(Z(g))return""+g;if(et(g))return!!g;if(c(g))return new Date(g.getTime());if(n(g))return g;if(X(g)){for(var d=[],a=0;a<g.length;a++)d.push(R(g[a]));return d}if(x(g)){var s={};for(var p in g)s[p]=R(g[p]);return s}return g}function F(g,d,a,s){var f,w,p={},B={};for(a=a||[],s=s||[],w=0;w<a.length;w++)p[a[w]]=!0;for(w=0;w<s.length;w++)B[s[w]]=!0;var H=R(g);for(w in d)if(null==H[w]||B[w])H[w]=d[w];else if(Z(d[w])||et(d[w]))p[w]?((f=[]).push.apply(f,X(H[w])?H[w]:[H[w]]),f.push.apply(f,et(d[w])?d[w]:[d[w]]),H[w]=f):H[w]=d[w];else if(X(d[w]))f=[],X(H[w])&&f.push.apply(f,H[w]),f.push.apply(f,d[w]),H[w]=f;else if(x(d[w]))for(var V in x(H[w])||(H[w]={}),d[w])H[w][V]=d[w][V];return H}function e(g,d){if(g)for(var a=0;a<g.length;a++)if(d(g[a]))return a;return-1}function O(g,d){var a=g.indexOf(d);return a>-1&&g.splice(a,1),-1!==a}function L(g,d,a,s){var p=g[d];return null==p&&(g[d]=p=[]),p[s?"unshift":"push"](a),p}Gt.jsPlumbUtil=u,u.isArray=X,u.isNumber=function ot(g){return"[object Number]"===Object.prototype.toString.call(g)},u.isString=Z,u.isBoolean=et,u.isNull=function h(g){return null==g},u.isObject=x,u.isDate=c,u.isFunction=n,u.isNamedFunction=function D(g){return n(g)&&null!=g.name&&g.name.length>0},u.isEmpty=function k(g){for(var d in g)if(g.hasOwnProperty(d))return!1;return!0},u.clone=R,u.merge=F,u.replace=function N(g,d,a){if(null!=g){var p=g;return d.replace(/([^\.])+/g,function(f,w,B,H){var V=f.match(/([^\[0-9]+){1}(\[)([0-9+])/),tt=function(){return p[V[1]]||(p[V[1]]=[],p[V[1]])};if(B+f.length>=H.length)V?tt()[V[3]]=a:p[f]=a;else if(V){var $=tt();p=$[V[3]]||($[V[3]]={},$[V[3]])}else p=p[f]||(p[f]={},p[f]);return""}),g}},u.functionChain=function M(g,d,a){for(var s=0;s<a.length;s++){var p=a[s][0][a[s][1]].apply(a[s][0],a[s][2]);if(p===d)return p}return g},u.populate=function r(g,d,a,s){var f=function(w){if(null!=w){if(Z(w))return function(w){var B=w.match(/(\${.*?})/g);if(null!=B)for(var H=0;H<B.length;H++){var V=d[B[H].substring(2,B[H].length-1)]||"";null!=V&&(w=w.replace(B[H],V))}return w}(w);if(n(w)&&!s&&(null==a||0===(w.name||"").indexOf(a)))return w(d);if(X(w)){for(var B=[],H=0;H<w.length;H++)B.push(f(w[H]));return B}if(x(w)){var V={};for(var Q in w)V[Q]=f(w[Q]);return V}return w}};return f(g)},u.findWithFunction=e,u.removeWithFunction=function T(g,d){var a=e(g,d);return a>-1&&g.splice(a,1),-1!==a},u.remove=O,u.addWithFunction=function U(g,d,a){-1===e(g,a)&&g.push(d)},u.addToList=L,u.suggest=function t(g,d,a){return-1===g.indexOf(d)&&(a?g.unshift(d):g.push(d),!0)},u.extend=function l(g,d,a){var s;d=X(d)?d:[d];var p=function(H){for(var V=H.__proto__;null!=V;)if(null!=V.prototype){for(var Q in V.prototype)V.prototype.hasOwnProperty(Q)&&!g.prototype.hasOwnProperty(Q)&&(g.prototype[Q]=V.prototype[Q]);V=V.prototype.__proto__}else V=null};for(s=0;s<d.length;s++){for(var f in d[s].prototype)d[s].prototype.hasOwnProperty(f)&&!g.prototype.hasOwnProperty(f)&&(g.prototype[f]=d[s].prototype[f]);p(d[s])}var w=function(H,V){return function(){for(s=0;s<d.length;s++)d[s].prototype[H]&&d[s].prototype[H].apply(this,arguments);return V.apply(this,arguments)}},B=function(H){for(var V in H)g.prototype[V]=w(V,H[V])};if(arguments.length>2)for(s=2;s<arguments.length;s++)B(arguments[s]);return g};for(var o=[],b=0;b<256;b++)o[b]=(b<16?"0":"")+b.toString(16);function C(){var g=4294967295*Math.random()|0,d=4294967295*Math.random()|0,a=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return o[255&g]+o[g>>8&255]+o[g>>16&255]+o[g>>24&255]+"-"+o[255&d]+o[d>>8&255]+"-"+o[d>>16&15|64]+o[d>>24&255]+"-"+o[63&a|128]+o[a>>8&255]+"-"+o[a>>16&255]+o[a>>24&255]+o[255&s]+o[s>>8&255]+o[s>>16&255]+o[s>>24&255]}function I(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];if(u.logEnabled&&typeof console<"u")try{console.log(arguments[arguments.length-1])}catch{}}u.uuid=C,u.fastTrim=function v(g){if(null==g)return null;for(var d=g.replace(/^\s\s*/,""),a=/\s/,s=d.length;a.test(d.charAt(--s)););return d.slice(0,s+1)},u.each=function y(g,d){g=null==g.length||"string"==typeof g?[g]:g;for(var a=0;a<g.length;a++)d(g[a])},u.map=function m(g,d){for(var a=[],s=0;s<g.length;s++)a.push(d(g[s]));return a},u.mergeWithParents=function S(g,d,a){a=a||"parent";var s=function(H){return H?d[H]:null},p=function(H){return H?s(H[a]):null},f=function(H,V){if(null==H)return V;var Q=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];"override"===V.mergeStrategy&&Array.prototype.push.apply(Q,["events","overlays"]);var tt=F(H,V,[],Q);return f(p(H),tt)},w=function(H){if(null==H)return{};if("string"==typeof H)return s(H);if(H.length){for(var V=!1,Q=0,tt=void 0;!V&&Q<H.length;)(tt=w(H[Q]))?V=!0:Q++;return tt}},B=w(g);return B?f(p(B),B):{}},u.logEnabled=!0,u.log=I,u.wrap=function P(g,d,a){return function(){var s=null;try{null!=d&&(s=d.apply(this,arguments))}catch(p){I("jsPlumb function failed : "+p)}if(null!=g&&(null==a||s!==a))try{s=g.apply(this,arguments)}catch(p){I("wrapped function failed : "+p)}return s}};function G(g,d,a){var s=[g[0]-d[0],g[1]-d[1]],p=Math.cos(a/360*Math.PI*2),f=Math.sin(a/360*Math.PI*2);return[s[0]*p-s[1]*f+d[0],s[1]*p+s[0]*f+d[1],p,f]}u.EventGenerator=function g(){var d=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(a,s,p){var f=function(B){L(d._listeners,B,s,p),s.__jsPlumb=s.__jsPlumb||{},s.__jsPlumb[C()]=B};if("string"==typeof a)f(a);else if(null!=a.length)for(var w=0;w<a.length;w++)f(a[w]);return d},this.fire=function(a,s,p){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[a]){var f=this._listeners[a].length,w=0,B=!1,H=null;if(!this.shouldFireEvent||this.shouldFireEvent(a,s,p))for(;!B&&w<f&&!1!==H;){if(this.eventsToDieOn[a])this._listeners[a][w].apply(this,[s,p]);else try{H=this._listeners[a][w].apply(this,[s,p])}catch(V){I("jsPlumb: fire failed for event "+a+" : "+V)}w++,(null==this._listeners||null==this._listeners[a])&&(B=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var a=d.queue.pop();a&&d.fire.apply(d,a)},this.unbind=function(a,s){if(0===arguments.length)this._listeners={};else if(1===arguments.length){if("string"==typeof a)delete this._listeners[a];else if(a.__jsPlumb)for(var f in a.__jsPlumb)O(this._listeners[a.__jsPlumb[f]]||[],a)}else 2===arguments.length&&O(this._listeners[a]||[],s);return this},this.getListener=function(a){return d._listeners[a]},this.setSuspendEvents=function(a){d.eventsSuspended=a},this.isSuspendEvents=function(){return d.eventsSuspended},this.silently=function(a){d.setSuspendEvents(!0);try{a()}catch(s){I("Cannot execute silent function "+s)}d.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var a in d._listeners)d._listeners[a]=null}},u.rotatePoint=G,u.rotateAnchorOrientation=function W(g,d){var a=G(g,[0,0],d);return[Math.round(a[0]),Math.round(a[1])]}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this;J.jsPlumbUtil.matchesSelector=function(u,X,ot){for(var Z=(ot=ot||u.parentNode).querySelectorAll(X),et=0;et<Z.length;et++)if(Z[et]===u)return!0;return!1},J.jsPlumbUtil.consume=function(u,X){u.stopPropagation?u.stopPropagation():u.returnValue=!1,!X&&u.preventDefault&&u.preventDefault()},J.jsPlumbUtil.sizeElement=function(u,X,ot,Z,et){u&&(u.style.height=et+"px",u.height=et,u.style.width=Z+"px",u.width=Z,u.style.left=X+"px",u.style.top=ot+"px")}}.call(typeof window<"u"?window:this),function(){var J={deriveAnchor:function(Z,et,h,x){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[Z][et]}},X=function(Z,et){this.count=0,this.instance=Z,this.lists={},this.options=et||{},this.instance.addList=function(h,x){return this.listManager.addList(h,x)},this.instance.removeList=function(h){this.listManager.removeList(h)},this.instance.bind("manageElement",function(h){for(var x=this.instance.getSelector(h.el,"[jtk-scrollable-list]"),c=0;c<x.length;c++)this.addList(x[c])}.bind(this)),this.instance.bind("unmanageElement",function(h){this.removeList(h.el)}),this.instance.bind("connection",function(h,x){null==x&&(this._maybeUpdateParentList(h.source),this._maybeUpdateParentList(h.target))}.bind(this))};this.jsPlumbListManager=X,X.prototype={addList:function(Z,et){var h=this.instance.extend({},J);this.instance.extend(h,this.options),et=this.instance.extend(h,et||{});var x=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[x]=new ot(this.instance,Z,et,x)},removeList:function(Z){var et=this.lists[Z._jsPlumbList];et&&(et.destroy(),delete this.lists[Z._jsPlumbList])},_maybeUpdateParentList:function(Z){for(var et=Z.parentNode,h=this.instance.getContainer();null!=et&&et!==h;){if(null!=et._jsPlumbList&&null!=this.lists[et._jsPlumbList])return void et._jsPlumbScrollHandler();et=et.parentNode}}};var ot=function(Z,et,h,x){function c(R,F,N,M){return h.anchor?h.anchor:h.deriveAnchor(R,F,N,M)}function n(R,F,N,M){return h.deriveEndpoint?h.deriveEndpoint(R,F,N,M):h.endpoint?h.endpoint:N.type}et._jsPlumbList=x;var k=function(R){for(var F=Z.getSelector(et,".jtk-managed"),N=Z.getId(et),M=0;M<F.length;M++){if(F[M].offsetTop<et.scrollTop)F[M]._jsPlumbProxies||(F[M]._jsPlumbProxies=F[M]._jsPlumbProxies||[],Z.select({source:F[M]}).each(function(e){Z.proxyConnection(e,0,et,N,function(){return n("top",0,e.endpoints[0],e)},function(){return c("top",0,e.endpoints[0],e)}),F[M]._jsPlumbProxies.push([e,0])}),Z.select({target:F[M]}).each(function(e){Z.proxyConnection(e,1,et,N,function(){return n("top",1,e.endpoints[1],e)},function(){return c("top",1,e.endpoints[1],e)}),F[M]._jsPlumbProxies.push([e,1])}));else if(F[M].offsetTop+F[M].offsetHeight>et.scrollTop+et.offsetHeight)F[M]._jsPlumbProxies||(F[M]._jsPlumbProxies=F[M]._jsPlumbProxies||[],Z.select({source:F[M]}).each(function(e){Z.proxyConnection(e,0,et,N,function(){return n("bottom",0,e.endpoints[0],e)},function(){return c("bottom",0,e.endpoints[0],e)}),F[M]._jsPlumbProxies.push([e,0])}),Z.select({target:F[M]}).each(function(e){Z.proxyConnection(e,1,et,N,function(){return n("bottom",1,e.endpoints[1],e)},function(){return c("bottom",1,e.endpoints[1],e)}),F[M]._jsPlumbProxies.push([e,1])}));else if(F[M]._jsPlumbProxies){for(var r=0;r<F[M]._jsPlumbProxies.length;r++)Z.unproxyConnection(F[M]._jsPlumbProxies[r][0],F[M]._jsPlumbProxies[r][1],N);delete F[M]._jsPlumbProxies}Z.revalidate(F[M])}!function D(R){for(var F=R.parentNode,N=Z.getContainer();null!=F&&F!==N;){if(Z.hasClass(F,"jtk-managed"))return void Z.recalculateOffsets(F);F=F.parentNode}}(et)};Z.setAttribute(et,"jtk-scrollable-list","true"),et._jsPlumbScrollHandler=k,Z.on(et,"scroll",k),k(),this.destroy=function(){Z.off(et,"scroll",k),delete et._jsPlumbScrollHandler;for(var R=Z.getSelector(et,".jtk-managed"),F=Z.getId(et),N=0;N<R.length;N++)if(R[N]._jsPlumbProxies){for(var M=0;M<R[N]._jsPlumbProxies.length;M++)Z.unproxyConnection(R[N]._jsPlumbProxies[M][0],R[N]._jsPlumbProxies[M][1],F);delete R[N]._jsPlumbProxies}}}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,u=J.jsPlumbUtil,X=function(r){if(r._jsPlumb.paintStyle&&r._jsPlumb.hoverPaintStyle){var e={};M.extend(e,r._jsPlumb.paintStyle),M.extend(e,r._jsPlumb.hoverPaintStyle),delete r._jsPlumb.hoverPaintStyle,e.gradient&&r._jsPlumb.paintStyle.fill&&delete e.gradient,r._jsPlumb.hoverPaintStyle=e}},ot=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],h=function(r){return null==r?null:r.split(" ")},x=function(r,e,T){for(var O in e)r[O]=T},n=function(r,e,T){if(r.getDefaultType){var O=r.getTypeDescriptor(),U={},L=r.getDefaultType(),t=u.merge({},L);x(U,L,"__default");for(var l=0,o=r._jsPlumb.types.length;l<o;l++){var b=r._jsPlumb.types[l];if("__default"!==b){var C=r._jsPlumb.instance.getType(b,O);if(null!=C){var v=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],y=[];"override"===C.mergeStrategy?Array.prototype.push.apply(v,["events","overlays","cssClass"]):y.push("cssClass"),t=u.merge(t,C,y,v),x(U,C,b)}}}e&&(t=u.populate(t,e,"_")),r.applyType(t,T,U),T||r.repaint()}},D=J.jsPlumbUIComponent=function(r){u.EventGenerator.apply(this,arguments);var T=arguments,U=this.idPrefix+(new Date).getTime();this._jsPlumb={instance:r._jsPlumb,parameters:r.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:r.beforeDetach,beforeDrop:r.beforeDrop,overlayPlacements:[],hoverClass:r.hoverClass||r._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(y,m,S){this._jsPlumb.typeCache[S]=this._jsPlumb.typeCache[S]||{},this._jsPlumb.typeCache[S][y]=m},this.getCachedTypeItem=function(y,m){return this._jsPlumb.typeCache[m]?this._jsPlumb.typeCache[m][y]:null},this.getId=function(){return U};var L=r.overlays||[],t={};if(this.defaultOverlayKeys){for(var l=0;l<this.defaultOverlayKeys.length;l++)Array.prototype.push.apply(L,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[l]]||[]);for(l=0;l<L.length;l++){var o=M.convertToFullOverlaySpec(L[l]);t[o[1].id]=o}}var b={overlays:t,parameters:r.parameters||{},scope:r.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return b},this.appendToDefaultType=function(y){for(var m in y)b[m]=y[m]},r.events)for(var C in r.events)this.bind(C,r.events[C]);this.clone=function(){var y=Object.create(this.constructor.prototype);return this.constructor.apply(y,T),y}.bind(this),this.isDetachAllowed=function(y){var m=!0;if(this._jsPlumb.beforeDetach)try{m=this._jsPlumb.beforeDetach(y)}catch(S){u.log("jsPlumb: beforeDetach callback failed",S)}return m},this.isDropAllowed=function(y,m,S,I,P,A,G){var W=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:y,targetId:m,scope:S,connection:I,dropEndpoint:P,source:A,target:G});if(this._jsPlumb.beforeDrop)try{W=this._jsPlumb.beforeDrop({sourceId:y,targetId:m,scope:S,connection:I,dropEndpoint:P,source:A,target:G})}catch(g){u.log("jsPlumb: beforeDrop callback failed",g)}return W};var v=[];this.setListenerComponent=function(y){for(var m=0;m<v.length;m++)v[m][3]=y}},k=function(r,e){var O=r._jsPlumb.instance.getType(r._jsPlumb.types[e],r.getTypeDescriptor());null!=O&&O.cssClass&&r.canvas&&r._jsPlumb.instance.removeClass(r.canvas,O.cssClass)};u.extend(J.jsPlumbUIComponent,u.EventGenerator,{getParameter:function(r){return this._jsPlumb.parameters[r]},setParameter:function(r,e){this._jsPlumb.parameters[r]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(r){this._jsPlumb.parameters=r},getClass:function(){return M.getClass(this.canvas)},hasClass:function(r){return M.hasClass(this.canvas,r)},addClass:function(r){M.addClass(this.canvas,r)},removeClass:function(r){M.removeClass(this.canvas,r)},updateClasses:function(r,e){M.updateClasses(this.canvas,r,e)},setType:function(r,e,T){this.clearTypes(),this._jsPlumb.types=h(r)||[],n(this,e,T)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(r,e){n(this,r,e)},hasType:function(r){return-1!==this._jsPlumb.types.indexOf(r)},addType:function(r,e,T){var O=h(r),U=!1;if(null!=O){for(var L=0,t=O.length;L<t;L++)this.hasType(O[L])||(this._jsPlumb.types.push(O[L]),U=!0);U&&n(this,e,T)}},removeType:function(r,e,T){var O=h(r),U=!1,L=function(o){var b=this._jsPlumb.types.indexOf(o);return-1!==b&&(k(this,b),this._jsPlumb.types.splice(b,1),!0)}.bind(this);if(null!=O){for(var t=0,l=O.length;t<l;t++)U=L(O[t])||U;U&&n(this,e,T)}},clearTypes:function(r,e){for(var T=this._jsPlumb.types.length,O=0;O<T;O++)k(this,0),this._jsPlumb.types.splice(0,1);n(this,r,e)},toggleType:function(r,e,T){var O=h(r);if(null!=O){for(var U=0,L=O.length;U<L;U++){var t=this._jsPlumb.types.indexOf(O[U]);-1!==t?(k(this,t),this._jsPlumb.types.splice(t,1)):this._jsPlumb.types.push(O[U])}n(this,e,T)}},applyType:function(r,e){if(this.setPaintStyle(r.paintStyle,e),this.setHoverPaintStyle(r.hoverPaintStyle,e),r.parameters)for(var T in r.parameters)this.setParameter(T,r.parameters[T]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(r,e){this._jsPlumb.paintStyle=r,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,X(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(r,e){this._jsPlumb.hoverPaintStyle=r,X(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(r){(r||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(r,e,T){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=r;var O=r?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[O](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[O](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=r?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(T=T||jsPlumbUtil.uuid(),this.repaint({timestamp:T,recalc:!1}))),this.getAttachedElements&&!e&&function(r,e,T,O){var U=r.getAttachedElements();if(U)for(var L=0,t=U.length;L<t;L++)(!O||O!==U[L])&&U[L].setHover(e,!0,T)}(this,r,jsPlumbUtil.uuid(),this)}}});var R=0,N=J.jsPlumbInstance=function(r){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},r&&M.extend(this.Defaults,r),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},u.EventGenerator.apply(this);var e=this,T=function(){var r=R+1;return R++,r}(),O=e.bind,U={},L=1,t=function(i){if(null==i)return null;if(3===i.nodeType||8===i.nodeType)return{el:i,text:!0};var E=e.getElement(i);return{el:E,id:u.isString(i)&&null==E?i:K(E)}};for(var l in this.getInstanceIndex=function(){return T},this.setZoom=function(i,E){return e.fire("zoom",L=i),E&&e.repaintEverything(),!0},this.getZoom=function(){return L},this.Defaults)U[l]=this.Defaults[l];var o,b=[];this.unbindContainer=function(){if(null!=o&&b.length>0)for(var i=0;i<b.length;i++)e.off(o,b[i][0],b[i][1])},this.setContainer=function(i){this.unbindContainer(),i=this.getElement(i),this.select().each(function(lt){lt.moveParent(i)}),this.selectEndpoints().each(function(lt){lt.moveParent(i)});var E=o;o=i,b.length=0;for(var _={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},j=function(lt,ht,Et){var vt=ht.srcElement||ht.target,St=(vt&&vt.parentNode?vt.parentNode._jsPlumb:null)||(vt?vt._jsPlumb:null)||(vt&&vt.parentNode&&vt.parentNode.parentNode?vt.parentNode.parentNode._jsPlumb:null);St&&(St.fire(lt,St,ht),e.fire(Et&&_[Et+lt]||lt,St.component||St,ht))},Y=function(lt,ht,Et){b.push([lt,Et]),e.on(o,lt,ht,Et)},z=function(lt){Y(lt,".jtk-connector",function(ht){j(lt,ht)}),Y(lt,".jtk-endpoint",function(ht){j(lt,ht,"endpoint")}),Y(lt,".jtk-overlay",function(ht){j(lt,ht)})},rt=0;rt<ot.length;rt++)z(ot[rt]);for(var ft in I){var at=I[ft].el;at.parentNode===E&&(E.removeChild(at),o.appendChild(at))}},this.getContainer=function(){return o},this.bind=function(i,E){"ready"===i&&v?E():O.apply(e,[i,E])},e.importDefaults=function(i){for(var E in i)e.Defaults[E]=i[E];return i.Container&&e.setContainer(i.Container),e},e.restoreDefaults=function(){return e.Defaults=M.extend({},U),e};var C=null,v=!1,y=[],m={},S={},I={},P={},A={},W=!1,g=[],d=!1,a=null,s=this.Defaults.Scope,p=1,f=function(){return""+p++},w=function(i,E){o?o.appendChild(i):E?this.getElement(E).appendChild(i):this.appendToRoot(i)}.bind(this),B=function(i,E,_,j){var Y={c:[],e:[]};if(!d&&null!=(i=e.getElement(i))){var z=K(i),rt=i.querySelectorAll(".jtk-managed");null==_&&(_=jsPlumbUtil.uuid()),It({elId:z,offset:E,recalc:!1,timestamp:_});for(var at=0;at<rt.length;at++)It({elId:rt[at].getAttribute("id"),recalc:!0,timestamp:_});var lt=e.router.redraw(z,E,_,null,j);if(Array.prototype.push.apply(Y.c,lt.c),Array.prototype.push.apply(Y.e,lt.e),rt)for(var ht=0;ht<rt.length;ht++)lt=e.router.redraw(rt[ht].getAttribute("id"),null,_,null,j,!0),Array.prototype.push.apply(Y.c,lt.c),Array.prototype.push.apply(Y.e,lt.e)}return Y},H=function(i){return S[i]},tt=function(i,E){var _=M.extend({},i);if(E&&M.extend(_,E),_.source&&(_.source.endpoint?_.sourceEndpoint=_.source:_.source=e.getElement(_.source)),_.target&&(_.target.endpoint?_.targetEndpoint=_.target:_.target=e.getElement(_.target)),i.uuids&&(_.sourceEndpoint=H(i.uuids[0]),_.targetEndpoint=H(i.uuids[1])),_.sourceEndpoint&&_.sourceEndpoint.isFull())u.log(e,"could not add connection; source endpoint is full");else{if(!_.targetEndpoint||!_.targetEndpoint.isFull()){if(!_.type&&_.sourceEndpoint&&(_.type=_.sourceEndpoint.connectionType),_.sourceEndpoint&&_.sourceEndpoint.connectorOverlays){_.overlays=_.overlays||[];for(var j=0,Y=_.sourceEndpoint.connectorOverlays.length;j<Y;j++)_.overlays.push(_.sourceEndpoint.connectorOverlays[j])}_.sourceEndpoint&&_.sourceEndpoint.scope&&(_.scope=_.sourceEndpoint.scope),!_["pointer-events"]&&_.sourceEndpoint&&_.sourceEndpoint.connectorPointerEvents&&(_["pointer-events"]=_.sourceEndpoint.connectorPointerEvents);var rt=function(ft,at,lt,ht){if(_[ft]&&!_[ft].endpoint&&!_[ft+"Endpoint"]&&!_.newConnection){var vt=lt[K(_[ft])];if(vt=vt?vt[ht]:null){if(!vt.enabled)return!1;var St=M.extend({},vt.def);delete St.label;var wt=null!=vt.endpoint&&vt.endpoint._jsPlumb?vt.endpoint:function(ft,at,lt){var ht=function(i,E){var _=M.extend({},i);for(var j in E)E[j]&&(_[j]=E[j]);return _}(at,{anchor:_.anchors?_.anchors[lt]:_.anchor,endpoint:_.endpoints?_.endpoints[lt]:_.endpoint,paintStyle:_.endpointStyles?_.endpointStyles[lt]:_.endpointStyle,hoverPaintStyle:_.endpointHoverStyles?_.endpointHoverStyles[lt]:_.endpointHoverStyle});return e.addEndpoint(ft,ht)}(_[ft],St,at);if(wt.isFull())return!1;_[ft+"Endpoint"]=wt,!_.scope&&St.scope&&(_.scope=St.scope),vt.uniqueEndpoint?vt.endpoint?wt.finalEndpoint=vt.endpoint:(vt.endpoint=wt,wt.setDeleteOnEmpty(!1)):wt.setDeleteOnEmpty(!0),0===at&&vt.def.connectorOverlays&&(_.overlays=_.overlays||[],Array.prototype.push.apply(_.overlays,vt.def.connectorOverlays))}}};return!1!==rt("source",0,this.sourceEndpointDefinitions,_.type||"default")&&!1!==rt("target",1,this.targetEndpointDefinitions,_.type||"default")?(_.sourceEndpoint&&_.targetEndpoint&&(function(i,E){for(var _=i.scope.split(/\s/),j=E.scope.split(/\s/),Y=0;Y<_.length;Y++)for(var z=0;z<j.length;z++)if(j[z]===_[Y])return!0;return!1}(_.sourceEndpoint,_.targetEndpoint)||(_=null)),_):void 0}u.log(e,"could not add connection; target endpoint is full")}}.bind(e),$=function(i){var E=e.Defaults.ConnectionType||e.getDefaultConnectionType();i._jsPlumb=e,i.newConnection=$,i.newEndpoint=ct,i.endpointsByUUID=S,i.endpointsByElement=m,i.finaliseConnection=it,i.id="con_"+f();var _=new E(i);return _.isDetachable()&&(_.endpoints[0].initDraggable("_jsPlumbSource"),_.endpoints[1].initDraggable("_jsPlumbTarget")),_},it=e.finaliseConnection=function(i,E,_,j){E=E||{},i.suspendedEndpoint||y.push(i),i.pending=null,i.endpoints[0].isTemporarySource=!1,!1!==j&&e.router.newConnection(i),B(i.source),E.doNotFireConnectionEvent||!1===E.fireEvent||e.fire("connection",{connection:i,source:i.source,target:i.target,sourceId:i.sourceId,targetId:i.targetId,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1]},_)},ct=function(i,E){var _=e.Defaults.EndpointType||M.Endpoint,j=M.extend({},i);j._jsPlumb=e,j.newConnection=$,j.newEndpoint=ct,j.endpointsByUUID=S,j.endpointsByElement=m,j.fireDetachEvent=ut,j.elementId=E||K(j.source);var Y=new _(j);return Y.id="ep_"+f(),Mt(j.elementId,j.source),M.headless||e.getDragManager().endpointAdded(j.source,E),Y},dt=function(i,E,_){var j=m[i];if(j&&j.length)for(var Y=0,z=j.length;Y<z;Y++){for(var rt=0,ft=j[Y].connections.length;rt<ft;rt++)if(E(j[Y].connections[rt]))return;_&&_(j[Y])}},Pt=function(i,E,_){E="block"===E;var j=null;_&&(j=function(z){z.setVisible(E,!0,!0)});var Y=t(i);dt(Y.id,function(z){E&&_?z.endpoints[z.sourceId===Y.id?1:0].isVisible()&&z.setVisible(!0):z.setVisible(E)},j)},K=function(i,E,_){if(u.isString(i))return i;if(null==i)return null;var j=e.getAttribute(i,"id");return(!j||"undefined"===j)&&(2===arguments.length&&void 0!==arguments[1]?j=E:(1===arguments.length||3===arguments.length&&!arguments[2])&&(j="jsPlumb_"+T+"_"+f()),_||e.setAttribute(i,"id",j)),j};this.setConnectionBeingDragged=function(i){W=i},this.isConnectionBeingDragged=function(){return W},this.getManagedElements=function(){return I},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(i,E,_){var j=M.extend({},_=_||{});M.extend(j,E),j.endpoint=j.endpoint||e.Defaults.Endpoint,j.paintStyle=j.paintStyle||e.Defaults.EndpointStyle;for(var Y=[],z=u.isArray(i)||null!=i.length&&!u.isString(i)?i:[i],rt=0,ft=z.length;rt<ft;rt++){j.source=e.getElement(z[rt]),ee(j.source);var at=K(j.source),lt=ct(j,at),ht=Mt(at,j.source,null,!d).info.o;u.addToList(m,at,lt),d||lt.paint({anchorLoc:lt.anchor.compute({xy:[ht.left,ht.top],wh:g[at],element:lt,timestamp:a,rotation:this.getRotation(at)}),timestamp:a}),Y.push(lt)}return 1===Y.length?Y[0]:Y},this.addEndpoints=function(i,E,_){for(var j=[],Y=0,z=E.length;Y<z;Y++){var rt=e.addEndpoint(i,E[Y],_);u.isArray(rt)?Array.prototype.push.apply(j,rt):j.push(rt)}return j},this.animate=function(i,E,_){if(!this.animationSupported)return!1;_=_||{};var j=e.getElement(i),Y=K(j),z=M.animEvents.step,rt=M.animEvents.complete;_[z]=u.wrap(_[z],function(){e.revalidate(Y)}),_[rt]=u.wrap(_[rt],function(){e.revalidate(Y)}),e.doAnimate(j,E,_)},this.checkCondition=function(i,E){var _=e.getListener(i),j=!0;if(_&&_.length>0){var Y=Array.prototype.slice.call(arguments,1);try{for(var z=0,rt=_.length;z<rt;z++)j=j&&_[z].apply(_[z],Y)}catch(ft){u.log(e,"cannot check condition ["+i+"]"+ft)}}return j},this.connect=function(i,E){var j,_=tt(i,E);if(_){if(null==_.source&&null==_.sourceEndpoint)return void u.log("Cannot establish connection - source does not exist");if(null==_.target&&null==_.targetEndpoint)return void u.log("Cannot establish connection - target does not exist");ee(_.source),j=$(_),it(j,_)}return j};var q=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],nt=function(i,E,_,j){var Y,at,lt,z=q[_],rt=i[z.elId],ht=i.endpoints[_],Et={index:_,originalSourceId:0===_?rt:i.sourceId,newSourceId:i.sourceId,originalTargetId:1===_?rt:i.targetId,newTargetId:i.targetId,connection:i};if(E.constructor===M.Endpoint)(Y=E).addConnection(i),E=Y.element;else if(at=K(E),lt=this[z.epDefs][at],at===i[z.elId])Y=null;else if(lt)for(var vt in lt){if(!lt[vt].enabled)return;Y=null!=lt[vt].endpoint&&lt[vt].endpoint._jsPlumb?lt[vt].endpoint:this.addEndpoint(E,lt[vt].def),lt[vt].uniqueEndpoint&&(lt[vt].endpoint=Y),Y.addConnection(i)}else Y=i.makeEndpoint(0===_,E,at);return null!=Y&&(ht.detachFromConnection(i),i.endpoints[_]=Y,i[z.el]=Y.element,i[z.elId]=Y.elementId,Et[0===_?"newSourceId":"newTargetId"]=Y.elementId,mt(Et),j||i.repaint()),Et.element=E,Et}.bind(this);this.setSource=function(i,E,_){var j=nt(i,E,0,_);this.router.sourceOrTargetChanged(j.originalSourceId,j.newSourceId,i,j.el,0)},this.setTarget=function(i,E,_){var j=nt(i,E,1,_);this.router.sourceOrTargetChanged(j.originalTargetId,j.newTargetId,i,j.el,1)},this.deleteEndpoint=function(i,E,_){var j="string"==typeof i?S[i]:i;return j&&e.deleteObject({endpoint:j,dontUpdateHover:E,deleteAttachedObjects:_}),e},this.deleteEveryEndpoint=function(){var i=e.setSuspendDrawing(!0);for(var E in m){var _=m[E];if(_&&_.length)for(var j=0,Y=_.length;j<Y;j++)e.deleteEndpoint(_[j],!0)}m={},I={},S={},P={},A={},e.router.reset();var z=e.getDragManager();return z&&z.reset(),i||e.setSuspendDrawing(!1),e};var ut=function(i,E,_){var j=e.Defaults.ConnectionType||e.getDefaultConnectionType(),z=i.constructor===j?{connection:i,source:i.source,target:i.target,sourceId:i.sourceId,targetId:i.targetId,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1]}:i;E&&e.fire("connectionDetached",z,_),e.fire("internal.connectionDetached",z,_),e.router.connectionDetached(z)},mt=e.fireMoveEvent=function(i,E){e.fire("connectionMoved",i,E)};this.unregisterEndpoint=function(i){for(var E in i._jsPlumb.uuid&&(S[i._jsPlumb.uuid]=null),e.router.deleteEndpoint(i),m){var _=m[E];if(_){for(var j=[],Y=0,z=_.length;Y<z;Y++)_[Y]!==i&&j.push(_[Y]);m[E]=j}m[E].length<1&&delete m[E]}};var xt="isDetachAllowed";this.deleteConnection=function(i,E){return!(null==i||(E=E||{},!E.force&&!u.functionChain(!0,!1,[[i.endpoints[0],xt,[i]],[i.endpoints[1],xt,[i]],[i,xt,[i]],[e,"checkCondition",["beforeDetach",i]]]))||(i.setHover(!1),ut(i,!i.pending&&!1!==E.fireEvent,E.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),u.removeWithFunction(y,function(_){return i.id===_.id}),i.cleanup(),i.destroy(),0))},this.deleteEveryConnection=function(i){i=i||{};var E=y.length,_=0;return e.batch(function(){for(var j=0;j<E;j++)_+=e.deleteConnection(y[0],i)?1:0}),_},this.deleteConnectionsForElement=function(i,E){E=E||{},i=e.getElement(i);var _=K(i),j=m[_];if(j&&j.length)for(var Y=0,z=j.length;Y<z;Y++)j[Y].deleteEveryConnection(E);return e},this.deleteObject=function(i){var E={endpoints:{},connections:{},endpointCount:0,connectionCount:0},_=!1!==i.deleteAttachedObjects,j=function(ht){null!=ht&&null==E.connections[ht.id]&&(!i.dontUpdateHover&&null!=ht._jsPlumb&&ht.setHover(!1),E.connections[ht.id]=ht,E.connectionCount++)};for(var z in i.connection?j(i.connection):function(ht){if(null!=ht&&null==E.endpoints[ht.id]&&(!i.dontUpdateHover&&null!=ht._jsPlumb&&ht.setHover(!1),E.endpoints[ht.id]=ht,E.endpointCount++,_))for(var Et=0;Et<ht.connections.length;Et++)j(ht.connections[Et])}(i.endpoint),E.connections){var rt=E.connections[z];if(rt._jsPlumb){u.removeWithFunction(y,function(ht){return rt.id===ht.id}),ut(rt,!1!==i.fireEvent&&!rt.pending,i.originalEvent);var ft=null==i.deleteAttachedObjects?null:!i.deleteAttachedObjects;rt.endpoints[0].detachFromConnection(rt,null,ft),rt.endpoints[1].detachFromConnection(rt,null,ft),rt.cleanup(!0),rt.destroy(!0)}}for(var at in E.endpoints){var lt=E.endpoints[at];lt._jsPlumb&&(e.unregisterEndpoint(lt),lt.cleanup(!0),lt.destroy(!0))}return E};var Yt=function(i,E,_){return function(){return function(i,E,_,j){for(var Y=0,z=i.length;Y<z;Y++)i[Y][E].apply(i[Y],_);return j(i)}(i,E,arguments,_)}},Jt=function(i,E){return function(){return function(i,E,_){for(var j=[],Y=0,z=i.length;Y<z;Y++)j.push([i[Y][E].apply(i[Y],_),i[Y]]);return j}(i,E,arguments)}},Ht=function(i,E){var _=[];if(i)if("string"==typeof i){if("*"===i)return i;_.push(i)}else if(E)_=i;else if(i.length)for(var j=0,Y=i.length;j<Y;j++)_.push(t(i[j]).id);else _.push(t(i).id);return _},Xt=function(i,E,_){return"*"===i||(i.length>0?-1!==i.indexOf(E):!_)};this.getConnections=function(i,E){i?i.constructor===String&&(i={scope:i}):i={};for(var _=i.scope||e.getDefaultScope(),j=Ht(_,!0),Y=Ht(i.source),z=Ht(i.target),rt=!E&&j.length>1?{}:[],ft=function(St,wt){if(!E&&j.length>1){var jt=rt[St];null==jt&&(jt=rt[St]=[]),jt.push(wt)}else rt.push(wt)},at=0,lt=y.length;at<lt;at++){var ht=y[at],Et=ht.proxies&&ht.proxies[0]?ht.proxies[0].originalEp.elementId:ht.sourceId,vt=ht.proxies&&ht.proxies[1]?ht.proxies[1].originalEp.elementId:ht.targetId;Xt(j,ht.scope)&&Xt(Y,Et)&&Xt(z,vt)&&ft(ht.scope,ht)}return rt};var te=function(i,E){return function(_){for(var j=0,Y=i.length;j<Y;j++)_(i[j]);return E(i)}},de=function(i){return function(E){return i[E]}},Wt=function(i,E){var z,rt,_={length:i.length,each:te(i,E),get:de(i)},j=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],Y=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(z=0,rt=j.length;z<rt;z++)_[j[z]]=Yt(i,j[z],E);for(z=0,rt=Y.length;z<rt;z++)_[Y[z]]=Jt(i,Y[z]);return _},Qt=function(i){var E=Wt(i,Qt);return M.extend(E,{setDetachable:Yt(i,"setDetachable",Qt),setReattach:Yt(i,"setReattach",Qt),setConnector:Yt(i,"setConnector",Qt),delete:function(){for(var _=0,j=i.length;_<j;_++)e.deleteConnection(i[_])},isDetachable:Jt(i,"isDetachable"),isReattach:Jt(i,"isReattach")})},qt=function(i){var E=Wt(i,qt);return M.extend(E,{setEnabled:Yt(i,"setEnabled",qt),setAnchor:Yt(i,"setAnchor",qt),isEnabled:Jt(i,"isEnabled"),deleteEveryConnection:function(){for(var _=0,j=i.length;_<j;_++)i[_].deleteEveryConnection()},delete:function(){for(var _=0,j=i.length;_<j;_++)e.deleteEndpoint(i[_])}})};this.select=function(i){return(i=i||{}).scope=i.scope||"*",Qt(i.connections||e.getConnections(i,!0))},this.selectEndpoints=function(i){(i=i||{}).scope=i.scope||"*";var E=!i.element&&!i.source&&!i.target,_=E?"*":Ht(i.element),j=E?"*":Ht(i.source),Y=E?"*":Ht(i.target),z=Ht(i.scope,!0),rt=[];for(var ft in m){var at=Xt(_,ft,!0),lt=Xt(j,ft,!0),ht="*"!==j,Et=Xt(Y,ft,!0),vt="*"!==Y;if(at||lt||Et)t:for(var St=0,wt=m[ft].length;St<wt;St++){var jt=m[ft][St];if(Xt(z,jt.scope,!0)){if(ht&&j.length>0&&!jt.isSource||vt&&Y.length>0&&!jt.isTarget)continue t;rt.push(jt)}}}return qt(rt)},this.getAllConnections=function(){return y},this.getDefaultScope=function(){return s},this.getEndpoint=H,this.getEndpoints=function(i){return m[t(i).id]||[]},this.getDefaultEndpointType=function(){return M.Endpoint},this.getDefaultConnectionType=function(){return M.Connection},this.getId=K,this.draw=B,this.info=t,this.appendElement=w;var re=!1;this.isHoverSuspended=function(){return re},this.setHoverSuspended=function(i){re=i},this.hide=function(i,E){return Pt(i,"none",E),e},this.idstamp=f;var ee=function(i){if(!o&&i){var E=e.getElement(i);E.offsetParent&&e.setContainer(E.offsetParent)}},Mt=e.manage=function(i,E,_,j){return I[i]?j&&(I[i].info=It({elId:i,timestamp:a,recalc:!0})):(I[i]={el:E,endpoints:[],connections:[],rotation:0},I[i].info=It({elId:i,timestamp:a}),e.addClass(E,"jtk-managed"),_||e.fire("manageElement",{id:i,info:I[i].info,el:E})),I[i]};this.unmanage=function(i){if(I[i]){var E=I[i].el;e.removeClass(E,"jtk-managed"),delete I[i],e.fire("unmanageElement",{id:i,el:E})}},this.rotate=function(i,E,_){return I[i]&&(I[i].rotation=E,I[i].el.style.transform="rotate("+E+"deg)",I[i].el.style.transformOrigin="center center",!0!==_)?this.revalidate(i):{c:[],e:[]}},this.getRotation=function(i){return I[i]&&I[i].rotation||0};var It=function(i){var z,E=i.timestamp,_=i.recalc,j=i.offset,Y=i.elId;return d&&!E&&(E=a),!_&&E&&E===A[Y]?{o:i.offset||P[Y],s:g[Y]}:(_||!j&&null==P[Y]?null!=(z=I[Y]?I[Y].el:null)&&(g[Y]=e.getSize(z),P[Y]=e.getOffset(z),A[Y]=E):(P[Y]=j||P[Y],null==g[Y]&&null!=(z=I[Y].el)&&(g[Y]=e.getSize(z)),A[Y]=E),P[Y]&&!P[Y].right&&(P[Y].right=P[Y].left+g[Y][0],P[Y].bottom=P[Y].top+g[Y][1],P[Y].width=g[Y][0],P[Y].height=g[Y][1],P[Y].centerx=P[Y].left+P[Y].width/2,P[Y].centery=P[Y].top+P[Y].height/2),{o:P[Y],s:g[Y]})};this.updateOffset=It,this.init=function(){v||(e.Defaults.Container&&e.setContainer(e.Defaults.Container),e.router=new J.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,v=!0,e.fire("ready",e))}.bind(this),this.log=C,this.jsPlumbUIComponent=D,this.makeAnchor=function(){var i,E=function(ft,at){if(J.jsPlumb.Anchors[ft])return new J.jsPlumb.Anchors[ft](at);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+ft+"'"}};if(0===arguments.length)return null;var _=arguments[0],j=arguments[1],z=null;if(_.compute&&_.getOrientation)return _;if("string"==typeof _)z=E(arguments[0],{elementId:j,jsPlumbInstance:e});else if(u.isArray(_))if(u.isArray(_[0])||u.isString(_[0]))2===_.length&&u.isObject(_[1])?u.isString(_[0])?(i=J.jsPlumb.extend({elementId:j,jsPlumbInstance:e},_[1]),z=E(_[0],i)):(i=J.jsPlumb.extend({elementId:j,jsPlumbInstance:e,anchors:_[0]},_[1]),z=new J.jsPlumb.DynamicAnchor(i)):z=new M.DynamicAnchor({anchors:_,selector:null,elementId:j,jsPlumbInstance:e});else{var rt={x:_[0],y:_[1],orientation:_.length>=4?[_[2],_[3]]:[0,0],offsets:_.length>=6?[_[4],_[5]]:[0,0],elementId:j,jsPlumbInstance:e,cssClass:7===_.length?_[6]:null};(z=new J.jsPlumb.Anchor(rt)).clone=function(){return new J.jsPlumb.Anchor(rt)}}return z.id||(z.id="anchor_"+f()),z},this.makeAnchors=function(i,E,_){for(var j=[],Y=0,z=i.length;Y<z;Y++)"string"==typeof i[Y]?j.push(J.jsPlumb.Anchors[i[Y]]({elementId:E,jsPlumbInstance:_})):u.isArray(i[Y])&&j.push(e.makeAnchor(i[Y],E,_));return j},this.makeDynamicAnchor=function(i,E){return new J.jsPlumb.DynamicAnchor({anchors:i,selector:E,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Vt=function(i,E,_,j,Y){var z=new D(E),rt=E._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return i.def.enabled},isFull:function(){var at=e.select({target:i.id}).length;return i.def.maxConnections>0&&at>=i.def.maxConnections},element:i.el,elementId:i.id,isSource:j,isTarget:Y,addClass:function(at){e.addClass(i.el,at)},removeClass:function(at){e.removeClass(i.el,at)},onDrop:function(at){at.endpoints[0].anchor.locked=!1},isDropAllowed:function(){return z.isDropAllowed.apply(z,arguments)},isRedrop:function(at){return null!=at.suspendedElement&&null!=at.suspendedEndpoint&&at.suspendedEndpoint.element===i.el},getEndpoint:function(at){var lt=i.def.endpoint;if(null==lt||null==lt._jsPlumb){var ht=e.deriveEndpointAndAnchorSpec(at.getType().join(" "),!0),Et=ht.endpoints?J.jsPlumb.extend(E,{endpoint:i.def.def.endpoint||ht.endpoints[1]}):E;ht.anchors&&(Et=J.jsPlumb.extend(Et,{anchor:i.def.def.anchor||ht.anchors[1]})),(lt=e.addEndpoint(i.el,Et))._mtNew=!0}if(E.uniqueEndpoint&&(i.def.endpoint=lt),lt.setDeleteOnEmpty(!0),at.isDetachable()&&lt.initDraggable(),null!=lt.anchor.positionFinder){var vt=e.getUIPosition(arguments,e.getZoom()),St=e.getOffset(i.el),wt=e.getSize(i.el),jt=null==vt?[0,0]:lt.anchor.positionFinder(vt,St,wt,lt.anchor.constructorParams);lt.anchor.x=jt[0],lt.anchor.y=jt[1]}return lt},maybeCleanup:function(at){at._mtNew&&0===at.connections.length?e.deleteObject({endpoint:at}):delete at._mtNew}}),ft=J.jsPlumb.dragEvents.drop;return _.scope=_.scope||E.scope||e.Defaults.Scope,_[ft]=u.wrap(_[ft],rt,!0),_.rank=E.rank||0,Y&&(_[J.jsPlumb.dragEvents.over]=function(){return!0}),!1===E.allowLoopback&&(_.canDrop=function(at){return at.getDragElement()._jsPlumbRelatedElement!==i.el}),e.initDroppable(i.el,_,"internal"),rt};this.makeTarget=function(i,E,_){var j=J.jsPlumb.extend({_jsPlumb:this},_);J.jsPlumb.extend(j,E);for(var Y=j.maxConnections||-1,z=function(lt){var ht=t(lt),Et=ht.id,vt=J.jsPlumb.extend({},j.dropOptions||{}),St=j.connectionType||"default";this.targetEndpointDefinitions[Et]=this.targetEndpointDefinitions[Et]||{},ee(Et),ht.el._isJsPlumbGroup&&null==vt.rank&&(vt.rank=-1);var wt={def:J.jsPlumb.extend({},j),uniqueEndpoint:j.uniqueEndpoint,maxConnections:Y,enabled:!0};j.createEndpoint&&(wt.uniqueEndpoint=!0,wt.endpoint=e.addEndpoint(lt,wt.def),wt.endpoint.setDeleteOnEmpty(!1)),ht.def=wt,this.targetEndpointDefinitions[Et][St]=wt,Vt(ht,j,vt,!0===j.isSource,!0),ht.el._katavorioDrop[ht.el._katavorioDrop.length-1].targetDef=wt}.bind(this),rt=i.length&&i.constructor!==String?i:[i],ft=0,at=rt.length;ft<at;ft++)z(rt[ft]);return this},this.unmakeTarget=function(i,E){var _=t(i);return e.destroyDroppable(_.el,"internal"),E||delete this.targetEndpointDefinitions[_.id],this},this.makeSource=function(i,E,_){var j=J.jsPlumb.extend({_jsPlumb:this},_);J.jsPlumb.extend(j,E);var Y=j.connectionType||"default",z=e.deriveEndpointAndAnchorSpec(Y);j.endpoint=j.endpoint||z.endpoints[0],j.anchor=j.anchor||z.anchors[0];for(var rt=j.maxConnections||-1,ft=j.onMaxConnections,at=function(vt){var St=vt.id,wt=this.getElement(vt.el);this.sourceEndpointDefinitions[St]=this.sourceEndpointDefinitions[St]||{},ee(St);var jt={def:J.jsPlumb.extend({},j),uniqueEndpoint:j.uniqueEndpoint,maxConnections:rt,enabled:!0};j.createEndpoint&&(jt.uniqueEndpoint=!0,jt.endpoint=e.addEndpoint(i,jt.def),jt.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[St][Y]=jt,vt.def=jt;var ae=J.jsPlumb.dragEvents.stop,le=J.jsPlumb.dragEvents.drag,$t=J.jsPlumb.extend({},j.dragOptions||{}),ge=$t.drag,pe=$t.stop,kt=null,ue=!1;$t.scope=$t.scope||j.scope,$t[le]=u.wrap($t[le],function(){ge&&ge.apply(this,arguments),ue=!1}),$t[ae]=u.wrap($t[ae],function(){if(pe&&pe.apply(this,arguments),this.currentlyDragging=!1,null!=kt._jsPlumb){var Lt=kt.anchor,he=kt.connections[0],Kt=this.makeAnchor(j.anchor||this.Defaults.Anchor,St,this),ne=kt.element;if(null!=Kt.positionFinder){var Bt=e.getOffset(ne),Zt=this.getSize(ne),ie=Kt.positionFinder({left:Bt.left+Lt.x*Zt[0],top:Bt.top+Lt.y*Zt[1]},Bt,Zt,Kt.constructorParams);Kt.x=ie[0],Kt.y=ie[1]}kt.setAnchor(Kt,!0),kt.repaint(),this.repaint(kt.elementId),null!=he&&this.repaint(he.targetId)}}.bind(this));var ve=function(Nt){if(3!==Nt.which&&2!==Nt.button){St=this.getId(this.getElement(vt.el));var Lt=this.sourceEndpointDefinitions[St][Y];if(Lt.enabled){if(j.filter){var he=u.isString(j.filter)?function(i,E,_,j,Y){for(var z=i.target||i.srcElement,rt=!1,ft=j.getSelector(E,_),at=0;at<ft.length;at++)if(ft[at]===z){rt=!0;break}return Y?!rt:rt}(Nt,vt.el,j.filter,this,j.filterExclude):j.filter(Nt,vt.el);if(!1===he)return}var Kt=this.select({source:St}).length;if(Lt.maxConnections>=0&&Kt>=Lt.maxConnections)return ft&&ft({element:vt.el,maxConnections:rt},Nt),!1;var ne=J.jsPlumb.getPositionOnElement(Nt,wt,L),Bt={};J.jsPlumb.extend(Bt,Lt.def),Bt.isTemporarySource=!0,Bt.anchor=[ne[0],ne[1],0,0],Bt.dragOptions=$t,Lt.def.scope&&(Bt.scope=Lt.def.scope),kt=this.addEndpoint(St,Bt),ue=!0,kt.setDeleteOnEmpty(!0),Lt.uniqueEndpoint&&(Lt.endpoint?kt.finalEndpoint=Lt.endpoint:(Lt.endpoint=kt,kt.setDeleteOnEmpty(!1)));var Zt=function(){e.off(kt.canvas,"mouseup",Zt),e.off(vt.el,"mouseup",Zt),ue&&(ue=!1,e.deleteEndpoint(kt))};e.on(kt.canvas,"mouseup",Zt),e.on(vt.el,"mouseup",Zt);var ce={};if(Lt.def.extract)for(var ie in Lt.def.extract){var me=(Nt.srcElement||Nt.target).getAttribute(ie);me&&(ce[Lt.def.extract[ie]]=me)}e.trigger(kt.canvas,"mousedown",Nt,ce),u.consume(Nt)}}}.bind(this);this.on(vt.el,"mousedown",ve),jt.trigger=ve,j.filter&&(u.isString(j.filter)||u.isFunction(j.filter))&&e.setDragFilter(vt.el,j.filter);var ye=J.jsPlumb.extend({},j.dropOptions||{});Vt(vt,j,ye,!0,!0===j.isTarget)}.bind(this),lt=i.length&&i.constructor!==String?i:[i],ht=0,Et=lt.length;ht<Et;ht++)at(t(lt[ht]));return this},this.unmakeSource=function(i,E,_){var j=t(i);e.destroyDroppable(j.el,"internal");var Y=this.sourceEndpointDefinitions[j.id];if(Y)for(var z in Y)if(null==E||E===z){var rt=Y[z].trigger;rt&&e.off(j.el,"mousedown",rt),_||delete this.sourceEndpointDefinitions[j.id][z]}return this},this.unmakeEverySource=function(){for(var i in this.sourceEndpointDefinitions)e.unmakeSource(i,null,!0);return this.sourceEndpointDefinitions={},this};var zt=function(i,E,_){E=u.isArray(E)?E:[E];var j=K(i);_=_||"default";for(var Y=0;Y<E.length;Y++){var z=this[E[Y]][j];if(z&&z[_])return z[_].def.scope||this.Defaults.Scope}}.bind(this),st=function(i,E,_,j){_=u.isArray(_)?_:[_];var Y=K(i);j=j||"default";for(var z=0;z<_.length;z++){var rt=this[_[z]][Y];rt&&rt[j]&&(rt[j].def.scope=E)}}.bind(this);this.getScope=function(i,E){return zt(i,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(i){return zt(i,"sourceEndpointDefinitions")},this.getTargetScope=function(i){return zt(i,"targetEndpointDefinitions")},this.setScope=function(i,E,_){this.setSourceScope(i,E,_),this.setTargetScope(i,E,_)},this.setSourceScope=function(i,E,_){st(i,E,"sourceEndpointDefinitions",_),this.setDragScope(i,E)},this.setTargetScope=function(i,E,_){st(i,E,"targetEndpointDefinitions",_),this.setDropScope(i,E)},this.unmakeEveryTarget=function(){for(var i in this.targetEndpointDefinitions)e.unmakeTarget(i,!0);return this.targetEndpointDefinitions={},this};var bt=function(i,E,_,j,Y){var rt,ft,at,z="source"===i?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(Y=Y||"default",E.length&&!u.isString(E)){rt=[];for(var lt=0,ht=E.length;lt<ht;lt++)z[(ft=t(E[lt])).id]&&z[ft.id][Y]&&(rt[lt]=z[ft.id][Y].enabled,z[ft.id][Y].enabled=at=j?!rt[lt]:_,e[at?"removeClass":"addClass"](ft.el,"jtk-"+i+"-disabled"))}else{var Et=(ft=t(E)).id;z[Et]&&z[Et][Y]&&(rt=z[Et][Y].enabled,z[Et][Y].enabled=at=j?!rt:_,e[at?"removeClass":"addClass"](ft.el,"jtk-"+i+"-disabled"))}return rt}.bind(this),Ct=function(i,E){if(null!=i){if(u.isString(i)||!i.length)return E.apply(this,[i]);if(i.length)return E.apply(this,[i[0]])}}.bind(this);this.toggleSourceEnabled=function(i,E){return bt("source",i,null,!0,E),this.isSourceEnabled(i,E)},this.setSourceEnabled=function(i,E,_){return bt("source",i,E,null,_)},this.isSource=function(i,E){return E=E||"default",Ct(i,function(_){var j=this.sourceEndpointDefinitions[t(_).id];return null!=j&&null!=j[E]}.bind(this))},this.isSourceEnabled=function(i,E){return E=E||"default",Ct(i,function(_){var j=this.sourceEndpointDefinitions[t(_).id];return j&&j[E]&&!0===j[E].enabled}.bind(this))},this.toggleTargetEnabled=function(i,E){return bt("target",i,null,!0,E),this.isTargetEnabled(i,E)},this.isTarget=function(i,E){return E=E||"default",Ct(i,function(_){var j=this.targetEndpointDefinitions[t(_).id];return null!=j&&null!=j[E]}.bind(this))},this.isTargetEnabled=function(i,E){return E=E||"default",Ct(i,function(_){var j=this.targetEndpointDefinitions[t(_).id];return j&&j[E]&&!0===j[E].enabled}.bind(this))},this.setTargetEnabled=function(i,E,_){return bt("target",i,E,null,_)},this.ready=function(i){e.bind("ready",i)},this.repaint=function(i,E,_){return function(i,E){if("object"==typeof i&&i.length)for(var _=0,j=i.length;_<j;_++)E(i[_]);else E(i);return e}(i,function(j){B(j,E,_)})},this.revalidate=function(i,E,_){var j=_?i:e.getId(i);e.updateOffset({elId:j,recalc:!0,timestamp:E});var Y=e.getDragManager();return Y&&Y.updateOffsets(j),B(i,null,E)},this.repaintEverything=function(){var E,i=jsPlumbUtil.uuid();for(E in m)e.updateOffset({elId:E,recalc:!0,timestamp:i});for(E in m)B(E,null,i);return this},this.removeAllEndpoints=function(i,E,_){_=_||[];var j=function(Y){var ft,at,z=t(Y),rt=m[z.id];if(rt)for(_.push(z),ft=0,at=rt.length;ft<at;ft++)e.deleteEndpoint(rt[ft],!1);if(delete m[z.id],E&&z.el&&3!==z.el.nodeType&&8!==z.el.nodeType)for(ft=0,at=z.el.childNodes.length;ft<at;ft++)j(z.el.childNodes[ft])};return j(i),this};var Dt=function(i,E){e.removeAllEndpoints(i.id,!0,E);for(var _=e.getDragManager(),j=function(z){_&&_.elementRemoved(z.id),e.router.elementRemoved(z.id),e.isSource(z.el)&&e.unmakeSource(z.el),e.isTarget(z.el)&&e.unmakeTarget(z.el),e.destroyDraggable(z.el),e.destroyDroppable(z.el),delete e.floatingConnections[z.id],delete I[z.id],delete P[z.id],z.el&&(e.removeElement(z.el),z.el._jsPlumb=null)},Y=1;Y<E.length;Y++)j(E[Y]);j(i)};this.remove=function(i,E){var _=t(i),j=[];return _.text&&_.el.parentNode?_.el.parentNode.removeChild(_.el):_.id&&e.batch(function(){Dt(_,j)},!0===E),e},this.empty=function(i,E){var _=[],j=function(Y,z){var rt=t(Y);if(rt.text)rt.el.parentNode.removeChild(rt.el);else if(rt.el){for(;rt.el.childNodes.length>0;)j(rt.el.childNodes[0]);z||Dt(rt,_)}};return e.batch(function(){j(i,!0)},!1===E),e},this.reset=function(i){e.silently(function(){re=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),i||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},y.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),o=null,b=null};var At=function(i){i.canvas&&i.canvas.parentNode&&i.canvas.parentNode.removeChild(i.canvas),i.cleanup(),i.destroy()};this.clear=function(){e.select().each(At),e.selectEndpoints().each(At),m={},S={}},this.setDefaultScope=function(i){return s=i,e},this.deriveEndpointAndAnchorSpec=function(i,E){for(var _=((E?"":"default ")+i).split(/[\s]/),j=null,Y=null,z=null,rt=null,ft=0;ft<_.length;ft++){var at=e.getType(_[ft],"connection");at&&(at.endpoints&&(j=at.endpoints),at.endpoint&&(Y=at.endpoint),at.anchors&&(rt=at.anchors),at.anchor&&(z=at.anchor))}return{endpoints:j||[Y,Y],anchors:rt||[z,z]}},this.setId=function(i,E,_){var j;u.isString(i)?j=i:(i=this.getElement(i),j=this.getId(i));var Y=this.getConnections({source:j,scope:"*"},!0),z=this.getConnections({target:j,scope:"*"},!0);E=""+E,_?i=this.getElement(E):(i=this.getElement(j),this.setAttribute(i,"id",E)),m[E]=m[j]||[];for(var rt=0,ft=m[E].length;rt<ft;rt++)m[E][rt].setElementId(E),m[E][rt].setReferenceElement(i);delete m[j],this.sourceEndpointDefinitions[E]=this.sourceEndpointDefinitions[j],delete this.sourceEndpointDefinitions[j],this.targetEndpointDefinitions[E]=this.targetEndpointDefinitions[j],delete this.targetEndpointDefinitions[j],this.router.changeId(j,E);var at=this.getDragManager();at&&at.changeId(j,E),I[E]=I[j],delete I[j];var lt=function(ht,Et,vt){for(var St=0,wt=ht.length;St<wt;St++)ht[St].endpoints[Et].setElementId(E),ht[St].endpoints[Et].setReferenceElement(i),ht[St][vt+"Id"]=E,ht[St][vt]=i};lt(Y,0,"source"),lt(z,1,"target"),this.repaint(E)},this.setDebugLog=function(i){C=i},this.setSuspendDrawing=function(i,E){var _=d;return d=i,a=i?(new Date).getTime():null,E&&this.repaintEverything(),_},this.isSuspendDrawing=function(){return d},this.getSuspendedAt=function(){return a},this.batch=function(i,E){var _=this.isSuspendDrawing();_||this.setSuspendDrawing(!0);try{i()}catch(j){u.log("Function run while suspended failed",j)}_||this.setSuspendDrawing(!1,!E)},this.doWhileSuspended=this.batch,this.getCachedData=function(i){var E=P[i];return E?{o:E,s:g[i]}:It({elId:i})},this.show=function(i,E){return Pt(i,"block",E),e},this.toggleVisible=function(i,E){var _=null;E&&(_=function(j){var Y=j.isVisible();j.setVisible(!Y)}),dt(i,function(j){var Y=j.isVisible();j.setVisible(!Y)},_)},this.addListener=this.bind;var Ft=[];this.registerFloatingConnection=function(i,E,_){Ft[i.id]=E,u.addToList(m,i.id,_)},this.getFloatingConnectionFor=function(i){return Ft[i]},this.listManager=new J.jsPlumbListManager(this,this.Defaults.ListStyle)};u.extend(J.jsPlumbInstance,u.EventGenerator,{setAttribute:function(r,e,T){this.setAttribute(r,e,T)},getAttribute:function(r,e){return this.getAttribute(J.jsPlumb.getElement(r),e)},convertToFullOverlaySpec:function(r){return u.isString(r)&&(r=[r,{}]),r[1].id=r[1].id||u.uuid(),r},registerConnectionType:function(r,e){if(this._connectionTypes[r]=J.jsPlumb.extend({},e),e.overlays){for(var T={},O=0;O<e.overlays.length;O++){var U=this.convertToFullOverlaySpec(e.overlays[O]);T[U[1].id]=U}this._connectionTypes[r].overlays=T}},registerConnectionTypes:function(r){for(var e in r)this.registerConnectionType(e,r[e])},registerEndpointType:function(r,e){if(this._endpointTypes[r]=J.jsPlumb.extend({},e),e.overlays){for(var T={},O=0;O<e.overlays.length;O++){var U=this.convertToFullOverlaySpec(e.overlays[O]);T[U[1].id]=U}this._endpointTypes[r].overlays=T}},registerEndpointTypes:function(r){for(var e in r)this.registerEndpointType(e,r[e])},getType:function(r,e){return"connection"===e?this._connectionTypes[r]:this._endpointTypes[r]},setIdChanged:function(r,e){this.setId(r,e,!0)},setParent:function(r,e){var T=this.getElement(r),O=this.getId(T),U=this.getElement(e),L=this.getId(U),t=this.getDragManager();T.parentNode.removeChild(T),U.appendChild(T),t&&t.setParent(T,O,U,L)},extend:function(r,e,T){var O;if(T)for(O=0;O<T.length;O++)r[T[O]]=e[T[O]];else for(O in e)r[O]=e[O];return r},floatingConnections:{},getFloatingAnchorIndex:function(r){return r.endpoints[0].isFloating()?0:r.endpoints[1].isFloating()?1:-1},proxyConnection:function(r,e,T,O,U,L){var t,l=r.endpoints[e].elementId,o=r.endpoints[e];r.proxies=r.proxies||[],(t=r.proxies[e]?r.proxies[e].ep:this.addEndpoint(T,{endpoint:U(r,e),anchor:L(r,e),parameters:{isProxyEndpoint:!0}})).setDeleteOnEmpty(!0),r.proxies[e]={ep:t,originalEp:o},this.router.sourceOrTargetChanged(l,O,r,T,0===e?0:1),o.detachFromConnection(r,null,!0),t.connections=[r],r.endpoints[e]=t,o.setVisible(!1),r.setVisible(!0),this.revalidate(T)},unproxyConnection:function(r,e,T){if(null!=r._jsPlumb&&null!=r.proxies&&null!=r.proxies[e]){var O=r.proxies[e].originalEp.element,U=r.proxies[e].originalEp.elementId;r.endpoints[e]=r.proxies[e].originalEp,this.router.sourceOrTargetChanged(T,U,r,O,0===e?0:1),r.proxies[e].ep.detachFromConnection(r,null),r.proxies[e].originalEp.addConnection(r),r.isVisible()&&r.proxies[e].originalEp.setVisible(!0),delete r.proxies[e]}}});var M=new N;J.jsPlumb=M,M.getInstance=function(r,e){var T=new N(r);if(e)for(var O in e)T[O]=e[O];return T.init(),T},M.each=function(r,e){if(null!=r)if("string"==typeof r)e(M.getElement(r));else if(null!=r.length)for(var T=0;T<r.length;T++)e(M.getElement(r[T]));else e(r)},Gt.jsPlumb=M}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,u=J.jsPlumb,X=J.jsPlumbUtil,ot="__label";u.OverlayCapableJsPlumbUIComponent=function(h){J.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},h.label&&(this.getDefaultType().overlays[ot]=["Label",{label:h.label,location:h.labelLocation||this.defaultLabelLocation||.5,labelStyle:h.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:ot}]),this.setListenerComponent=function(x){if(this._jsPlumb)for(var c in this._jsPlumb.overlays)this._jsPlumb.overlays[c].setListenerComponent(x)}},u.OverlayCapableJsPlumbUIComponent.applyType=function(h,x){if(x.overlays){var n,c={};for(n in x.overlays){var D=h._jsPlumb.overlays[x.overlays[n][1].id];if(D)D.updateFrom(x.overlays[n][1]),c[x.overlays[n][1].id]=!0,D.reattach(h._jsPlumb.instance,h);else{var k=h.getCachedTypeItem("overlay",x.overlays[n][1].id);null!=k?(k.reattach(h._jsPlumb.instance,h),k.setVisible(!0),k.updateFrom(x.overlays[n][1]),h._jsPlumb.overlays[k.id]=k):k=h.addOverlay(x.overlays[n],!0),c[k.id]=!0}}for(n in h._jsPlumb.overlays)null==c[h._jsPlumb.overlays[n].id]&&h.removeOverlay(h._jsPlumb.overlays[n].id,!0)}},X.extend(u.OverlayCapableJsPlumbUIComponent,J.jsPlumbUIComponent,{setHover:function(h,x){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var c in this._jsPlumb.overlays)this._jsPlumb.overlays[c][h?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(h,x){var c=function(h,x){var c=null;if(X.isArray(x)){var n=x[0],D=u.extend({component:h,_jsPlumb:h._jsPlumb.instance},x[1]);3===x.length&&u.extend(D,x[2]),c=new(u.Overlays[h._jsPlumb.instance.getRenderMode()][n])(D)}else c=x.constructor===String?new(u.Overlays[h._jsPlumb.instance.getRenderMode()][x])({component:h,_jsPlumb:h._jsPlumb.instance}):x;return c.id=c.id||X.uuid(),h.cacheTypeItem("overlay",c,c.id),h._jsPlumb.overlays[c.id]=c,c}(this,h);if(this.getData&&"Label"===c.type&&X.isArray(h)){var n=this.getData();if(n){var R=n?n[h[1].labelLocationAttribute||"labelLocation"]:null;R&&(c.loc=R)}}return x||this.repaint(),c},getOverlay:function(h){return this._jsPlumb.overlays[h]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(h){var x=this.getOverlay(h);x&&x.hide()},hideOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].hide()},showOverlay:function(h){var x=this.getOverlay(h);x&&x.show()},showOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].show()},removeAllOverlays:function(h){for(var x in this._jsPlumb.overlays)this._jsPlumb.overlays[x].cleanup&&this._jsPlumb.overlays[x].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},h||this.repaint()},removeOverlay:function(h,x){var c=this._jsPlumb.overlays[h];c&&(c.setVisible(!1),!x&&c.cleanup&&c.cleanup(),delete this._jsPlumb.overlays[h],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[h],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[h])},removeOverlays:function(){for(var h=0,x=arguments.length;h<x;h++)this.removeOverlay(arguments[h])},moveParent:function(h){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),h.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var x in this.canvas.parentNode.removeChild(this.canvas),h.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[x].isAppendedAtTopLevel){var c=this._jsPlumb.overlays[x].getElement();c.parentNode.removeChild(c),h.appendChild(c)}},getLabel:function(){var h=this.getOverlay(ot);return null!=h?h.getLabel():null},getLabelOverlay:function(){return this.getOverlay(ot)},setLabel:function(h){var x=this.getOverlay(ot);x?h.constructor===String||h.constructor===Function?x.setLabel(h):(h.label&&x.setLabel(h.label),h.location&&x.setLocation(h.location)):(x=function(h,x){var n=u.extend({cssClass:x.cssClass,labelStyle:h.labelStyle,id:ot,component:h,_jsPlumb:h._jsPlumb.instance},x);return new(u.Overlays[h._jsPlumb.instance.getRenderMode()].Label)(n)}(this,h.constructor===String||h.constructor===Function?{label:h}:h),this._jsPlumb.overlays[ot]=x),this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(h){for(var x in this._jsPlumb.overlays)this._jsPlumb.overlays[x].cleanup(h),this._jsPlumb.overlays[x].destroy(h);h&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(h){this[h?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(h,x){this._jsPlumb.overlayPositions[h.id]=x},getAbsoluteOverlayPosition:function(h){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[h.id]:null},_clazzManip:function(h,x,c){if(!c)for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n][h+"Class"](x)},addClass:function(h,x){this._clazzManip("add",h,x)},removeClass:function(h,x){this._clazzManip("remove",h,x)}})}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,u=J.jsPlumb,X=J.jsPlumbUtil,h=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];u.Endpoint=function(c){var n=c._jsPlumb,D=c.newConnection,k=c.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],u.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:c.connectionType,maxConnections:null==c.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:c.maxConnections,paintStyle:c.endpointStyle||c.paintStyle||c.style||this._jsPlumb.instance.Defaults.EndpointStyle||u.Defaults.EndpointStyle,hoverPaintStyle:c.endpointHoverStyle||c.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||u.Defaults.EndpointHoverStyle,connectorStyle:c.connectorStyle,connectorHoverStyle:c.connectorHoverStyle,connectorClass:c.connectorClass,connectorHoverClass:c.connectorHoverClass,connectorOverlays:c.connectorOverlays,connector:c.connector,connectorTooltip:c.connectorTooltip}),this._jsPlumb.enabled=!1!==c.enabled,this._jsPlumb.visible=!0,this.element=u.getElement(c.source),this._jsPlumb.uuid=c.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(c.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=c.elementId,this.dragProxy=c.dragProxy,this._jsPlumb.connectionCost=c.connectionCost,this._jsPlumb.connectionsDirected=c.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var F=!0===c.deleteOnEmpty;this.setDeleteOnEmpty=function(L){F=L};var N=function(){var L=n.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var t=n.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(L),this.addClass(t),u.updateClasses(this.element,t,L)}.bind(this);this.prepareAnchor=function(L){var t=this._jsPlumb.instance.makeAnchor(L,this.elementId,n);return t.bind("anchorChanged",function(l){this.fire("anchorChanged",{endpoint:this,anchor:l}),N()}.bind(this)),t},this.setPreparedAnchor=function(L,t){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=L,N(),t||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(L,t){var l=this.prepareAnchor(L);return this.setPreparedAnchor(l,t),this};var M=function(L){if(this.connections.length>0)for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(L,!1);else this.setHover(L)}.bind(this);this.bind("mouseover",function(){M(!0)}),this.bind("mouseout",function(){M(!1)}),c._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(L,t){var b,l=function(C,v){var y=n.getRenderMode();if(u.Endpoints[y][C])return new u.Endpoints[y][C](v);if(!n.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+C+"'"}},o={_jsPlumb:this._jsPlumb.instance,cssClass:c.cssClass,container:c.container,tooltip:c.tooltip,connectorTooltip:c.connectorTooltip,endpoint:this};return X.isString(L)?b=l(L,o):X.isArray(L)?(o=X.merge(L[1],o),b=l(L[0],o)):b=L.clone(),b.clone=function(){return X.isString(L)?l(L,o):X.isArray(L)?(o=X.merge(L[1],o),l(L[0],o)):void 0}.bind(this),b.typeId=t,b},this.setEndpoint=function(L,t){var l=this.prepareEndpoint(L);this.setPreparedEndpoint(l,!0)},this.setPreparedEndpoint=function(L,t){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=L,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},u.extend(this,c,h),this.isSource=c.isSource||!1,this.isTemporarySource=c.isTemporarySource||!1,this.isTarget=c.isTarget||!1,this.connections=c.connections||[],this.connectorPointerEvents=c["connector-pointer-events"],this.scope=c.scope||n.getDefaultScope(),this.timestamp=null,this.reattachConnections=c.reattach||n.Defaults.ReattachConnections,this.connectionsDetachable=n.Defaults.ConnectionsDetachable,(!1===c.connectionsDetachable||!1===c.detachable)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==c.dragAllowedWhenFull,c.onMaxConnections&&this.bind("maxConnections",c.onMaxConnections),this.addConnection=function(L){this.connections.push(L),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)},this.detachFromConnection=function(L,t,l){(t=t??this.connections.indexOf(L))>=0&&(this.connections.splice(t,1),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)),!l&&F&&0===this.connections.length&&n.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==l})},this.deleteEveryConnection=function(L){for(var t=this.connections.length,l=0;l<t;l++)n.deleteConnection(this.connections[0],L)},this.detachFrom=function(L,t,l){for(var o=[],b=0;b<this.connections.length;b++)(this.connections[b].endpoints[1]===L||this.connections[b].endpoints[0]===L)&&o.push(this.connections[b]);for(var C=0,v=o.length;C<v;C++)n.deleteConnection(o[0]);return this},this.getElement=function(){return this.element},this.setElement=function(L){var t=this._jsPlumb.instance.getId(L),l=this.elementId;return X.removeWithFunction(c.endpointsByElement[this.elementId],function(o){return o.id===this.id}.bind(this)),this.element=u.getElement(L),this.elementId=n.getId(this.element),n.router.rehomeEndpoint(this,l,this.element),n.dragManager.endpointAdded(this.element),X.addToList(c.endpointsByElement,t,this),this},this.makeInPlaceCopy=function(){var L=this.anchor.getCurrentLocation({element:this}),t=this.anchor.getOrientation(this),l=this.anchor.getCssClass();return k({dropOptions:c.dropOptions,anchor:{bind:function(){},compute:function(){return[L[0],L[1]]},getCurrentLocation:function(){return[L[0],L[1]]},getOrientation:function(){return t},getCssClass:function(){return l}},source:this.element,paintStyle:this.getPaintStyle(),endpoint:c.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(L){var t=(L=L||{}).timestamp,l=!1!==L.recalc;if(!t||this.timestamp!==t){var o=n.updateOffset({elId:this.elementId,timestamp:t}),b=L.offset?L.offset.o:o.o;if(null!=b){var C=L.anchorPoint,v=L.connectorPaintStyle;if(null==C){var m={xy:[b.left,b.top],wh:L.dimensions||o.s,element:this,timestamp:t};if(l&&this.anchor.isDynamic&&this.connections.length>0){var S=function(c,n){var D=0;if(null!=n)for(var k=0;k<c.connections.length;k++)if(c.connections[k].sourceId===n||c.connections[k].targetId===n){D=k;break}return c.connections[D]}(this,L.elementWithPrecedence),I=S.endpoints[0]===this?1:0,P=0===I?S.sourceId:S.targetId,A=n.getCachedData(P),G=A.o,W=A.s;m.index=0===I?1:0,m.connection=S,m.txy=[G.left,G.top],m.twh=W,m.tElement=S.endpoints[I],m.tRotation=n.getRotation(P)}else this.connections.length>0&&(m.connection=this.connections[0]);m.rotation=n.getRotation(this.elementId),C=this.anchor.compute(m)}for(var g in this.endpoint.compute(C,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,v||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=t,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(g)){var d=this._jsPlumb.overlays[g];d.isVisible()&&(this._jsPlumb.overlayPlacements[g]=d.draw(this.endpoint,this._jsPlumb.paintStyleInUse),d.paint(this._jsPlumb.overlayPlacements[g]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var r=!1;this.initDraggable=function(){if(!r&&u.isDragSupported(this.element)){var P,L={id:null,element:null},t=null,l=!1,o=null,b=function(c,n,D){var k=!1;return{drag:function(){if(k)return k=!1,!0;if(n.element){var R=D.getUIPosition(arguments,D.getZoom());null!=R&&D.setPosition(n.element,R),D.repaint(n.element,R),c.paint({anchorPoint:c.anchor.getCurrentLocation({element:c})})}},stopDrag:function(){k=!0}}}(this,L,n),C=c.dragOptions||{},y=u.dragEvents.start,m=u.dragEvents.stop,S=u.dragEvents.drag,I=u.dragEvents.beforeStart,G=function(g){t=this.connectorSelector();var d=!0;this.isEnabled()||(d=!1),null==t&&!this.isSource&&!this.isTemporarySource&&(d=!1),this.isSource&&this.isFull()&&!(null!=t&&this.dragAllowedWhenFull)&&(d=!1),null!=t&&!t.isDetachable(this)&&(this.isFull()?d=!1:t=null);var a=n.checkCondition(null==t?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:t});if(!1===a?d=!1:"object"==typeof a?u.extend(a,P||{}):a=P||{},!1===d)return n.stopDrag&&n.stopDrag(this.canvas),b.stopDrag(),!1;for(var s=0;s<this.connections.length;s++)this.connections[s].setHover(!1);this.addClass("endpointDrag"),n.setConnectionBeingDragged(!0),t&&!this.isFull()&&this.isSource&&(t=null),n.updateOffset({elId:this.elementId});var p=this._jsPlumb.instance.getOffset(this.canvas),f=this.canvas,w=this._jsPlumb.instance.getSize(this.canvas);(function(c,n,D,k){var R=n.createElement("div",{position:"absolute"});n.appendElement(R);var F=n.getId(R);n.setPosition(R,D),R.style.width=k[0]+"px",R.style.height=k[1]+"px",n.manage(F,R,!0),c.id=F,c.element=R})(L,n,p,w),n.setAttributes(this.canvas,{dragId:L.id,elId:this.elementId});var B=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var H=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);H.endpoints[1]&&(B=H.endpoints[1])}var V=this._jsPlumb.instance.makeAnchor("Center");V.isFloating=!0,this._jsPlumb.floatingEndpoint=function(c,n,D,k,R,F,N,M){return N({paintStyle:c,endpoint:D,anchor:new u.FloatingAnchor({reference:n,referenceCanvas:k,jsPlumbInstance:F}),source:R,scope:M})}(this.getPaintStyle(),V,B,this.canvas,L.element,n,k,this.scope);var Q=this._jsPlumb.floatingEndpoint.anchor;if(null==t)this.setHover(!1,!1),(t=D({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:L.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:c.connectorStyle,hoverPaintStyle:c.connectorHoverStyle,connector:c.connector,overlays:c.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:c.scope,data:a})).pending=!0,t.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.anchor=Q,n.fire("connectionDrag",t),n.router.newConnection(t);else{l=!0,t.setHover(!1);var tt=t.endpoints[0].id===this.id?0:1;this.detachFromConnection(t,null,!0);var $=n.getDragScope(f);n.setAttribute(this.canvas,"originalScope",$),n.fire("connectionDrag",t),0===tt?(o=[t.source,t.sourceId,f,$],n.router.sourceOrTargetChanged(t.endpoints[tt].elementId,L.id,t,L.element,0)):(o=[t.target,t.targetId,f,$],n.router.sourceOrTargetChanged(t.endpoints[tt].elementId,L.id,t,L.element,1)),t.suspendedEndpoint=t.endpoints[tt],t.suspendedElement=t.endpoints[tt].getElement(),t.suspendedElementId=t.endpoints[tt].elementId,t.suspendedElementType=0===tt?"source":"target",t.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=t.suspendedEndpoint,t.endpoints[tt]=this._jsPlumb.floatingEndpoint,t.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass)}n.registerFloatingConnection(L,t,this._jsPlumb.floatingEndpoint),n.currentlyDragging=!0}.bind(this),W=function(){if(n.setConnectionBeingDragged(!1),t&&null!=t.endpoints){var g=n.getDropEvent(arguments),d=n.getFloatingAnchorIndex(t);if(t.endpoints[0===d?1:0].anchor.locked=!1,t.removeClass(n.draggingClass),this._jsPlumb&&(t.deleteConnectionNow||t.endpoints[d]===this._jsPlumb.floatingEndpoint)&&l&&t.suspendedEndpoint){0===d?(t.floatingElement=t.source,t.floatingId=t.sourceId,t.floatingEndpoint=t.endpoints[0],t.floatingIndex=0,t.source=o[0],t.sourceId=o[1]):(t.floatingElement=t.target,t.floatingId=t.targetId,t.floatingEndpoint=t.endpoints[1],t.floatingIndex=1,t.target=o[0],t.targetId=o[1]);var a=this._jsPlumb.floatingEndpoint;n.setDragScope(o[2],o[3]),t.endpoints[d]=t.suspendedEndpoint,t.isReattach()||t._forceReattach||t._forceDetach||!n.deleteConnection(t,{originalEvent:g})?(t.setHover(!1),t._forceDetach=null,t._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(t),t.suspendedEndpoint.addConnection(t),1===d?n.router.sourceOrTargetChanged(t.floatingId,t.targetId,t,t.target,d):n.router.sourceOrTargetChanged(t.floatingId,t.sourceId,t,t.source,d),n.repaint(o[1])):n.deleteObject({endpoint:a})}this.deleteAfterDragStop?n.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),n.fire("connectionDragStop",t,g),t.pending&&n.fire("connectionAborted",t,g),n.currentlyDragging=!1,t.suspendedElement=null,t.suspendedEndpoint=null,t=null}L&&L.element&&n.remove(L.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);(C=u.extend({},C)).scope=this.scope||C.scope,C[I]=X.wrap(C[I],function(g){P=g.e.payload||{}},!1),C[y]=X.wrap(C[y],G,!1),C[S]=X.wrap(C[S],b.drag),C[m]=X.wrap(C[m],W),C.multipleDrop=!1,C.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&!1!==this.connectionsDetachable}.bind(this),n.initDraggable(this.canvas,C,"internal"),this.canvas._jsPlumbRelatedElement=this.element,r=!0}},this.setEndpoint(c.endpoint||this._jsPlumb.instance.Defaults.Endpoint||u.Defaults.Endpoint,!0),this.setAnchor(c.anchor?c.anchor:c.anchors?c.anchors:n.Defaults.Anchor||"Top",!0);var O=["default",c.type||""].join(" ");this.addType(O,c.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var U=function(L,t,l,o){if(u.isDropSupported(this.element)){var b=c.dropOptions||n.Defaults.DropOptions||u.Defaults.DropOptions;(b=u.extend({},b)).scope=b.scope||this.scope;var C=u.dragEvents.drop,v=u.dragEvents.over,y=u.dragEvents.out,m=this,S=n.EndpointDropHandler({getEndpoint:function(){return m},jsPlumb:n,enabled:function(){return null==l||l.isEnabled()},isFull:function(){return l.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(I){m.addClass(I)},removeClass:function(I){m.removeClass(I)},isDropAllowed:function(){return m.isDropAllowed.apply(m,arguments)},reference:o,isRedrop:function(I,P){return I.suspendedEndpoint&&P.reference&&I.suspendedEndpoint.id===P.reference.id}});b[C]=X.wrap(b[C],S,!0),b[v]=X.wrap(b[v],function(){var I=u.getDragObject(arguments),P=n.getAttribute(u.getElement(I),"dragId"),A=n.getFloatingConnectionFor(P);if(null!=A){var G=n.getFloatingAnchorIndex(A);if(this.isTarget&&0!==G||A.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===A.suspendedEndpoint.id){var g=n.checkCondition("checkDropAllowed",{sourceEndpoint:A.endpoints[G],targetEndpoint:this,connection:A});this[(g?"add":"remove")+"Class"](n.endpointDropAllowedClass),this[(g?"remove":"add")+"Class"](n.endpointDropForbiddenClass),A.endpoints[G].anchor.over(this.anchor,this)}}}.bind(this)),b[y]=X.wrap(b[y],function(){var I=u.getDragObject(arguments),P=null==I?null:n.getAttribute(u.getElement(I),"dragId"),A=P?n.getFloatingConnectionFor(P):null;if(null!=A){var G=n.getFloatingAnchorIndex(A);(this.isTarget&&0!==G||A.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===A.suspendedEndpoint.id)&&(this.removeClass(n.endpointDropAllowedClass),this.removeClass(n.endpointDropForbiddenClass),A.endpoints[G].anchor.out())}}.bind(this)),n.initDroppable(L,b,"internal",t)}}.bind(this);return this.anchor.isFloating||U(this.canvas,!(c._transient||this.anchor.isFloating),this,c.reference),this},X.extend(u.Endpoint,u.OverlayCapableJsPlumbUIComponent,{setVisible:function(c,n,D){if(this._jsPlumb.visible=c,this.canvas&&(this.canvas.style.display=c?"block":"none"),this[c?"showOverlays":"hideOverlays"](),!n)for(var k=0;k<this.connections.length;k++)if(this.connections[k].setVisible(c),!D){var R=this===this.connections[k].endpoints[0]?1:0;1===this.connections[k].endpoints[R].connections.length&&this.connections[k].endpoints[R].setVisible(c,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(c,n){this.setPaintStyle(c.endpointStyle||c.paintStyle,n),this.setHoverPaintStyle(c.endpointHoverStyle||c.hoverPaintStyle,n),null!=c.maxConnections&&(this._jsPlumb.maxConnections=c.maxConnections),c.scope&&(this.scope=c.scope),u.extend(this,c,h),null!=c.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,c.cssClass),u.OverlayCapableJsPlumbUIComponent.applyType(this,c)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(c){this._jsPlumb.enabled=c},cleanup:function(){u.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"")),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(c){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(c)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(c){var n=!1;if(c)for(var D=0;D<this.connections.length;D++)if(this.connections[D].endpoints[1]===c||this.connections[D].endpoints[0]===c){n=!0;break}return n},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(c){this._jsPlumb.connectionCost=c},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(c){this._jsPlumb.connectionsDirected=c},setElementId:function(c){this.elementId=c,this.anchor.elementId=c},setReferenceElement:function(c){this.element=u.getElement(c)},setDragAllowedWhenFull:function(c){this.dragAllowedWhenFull=c},equals:function(c){return this.anchor.equals(c.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(c){return this.anchor.compute(c)}}),J.jsPlumbInstance.prototype.EndpointDropHandler=function(c){return function(n){var D=c.jsPlumb;c.removeClass(D.endpointDropAllowedClass),c.removeClass(D.endpointDropForbiddenClass);var k=D.getDropEvent(arguments),R=D.getDragObject(arguments),F=D.getAttribute(R,"dragId"),M=(D.getAttribute(R,"elId"),D.getAttribute(R,"originalScope")),r=D.getFloatingConnectionFor(F);if(null!=r){var e=null!=r.suspendedEndpoint;if(!e||null!=r.suspendedEndpoint._jsPlumb){var T=c.getEndpoint(r);if(null!=T){if(c.isRedrop(r,c))return r._forceReattach=!0,r.setHover(!1),void(c.maybeCleanup&&c.maybeCleanup(T));var O=D.getFloatingAnchorIndex(r);if(0===O&&!c.isSource||1===O&&!c.isTarget)return void(c.maybeCleanup&&c.maybeCleanup(T));c.onDrop&&c.onDrop(r),M&&D.setDragScope(R,M);var U=c.isFull(n);if(U&&T.fire("maxConnections",{endpoint:this,connection:r,maxConnections:T._jsPlumb.maxConnections},k),!U&&c.enabled()){var L=!0;0===O?(r.floatingElement=r.source,r.floatingId=r.sourceId,r.floatingEndpoint=r.endpoints[0],r.floatingIndex=0,r.source=c.element,r.sourceId=D.getId(c.element)):(r.floatingElement=r.target,r.floatingId=r.targetId,r.floatingEndpoint=r.endpoints[1],r.floatingIndex=1,r.target=c.element,r.targetId=D.getId(c.element)),e&&r.suspendedEndpoint.id!==T.id&&(!r.isDetachAllowed(r)||!r.endpoints[O].isDetachAllowed(r)||!r.suspendedEndpoint.isDetachAllowed(r)||!D.checkCondition("beforeDetach",r))&&(L=!1);var t=function(o){r.endpoints[O].detachFromConnection(r),r.suspendedEndpoint&&r.suspendedEndpoint.detachFromConnection(r),r.endpoints[O]=T,T.addConnection(r);var b=T.getParameters();for(var C in b)r.setParameter(C,b[C]);if(e){var v=r.suspendedEndpoint.elementId;D.fireMoveEvent({index:O,originalSourceId:0===O?v:r.sourceId,newSourceId:0===O?T.elementId:r.sourceId,originalTargetId:1===O?v:r.targetId,newTargetId:1===O?T.elementId:r.targetId,originalSourceEndpoint:0===O?r.suspendedEndpoint:r.endpoints[0],newSourceEndpoint:0===O?T:r.endpoints[0],originalTargetEndpoint:1===O?r.suspendedEndpoint:r.endpoints[1],newTargetEndpoint:1===O?T:r.endpoints[1],connection:r},k)}else b.draggable&&D.initDraggable(this.element,c.dragOptions,"internal",D);1===O?D.router.sourceOrTargetChanged(r.floatingId,r.targetId,r,r.target,1):D.router.sourceOrTargetChanged(r.floatingId,r.sourceId,r,r.source,0),r.endpoints[0].finalEndpoint&&(r.endpoints[0].detachFromConnection(r),r.endpoints[0]=r.endpoints[0].finalEndpoint,r.endpoints[0].addConnection(r)),X.isObject(o)&&r.mergeData(o),D.finaliseConnection(r,null,k,!1),r.setHover(!1),D.revalidate(r.endpoints[0].element)}.bind(this);if(L=L&&c.isDropAllowed(r.sourceId,r.targetId,r.scope,r,T))return t(L),!0;r.suspendedEndpoint&&(r.endpoints[O]=r.suspendedEndpoint,r.setHover(!1),r._forceDetach=!0,0===O?(r.source=r.suspendedEndpoint.element,r.sourceId=r.suspendedEndpoint.elementId):(r.target=r.suspendedEndpoint.element,r.targetId=r.suspendedEndpoint.elementId),r.suspendedEndpoint.addConnection(r),1===O?D.router.sourceOrTargetChanged(r.floatingId,r.targetId,r,r.target,1):D.router.sourceOrTargetChanged(r.floatingId,r.sourceId,r,r.source,0),D.repaint(r.sourceId),r._forceDetach=!1)}c.maybeCleanup&&c.maybeCleanup(T),D.currentlyDragging=!1}}}}}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,u=J.jsPlumb,X=J.jsPlumbUtil,ot=function(h,x,c,n,D){if(u.Connectors[x]=u.Connectors[x]||{},null==u.Connectors[x][c]){if(null==u.Connectors[c]){if(h.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+c+"'")}u.Connectors[x][c]=function(){u.Connectors[c].apply(this,arguments),u.ConnectorRenderers[x].apply(this,arguments)},X.extend(u.Connectors[x][c],[u.Connectors[c],u.ConnectorRenderers[x]])}return new u.Connectors[x][c](n,D)},Z=function(h,x,c){return h?c.makeAnchor(h,x,c):null},et=function(h,x,c,n){null!=x&&(x._jsPlumbConnections=x._jsPlumbConnections||{},n?delete x._jsPlumbConnections[h.id]:x._jsPlumbConnections[h.id]=!0,X.isEmpty(x._jsPlumbConnections)?c.removeClass(x,c.connectedClass):c.addClass(x,c.connectedClass))};u.Connection=function(h){var x=h.newEndpoint;this.id=h.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=h.previousConnection,this.source=u.getElement(h.source),this.target=u.getElement(h.target),u.OverlayCapableJsPlumbUIComponent.apply(this,arguments),h.sourceEndpoint?(this.source=h.sourceEndpoint.getElement(),this.sourceId=h.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),h.targetEndpoint?(this.target=h.targetEndpoint.getElement(),this.targetId=h.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=h.scope,this.endpoints=[],this.endpointStyles=[];var c=this._jsPlumb.instance;c.manage(this.sourceId,this.source),c.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:h.cssClass,container:h.container,"pointer-events":h["pointer-events"],editorParams:h.editorParams,overlays:h.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(b,C,v,y,m){return v=v||this._jsPlumb.instance.getId(C),this.prepareEndpoint(c,x,this,y,b?0:1,h,C,v,m)},h.type&&(h.endpoints=h.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(h.type).endpoints);var n=this.makeEndpoint(!0,this.source,this.sourceId,h.sourceEndpoint),D=this.makeEndpoint(!1,this.target,this.targetId,h.targetEndpoint);n&&X.addToList(h.endpointsByElement,this.sourceId,n),D&&X.addToList(h.endpointsByElement,this.targetId,D),this.scope||(this.scope=this.endpoints[0].scope),null!=h.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(h.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(h.deleteEndpointsOnEmpty));var k=c.Defaults.ConnectionsDetachable;!1===h.detachable&&(k=!1),!1===this.endpoints[0].connectionsDetachable&&(k=!1),!1===this.endpoints[1].connectionsDetachable&&(k=!1),this.appendToDefaultType({detachable:k,reattach:h.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||c.Defaults.ReattachConnections,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||h.paintStyle||c.Defaults.PaintStyle||u.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||h.hoverPaintStyle||c.Defaults.HoverPaintStyle||u.Defaults.HoverPaintStyle});var F=c.getSuspendedAt();if(!c.isSuspendDrawing()){var N=c.getCachedData(this.sourceId),M=N.o,r=N.s,e=c.getCachedData(this.targetId),T=e.o,O=e.s,U=F||jsPlumbUtil.uuid(),L=this.endpoints[0].anchor.compute({xy:[M.left,M.top],wh:r,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[T.left,T.top],twh:O,tElement:this.endpoints[1],timestamp:U,rotation:c.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:L,timestamp:U}),L=this.endpoints[1].anchor.compute({xy:[T.left,T.top],wh:O,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[M.left,M.top],twh:r,tElement:this.endpoints[0],timestamp:U,rotation:c.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:L,timestamp:U})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(b){return!1!==this._jsPlumb.detachable&&(null!=b?!0===b.connectionsDetachable:!0===this._jsPlumb.detachable)},this.setDetachable=function(b){this._jsPlumb.detachable=!0===b},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(b){this._jsPlumb.reattach=!0===b},this._jsPlumb.cost=h.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=h.directed,null==h.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var t=u.extend({},this.endpoints[1].getParameters());u.extend(t,this.endpoints[0].getParameters()),u.extend(t,this.getParameters()),this.setParameters(t),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||h.connector||c.Defaults.Connector||u.Defaults.Connector,!0);var l=null!=h.data&&X.isObject(h.data)?h.data:{};this.getData=function(){return l},this.setData=function(b){l=b||{}},this.mergeData=function(b){l=u.extend(l,b)};var o=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,h.type].join(" ");/[^\s]/.test(o)&&this.addType(o,h.data,!0),this.updateConnectedClass()},X.extend(u.Connection,u.OverlayCapableJsPlumbUIComponent,{applyType:function(h,x,c){var n=null;null!=h.connector&&(null==(n=this.getCachedTypeItem("connector",c.connector))&&(n=this.prepareConnector(h.connector,c.connector),this.cacheTypeItem("connector",n,c.connector)),this.setPreparedConnector(n)),null!=h.detachable&&this.setDetachable(h.detachable),null!=h.reattach&&this.setReattach(h.reattach),h.scope&&(this.scope=h.scope),null!=h.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,h.cssClass);var D=null;h.anchor?null==(D=this.getCachedTypeItem("anchors",c.anchor))&&(D=[this._jsPlumb.instance.makeAnchor(h.anchor),this._jsPlumb.instance.makeAnchor(h.anchor)],this.cacheTypeItem("anchors",D,c.anchor)):h.anchors&&null==(D=this.getCachedTypeItem("anchors",c.anchors))&&(D=[this._jsPlumb.instance.makeAnchor(h.anchors[0]),this._jsPlumb.instance.makeAnchor(h.anchors[1])],this.cacheTypeItem("anchors",D,c.anchors)),null!=D&&(this.endpoints[0].anchor=D[0],this.endpoints[1].anchor=D[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),u.OverlayCapableJsPlumbUIComponent.applyType(this,h)},addClass:function(h,x){x&&(this.endpoints[0].addClass(h),this.endpoints[1].addClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(h)),this.connector&&this.connector.addClass(h)},removeClass:function(h,x){x&&(this.endpoints[0].removeClass(h),this.endpoints[1].removeClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(h)),this.connector&&this.connector.removeClass(h)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(h){this._jsPlumb.visible=h,this.connector&&this.connector.setVisible(h),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(h){this._jsPlumb&&(et(this,this.source,this._jsPlumb.instance,h),et(this,this.target,this._jsPlumb.instance,h))},setHover:function(h){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(h),J.jsPlumb[h?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),J.jsPlumb[h?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(h){this._jsPlumb.cost=h},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(h,x){var D,c={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},n=this._jsPlumb.instance.getRenderMode();return X.isString(h)?D=ot(this._jsPlumb.instance,n,h,c,this):X.isArray(h)&&(D=ot(this._jsPlumb.instance,n,h[0],1===h.length?c:X.merge(h[1],c),this)),null!=x&&(D.typeId=x),D},setPreparedConnector:function(h,x,c,n){if(this.connector!==h){var D,k="";if(null!=this.connector&&(k=(D=this.connector).getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=h,n&&this.cacheTypeItem("connector",h,n),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(k),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=D)for(var R=this.getOverlays(),F=0;F<R.length;F++)R[F].transfer&&R[F].transfer(this.connector);c||this.setListenerComponent(this.connector),x||this.repaint()}},setConnector:function(h,x,c,n){var D=this.prepareConnector(h,n);this.setPreparedConnector(D,x,c,n)},paint:function(h){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){var x=(h=h||{}).timestamp,n=this.targetId;if(null==x||x!==this._jsPlumb.lastPaintedAt){var F=this._jsPlumb.instance.updateOffset({elId:this.sourceId}).o,N=this._jsPlumb.instance.updateOffset({elId:n}).o,M=this.endpoints[0],r=this.endpoints[1],e=M.anchor.getCurrentLocation({xy:[F.left,F.top],wh:[F.width,F.height],element:M,timestamp:x,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),T=r.anchor.getCurrentLocation({xy:[N.left,N.top],wh:[N.width,N.height],element:r,timestamp:x,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:e,targetPos:T,sourceOrientation:M.anchor.getOrientation(M),targetOrientation:r.anchor.getOrientation(r),sourceEndpoint:this.endpoints[0],targetEndpoint:this.endpoints[1],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:F,targetInfo:N});var O={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var U in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(U)){var L=this._jsPlumb.overlays[U];L.isVisible()&&(this._jsPlumb.overlayPlacements[U]=L.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(L)),O.minX=Math.min(O.minX,this._jsPlumb.overlayPlacements[U].minX),O.maxX=Math.max(O.maxX,this._jsPlumb.overlayPlacements[U].maxX),O.minY=Math.min(O.minY,this._jsPlumb.overlayPlacements[U].minY),O.maxY=Math.max(O.maxY,this._jsPlumb.overlayPlacements[U].maxY))}var t=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,l=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),o={xmin:Math.min(this.connector.bounds.minX-(t+l),O.minX),ymin:Math.min(this.connector.bounds.minY-(t+l),O.minY),xmax:Math.max(this.connector.bounds.maxX+(t+l),O.maxX),ymax:Math.max(this.connector.bounds.maxY+(t+l),O.maxY)};for(var b in this.connector.paintExtents=o,this.connector.paint(this._jsPlumb.paintStyleInUse,null,o),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(b)){var C=this._jsPlumb.overlays[b];C.isVisible()&&C.paint(this._jsPlumb.overlayPlacements[b],o)}}this._jsPlumb.lastPaintedAt=x}},repaint:function(h){var x=jsPlumb.extend(h||{},{});x.elId=this.sourceId,this.paint(x)},prepareEndpoint:function(h,x,c,n,D,k,R,F,N){var M;if(n)c.endpoints[D]=n,n.addConnection(c);else{k.endpoints||(k.endpoints=[null,null]);var r=N||k.endpoints[D]||k.endpoint||h.Defaults.Endpoints[D]||u.Defaults.Endpoints[D]||h.Defaults.Endpoint||u.Defaults.Endpoint;k.endpointStyles||(k.endpointStyles=[null,null]),k.endpointHoverStyles||(k.endpointHoverStyles=[null,null]);var e=k.endpointStyles[D]||k.endpointStyle||h.Defaults.EndpointStyles[D]||u.Defaults.EndpointStyles[D]||h.Defaults.EndpointStyle||u.Defaults.EndpointStyle;null==e.fill&&null!=k.paintStyle&&(e.fill=k.paintStyle.stroke),null==e.outlineStroke&&null!=k.paintStyle&&(e.outlineStroke=k.paintStyle.outlineStroke),null==e.outlineWidth&&null!=k.paintStyle&&(e.outlineWidth=k.paintStyle.outlineWidth);var T=k.endpointHoverStyles[D]||k.endpointHoverStyle||h.Defaults.EndpointHoverStyles[D]||u.Defaults.EndpointHoverStyles[D]||h.Defaults.EndpointHoverStyle||u.Defaults.EndpointHoverStyle;null!=k.hoverPaintStyle&&(null==T&&(T={}),null==T.fill&&(T.fill=k.hoverPaintStyle.stroke));var O=k.anchors?k.anchors[D]:k.anchor?k.anchor:Z(h.Defaults.Anchors[D],F,h)||Z(u.Defaults.Anchors[D],F,h)||Z(h.Defaults.Anchor,F,h)||Z(u.Defaults.Anchor,F,h);M=x({paintStyle:e,hoverPaintStyle:T,endpoint:r,connections:[c],uuid:k.uuids?k.uuids[D]:null,anchor:O,source:R,scope:k.scope,reattach:k.reattach||h.Defaults.ReattachConnections,detachable:k.detachable||h.Defaults.ConnectionsDetachable}),null==n&&M.setDeleteOnEmpty(!0),c.endpoints[D]=M,!1===k.drawEndpoints&&M.setVisible(!1,!0,!0)}return M},replaceEndpoint:function(h,x){var c=this.endpoints[h],n=c.elementId,D=this._jsPlumb.instance.getEndpoints(n),k=D.indexOf(c),R=this.makeEndpoint(0===h,c.element,n,null,x);this.endpoints[h]=R,D.splice(k,1,R),this._jsPlumb.instance.deleteObject({endpoint:c,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:c,current:R}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,u=J.jsPlumbUtil,X=J.jsPlumb;X.AnchorManager=function(h){var x={},c={},n={},D={},k=this,R={},F=h.jsPlumbInstance,N={},r=function(o,b){return b[0][0]-o[0][0]},e=function(o,b){return(o[0][0]<0?-Math.PI-o[0][0]:Math.PI-o[0][0])-(b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0])},T={top:e,right:r,bottom:r,left:e},U=function(o,b){var C=F.getCachedData(o),v=C.s,y=C.o,m=function(S,I,P,A,G,W,g){if(A.length>0)for(var d=function(o,b){return o.sort(b)}(A,T[S]),p=function(o,b,C,v,y,m,S,I){for(var P=[],A=b[y?0:1]/(v.length+1),G=0;G<v.length;G++){var W=(G+1)*A,g=m*b[y?1:0];S&&(W=b[y?0:1]-W);var d=y?W:g,a=C.left+d,s=d/b[0],p=y?g:W,f=C.top+p,w=p/b[1];if(0!==I){var B=jsPlumbUtil.rotatePoint([a,f],[C.centerx,C.centery],I);a=B[0],f=B[1]}P.push([a,f,s,w,v[G][1],v[G][2]])}return P}(0,I,P,d,G,W,"right"===S||"top"===S,F.getRotation(o)),f=function(Q,tt){c[Q.id]=[tt[0],tt[1],tt[2],tt[3]],n[Q.id]=g},w=0;w<p.length;w++){var B=p[w][4],V=B.endpoints[1].elementId===o;B.endpoints[0].elementId===o&&f(B.endpoints[0],p[w]),V&&f(B.endpoints[1],p[w])}};m("bottom",v,y,b.bottom,!0,1,[0,1]),m("top",v,y,b.top,!0,0,[0,-1]),m("left",v,y,b.left,!1,0,[-1,0]),m("right",v,y,b.right,!1,1,[1,0])};this.reset=function(){x={},D={},R={}},this.addFloatingConnection=function(o,b){N[o]=b},this.newConnection=function(o){var b=o.sourceId,C=o.targetId,v=o.endpoints,y=!0,m=function(S,I,P,A,G){b===C&&P.isContinuous&&(o._jsPlumb.instance.removeElement(v[1].canvas),y=!1),u.addToList(D,A,[G,I,P.constructor===X.DynamicAnchor])};m(0,v[0],v[0].anchor,C,o),y&&m(0,v[1],v[1].anchor,b,o)};var L=function(o){!function(b,C){if(b){var v=function(y){return y[4]===C};u.removeWithFunction(b.top,v),u.removeWithFunction(b.left,v),u.removeWithFunction(b.bottom,v),u.removeWithFunction(b.right,v)}}(R[o.elementId],o.id)};this.connectionDetached=function(o,b){var C=o.connection||o,y=o.targetId,S=function(I,P,A,G,W){u.removeWithFunction(D[G],function(g){return g[0].id===W.id})};S(0,0,0,o.sourceId,C),S(0,0,0,y,C),C.floatingId&&(S(0,0,0,C.floatingId,C),L(C.floatingEndpoint)),L(C.endpoints[0]),L(C.endpoints[1]),b||(k.redraw(C.sourceId),C.targetId!==C.sourceId&&k.redraw(C.targetId))},this.addEndpoint=function(o,b){u.addToList(x,b,o)},this.changeId=function(o,b){D[b]=D[o],x[b]=x[o],delete D[o],delete x[o]},this.getConnectionsFor=function(o){return D[o]||[]},this.getEndpointsFor=function(o){return x[o]||[]},this.deleteEndpoint=function(o){u.removeWithFunction(x[o.elementId],function(b){return b.id===o.id}),L(o)},this.elementRemoved=function(o){delete N[o],delete x[o],x[o]=[]};var t=function(o,b,C,v,y,m,S,I,P,A,G,W){var H,V,d=-1,a=v.endpoints[S],s=a.id,p=[1,0][S],f=[[b,C],v,y,m,s],w=o[P],B=a._continuousAnchorEdge?o[a._continuousAnchorEdge]:null;if(B){var Q=u.findWithFunction(B,function($){return $[4]===s});if(-1!==Q)for(B.splice(Q,1),H=0;H<B.length;H++)u.addWithFunction(G,V=B[H][1],function($){return $.id===V.id}),u.addWithFunction(W,B[H][1].endpoints[S],function($){return $.id===V.endpoints[S].id}),u.addWithFunction(W,B[H][1].endpoints[p],function($){return $.id===V.endpoints[p].id})}for(H=0;H<w.length;H++)1===h.idx&&w[H][3]===m&&-1===d&&(d=H),u.addWithFunction(G,V=w[H][1],function($){return $.id===V.id}),u.addWithFunction(W,w[H][1].endpoints[S],function($){return $.id===V.endpoints[S].id}),u.addWithFunction(W,w[H][1].endpoints[p],function($){return $.id===V.endpoints[p].id});w.splice(I?-1!==d?d:0:w.length,0,f),a._continuousAnchorEdge=P};this.sourceOrTargetChanged=function(o,b,C,v,y){if(0===y){if(o!==b){C.sourceId=b,C.source=v,u.removeWithFunction(D[o],function(A){return A[0].id===C.id});var m=u.findWithFunction(D[C.targetId],function(A){return A[0].id===C.id});m>-1&&(D[C.targetId][m][0]=C,D[C.targetId][m][1]=C.endpoints[0],D[C.targetId][m][2]=C.endpoints[0].anchor.constructor===X.DynamicAnchor),u.addToList(D,b,[C,C.endpoints[1],C.endpoints[1].anchor.constructor===X.DynamicAnchor]),C.endpoints[1].anchor.isContinuous&&(C.source===C.target?C._jsPlumb.instance.removeElement(C.endpoints[1].canvas):null==C.endpoints[1].canvas.parentNode&&C._jsPlumb.instance.appendElement(C.endpoints[1].canvas)),C.updateConnectedClass()}}else if(1===y){var S=C.endpoints[0].elementId;C.target=v,C.targetId=b;var I=u.findWithFunction(D[S],function(A){return A[0].id===C.id}),P=u.findWithFunction(D[o],function(A){return A[0].id===C.id});-1!==I&&(D[S][I][0]=C,D[S][I][1]=C.endpoints[1],D[S][I][2]=C.endpoints[1].anchor.constructor===X.DynamicAnchor),P>-1&&(D[o].splice(P,1),u.addToList(D,b,[C,C.endpoints[0],C.endpoints[0].anchor.constructor===X.DynamicAnchor])),C.updateConnectedClass()}},this.rehomeEndpoint=function(o,b,C){var v=x[b]||[],y=F.getId(C);if(y!==b){var m=v.indexOf(o);if(m>-1){var S=v.splice(m,1)[0];k.add(S,y)}}for(var I=0;I<o.connections.length;I++)o.connections[I].sourceId===b?k.sourceOrTargetChanged(b,o.elementId,o.connections[I],o.element,0):o.connections[I].targetId===b&&k.sourceOrTargetChanged(b,o.elementId,o.connections[I],o.element,1)},this.redraw=function(o,b,C,v,y,m){var S=[],I=[],P=[];if(!F.isSuspendDrawing()){var A=x[o]||[],G=D[o]||[];C=C||jsPlumbUtil.uuid(),v=v||{left:0,top:0},b&&(b={left:b.left+v.left,top:b.top+v.top});for(var W=F.updateOffset({elId:o,offset:b,recalc:!1,timestamp:C}),g={},d=0;d<G.length;d++){var a=G[d][0],s=a.sourceId,p=a.targetId,f=a.endpoints[0].anchor.isContinuous,w=a.endpoints[1].anchor.isContinuous;if(f||w){var B=s+"_"+p,H=g[B],V=a.sourceId===o?1:0,Q=F.getRotation(p),tt=F.getRotation(s);f&&!R[s]&&(R[s]={top:[],right:[],bottom:[],left:[]}),w&&!R[p]&&(R[p]={top:[],right:[],bottom:[],left:[]}),o!==p&&F.updateOffset({elId:p,timestamp:C}),o!==s&&F.updateOffset({elId:s,timestamp:C});var $=F.getCachedData(p),it=F.getCachedData(s);p===s&&(f||w)?(t(R[s],-Math.PI/2,0,a,!1,p,0,!1,"top",0,S,I),t(R[p],-Math.PI/2,0,a,!1,s,1,!1,"top",0,S,I)):(H||(H=this.calculateOrientation(s,p,it.o,$.o,a.endpoints[0].anchor,a.endpoints[1].anchor,a,tt,Q),g[B]=H),f&&t(R[s],H.theta,0,a,!1,p,0,!1,H.a[0],0,S,I),w&&t(R[p],H.theta2,-1,a,!0,s,1,!0,H.a[1],0,S,I)),f&&u.addWithFunction(P,s,function(pt){return pt===s}),w&&u.addWithFunction(P,p,function(pt){return pt===p}),u.addWithFunction(S,a,function(pt){return pt.id===a.id}),(f&&0===V||w&&1===V)&&u.addWithFunction(I,a.endpoints[V],function(pt){return pt.id===a.endpoints[V].id})}}for(d=0;d<A.length;d++)0===A[d].connections.length&&A[d].anchor.isContinuous&&(R[o]||(R[o]={top:[],right:[],bottom:[],left:[]}),t(R[o],-Math.PI/2,0,{endpoints:[A[d],A[d]],paint:function(){}},!1,o,0,!1,A[d].anchor.getDefaultFace(),0,S,I),u.addWithFunction(P,o,function(pt){return pt===o}));for(d=0;d<P.length;d++)U(P[d],R[P[d]]);for(d=0;d<A.length;d++)A[d].paint({timestamp:C,offset:W,dimensions:W.s,recalc:!0!==m});for(d=0;d<I.length;d++){var ct=F.getCachedData(I[d].elementId);I[d].paint({timestamp:null,offset:ct,dimensions:ct.s})}for(d=0;d<G.length;d++){var dt=G[d][1];if(dt.anchor.constructor===X.DynamicAnchor){dt.paint({elementWithPrecedence:o,timestamp:C}),u.addWithFunction(S,G[d][0],function(pt){return pt.id===G[d][0].id});for(var gt=0;gt<dt.connections.length;gt++)dt.connections[gt]!==G[d][0]&&u.addWithFunction(S,dt.connections[gt],function(pt){return pt.id===dt.connections[gt].id})}else u.addWithFunction(S,G[d][0],function(pt){return pt.id===G[d][0].id})}var Pt=N[o];for(Pt&&Pt.paint({timestamp:C,recalc:!1,elId:o}),d=0;d<S.length;d++)S[d].paint({elId:o,timestamp:null,recalc:!1,clearEdits:y})}return{c:S,e:I}};var l=function(o){u.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=o.faces||["top","right","bottom","left"],C=!1!==o.clockwise,v={},y={top:"bottom",right:"left",left:"right",bottom:"top"},m={top:"right",right:"bottom",left:"top",bottom:"left"},S={top:"left",right:"top",left:"bottom",bottom:"right"},I=C?m:S,P=C?S:m,A=o.cssClass||"",G=null,W=null,g=["left","right"],d=["top","bottom"],a=null,s=0;s<b.length;s++)v[b[s]]=!0;this.getDefaultFace=function(){return 0===b.length?"top":b[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(p){return v[p]?p:v[y[p]]?y[p]:v[I[p]]?I[p]:v[P[p]]?P[p]:p},this.isEdgeSupported=function(p){return null==a?null==W?!0===v[p]:W===p:-1!==a.indexOf(p)},this.setCurrentFace=function(p,f){G=p,f&&null!=W&&(W=G)},this.getCurrentFace=function(){return G},this.getSupportedFaces=function(){var p=[];for(var f in v)v[f]&&p.push(f);return p},this.lock=function(){W=G},this.unlock=function(){W=null},this.isLocked=function(){return null!=W},this.lockCurrentAxis=function(){null!=G&&(a="left"===G||"right"===G?g:d)},this.unlockCurrentAxis=function(){a=null},this.compute=function(p){return c[p.element.id]||[0,0]},this.getCurrentLocation=function(p){return c[p.element.id]||[0,0]},this.getOrientation=function(p){return n[p.id]||[0,0]},this.getCssClass=function(){return A}};F.continuousAnchorFactory={get:function(o){return new l(o)},clear:function(o){delete c[o]}}},X.AnchorManager.prototype.calculateOrientation=function(h,x,c,n,D,k,R,F,N){var r=["left","top","right","bottom"];if(h===x)return{orientation:"identity",a:["top","top"]};var e=Math.atan2(n.centery-c.centery,n.centerx-c.centerx),T=Math.atan2(c.centery-n.centery,c.centerx-n.centerx),O=[],U={};!function(C,v){for(var y=0;y<C.length;y++)if(U[C[y]]={left:[v[y][0].left,v[y][0].centery],right:[v[y][0].right,v[y][0].centery],top:[v[y][0].centerx,v[y][0].top],bottom:[v[y][0].centerx,v[y][0].bottom]},0!==v[y][1])for(var m in U[C[y]])U[C[y]][m]=jsPlumbUtil.rotatePoint(U[C[y]][m],[v[y][0].centerx,v[y][0].centery],v[y][1])}(["source","target"],[[c,F],[n,N]]);for(var L=0;L<r.length;L++)for(var t=0;t<r.length;t++)O.push({source:r[L],target:r[t],dist:Biltong.lineLength(U.source[r[L]],U.target[r[t]])});O.sort(function(C,v){return C.dist<v.dist?-1:C.dist>v.dist?1:0});for(var l=O[0].source,o=O[0].target,b=0;b<O.length&&(l=D.isContinuous&&D.locked?D.getCurrentFace():!D.isContinuous||D.isEdgeSupported(O[b].source)?O[b].source:null,o=k.isContinuous&&k.locked?k.getCurrentFace():!k.isContinuous||k.isEdgeSupported(O[b].target)?O[b].target:null,null==l||null==o);b++);return D.isContinuous&&D.setCurrentFace(l),k.isContinuous&&k.setCurrentFace(o),{a:[l,o],theta:e,theta2:T}},X.Anchor=function(h){this.x=h.x||0,this.y=h.y||0,this.elementId=h.elementId,this.cssClass=h.cssClass||"",this.orientation=h.orientation||[0,0],this.lastReturnValue=null,this.offsets=h.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=!1!==h.relocatable,this.snapOnRelocate=!1!==h.snapOnRelocate,this.locked=!1,u.EventGenerator.apply(this),this.compute=function(x){var c=x.xy,n=x.wh,D=x.timestamp;if(D&&D===this.timestamp)return this.lastReturnValue;var k=[c[0]+this.x*n[0]+this.offsets[0],c[1]+this.y*n[1]+this.offsets[1],this.x,this.y],R=x.rotation;if(null!=R&&0!==R){var F=jsPlumbUtil.rotatePoint(k,[c[0]+n[0]/2,c[1]+n[1]/2],R);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*F[2]-this._unrotatedOrientation[1]*F[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*F[2]+this._unrotatedOrientation[0]*F[3]),this.lastReturnValue=[F[0],F[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=k;return this.timestamp=D,this.lastReturnValue},this.getCurrentLocation=function(x){return x=x||{},null==this.lastReturnValue||null!=x.timestamp&&this.timestamp!==x.timestamp?this.compute(x):this.lastReturnValue},this.setPosition=function(x,c,n,D,k){(!this.locked||k)&&(this.x=x,this.y=c,this.orientation=[n,D],this.lastReturnValue=null)}},u.extend(X.Anchor,u.EventGenerator,{equals:function(h){if(!h)return!1;var x=h.getOrientation(),c=this.getOrientation();return this.x===h.x&&this.y===h.y&&this.offsets[0]===h.offsets[0]&&this.offsets[1]===h.offsets[1]&&c[0]===x[0]&&c[1]===x[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),X.FloatingAnchor=function(h){X.Anchor.apply(this,arguments);var x=h.reference,n=X.getSize(h.referenceCanvas),R=null,F=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(N){var M=N.xy,r=[M[0]+n[0]/2,M[1]+n[1]/2];return F=r,r},this.getOrientation=function(N){if(R)return R;var M=x.getOrientation(N);return[0*Math.abs(M[0])*-1,0*Math.abs(M[1])*-1]},this.over=function(N,M){R=N.getOrientation(M)},this.out=function(){R=null},this.getCurrentLocation=function(N){return F??this.compute(N)}},u.extend(X.FloatingAnchor,X.Anchor);var ot=function(h,x,c){return h.constructor===X.Anchor?h:x.makeAnchor(h,c,x)};X.DynamicAnchor=function(h){X.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=h.elementId,this.jsPlumbInstance=h.jsPlumbInstance;for(var x=0;x<h.anchors.length;x++)this.anchors[x]=ot(h.anchors[x],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var c=this.anchors.length>0?this.anchors[0]:null,n=c,k=function(F,N,M,r,e,T,O){var U=r[0]+F.x*e[0],L=r[1]+F.y*e[1],t=r[0]+e[0]/2,l=r[1]+e[1]/2;if(null!=T&&0!==T){var o=jsPlumbUtil.rotatePoint([U,L],[t,l],T);U=o[0],L=o[1]}return Math.sqrt(Math.pow(N-U,2)+Math.pow(M-L,2))+Math.sqrt(Math.pow(t-U,2)+Math.pow(l-L,2))},R=h.selector||function(F,N,M,r,e,T,O){for(var U=M[0]+r[0]/2,L=M[1]+r[1]/2,t=-1,l=1/0,o=0;o<O.length;o++){var b=k(O[o],U,L,F,N,e);b<l&&(t=o+0,l=b)}return O[t]};this.compute=function(F){var N=F.xy,M=F.wh,r=F.txy,e=F.twh,T=F.rotation,O=F.tRotation;return this.timestamp=F.timestamp,this.locked||null==r||null==e?(this.lastReturnValue=c.compute(F),this.lastReturnValue):(F.timestamp=null,c=R(N,M,r,e,T,O,this.anchors),this.x=c.x,this.y=c.y,c!==n&&this.fire("anchorChanged",c),n=c,this.lastReturnValue=c.compute(F),this.lastReturnValue)},this.getCurrentLocation=function(F){return null!=c?c.getCurrentLocation(F):null},this.getOrientation=function(F){return null!=c?c.getOrientation(F):[0,0]},this.over=function(F,N){c?.over(F,N)},this.out=function(){c?.out()},this.setAnchor=function(F){c=F},this.getCssClass=function(){return c&&c.getCssClass()||""},this.setAnchorCoordinates=function(F){var N=jsPlumbUtil.findWithFunction(this.anchors,function(M){return M.x===F[0]&&M.y===F[1]});return-1!==N&&(this.setAnchor(this.anchors[N]),!0)}},u.extend(X.DynamicAnchor,X.Anchor);var Z=function(h,x,c,n,D,k){X.Anchors[D]=function(R){var F=R.jsPlumbInstance.makeAnchor([h,x,c,n,0,0],R.elementId,R.jsPlumbInstance);return F.type=D,k&&k(F,R),F}};Z(.5,0,0,-1,"TopCenter"),Z(.5,1,0,1,"BottomCenter"),Z(0,.5,-1,0,"LeftMiddle"),Z(1,.5,1,0,"RightMiddle"),Z(.5,0,0,-1,"Top"),Z(.5,1,0,1,"Bottom"),Z(0,.5,-1,0,"Left"),Z(1,.5,1,0,"Right"),Z(.5,.5,0,0,"Center"),Z(1,0,0,-1,"TopRight"),Z(1,1,0,1,"BottomRight"),Z(0,0,0,-1,"TopLeft"),Z(0,1,0,1,"BottomLeft"),X.Defaults.DynamicAnchors=function(h){return h.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],h.elementId,h.jsPlumbInstance)},X.Anchors.AutoDefault=function(h){var x=h.jsPlumbInstance.makeDynamicAnchor(X.Defaults.DynamicAnchors(h));return x.type="AutoDefault",x};var et=function(h,x){X.Anchors[h]=function(c){var n=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:x}],c.elementId,c.jsPlumbInstance);return n.type=h,n}};X.Anchors.Continuous=function(h){return h.jsPlumbInstance.continuousAnchorFactory.get(h)},et("ContinuousLeft",["left"]),et("ContinuousTop",["top"]),et("ContinuousBottom",["bottom"]),et("ContinuousRight",["right"]),Z(0,0,0,0,"Assign",function(h,x){var c=x.position||"Fixed";h.positionFinder=c.constructor===String?x.jsPlumbInstance.AnchorPositionFinders[c]:c,h.constructorParams=x}),J.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(h,x,c){return[(h.left-x.left)/c[0],(h.top-x.top)/c[1]]},Grid:function(h,x,c,n){var k=h.top-x.top,R=c[0]/n.grid[0],F=c[1]/n.grid[1],N=Math.floor((h.left-x.left)/R),M=Math.floor(k/F);return[(N*R+R/2)/c[0],(M*F+F/2)/c[1]]}},X.Anchors.Perimeter=function(h){var x=(h=h||{}).anchorCount||60,c=h.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var n=function(){for(var e=.5,T=2*Math.PI/x,O=0,U=[],L=0;L<x;L++){var t=e+e*Math.sin(O),l=e+e*Math.cos(O);U.push([t,l,0,0]),O+=T}return U},D=function(e){for(var T=x/e.length,O=[],U=function(t,l,o,b,C,v,y){for(var m=(o-t)/(T=x*C),S=(b-l)/T,I=0;I<T;I++)O.push([t+m*I,l+S*I,v??0,y??0])},L=0;L<e.length;L++)U.apply(null,e[L]);return O},k=function(e){for(var T=[],O=0;O<e.length;O++)T.push([e[O][0],e[O][1],e[O][2],e[O][3],1/e.length,e[O][4],e[O][5]]);return D(T)},R=function(){return k([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},F={Circle:n,Ellipse:n,Diamond:function(){return k([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:R,Square:R,Triangle:function(){return k([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(e){for(var T=e.points,O=[],U=0,L=0;L<T.length-1;L++){var t=Math.sqrt(Math.pow(T[L][2]-T[L][0])+Math.pow(T[L][3]-T[L][1]));U+=t,O.push([T[L][0],T[L][1],T[L+1][0],T[L+1][1],t])}for(var l=0;l<O.length;l++)O[l][4]=O[l][4]/U;return D(O)}};if(!F[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var M=F[c](h);h.rotation&&(M=function(e,T){for(var O=[],U=T/180*Math.PI,L=0;L<e.length;L++){var t=e[L][0]-.5,l=e[L][1]-.5;O.push([t*Math.cos(U)-l*Math.sin(U)+.5,t*Math.sin(U)+l*Math.cos(U)+.5,e[L][2],e[L][3]])}return O}(M,h.rotation));var r=h.jsPlumbInstance.makeDynamicAnchor(M);return r.type="Perimeter",r}}.call(typeof window<"u"?window:this),function(){"use strict";var X=this.jsPlumb;X.DefaultRouter=function(ot){this.jsPlumbInstance=ot,this.anchorManager=new X.AnchorManager({jsPlumbInstance:ot}),this.sourceOrTargetChanged=function(Z,et,h,x,c){this.anchorManager.sourceOrTargetChanged(Z,et,h,x,c)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(Z,et){this.anchorManager.changeId(Z,et)},this.elementRemoved=function(Z){this.anchorManager.elementRemoved(Z)},this.newConnection=function(Z){this.anchorManager.newConnection(Z)},this.connectionDetached=function(Z,et){this.anchorManager.connectionDetached(Z,et)},this.redraw=function(Z,et,h,x,c,n){return this.anchorManager.redraw(Z,et,h,x,c,n)},this.deleteEndpoint=function(Z){this.anchorManager.deleteEndpoint(Z)},this.rehomeEndpoint=function(Z,et,h){this.anchorManager.rehomeEndpoint(Z,et,h)},this.addEndpoint=function(Z,et){this.anchorManager.addEndpoint(Z,et)}}}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,u=J.jsPlumb,X=J.jsPlumbUtil,ot=J.Biltong;u.Segments={AbstractSegment:function(n){this.params=n,this.findClosestPointOnPath=function(D,k){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(n.x1,n.x2),minY:Math.min(n.y1,n.y2),maxX:Math.max(n.x1,n.x2),maxY:Math.max(n.y1,n.y2)}},this.lineIntersection=function(D,k,R,F){return[]},this.boxIntersection=function(D,k,R,F){var N=[];return N.push.apply(N,this.lineIntersection(D,k,D+R,k)),N.push.apply(N,this.lineIntersection(D+R,k,D+R,k+F)),N.push.apply(N,this.lineIntersection(D+R,k+F,D,k+F)),N.push.apply(N,this.lineIntersection(D,k+F,D,k)),N},this.boundingBoxIntersection=function(D){return this.boxIntersection(D.x,D.y,D.w,D.y)}},Straight:function(n){var k,R,F,N,M,r,e;u.Segments.AbstractSegment.apply(this,arguments),this.type="Straight",this.getLength=function(){return k},this.getGradient=function(){return R},this.getCoordinates=function(){return{x1:N,y1:r,x2:M,y2:e}},this.setCoordinates=function(l){N=l.x1,r=l.y1,M=l.x2,e=l.y2,k=Math.sqrt(Math.pow(M-N,2)+Math.pow(e-r,2)),R=ot.gradient({x:N,y:r},{x:M,y:e}),F=-1/R},this.setCoordinates({x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}),this.getBounds=function(){return{minX:Math.min(N,M),minY:Math.min(r,e),maxX:Math.max(N,M),maxY:Math.max(r,e)}},this.pointOnPath=function(l,o){return 0!==l||o?1!==l||o?ot.pointOnLine({x:N,y:r},{x:M,y:e},o?l>0?l:k+l:l*k):{x:M,y:e}:{x:N,y:r}},this.gradientAtPoint=function(l){return R},this.pointAlongPathFrom=function(l,o,b){var C=this.pointOnPath(l,b),v=o<=0?{x:N,y:r}:{x:M,y:e};return o<=0&&Math.abs(o)>1&&(o*=-1),ot.pointOnLine(C,v,o)};var O=function(l,o,b){return b>=Math.min(l,o)&&b<=Math.max(l,o)},U=function(l,o,b){return Math.abs(b-l)<Math.abs(b-o)?l:o};this.findClosestPointOnPath=function(l,o){var b={d:1/0,x:null,y:null,l:null,x1:N,x2:M,y1:r,y2:e};if(0===R)b.y=r,b.x=O(N,M,l)?l:U(N,M,l);else if(R===1/0||R===-1/0)b.x=N,b.y=O(r,e,o)?o:U(r,e,o);else{var C=r-R*N,y=(o-F*l-C)/(R-F),m=R*y+C;b.x=O(N,M,y)?y:U(N,M,y),b.y=O(r,e,m)?m:U(r,e,m)}var S=ot.lineLength([b.x,b.y],[N,r]);return b.d=ot.lineLength([l,o],[b.x,b.y]),b.l=S/k,b};var t=function(l,o,b){return b>o?o<=l&&l<=b:o>=l&&l>=b};this.lineIntersection=function(l,o,b,C){var v=Math.abs(ot.gradient({x:l,y:o},{x:b,y:C})),y=Math.abs(R),m=y===1/0?N:r-y*N,S=[],I=v===1/0?l:o-v*l;if(v!==y)if(v===1/0&&0===y)t(l,N,M)&&t(r,o,C)&&(S=[l,r]);else if(0===v&&y===1/0)t(o,r,e)&&t(N,l,b)&&(S=[N,o]);else{var P,A;v===1/0?t(P=l,N,M)&&t(A=y*l+m,o,C)&&(S=[P,A]):0===v?t(A=o,r,e)&&t(P=(o-m)/y,l,b)&&(S=[P,A]):(A=y*(P=(I-m)/(y-v))+m,t(P,N,M)&&t(A,r,e)&&(S=[P,A]))}return S},this.boxIntersection=function(l,o,b,C){var v=[];return v.push.apply(v,this.lineIntersection(l,o,l+b,o)),v.push.apply(v,this.lineIntersection(l+b,o,l+b,o+C)),v.push.apply(v,this.lineIntersection(l+b,o+C,l,o+C)),v.push.apply(v,this.lineIntersection(l,o+C,l,o)),v},this.boundingBoxIntersection=function(l){return this.boxIntersection(l.x,l.y,l.w,l.h)}},Arc:function(n){u.Segments.AbstractSegment.apply(this,arguments);var k=function(U,L){return ot.theta([n.cx,n.cy],[U,L])},F=2*Math.PI;this.radius=n.r,this.anticlockwise=n.ac,this.type="Arc",n.startAngle&&n.endAngle?(this.startAngle=n.startAngle,this.endAngle=n.endAngle,this.x1=n.cx+this.radius*Math.cos(n.startAngle),this.y1=n.cy+this.radius*Math.sin(n.startAngle),this.x2=n.cx+this.radius*Math.cos(n.endAngle),this.y2=n.cy+this.radius*Math.sin(n.endAngle)):(this.startAngle=k(n.x1,n.y1),this.endAngle=k(n.x2,n.y2),this.x1=n.x1,this.y1=n.y1,this.x2=n.x2,this.y2=n.y2),this.endAngle<0&&(this.endAngle+=F),this.startAngle<0&&(this.startAngle+=F),this.sweep=Math.abs((this.endAngle<this.startAngle?this.endAngle+F:this.endAngle)-this.startAngle),this.anticlockwise&&(this.sweep=F-this.sweep);var M=2*Math.PI*this.radius,e=M*(this.sweep/F);this.getLength=function(){return e},this.getBounds=function(){return{minX:n.cx-n.r,maxX:n.cx+n.r,minY:n.cy-n.r,maxY:n.cy+n.r}};var O=function(U){var L=Math.floor(U),t=Math.ceil(U);return U-L<1e-10?L:t-U<1e-10?t:U};this.pointOnPath=function(U,L){if(0===U)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===U)return{x:this.x2,y:this.y2,theta:this.endAngle};L&&(U/=e);var t=function(U,L){if(U.anticlockwise){var t=U.startAngle<U.endAngle?U.startAngle+F:U.startAngle;return t-Math.abs(t-U.endAngle)*L}var b=Math.abs((U.endAngle<U.startAngle?U.endAngle+F:U.endAngle)-U.startAngle);return U.startAngle+b*L}(this,U),l=n.cx+n.r*Math.cos(t),o=n.cy+n.r*Math.sin(t);return{x:O(l),y:O(o),theta:t}},this.gradientAtPoint=function(U,L){var t=this.pointOnPath(U,L),l=ot.normal([n.cx,n.cy],[t.x,t.y]);return!this.anticlockwise&&(l===1/0||l===-1/0)&&(l*=-1),l},this.pointAlongPathFrom=function(U,L,t){var l=this.pointOnPath(U,t),o=L/M*2*Math.PI,C=l.theta+(this.anticlockwise?-1:1)*o;return{x:n.cx+this.radius*Math.cos(C),y:n.cy+this.radius*Math.sin(C)}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];var k=function(e,T){return Math.sqrt(Math.pow(e.x-T.x,2)+Math.pow(e.y-T.y,2))},R=function(e){var T={x:0,y:0};if(0===e)return this.curve[0];var O=this.curve.length-1;if(1===e)return this.curve[O];var U=this.curve,L=1-e;if(0===O)return this.curve[0];if(1===O)return{x:L*U[0].x+e*U[1].x,y:L*U[0].y+e*U[1].y};if(O<4){var b,C,v,t=L*L,l=e*e,o=0;return 2===O?(U=[U[0],U[1],U[2],T],b=t,C=L*e*2,v=l):3===O&&(b=t*L,C=t*e*3,v=L*l*3,o=e*l),{x:b*U[0].x+C*U[1].x+v*U[2].x+o*U[3].x,y:b*U[0].y+C*U[1].y+v*U[2].y+o*U[3].y}}return T}.bind(this),N=function(){var e;(e=this.curve)[0].x===e[1].x&&e[0].y===e[1].y&&(this.length=0);var T=function(e){var T=[];for(var O=0;O<=15;O++)T.push(R(O/15));return T}();this.length=0;for(var O=0;O<15;O++)this.length+=k(T[O],T[O+1])}.bind(this);u.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier",N();var r=function(e,T,O){return O&&(T=J.jsBezier.locationAlongCurveFrom(e,T>0?0:1,T)),T};this.pointOnPath=function(e,T){return e=r(this.curve,e,T),J.jsBezier.pointOnCurve(this.curve,e)},this.gradientAtPoint=function(e,T){return e=r(this.curve,e,T),J.jsBezier.gradientAtPoint(this.curve,e)},this.pointAlongPathFrom=function(e,T,O){return e=r(this.curve,e,O),J.jsBezier.pointAlongCurveFrom(this.curve,e,T)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(e,T){var O=J.jsBezier.nearestPointOnCurve({x:e,y:T},this.curve);return{d:Math.sqrt(Math.pow(O.point.x-e,2)+Math.pow(O.point.y-T,2)),x:O.point.x,y:O.point.y,l:1-O.location,s:this}},this.lineIntersection=function(e,T,O,U){return J.jsBezier.lineIntersection(e,T,O,U,this.curve)}}},u.SegmentRenderer={getPath:function(n,D){return{Straight:function(k){var R=n.getCoordinates();return(k?"M "+R.x1+" "+R.y1+" ":"")+"L "+R.x2+" "+R.y2},Bezier:function(k){var R=n.params;return(k?"M "+R.x2+" "+R.y2+" ":"")+"C "+R.cp2x+" "+R.cp2y+" "+R.cp1x+" "+R.cp1y+" "+R.x1+" "+R.y1},Arc:function(k){var F=n.sweep>Math.PI?1:0;return(k?"M"+n.x1+" "+n.y1+" ":"")+"A "+n.radius+" "+n.params.r+" 0 "+F+","+(n.anticlockwise?0:1)+" "+n.x2+" "+n.y2}}[n.type](D)}};var Z=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};u.Connectors.AbstractConnector=function(n){Z.apply(this,arguments);var D=[],k=0,R=[],F=[],N=n.stub||0,M=X.isArray(N)?N[0]:N,r=X.isArray(N)?N[1]:N,e=n.gap||0,T=X.isArray(e)?e[0]:e,O=X.isArray(e)?e[1]:e,U=null,L=null;this.getPathData=function(){for(var y="",m=0;m<D.length;m++)y+=u.SegmentRenderer.getPath(D[m],0===m),y+=" ";return y},this.findSegmentForPoint=function(y,m){for(var S={d:1/0,s:null,x:null,y:null,l:null},I=0;I<D.length;I++){var P=D[I].findClosestPointOnPath(y,m);P.d<S.d&&(S.d=P.d,S.l=P.l,S.x=P.x,S.y=P.y,S.s=D[I],S.x1=P.x1,S.x2=P.x2,S.y1=P.y1,S.y2=P.y2,S.index=I,S.connectorLocation=R[I][0]+P.l*(R[I][1]-R[I][0]))}return S},this.lineIntersection=function(y,m,S,I){for(var P=[],A=0;A<D.length;A++)P.push.apply(P,D[A].lineIntersection(y,m,S,I));return P},this.boxIntersection=function(y,m,S,I){for(var P=[],A=0;A<D.length;A++)P.push.apply(P,D[A].boxIntersection(y,m,S,I));return P},this.boundingBoxIntersection=function(y){for(var m=[],S=0;S<D.length;S++)m.push.apply(m,D[S].boundingBoxIntersection(y));return m};var l=function(y,m){var S,I,P;if(m&&(y=y>0?y/k:(k+y)/k),1===y)S=D.length-1,P=1;else if(0===y)P=0,S=0;else if(y>=.5){for(S=0,P=0,I=R.length-1;I>-1;I--)if(R[I][1]>=y&&R[I][0]<=y){S=I,P=(y-R[I][0])/F[I];break}}else for(S=R.length-1,P=1,I=0;I<R.length;I++)if(R[I][1]>=y){S=I,P=(y-R[I][0])/F[I];break}return{segment:D[S],proportion:P,index:S}};this.setSegments=function(y){U=[],k=0;for(var m=0;m<y.length;m++)U.push(y[m]),k+=y[m].getLength()},this.getLength=function(){return k};var C=function(y){this.strokeWidth=y.strokeWidth;var m=ot.quadrant(y.sourcePos,y.targetPos),S=y.targetPos[0]<y.sourcePos[0],I=y.targetPos[1]<y.sourcePos[1],P=y.strokeWidth||1,A=y.sourceEndpoint.anchor.getOrientation(y.sourceEndpoint),G=y.targetEndpoint.anchor.getOrientation(y.targetEndpoint),W=S?y.targetPos[0]:y.sourcePos[0],g=I?y.targetPos[1]:y.sourcePos[1],d=Math.abs(y.targetPos[0]-y.sourcePos[0]),a=Math.abs(y.targetPos[1]-y.sourcePos[1]);if(0===A[0]&&0===A[1]||0===G[0]&&0===G[1]){var s=d>a?0:1,p=[1,0][s];G=[],(A=[])[s]=y.sourcePos[s]>y.targetPos[s]?-1:1,G[s]=y.sourcePos[s]>y.targetPos[s]?1:-1,A[p]=0,G[p]=0}var f=S?d+T*A[0]:T*A[0],w=I?a+T*A[1]:T*A[1],B=S?O*G[0]:d+O*G[0],H=I?O*G[1]:a+O*G[1],V=A[0]*G[0]+A[1]*G[1],Q={sx:f,sy:w,tx:B,ty:H,lw:P,xSpan:Math.abs(B-f),ySpan:Math.abs(H-w),mx:(f+B)/2,my:(w+H)/2,so:A,to:G,x:W,y:g,w:d,h:a,segment:m,startStubX:f+A[0]*M,startStubY:w+A[1]*M,endStubX:B+G[0]*r,endStubY:H+G[1]*r,isXGreaterThanStubTimes2:Math.abs(f-B)>M+r,isYGreaterThanStubTimes2:Math.abs(w-H)>M+r,opposite:-1===V,perpendicular:0===V,orthogonal:1===V,sourceAxis:0===A[0]?"y":"x",points:[W,g,d,a,f,w,B,H],stubs:[M,r]};return Q.anchorOrientation=Q.opposite?"opposite":Q.orthogonal?"orthogonal":"perpendicular",Q};return this.getSegments=function(){return D},this.updateBounds=function(y){var m=y.getBounds();this.bounds.minX=Math.min(this.bounds.minX,m.minX),this.bounds.maxX=Math.max(this.bounds.maxX,m.maxX),this.bounds.minY=Math.min(this.bounds.minY,m.minY),this.bounds.maxY=Math.max(this.bounds.maxY,m.maxY)},this.pointOnPath=function(y,m){var S=l(y,m);return S.segment&&S.segment.pointOnPath(S.proportion,!1)||[0,0]},this.gradientAtPoint=function(y,m){var S=l(y,m);return S.segment&&S.segment.gradientAtPoint(S.proportion,!1)||0},this.pointAlongPathFrom=function(y,m,S){var I=l(y,S);return I.segment&&I.segment.pointAlongPathFrom(I.proportion,m,!1)||[0,0]},this.compute=function(y){L=C.call(this,y),k=D.length=R.length=F.length=0,this._compute(L,y),this.x=L.points[0],this.y=L.points[1],this.w=L.points[2],this.h=L.points[3],this.segment=L.segment,function(){for(var y=0,m=0;m<D.length;m++){var S=D[m].getLength();F[m]=S/k,R[m]=[y,y+=S/k]}}()},{addSegment:function(y,m,S){if(S.x1!==S.x2||S.y1!==S.y2){var I=new u.Segments[m](S);D.push(I),k+=I.getLength(),y.updateBounds(I)}},prepareCompute:C,sourceStub:M,targetStub:r,maxStub:Math.max(M,r),sourceGap:T,targetGap:O,maxGap:Math.max(T,O)}},X.extend(u.Connectors.AbstractConnector,Z),u.Endpoints.AbstractEndpoint=function(n){Z.apply(this,arguments);var D=this.compute=function(k,R,F,N){var M=this._compute.apply(this,arguments);return this.x=M[0],this.y=M[1],this.w=M[2],this.h=M[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,M};return{compute:D,cssClass:n.cssClass}},X.extend(u.Endpoints.AbstractEndpoint,Z),u.Endpoints.Dot=function(n){this.type="Dot",u.Endpoints.AbstractEndpoint.apply(this,arguments),this.radius=(n=n||{}).radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(k,R,F,N){this.radius=F.radius||this.radius;var M=k[0]-this.radius,r=k[1]-this.radius,e=2*this.radius,T=2*this.radius;if(F.stroke){var O=F.strokeWidth||1;M-=O,r-=O,e+=2*O,T+=2*O}return[M,r,e,T,this.radius]}},X.extend(u.Endpoints.Dot,u.Endpoints.AbstractEndpoint),u.Endpoints.Rectangle=function(n){this.type="Rectangle",u.Endpoints.AbstractEndpoint.apply(this,arguments),this.width=(n=n||{}).width||20,this.height=n.height||20,this._compute=function(k,R,F,N){var M=F.width||this.width,r=F.height||this.height;return[k[0]-M/2,k[1]-r/2,M,r]}},X.extend(u.Endpoints.Rectangle,u.Endpoints.AbstractEndpoint);var et=function(n){u.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};X.extend(et,u.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(n){this._jsPlumb.displayElements.push(n)}}),u.Endpoints.Image=function(n){this.type="Image",et.apply(this,arguments),u.Endpoints.AbstractEndpoint.apply(this,arguments);var D=n.onload,k=n.src||n.url,R=n.cssClass?" "+n.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=n.width,this._jsPlumb.heightToUse=n.height,this._jsPlumb.endpoint=n.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,D&&D(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(F,N){D=N,this._jsPlumb.img.src=F.constructor===String?F:F.src,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(k,D),this._compute=function(F,N,M,r){return this.anchorPoint=F,this._jsPlumb.ready?[F[0]-this._jsPlumb.widthToUse/2,F[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=u.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+R),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(F,N,M){this._jsPlumb.deleted||(this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0),X.sizeElement(this.canvas,this.anchorPoint[0]-this._jsPlumb.widthToUse/2,this.anchorPoint[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse))},this.paint=function(F,N){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(F,N):J.setTimeout(function(){this.paint(F,N)}.bind(this),200))}},X.extend(u.Endpoints.Image,[et,u.Endpoints.AbstractEndpoint],{cleanup:function(n){n&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),u.Endpoints.Blank=function(n){u.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",et.apply(this,arguments),this._compute=function(R,F,N,M){return[R[0],R[1],10,0]},this.canvas=u.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+(n.cssClass?" "+n.cssClass:"")),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(R,F){X.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},X.extend(u.Endpoints.Blank,[u.Endpoints.AbstractEndpoint,et],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),u.Endpoints.Triangle=function(n){this.type="Triangle",u.Endpoints.AbstractEndpoint.apply(this,arguments);var D=this;(n=n||{}).width=n.width||55,n.height=n.height||55,this.width=n.width,this.height=n.height,this._compute=function(k,R,F,N){var M=F.width||D.width,r=F.height||D.height;return[k[0]-M/2,k[1]-r/2,M,r]}};var h=u.Overlays.AbstractOverlay=function(n){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=n.component,this.loc=null==n.location?.5:n.location,this.endpointLoc=null==n.endpointLocation?[.5,.5]:n.endpointLocation,this.visible=!1!==n.visible};h.prototype={cleanup:function(n){n&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(n,D){},setVisible:function(n){this.visible=n,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(n){this.loc+=n,this.component.repaint()},setLocation:function(n){this.loc=n,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},u.Overlays.Arrow=function(n){this.type="Arrow",h.apply(this,arguments),this.isAppendedAtTopLevel=!1;var D=this;this.length=(n=n||{}).length||20,this.width=n.width||20,this.id=n.id,this.direction=(n.direction||1)<0?-1:1;var k=n.paintStyle||{"stroke-width":1},R=n.foldback||.623;this.computeMaxSize=function(){return 1.5*D.width},this.elementCreated=function(F,N){if(this.path=F,n.events)for(var M in n.events)u.on(F,M,n.events[M])},this.draw=function(F,N){var M,r,e,T;if(F.pointAlongPathFrom){if(X.isString(this.loc)||this.loc>1||this.loc<0){var U=parseInt(this.loc,10),L=this.loc<0?1:0;M=F.pointAlongPathFrom(L,U,!1),r=F.pointAlongPathFrom(L,U-this.direction*this.length/2,!1),e=ot.pointOnLine(M,r,this.length)}else if(1===this.loc){if(M=F.pointOnPath(this.loc),r=F.pointAlongPathFrom(this.loc,-this.length),e=ot.pointOnLine(M,r,this.length),-1===this.direction){var t=e;e=M,M=t}}else if(0===this.loc){if(e=F.pointOnPath(this.loc),r=F.pointAlongPathFrom(this.loc,this.length),M=ot.pointOnLine(e,r,this.length),-1===this.direction){var l=e;e=M,M=l}}else M=F.pointAlongPathFrom(this.loc,this.direction*this.length/2),r=F.pointOnPath(this.loc),e=ot.pointOnLine(M,r,this.length);return{component:F,d:{hxy:M,tail:T=ot.perpendicularLineTo(M,e,this.width),cxy:ot.pointOnLine(M,e,R*this.length)},"stroke-width":k.strokeWidth||N.strokeWidth,stroke:k.stroke||N.stroke,fill:k.fill||N.stroke,minX:Math.min(M.x,T[0].x,T[1].x),maxX:Math.max(M.x,T[0].x,T[1].x),minY:Math.min(M.y,T[0].y,T[1].y),maxY:Math.max(M.y,T[0].y,T[1].y)}}return{component:F,minX:0,maxX:0,minY:0,maxY:0}}},X.extend(u.Overlays.Arrow,h,{updateFrom:function(n){this.length=n.length||this.length,this.width=n.width||this.width,this.direction=null!=n.direction?n.direction:this.direction,this.foldback=n.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),u.Overlays.PlainArrow=function(n){var D=u.extend(n=n||{},{foldback:1});u.Overlays.Arrow.call(this,D),this.type="PlainArrow"},X.extend(u.Overlays.PlainArrow,u.Overlays.Arrow),u.Overlays.Diamond=function(n){var k=u.extend(n=n||{},{length:(n.length||40)/2,foldback:2});u.Overlays.Arrow.call(this,k),this.type="Diamond"},X.extend(u.Overlays.Diamond,u.Overlays.Arrow);var x=function(n,D){return(null==n._jsPlumb.cachedDimensions||D)&&(n._jsPlumb.cachedDimensions=n.getDimensions()),n._jsPlumb.cachedDimensions},c=function(n){u.jsPlumbUIComponent.apply(this,arguments),h.apply(this,arguments);var D=this.fire;this.fire=function(){D.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=n.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=n.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=n.create,this._jsPlumb.initiallyInvisible=!1===n.visible,this.getElement=function(){if(null==this._jsPlumb.div){var k=this._jsPlumb.div=u.getElement(this._jsPlumb.create(this._jsPlumb.component));k.style.position="absolute",jsPlumb.addClass(k,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:n.cssClass?n.cssClass:"")),this._jsPlumb.instance.appendElement(k),this._jsPlumb.instance.getId(k),this.canvas=k;var R="translate(-50%, -50%)";k.style.webkitTransform=R,k.style.mozTransform=R,k.style.msTransform=R,k.style.oTransform=R,k.style.transform=R,k._jsPlumb=this,!1===n.visible&&(k.style.display="none")}return this._jsPlumb.div},this.draw=function(k,R,F){var N=x(this);if(null!=N&&2===N.length){var M={x:0,y:0};if(F)M={x:F[0],y:F[1]};else if(k.pointOnPath){var r=this.loc,e=!1;(X.isString(this.loc)||this.loc<0||this.loc>1)&&(r=parseInt(this.loc,10),e=!0),M=k.pointOnPath(r,e)}else{var T=this.loc.constructor===Array?this.loc:this.endpointLoc;M={x:T[0]*k.w,y:T[1]*k.h}}var O=M.x-N[0]/2,U=M.y-N[1]/2;return{component:k,d:{minx:O,miny:U,td:N,cxy:M},minX:O,maxX:O+N[0],minY:U,maxY:U+N[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};X.extend(c,[u.jsPlumbUIComponent,h],{getDimensions:function(){return[1,1]},setVisible:function(n){this._jsPlumb.div&&(this._jsPlumb.div.style.display=n?"block":"none",n&&this._jsPlumb.initiallyInvisible&&(x(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(n){n?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(n,D){null!=this._jsPlumb.div&&n.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var n=x(this);return Math.max(n[0],n[1])},paint:function(n,D){this._jsPlumb.initialised||(this.getElement(),n.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=n.component.x+n.d.minx+"px",this._jsPlumb.div.style.top=n.component.y+n.d.miny+"px"}}),u.Overlays.Custom=function(n){this.type="Custom",c.apply(this,arguments)},X.extend(u.Overlays.Custom,c),u.Overlays.GuideLines=function(){var n=this;n.length=50,n.strokeWidth=5,this.type="GuideLines",h.apply(this,arguments),u.jsPlumbUIComponent.apply(this,arguments),this.draw=function(D,k){var R=D.pointAlongPathFrom(n.loc,n.length/2),F=D.pointOnPath(n.loc),N=ot.pointOnLine(R,F,n.length),M=ot.perpendicularLineTo(R,N,40),r=ot.perpendicularLineTo(N,R,20);return{connector:D,head:R,tail:N,headLine:r,tailLine:M,minX:Math.min(R.x,N.x,r[0].x,r[1].x),minY:Math.min(R.y,N.y,r[0].y,r[1].y),maxX:Math.max(R.x,N.x,r[0].x,r[1].x),maxY:Math.max(R.y,N.y,r[0].y,r[1].y)}}},u.Overlays.Label=function(n){this.labelStyle=n.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var N=u.extend({create:function(){return u.createElement("div")}},n);if(u.Overlays.Custom.call(this,N),this.type="Label",this.label=n.label||"",this.labelText=null,this.labelStyle){var M=this.getElement();this.labelStyle.font=this.labelStyle.font||"12px sans-serif",M.style.font=this.labelStyle.font,M.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(M.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0&&(M.style.border=this.labelStyle.borderWidth+"px solid "+(this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black")),this.labelStyle.padding&&(M.style.padding=this.labelStyle.padding)}},X.extend(u.Overlays.Label,u.Overlays.Custom,{cleanup:function(n){n&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(n){this.label=n,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),c.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var n=this.label(this);this.getElement().innerHTML=n.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(n){null!=n.label&&this.setLabel(n.label)}})}.call(typeof window<"u"?window:this),function(){"use strict";var J=this,u=J.jsPlumbUtil,X=J.jsPlumbInstance,ot="jtk-group-collapsed",Z="jtk-group-expanded",x="stop",c="revert",n="_groupManager",D="_jsPlumbGroup",b=function(v){var y={},m={},S={},I=this;function P(a,s){for(var p=v.getContainer();;){if(null==a||a===p)return!1;if(a===s)return!0;a=a.parentNode}}function G(a,s){for(var p=a.getEl().querySelectorAll(".jtk-managed"),f=0;f<p.length;f++)v[s?"show":"hide"](p[f],!0)}v.bind("connection",function(a){var s=v.getGroupFor(a.source),p=v.getGroupFor(a.target);null!=s&&null!=p&&s===p?(m[a.connection.id]=s,S[a.connection.id]=s):(null!=s&&(u.suggest(s.connections.source,a.connection),m[a.connection.id]=s),null!=p&&(u.suggest(p.connections.target,a.connection),S[a.connection.id]=p))}),v.bind("internal.connectionDetached",function(a){!function A(a){delete a.proxies;var p,s=m[a.id];null!=s&&(u.removeWithFunction(s.connections.source,p=function(f){return f.id===a.id}),u.removeWithFunction(s.connections.target,p),delete m[a.id]),null!=(s=S[a.id])&&(u.removeWithFunction(s.connections.source,p=function(f){return f.id===a.id}),u.removeWithFunction(s.connections.target,p),delete S[a.id])}(a.connection)}),v.bind("connectionMoved",function(a){var p=(0===a.index?m:S)[a.connection.id];if(p){var f=p.connections[0===a.index?"source":"target"],w=f.indexOf(a.connection);-1!==w&&f.splice(w,1)}}),this.addGroup=function(a){v.addClass(a.getEl(),Z),y[a.id]=a,a.manager=this,d(a),v.fire("group:add",{group:a})},this.addToGroup=function(a,s,p){if(a=this.getGroup(a)){var f=a.getEl();if(s._isJsPlumbGroup)return;var w=s._jsPlumbGroup;if(w!==a){v.removeFromDragSelection(s);var B=v.getOffset(s,!0),H=v.getOffset(a.collapsed?f:a.getDragArea(),!0);null!=w&&(w.remove(s,!1,p,!1,a),I.updateConnectionsForGroup(w)),a.add(s,p);var V=function(it,ct){var dt=0===ct?1:0;it.each(function(gt){gt.setVisible(!1),gt.endpoints[dt].element._jsPlumbGroup===a?(gt.endpoints[dt].setVisible(!1),g(gt,dt,a)):(gt.endpoints[ct].setVisible(!1),W(gt,ct,a))})};a.collapsed&&(V(v.select({source:s}),0),V(v.select({target:s}),1));var Q=v.getId(s);v.dragManager.setParent(s,Q,f,v.getId(f),B);var tt={left:B.left-H.left,top:B.top-H.top};if(v.setPosition(s,tt),v.dragManager.revalidateParent(s,Q,B),I.updateConnectionsForGroup(a),v.revalidate(Q),!p){var $={group:a,el:s,pos:tt};w&&($.sourceGroup=w),v.fire("group:addMember",$)}}}},this.removeFromGroup=function(a,s,p){if(a=this.getGroup(a)){if(a.collapsed){var f=function(w,B){for(var H=0;H<w.length;H++){var V=w[H];if(V.proxies)for(var Q=0;Q<V.proxies.length;Q++)if(null!=V.proxies[Q]){var tt=V.proxies[Q].originalEp.element;(tt===s||P(tt,s))&&g(V,B,a)}}};f(a.connections.source.slice(),0),f(a.connections.target.slice(),1)}a.remove(s,null,p)}},this.getGroup=function(a){var s=a;if(u.isString(a)&&null==(s=y[a]))throw new TypeError("No such group ["+a+"]");return s},this.getGroups=function(){var a=[];for(var s in y)a.push(y[s]);return a},this.removeGroup=function(a,s,p,f){a=this.getGroup(a),this.expandGroup(a,!0);var w=a[s?"removeAll":"orphanAll"](p,f);return v.remove(a.getEl()),delete y[a.id],delete v._groups[a.id],v.fire("group:remove",{group:a}),w},this.removeAllGroups=function(a,s,p){for(var f in y)this.removeGroup(y[f],a,s,p)};var W=function(a,s,p){var f=a.endpoints[0===s?1:0].element;if(!f[D]||f[D].shouldProxy()||!f[D].collapsed){var w=p.getEl(),B=v.getId(w);v.proxyConnection(a,s,w,B,function(H,V){return p.getEndpoint(H,V)},function(H,V){return p.getAnchor(H,V)})}};this.collapseGroup=function(a){if(null!=(a=this.getGroup(a))&&!a.collapsed){var s=a.getEl();if(G(a,!1),a.shouldProxy()){var p=function(f,w){for(var B=0;B<f.length;B++)W(f[B],w,a)};p(a.connections.source,0),p(a.connections.target,1)}a.collapsed=!0,v.removeClass(s,Z),v.addClass(s,ot),v.revalidate(s),v.fire("group:collapse",{group:a})}};var g=function(a,s,p){v.unproxyConnection(a,s,v.getId(p.getEl()))};function d(a){for(var s=a.getMembers().slice(),p=[],f=0;f<s.length;f++)Array.prototype.push.apply(p,s[f].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(s,p);var w=v.getConnections({source:s,scope:"*"},!0),B=v.getConnections({target:s,scope:"*"},!0),H={};a.connections.source.length=0,a.connections.target.length=0;var V=function(Q){for(var tt=0;tt<Q.length;tt++)if(!H[Q[tt].id]){H[Q[tt].id]=!0;var $=v.getGroupFor(Q[tt].source),it=v.getGroupFor(Q[tt].target);$===a?(it!==a&&a.connections.source.push(Q[tt]),m[Q[tt].id]=a):it===a&&(a.connections.target.push(Q[tt]),S[Q[tt].id]=a)}};V(w),V(B)}this.expandGroup=function(a,s){if(null!=(a=this.getGroup(a))&&a.collapsed){var p=a.getEl();if(G(a,!0),a.shouldProxy()){var f=function(w,B){for(var H=0;H<w.length;H++)g(w[H],B,a)};f(a.connections.source,0),f(a.connections.target,1)}a.collapsed=!1,v.addClass(p,Z),v.removeClass(p,ot),v.revalidate(p),this.repaintGroup(a),s||v.fire("group:expand",{group:a})}},this.repaintGroup=function(a){for(var s=(a=this.getGroup(a)).getMembers(),p=0;p<s.length;p++)v.revalidate(s[p])},this.updateConnectionsForGroup=d,this.refreshAllGroups=function(){for(var a in y)d(y[a]),v.dragManager.updateOffsets(v.getId(y[a].getEl()))}},C=function(v,y){var m=this,S=y.el;this.getEl=function(){return S},this.id=y.id||u.uuid(),S._isJsPlumbGroup=!0;var I=this.getDragArea=function(){var it=v.getSelector(S,"[jtk-group-content]");return it&&it.length>0?it[0]:S},P=!0===y.ghost,A=P||!0===y.constrain,G=!1!==y.revert,W=!0===y.orphan,g=!0===y.prune,d=!0===y.dropOverride,a=!1!==y.proxied,s=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(it,ct){return y.anchor||"Continuous"},this.getEndpoint=function(it,ct){return y.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==y.draggable){var p={drag:function(){for(var it=0;it<s.length;it++)v.draw(s[it])},stop:function(it){v.fire("groupDragStop",jsPlumb.extend(it,{group:m}))},scope:"_jsPlumbGroupDrag"};y.dragOptions&&J.jsPlumb.extend(p,y.dragOptions),v.draggable(y.el,p)}!1!==y.droppable&&v.droppable(y.el,{drop:function(it){var ct=it.drag.el;if(!ct._isJsPlumbGroup){var dt=ct._jsPlumbGroup;if(dt!==m){if(null!=dt&&dt.overrideDrop(ct,m))return;v.getGroupManager().addToGroup(m,ct,!1)}}}});var f=function(it,ct){for(var dt=null==it.nodeType?it:[it],gt=0;gt<dt.length;gt++)ct(dt[gt])};function B(it,ct){var dt=function w(it){return it.offsetParent}(it),gt=v.getSize(dt),Pt=v.getSize(it),pt=ct[0],K=ct[1];return pt+Pt[0]>0&&pt<gt[0]&&K+Pt[1]>0&&K<gt[1]}function H(it){var ct=v.getId(it),dt=v.getOffset(it);return it.parentNode.removeChild(it),v.getContainer().appendChild(it),v.setPosition(it,dt),tt(it),v.dragManager.clearParent(it,ct),[ct,dt]}function V(it){var ct=[];function dt(Pt,pt,yt){var K=null;if(!B(Pt,[pt,yt])){var q=Pt._jsPlumbGroup;g?v.remove(Pt):K=H(Pt),q.remove(Pt)}return K}for(var gt=0;gt<it.selection.length;gt++)ct.push(dt(it.selection[gt][0],it.selection[gt][1].left,it.selection[gt][1].top));return 1===ct.length?ct[0]:ct}function Q(it){var ct=v.getId(it);v.revalidate(it),v.dragManager.revalidateParent(it,ct)}function tt(it){it._katavorioDrag&&((g||W)&&it._katavorioDrag.off(x,V),!g&&!W&&G&&(it._katavorioDrag.off(c,Q),it._katavorioDrag.setRevert(null)))}function $(it){it._katavorioDrag&&((g||W)&&it._katavorioDrag.on(x,V),A&&it._katavorioDrag.setConstrain(!0),P&&it._katavorioDrag.setUseGhostProxy(!0),!g&&!W&&G&&(it._katavorioDrag.on(c,Q),it._katavorioDrag.setRevert(function(ct,dt){return!B(ct,dt)})))}this.overrideDrop=function(it,ct){return d&&(G||g||W)},this.add=function(it,ct){var dt=I();f(it,function(gt){if(null!=gt._jsPlumbGroup){if(gt._jsPlumbGroup===m)return;gt._jsPlumbGroup.remove(gt,!0,ct,!1)}gt._jsPlumbGroup=m,s.push(gt),v.isAlreadyDraggable(gt)&&$(gt),gt.parentNode!==dt&&dt.appendChild(gt)}),v.getGroupManager().updateConnectionsForGroup(m)},this.remove=function(it,ct,dt,gt,Pt){f(it,function(pt){if(pt._jsPlumbGroup===m){if(delete pt._jsPlumbGroup,u.removeWithFunction(s,function(K){return K===pt}),ct)try{m.getDragArea().removeChild(pt)}catch(K){jsPlumbUtil.log("Could not remove element from Group "+K)}if(tt(pt),!dt){var yt={group:m,el:pt};Pt&&(yt.targetGroup=Pt),v.fire("group:removeMember",yt)}}}),gt||v.getGroupManager().updateConnectionsForGroup(m)},this.removeAll=function(it,ct){for(var dt=0,gt=s.length;dt<gt;dt++){var Pt=s[0];m.remove(Pt,it,ct,!0),v.remove(Pt,!0)}s.length=0,v.getGroupManager().updateConnectionsForGroup(m)},this.orphanAll=function(){for(var it={},ct=0;ct<s.length;ct++){var dt=H(s[ct]);it[dt[0]]=dt[1]}return s.length=0,it},this.getMembers=function(){return s},S[D]=this,v.bind("elementDraggable",function(it){it.el._jsPlumbGroup===this&&$(it.el)}.bind(this)),this.shouldProxy=function(){return a},v.getGroupManager().addGroup(this)};X.prototype.addGroup=function(v){var y=this;if(y._groups=y._groups||{},null!=y._groups[v.id])throw new TypeError("cannot create Group ["+v.id+"]; a Group with that ID exists");if(null!=v.el[D])throw new TypeError("cannot create Group ["+v.id+"]; the given element is already a Group");var m=new C(y,v);return y._groups[m.id]=m,v.collapsed&&this.collapseGroup(m),m},X.prototype.addToGroup=function(v,y,m){var S=function(P){var A=this.getId(P);this.manage(A,P),this.getGroupManager().addToGroup(v,P,m)}.bind(this);if(Array.isArray(y))for(var I=0;I<y.length;I++)S(y[I]);else S(y)},X.prototype.removeFromGroup=function(v,y,m){this.getGroupManager().removeFromGroup(v,y,m),this.getContainer().appendChild(y)},X.prototype.removeGroup=function(v,y,m,S){return this.getGroupManager().removeGroup(v,y,m,S)},X.prototype.removeAllGroups=function(v,y,m){this.getGroupManager().removeAllGroups(v,y,m)},X.prototype.getGroup=function(v){return this.getGroupManager().getGroup(v)},X.prototype.getGroups=function(){return this.getGroupManager().getGroups()},X.prototype.expandGroup=function(v){this.getGroupManager().expandGroup(v)},X.prototype.collapseGroup=function(v){this.getGroupManager().collapseGroup(v)},X.prototype.repaintGroup=function(v){this.getGroupManager().repaintGroup(v)},X.prototype.toggleGroup=function(v){null!=(v=this.getGroupManager().getGroup(v))&&this.getGroupManager()[v.collapsed?"expandGroup":"collapseGroup"](v)},X.prototype.getGroupManager=function(){var v=this[n];return null==v&&(v=this[n]=new b(this)),v},X.prototype.removeGroupManager=function(){delete this[n]},X.prototype.getGroupFor=function(v){if(v=this.getElement(v)){for(var y=this.getContainer(),m=!1,S=null;!m;)null==v||v===y?m=!0:v[D]?(S=v[D],m=!0):v=v.parentNode;return S}}}.call(typeof window<"u"?window:this),function(){"use strict";var u=this.jsPlumb,X=this.jsPlumbUtil,ot="Straight";u.Connectors.Flowchart=function(h){this.type="Flowchart",(h=h||{}).stub=null==h.stub?30:h.stub;var x,c=u.Connectors.AbstractConnector.apply(this,arguments),n=null==h.midpoint||isNaN(h.midpoint)?.5:h.midpoint,D=!0===h.alwaysRespectStubs,k=null,R=null,N=null!=h.cornerRadius?h.cornerRadius:0,e=function(l){return l<0?-1:0===l?0:1},T=function(l){return[e(l[2]-l[0]),e(l[3]-l[1])]},O=function(l,o,b,C){if(k!==o||R!==b){var v=k??C.sx,y=R??C.sy;k=o,R=b,l.push([v,y,o,b,v===o?"v":"h"])}},U=function(l){return Math.sqrt(Math.pow(l[0]-l[2],2)+Math.pow(l[1]-l[3],2))},L=function(l){var o=[];return o.push.apply(o,l),o};this.midpoint=n,this._compute=function(l,o){x=[],k=null,R=null;var b=function(){return[l.startStubX,l.startStubY,l.endStubX,l.endStubY]},v={perpendicular:b,orthogonal:b,opposite:function(p){var f=l,w="x"===p?0:1;return!D&&{x:function(){return 1===f.so[w]&&(f.startStubX>f.endStubX&&f.tx>f.startStubX||f.sx>f.endStubX&&f.tx>f.sx)||-1===f.so[w]&&(f.startStubX<f.endStubX&&f.tx<f.startStubX||f.sx<f.endStubX&&f.tx<f.sx)},y:function(){return 1===f.so[w]&&(f.startStubY>f.endStubY&&f.ty>f.startStubY||f.sy>f.endStubY&&f.ty>f.sy)||-1===f.so[w]&&(f.startStubY<f.endStubY&&f.ty<f.startStubY||f.sy<f.endStubY&&f.ty<f.sy)}}[p]()?{x:[(l.sx+l.tx)/2,l.startStubY,(l.sx+l.tx)/2,l.endStubY],y:[l.startStubX,(l.sy+l.ty)/2,l.endStubX,(l.sy+l.ty)/2]}[p]:[l.startStubX,l.startStubY,l.endStubX,l.endStubY]}}[l.anchorOrientation](l.sourceAxis),y="x"===l.sourceAxis?0:1,m="x"===l.sourceAxis?1:0,S=v[y],I=v[m],P=v[y+2],A=v[m+2];O(x,v[0],v[1],l);var G=l.startStubX+(l.endStubX-l.startStubX)*n,W=l.startStubY+(l.endStubY-l.startStubY)*n,g={x:[0,1],y:[1,0]},a={perpendicular:function(p){var B={x:[[l.startStubX,l.endStubX],null,[l.endStubX,l.startStubX]],y:[[l.startStubY,l.endStubY],null,[l.endStubY,l.startStubY]]},$={x:[l.startStubY,l.endStubY],y:[l.startStubX,l.endStubX]},ct=g[p][1],dt=l.so[g[p][0]]+1,Pt=-1===l.to[ct]&&$[p][1]<$[p][0]||1===l.to[ct]&&$[p][1]>$[p][0],pt=B[p][dt][0],yt=B[p][dt][1],K={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[p][dt][l.to[ct]+1];return l.segment===K[3]||l.segment===K[2]&&Pt?{x:[[G,l.startStubY],[G,l.endStubY]],y:[[l.startStubX,W],[l.endStubX,W]]}[p]:l.segment===K[2]&&yt<pt?{x:[[l.endStubX,l.startStubY]],y:[[l.startStubX,l.endStubY]]}[p]:l.segment===K[2]&&yt>=pt||l.segment===K[1]&&!Pt?{x:[[l.startStubX,W],[l.endStubX,W],[l.endStubX,l.endStubY]],y:[[G,l.startStubY],[G,l.endStubY],[l.endStubX,l.endStubY]]}[p]:l.segment===K[0]||l.segment===K[1]&&Pt?{x:[[l.startStubX,l.endStubY],[l.endStubX,l.endStubY]],y:[[l.endStubX,l.startStubY],[l.endStubX,l.endStubY]]}[p]:void 0},orthogonal:function(p,f,w,B,H){var V=l,Q={x:-1===V.so[0]?Math.min(f,B):Math.max(f,B),y:-1===V.so[1]?Math.min(f,B):Math.max(f,B)}[p];return{x:[[Q,w],[Q,H],[B,H]],y:[[w,Q],[H,Q],[H,B]]}[p]},opposite:function(p,f,w,B){var H=l,V={x:"y",y:"x"}[p],Q={x:"height",y:"width"}[p],tt=H["is"+p.toUpperCase()+"GreaterThanStubTimes2"];if(o.sourceEndpoint.elementId===o.targetEndpoint.elementId){var $=w+(1-o.sourceEndpoint.anchor[V])*o.sourceInfo[Q]+c.maxStub;return{x:[[f,$],[B,$]],y:[[$,f],[$,B]]}[p]}return!tt||1===H.so[y]&&f>B||-1===H.so[y]&&f<B?{x:[[f,W],[B,W]],y:[[G,f],[G,B]]}[p]:1===H.so[y]&&f<B||-1===H.so[y]&&f>B?{x:[[G,H.sy],[G,H.ty]],y:[[H.sx,W],[H.tx,W]]}[p]:void 0}}[l.anchorOrientation](l.sourceAxis,S,I,P,A);if(a)for(var s=0;s<a.length;s++)O(x,a[s][0],a[s][1],l);O(x,v[2],v[3],l),O(x,l.tx,l.ty,l),function(l,o,b){for(var v,y,m,C=null,S=0;S<o.length-1;S++){if(C=C||L(o[S]),v=L(o[S+1]),y=T(C),m=T(v),N>0&&C[4]!==v[4]){var I=Math.min(U(C),U(v)),P=Math.min(N,I/2);C[2]-=y[0]*P,C[3]-=y[1]*P,v[0]+=m[0]*P,v[1]+=m[1]*P;var A=y[1]===m[0]&&1===m[0]||y[1]===m[0]&&0===m[0]&&y[0]!==m[1]||y[1]===m[0]&&-1===m[0],g=(v[1]>C[3]?1:-1)==(v[0]>C[2]?1:-1),d=g&&A||!g&&!A?v[0]:C[2],a=g&&A||!g&&!A?C[3]:v[1];c.addSegment(l,ot,{x1:C[0],y1:C[1],x2:C[2],y2:C[3]}),c.addSegment(l,"Arc",{r:P,x1:C[2],y1:C[3],x2:v[0],y2:v[1],cx:d,cy:a,ac:A})}else{var s=C[2]===C[0]?0:C[2]>C[0]?b.lw/2:-b.lw/2,p=C[3]===C[1]?0:C[3]>C[1]?b.lw/2:-b.lw/2;c.addSegment(l,ot,{x1:C[0]-s,y1:C[1]-p,x2:C[2]+s,y2:C[3]+p})}C=v}null!=v&&c.addSegment(l,ot,{x1:v[0],y1:v[1],x2:v[2],y2:v[3]})}(this,x,l)}},X.extend(u.Connectors.Flowchart,u.Connectors.AbstractConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var u=this.jsPlumb,X=this.jsPlumbUtil;u.Connectors.AbstractBezierConnector=function(Z){var R,et=!1!==(Z=Z||{}).showLoopback,x=Z.margin||5,n=Z.orientation&&"clockwise"===Z.orientation,D=Z.loopbackRadius||25;return this._compute=function(F,N){var M=N.sourcePos,r=N.targetPos,e=Math.abs(M[0]-r[0]),T=Math.abs(M[1]-r[1]);if(et&&N.sourceEndpoint.elementId===N.targetEndpoint.elementId){var O=N.sourcePos[0],U=N.sourcePos[1]-x,L=O,t=U-D,l=L-D,o=t-D;e=2*D,T=2*D,F.points[0]=l,F.points[1]=o,F.points[2]=e,F.points[3]=T,R.addSegment(this,"Arc",{loopback:!0,x1:O-l+4,y1:U-o,startAngle:0,endAngle:2*Math.PI,r:D,ac:!n,x2:O-l-4,y2:U-o,cx:L-l,cy:t-o})}else this._computeBezier(F,N,M,r,e,T)},R=u.Connectors.AbstractConnector.apply(this,arguments)},X.extend(u.Connectors.AbstractBezierConnector,u.Connectors.AbstractConnector);var ot=function(Z){Z=Z||{},this.type="Bezier";var et=u.Connectors.AbstractBezierConnector.apply(this,arguments),h=Z.curviness||150,x=10;this.getCurviness=function(){return h},this._findControlPoint=function(c,n,D,k,R,F,N){var r=[];return F[0]!==N[0]||F[1]===N[1]?(r.push(0===N[0]?D[0]<n[0]?c[0]+x:c[0]-x:c[0]+h*N[0]),r.push(0===N[1]?D[1]<n[1]?c[1]+x:c[1]-x:c[1]+h*F[1])):(r.push(0===F[0]?n[0]<D[0]?c[0]+x:c[0]-x:c[0]-h*F[0]),r.push(0===F[1]?n[1]<D[1]?c[1]+x:c[1]-x:c[1]+h*N[1])),r},this._computeBezier=function(c,n,D,k,R,F){var N,M,r=D[0]<k[0]?R:0,e=D[1]<k[1]?F:0,T=D[0]<k[0]?0:R,O=D[1]<k[1]?0:F;N=this._findControlPoint([r,e],D,k,n.sourceEndpoint,n.targetEndpoint,c.so,c.to),M=this._findControlPoint([T,O],k,D,n.targetEndpoint,n.sourceEndpoint,c.to,c.so),et.addSegment(this,"Bezier",{x1:r,y1:e,x2:T,y2:O,cp1x:N[0],cp1y:N[1],cp2x:M[0],cp2y:M[1]})}};u.Connectors.Bezier=ot,X.extend(ot,u.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var u=this.jsPlumb,X=this.jsPlumbUtil,et=function(h){h=h||{},this.type="StateMachine";var R,x=u.Connectors.AbstractBezierConnector.apply(this,arguments),c=h.curviness||10,n=h.margin||5,D=h.proximityLimit||80;this._computeBezier=function(F,N,M,r,e,T){var O=N.sourcePos[0]<N.targetPos[0]?0:e,U=N.sourcePos[1]<N.targetPos[1]?0:T,L=N.sourcePos[0]<N.targetPos[0]?e:0,t=N.sourcePos[1]<N.targetPos[1]?T:0;0===N.sourcePos[2]&&(O-=n),1===N.sourcePos[2]&&(O+=n),0===N.sourcePos[3]&&(U-=n),1===N.sourcePos[3]&&(U+=n),0===N.targetPos[2]&&(L-=n),1===N.targetPos[2]&&(L+=n),0===N.targetPos[3]&&(t-=n),1===N.targetPos[3]&&(t+=n);var l=(O+L)/2,o=(U+t)/2,b=function(h,x,c,n){return h<=c&&n<=x?1:h<=c&&x<=n?2:c<=h&&n>=x?3:4}(O,U,L,t),C=Math.sqrt(Math.pow(L-O,2)+Math.pow(t-U,2));R=function(h,x,c,n,D,k,R,F,N){return F<=N?[h,x]:1===c?n[3]<=0&&D[3]>=1?[h+(n[2]<.5?-1*k:k),x]:n[2]>=1&&D[2]<=0?[h,x+(n[3]<.5?-1*R:R)]:[h+-1*k,x+-1*R]:2===c?n[3]>=1&&D[3]<=0?[h+(n[2]<.5?-1*k:k),x]:n[2]>=1&&D[2]<=0?[h,x+(n[3]<.5?-1*R:R)]:[h+k,x+-1*R]:3===c?n[3]>=1&&D[3]<=0?[h+(n[2]<.5?-1*k:k),x]:n[2]<=0&&D[2]>=1?[h,x+(n[3]<.5?-1*R:R)]:[h+-1*k,x+-1*R]:4===c?n[3]<=0&&D[3]>=1?[h+(n[2]<.5?-1*k:k),x]:n[2]<=0&&D[2]>=1?[h,x+(n[3]<.5?-1*R:R)]:[h+k,x+-1*R]:void 0}(l,o,b,N.sourcePos,N.targetPos,c,c,C,D),x.addSegment(this,"Bezier",{x1:L,y1:t,x2:O,y2:U,cp1x:R[0],cp1y:R[1],cp2x:R[0],cp2y:R[1]})}};u.Connectors.StateMachine=et,X.extend(et,u.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var u=this.jsPlumb,X=this.jsPlumbUtil,ot="Straight",Z=function(et){this.type=ot;var h=u.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(x,c){h.addSegment(this,ot,{x1:x.sx,y1:x.sy,x2:x.startStubX,y2:x.startStubY}),h.addSegment(this,ot,{x1:x.startStubX,y1:x.startStubY,x2:x.endStubX,y2:x.endStubY}),h.addSegment(this,ot,{x1:x.endStubX,y1:x.endStubY,x2:x.tx,y2:x.ty})}};u.Connectors.Straight=Z,X.extend(Z,u.Connectors.AbstractConnector)}.call(typeof window<"u"?window:this),function(){"use strict";var u=this.jsPlumb,X=this.jsPlumbUtil,ot={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Z="stroke-dasharray",et="dashstyle",n="fill",k="stroke",N="none",e_svg="http://www.w3.org/2000/svg",T=function(m,S){for(var I in S)m.setAttribute(I,""+S[I])},O=function(m,S){return(S=S||{}).version="1.1",S.xmlns=e_svg,u.createElementNS(e_svg,m,null,null,S)},U=function(m){return"position:absolute;left:"+m[0]+"px;top:"+m[1]+"px"},L=function(m){for(var S=m.querySelectorAll(" defs,linearGradient,radialGradient"),I=0;I<S.length;I++)S[I].parentNode.removeChild(S[I])},l=function(m,S,I,P,A){if(S.setAttribute(n,I.fill?I.fill:N),S.setAttribute(k,I.stroke?I.stroke:N),I.gradient?function(m,S,I,P,A){var W,G="jsplumb_gradient_"+A._jsPlumb.instance.idstamp();L(m),W=I.gradient.offset?O("radialGradient",{id:G}):O("linearGradient",{id:G,gradientUnits:"userSpaceOnUse"});var g=O("defs");m.appendChild(g),g.appendChild(W);for(var d=0;d<I.gradient.stops.length;d++){var s=I.gradient.stops[1===A.segment||2===A.segment?d:I.gradient.stops.length-1-d][1],p=O("stop",{offset:Math.floor(100*I.gradient.stops[d][0])+"%","stop-color":s});W.appendChild(p)}S.setAttribute(I.stroke?k:n,"url(#"+G+")")}(m,S,I,0,A):(L(m),S.setAttribute("style","")),I.strokeWidth&&S.setAttribute("stroke-width",I.strokeWidth),I[et]&&I.strokeWidth&&!I[Z]){var G=-1===I[et].indexOf(",")?" ":",",W=I[et].split(G),g="";W.forEach(function(a){g+=Math.floor(a*I.strokeWidth)+G}),S.setAttribute(Z,g)}else I[Z]&&S.setAttribute(Z,I[Z]);for(var d in ot)I[d]&&S.setAttribute(ot[d],I[d])},o=function(m,S,I){m.childNodes.length>I?m.insertBefore(S,m.childNodes[I]):m.appendChild(S)};X.svg={node:O,attr:T,pos:U};var b=function(m){var S=m.pointerEventsSpec||"all",I={};u.jsPlumbUIComponent.apply(this,m.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var P=m.cssClass+" "+(m.originalArgs[0].cssClass||"");this.svg=O("svg",{style:"",width:0,height:0,"pointer-events":S,position:"absolute"}),m.useDivWrapper?(this.canvas=u.createElement("div",{position:"absolute"}),X.sizeElement(this.canvas,0,0,1,1),this.canvas.className=P):(T(this.svg,{class:P}),this.canvas=this.svg),m._jsPlumb.appendElement(this.canvas,m.originalArgs[0].parent),m.useDivWrapper&&this.canvas.appendChild(this.svg);var G=[this.canvas];return this.getDisplayElements=function(){return G},this.appendDisplayElement=function(W){G.push(W)},this.paint=function(W,g,d){if(null!=W){var p,a=[this.x,this.y],s=[this.w,this.h];null!=d&&(d.xmin<0&&(a[0]+=d.xmin),d.ymin<0&&(a[1]+=d.ymin),s[0]=d.xmax+(d.xmin<0?-d.xmin:0),s[1]=d.ymax+(d.ymin<0?-d.ymin:0)),m.useDivWrapper?(X.sizeElement(this.canvas,a[0],a[1],s[0]>0?s[0]:1,s[1]>0?s[1]:1),a[0]=0,a[1]=0,p=U([0,0])):p=U([a[0],a[1]]),I.paint.apply(this,arguments),T(this.svg,{style:p,width:s[0]||1,height:s[1]||1})}},{renderer:I}};X.extend(b,u.jsPlumbUIComponent,{cleanup:function(m){m||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(m){var S=m.getContainer();this.canvas&&null==this.canvas.parentNode&&S.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&S.appendChild(this.bgCanvas)},setVisible:function(m){this.canvas&&(this.canvas.style.display=m?"block":"none")}}),u.ConnectorRenderers.svg=function(m){var S=this;b.apply(this,[{cssClass:m._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:m._jsPlumb}]).renderer.paint=function(P,A,G){var W=S.getSegments(),d=[0,0];if(G.xmin<0&&(d[0]=-G.xmin),G.ymin<0&&(d[1]=-G.ymin),W.length>0){var a={d:S.getPathData(),transform:"translate("+d[0]+","+d[1]+")","pointer-events":m["pointer-events"]||"visibleStroke"},s=null;if(P.outlineStroke){var w=P.strokeWidth+2*(P.outlineWidth||1);delete(s=u.extend({},P)).gradient,s.stroke=P.outlineStroke,s.strokeWidth=w,null==S.bgPath?(S.bgPath=O("path",a),u.addClass(S.bgPath,u.connectorOutlineClass),o(S.svg,S.bgPath,0)):T(S.bgPath,a),l(S.svg,S.bgPath,s,0,S)}null==S.path?(S.path=O("path",a),o(S.svg,S.path,P.outlineStroke?1:0)):T(S.path,a),l(S.svg,S.path,P,0,S)}}},X.extend(u.ConnectorRenderers.svg,b);var C=u.SvgEndpoint=function(m){b.apply(this,[{cssClass:m._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:m._jsPlumb}]).renderer.paint=function(I){var P=u.extend({},I);P.outlineStroke&&(P.stroke=P.outlineStroke),null==this.node?(this.node=this.makeNode(P),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),l(this.svg,this.node,P,0,this),U(this.node)}.bind(this)};X.extend(C,b),u.Endpoints.svg.Dot=function(){u.Endpoints.Dot.apply(this,arguments),C.apply(this,arguments),this.makeNode=function(m){return O("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(m){T(m,{cx:this.w/2,cy:this.h/2,r:this.radius})}},X.extend(u.Endpoints.svg.Dot,[u.Endpoints.Dot,C]),u.Endpoints.svg.Rectangle=function(){u.Endpoints.Rectangle.apply(this,arguments),C.apply(this,arguments),this.makeNode=function(m){return O("rect",{width:this.w,height:this.h})},this.updateNode=function(m){T(m,{width:this.w,height:this.h})}},X.extend(u.Endpoints.svg.Rectangle,[u.Endpoints.Rectangle,C]),u.Endpoints.svg.Image=u.Endpoints.Image,u.Endpoints.svg.Blank=u.Endpoints.Blank,u.Overlays.svg.Label=u.Overlays.Label,u.Overlays.svg.Custom=u.Overlays.Custom;var v=function(m,S){m.apply(this,S),u.jsPlumbUIComponent.apply(this,S),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(A,G){if(A.component.svg&&G){null==this.path&&(this.path=O("path",{"pointer-events":"all"}),A.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,A.component),this.canvas=A.component.svg);var W=S&&1===S.length&&S[0].cssClass||"",g=[0,0];G.xmin<0&&(g[0]=-G.xmin),G.ymin<0&&(g[1]=-G.ymin),T(this.path,{d:P(A.d),class:W,stroke:A.stroke?A.stroke:null,fill:A.fill?A.fill:null,transform:"translate("+g[0]+","+g[1]+")"})}};var P=function(A){return isNaN(A.cxy.x)||isNaN(A.cxy.y)?"":"M"+A.hxy.x+","+A.hxy.y+" L"+A.tail[0].x+","+A.tail[0].y+" L"+A.cxy.x+","+A.cxy.y+" L"+A.tail[1].x+","+A.tail[1].y+" L"+A.hxy.x+","+A.hxy.y};this.transfer=function(A){A.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),A.canvas.appendChild(this.path))}},y={cleanup:function(m){null!=this.path&&(m?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(m,S){this.path&&S.canvas&&S.canvas.appendChild(this.path)},setVisible:function(m){null!=this.path&&(this.path.style.display=m?"block":"none")}};X.extend(v,[u.jsPlumbUIComponent,u.Overlays.AbstractOverlay]),u.Overlays.svg.Arrow=function(){v.apply(this,[u.Overlays.Arrow,arguments])},X.extend(u.Overlays.svg.Arrow,[u.Overlays.Arrow,v],y),u.Overlays.svg.PlainArrow=function(){v.apply(this,[u.Overlays.PlainArrow,arguments])},X.extend(u.Overlays.svg.PlainArrow,[u.Overlays.PlainArrow,v],y),u.Overlays.svg.Diamond=function(){v.apply(this,[u.Overlays.Diamond,arguments])},X.extend(u.Overlays.svg.Diamond,[u.Overlays.Diamond,v],y),u.Overlays.svg.GuideLines=function(){var I,P,m=null,S=this;u.Overlays.GuideLines.apply(this,arguments),this.paint=function(G,W){null==m&&(m=O("path"),G.connector.svg.appendChild(m),S.attachListeners(m,G.connector),S.attachListeners(m,S),I=O("path"),G.connector.svg.appendChild(I),S.attachListeners(I,G.connector),S.attachListeners(I,S),P=O("path"),G.connector.svg.appendChild(P),S.attachListeners(P,G.connector),S.attachListeners(P,S));var g=[0,0];W.xmin<0&&(g[0]=-W.xmin),W.ymin<0&&(g[1]=-W.ymin),T(m,{d:A(G.head,G.tail),stroke:"red",fill:null,transform:"translate("+g[0]+","+g[1]+")"}),T(I,{d:A(G.tailLine[0],G.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+g[0]+","+g[1]+")"}),T(P,{d:A(G.headLine[0],G.headLine[1]),stroke:"green",fill:null,transform:"translate("+g[0]+","+g[1]+")"})};var A=function(G,W){return"M "+G.x+","+G.y+" L"+W.x+","+W.y}},X.extend(u.Overlays.svg.GuideLines,u.Overlays.GuideLines)}.call(typeof window<"u"?window:this),function(){"use strict";var t,l,J=this,u=J.jsPlumb,X=J.jsPlumbUtil,ot=J.Katavorio,Z=J.Biltong,h=function(t,l){var o="_katavorio_"+(l=l||"main"),b=t[o],C=t.getEventManager();return b||((b=new ot({bind:C.on,unbind:C.off,getSize:u.getSize,getConstrainingRectangle:function(v){return[v.parentNode.scrollWidth,v.parentNode.scrollHeight]},getPosition:function(v,y){var m=t.getOffset(v,y,v._katavorioDrag?v.offsetParent:null);return[m.left,m.top]},setPosition:function(v,y){v.style.left=y[0]+"px",v.style.top=y[1]+"px"},addClass:u.addClass,removeClass:u.removeClass,intersects:Z.intersects,indexOf:function(v,y){return v.indexOf(y)},scope:t.getDefaultScope(),css:{noSelect:t.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}})).setZoom(t.getZoom()),t[o]=b,t.bind("zoom",b.setZoom)),b},x=function(t){var l=t.el._jsPlumbDragOptions,o=!0;return l.canDrag&&(o=l.canDrag()),o&&(this.setHoverSuspended(!0),this.select({source:t.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:t.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),o},c=function(t){var l=this.getUIPosition(arguments,this.getZoom());if(null!=l){var o=t.el._jsPlumbDragOptions;this.draw(t.el,l,null,!0),o._dragging&&this.addClass(t.el,"jtk-dragged"),o._dragging=!0}},n=function(t){for(var o,l=t.selection,b=function(v){var y;null!=v[1]&&(o=this.getUIPosition([{el:v[2].el,pos:[v[1].left,v[1].top]}]),y=this.draw(v[2].el,o)),null!=v[0]._jsPlumbDragOptions&&delete v[0]._jsPlumbDragOptions._dragging,this.removeClass(v[0],"jtk-dragged"),this.select({source:v[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:v[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),t.e._drawResult=t.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(t.e._drawResult.c,y.c),Array.prototype.push.apply(t.e._drawResult.e,y.e),Array.prototype.push.apply(t.e._drawResult.a,y.a),this.getDragManager().dragEnded(v[2].el)}.bind(this),C=0;C<l.length;C++)b(l[C]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},k=function(t,l){if(null==l)return[0,0];var o=r(l),b=M(o,0);return[b[t+"X"],b[t+"Y"]]},R=k.bind(this,"page"),F=k.bind(this,"screen"),N=k.bind(this,"client"),M=function(t,l){return t.item?t.item(l):t[l]},r=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},e=function(t){var l={},o=[],b={},C={},v={};this.register=function(y){var S,m=t.getId(y);l[m]||(l[m]=y,o.push(y),b[m]={});var I=function(P){if(P)for(var A=0;A<P.childNodes.length;A++)if(3!==P.childNodes[A].nodeType&&8!==P.childNodes[A].nodeType){var G=jsPlumb.getElement(P.childNodes[A]),W=t.getId(P.childNodes[A],null,!0);if(W&&C[W]&&C[W]>0){S||(S=t.getOffset(y));var g=t.getOffset(G);b[m][W]={id:W,offset:{left:g.left-S.left,top:g.top-S.top}},v[W]=m}I(P.childNodes[A])}};I(y)},this.updateOffsets=function(y,m){if(null!=y){m=m||{};var A,S=jsPlumb.getElement(y),I=t.getId(S),P=b[I];if(P)for(var G in P)if(P.hasOwnProperty(G)){var W=jsPlumb.getElement(G),g=m[G]||t.getOffset(W);if(null==W.offsetParent&&null!=b[I][G])continue;A||(A=t.getOffset(S)),b[I][G]={id:G,offset:{left:g.left-A.left,top:g.top-A.top}},v[G]=I}}},this.endpointAdded=function(y,m){m=m||t.getId(y);var S=document.body,I=y.parentNode;for(C[m]=C[m]?C[m]+1:1;null!=I&&I!==S;){var P=t.getId(I,null,!0);if(P&&l[P]){var A=t.getOffset(I);if(null==b[P][m]){var G=t.getOffset(y);b[P][m]={id:m,offset:{left:G.left-A.left,top:G.top-A.top}},v[m]=P}break}I=I.parentNode}},this.endpointDeleted=function(y){if(C[y.elementId]&&(C[y.elementId]--,C[y.elementId]<=0))for(var m in b)b.hasOwnProperty(m)&&b[m]&&(delete b[m][y.elementId],delete v[y.elementId])},this.changeId=function(y,m){b[m]=b[y],b[y]={},v[m]=v[y],v[y]=null},this.getElementsForDraggable=function(y){return b[y]},this.elementRemoved=function(y){var m=v[y];m&&(b[m]&&delete b[m][y],delete v[y])},this.reset=function(){l={},o=[],b={},C={}},this.dragEnded=function(y){if(null!=y.offsetParent){var m=t.getId(y),S=v[m];S&&this.updateOffsets(S)}},this.setParent=function(y,m,S,I,P){var A=v[m];b[I]||(b[I]={});var G=t.getOffset(S),W=P||t.getOffset(y);A&&b[A]&&delete b[A][m],b[I][m]={id:m,offset:{left:W.left-G.left,top:W.top-G.top}},v[m]=I},this.clearParent=function(y,m){var S=v[m];S&&(delete b[S][m],delete v[m])},this.revalidateParent=function(y,m,S){var I=v[m];if(I){var P={};P[m]=S,this.updateOffsets(I,P),t.revalidate(I)}},this.getDragAncestor=function(y){var m=jsPlumb.getElement(y),S=t.getId(m),I=v[S];return I?jsPlumb.getElement(I):null}},T=function(t,l,o){l=X.fastTrim(l),typeof t.className.baseVal<"u"?t.className.baseVal=l:t.className=l;try{var b=t.classList;if(null!=b){for(;b.length>0;)b.remove(b.item(0));for(var C=0;C<o.length;C++)o[C]&&b.add(o[C])}}catch(v){X.log("JSPLUMB: cannot set class list",v)}},O=function(t){return typeof t.className.baseVal>"u"?t.className:t.className.baseVal},U=function(t,l,o){l=null==l?[]:X.isArray(l)?l:l.split(/\s+/),o=null==o?[]:X.isArray(o)?o:o.split(/\s+/);var C=O(t).split(/\s+/),v=function(y,m){for(var S=0;S<m.length;S++)if(y)-1===C.indexOf(m[S])&&C.push(m[S]);else{var I=C.indexOf(m[S]);-1!==I&&C.splice(I,1)}};v(!0,l),v(!1,o),T(t,C.join(" "),C)};J.jsPlumb.extend(J.jsPlumbInstance.prototype,{headless:!1,pageLocation:R,screenLocation:F,clientLocation:N,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new e(this)),this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,l,o,b){return this.createElementNS(null,t,l,o,b)},createElementNS:function(t,l,o,b,C){var y,v=null==t?document.createElement(l):document.createElementNS(t,l);for(y in o=o||{})v.style[y]=o[y];for(y in b&&(v.className=b),C=C||{})v.setAttribute(y,""+C[y]);return v},getAttribute:function(t,l){return null!=t.getAttribute?t.getAttribute(l):null},setAttribute:function(t,l,o){null!=t.setAttribute&&t.setAttribute(l,o)},setAttributes:function(t,l){for(var o in l)l.hasOwnProperty(o)&&t.setAttribute(o,l[o])},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg"]},getClass:O,addClass:function(t,l){jsPlumb.each(t,function(o){U(o,l)})},hasClass:function(t,l){return(t=jsPlumb.getElement(t)).classList?t.classList.contains(l):-1!==O(t).indexOf(l)},removeClass:function(t,l){jsPlumb.each(t,function(o){U(o,null,l)})},toggleClass:function(t,l){jsPlumb.hasClass(t,l)?jsPlumb.removeClass(t,l):jsPlumb.addClass(t,l)},updateClasses:function(t,l,o){jsPlumb.each(t,function(b){U(b,l,o)})},setClass:function(t,l){null!=l&&jsPlumb.each(t,function(o){T(o,l,l.split(/\s+/))})},setPosition:function(t,l){t.style.left=l.left+"px",t.style.top=l.top+"px"},getPosition:function(t){var l=function(o){var b=t.style[o];return b?b.substring(0,b.length-2):0};return{left:l("left"),top:l("top")}},getStyle:function(t,l){return typeof window.getComputedStyle<"u"?getComputedStyle(t,null).getPropertyValue(l):t.currentStyle[l]},getSelector:function(t,l){return 1===arguments.length?null!=t.nodeType?t:document.querySelectorAll(t):t.querySelectorAll(l)},getOffset:function(t,l,o){t=jsPlumb.getElement(t),o=o||this.getContainer();for(var b={left:t.offsetLeft,top:t.offsetTop},C=l||null!=o&&t!==o&&t.offsetParent!==o?t.offsetParent:null,v=function(S){null!=S&&S!==document.body&&(S.scrollTop>0||S.scrollLeft>0)&&(b.left-=S.scrollLeft,b.top-=S.scrollTop)}.bind(this);null!=C;)b.left+=C.offsetLeft,b.top+=C.offsetTop,v(C),C=l?C.offsetParent:C.offsetParent===o?null:C.offsetParent;if(null!=o&&!l&&(o.scrollTop>0||o.scrollLeft>0)){var y=null!=t.offsetParent?this.getStyle(t.offsetParent,"position"):"static",m=this.getStyle(t,"position");"absolute"!==m&&"fixed"!==m&&"absolute"!==y&&"fixed"!==y&&(b.left-=o.scrollLeft,b.top-=o.scrollTop)}return b},getPositionOnElement:function(t,l,o){var b=typeof l.getBoundingClientRect<"u"?l.getBoundingClientRect():{left:0,top:0,width:0,height:0},C=document.body,v=document.documentElement,y=window.pageYOffset||v.scrollTop||C.scrollTop,m=window.pageXOffset||v.scrollLeft||C.scrollLeft,G=b.top+y-(v.clientTop||C.clientTop||0)+0*o,W=b.left+m-(v.clientLeft||C.clientLeft||0)+0*o,g=jsPlumb.pageLocation(t);return[(g[0]-W)/(b.width||l.offsetWidth*o),(g[1]-G)/(b.height||l.offsetHeight*o)]},getAbsolutePosition:function(t){var l=function(o){var b=t.style[o];if(b)return parseFloat(b.substring(0,b.length-2))};return[l("left"),l("top")]},setAbsolutePosition:function(t,l,o,b){o?this.animate(t,{left:"+="+(l[0]-o[0]),top:"+="+(l[1]-o[1])},b):(t.style.left=l[0]+"px",t.style.top=l[1]+"px")},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(t,l){var o;return t=X.isArray(t)||null!=t.length&&!X.isString(t)?t:[t],Array.prototype.slice.call(t).forEach(function(b){(o=this.info(b)).el&&this._initDraggableIfNecessary(o.el,!0,l,o.id,!0)}.bind(this)),this},snapToGrid:function(t,l,o){var b=[],C=function(m){var S=this.info(m);if(null!=S.el&&S.el._katavorioDrag){var I=S.el._katavorioDrag.snap(l,o);this.revalidate(S.el),b.push([S.el,I])}}.bind(this);if(1===arguments.length||3===arguments.length)C(t,l,o);else{var v=this.getManagedElements();for(var y in v)C(y,arguments[0],arguments[1])}return b},initDraggable:function(t,l,o){h(this,o).draggable(t,l),t._jsPlumbDragOptions=l},destroyDraggable:function(t,l){h(this,l).destroyDraggable(t),t._jsPlumbDragOptions=null,t._jsPlumbRelatedElement=null},unbindDraggable:function(t,l,o,b){h(this,b).destroyDraggable(t,l,o)},setDraggable:function(t,l){return jsPlumb.each(t,function(o){this.isDragSupported(o)&&(this._draggableStates[this.getAttribute(o,"id")]=l,this.setElementDraggable(o,l))}.bind(this))},_draggableStates:{},toggleDraggable:function(t){var l;return jsPlumb.each(t,function(o){var b=this.getAttribute(o,"id");return this._draggableStates[b]=l=!(l=null!=this._draggableStates[b]&&this._draggableStates[b]),this.setDraggable(o,l),l}.bind(this)),l},_initDraggableIfNecessary:function(t,l,o,b,C){if(!jsPlumb.headless&&l&&jsPlumb.isDragSupported(t,this)){var y=o||this.Defaults.DragOptions;if(y=jsPlumb.extend({},y),jsPlumb.isAlreadyDraggable(t,this))o.force&&this.initDraggable(t,y);else{var m=jsPlumb.dragEvents.drag,S=jsPlumb.dragEvents.stop,I=jsPlumb.dragEvents.start;this.manage(b,t),y[I]=X.wrap(y[I],x.bind(this)),y[m]=X.wrap(y[m],c.bind(this)),y[S]=X.wrap(y[S],n.bind(this));var P=this.getId(t);this._draggableStates[P]=!0;var A=this._draggableStates[P];y.disabled=null!=A&&!A,this.initDraggable(t,y),this.getDragManager().register(t),C&&this.fire("elementDraggable",{el:t,options:y})}}},animationSupported:!0,getElement:function(t){return null==t?null:"string"==typeof(t="string"==typeof t?t:null==t.tagName&&null!=t.length&&null==t.enctype?t[0]:t)?document.getElementById(t):t},removeElement:function(t){h(this).elementRemoved(t),this.getEventManager().remove(t)},doAnimate:function(t,l,o){o=o||{};var b=this.getOffset(t),C=function(t,l){var o=function(b){if(null!=l[b]){if(X.isString(l[b])){var C=l[b].match(/-=/)?-1:1,v=l[b].substring(2);return t[b]+C*v}return l[b]}return t[b]};return[o("left"),o("top")]}(b,l),m=o.duration||250,I=m/15,P=15/m*(C[0]-b.left),A=15/m*(C[1]-b.top),G=0,W=setInterval(function(){u.setPosition(t,{left:b.left+P*(G+1),top:b.top+A*(G+1)}),null!=o.step&&o.step(G,Math.ceil(I)),++G>=I&&(window.clearInterval(W),null!=o.complete&&o.complete())},15)},destroyDroppable:function(t,l){h(this,l).destroyDroppable(t)},unbindDroppable:function(t,l,o,b){h(this,b).destroyDroppable(t,l,o)},droppable:function(t,l){var o;return t=X.isArray(t)||null!=t.length&&!X.isString(t)?t:[t],(l=l||{}).allowLoopback=!1,Array.prototype.slice.call(t).forEach(function(b){(o=this.info(b)).el&&this.initDroppable(o.el,l)}.bind(this)),this},initDroppable:function(t,l,o){h(this,o).droppable(t,l)},isAlreadyDraggable:function(t){return null!=t._katavorioDrag},isDragSupported:function(t,l){return!0},isDropSupported:function(t,l){return!0},isElementDraggable:function(t){return(t=u.getElement(t))._katavorioDrag&&t._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getUIPosition:function(t,l){var o=t[0].el;if(null==o.offsetParent)return null;var b=t[0].finalPos||t[0].pos,C={left:b[0],top:b[1]};if(o._katavorioDrag&&o.offsetParent!==this.getContainer()){var v=this.getOffset(o.offsetParent);C.left+=v.left,C.top+=v.top}return C},setDragFilter:function(t,l,o){t._katavorioDrag&&t._katavorioDrag.setFilter(l,o)},setElementDraggable:function(t,l){(t=u.getElement(t))._katavorioDrag&&t._katavorioDrag.setEnabled(l)},setDragScope:function(t,l){t._katavorioDrag&&t._katavorioDrag.k.setDragScope(t,l)},setDropScope:function(t,l){t._katavorioDrop&&t._katavorioDrop.length>0&&t._katavorioDrop[0].k.setDropScope(t,l)},addToPosse:function(t,l){var o=Array.prototype.slice.call(arguments,1),b=h(this);u.each(t,function(C){(C=[u.getElement(C)]).push.apply(C,o),b.addToPosse.apply(b,C)})},setPosse:function(t,l){var o=Array.prototype.slice.call(arguments,1),b=h(this);u.each(t,function(C){(C=[u.getElement(C)]).push.apply(C,o),b.setPosse.apply(b,C)})},removeFromPosse:function(t,l){var o=Array.prototype.slice.call(arguments,1),b=h(this);u.each(t,function(C){(C=[u.getElement(C)]).push.apply(C,o),b.removeFromPosse.apply(b,C)})},removeFromAllPosses:function(t){var l=h(this);u.each(t,function(o){l.removeFromAllPosses(u.getElement(o))})},setPosseState:function(t,l,o){var b=h(this);u.each(t,function(C){b.setPosseState(u.getElement(C),l,o)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){t._katavorioDrag&&t._katavorioDrag.abort()},addToDragSelection:function(t){var l=this.getElement(t);null!=l&&(l._isJsPlumbGroup||null==l._jsPlumbGroup)&&h(this).select(t)},removeFromDragSelection:function(t){h(this).deselect(t)},getDragSelection:function(){return h(this).getSelection()},clearDragSelection:function(){h(this).deselectAll()},trigger:function(t,l,o,b){this.getEventManager().trigger(t,l,o,b)},doReset:function(){for(var t in this)0===t.indexOf("_katavorio_")&&this[t].reset()},getEventManager:function(){return(l=this._mottle)||(l=this._mottle=new J.Mottle),l;var l},on:function(t,l,o){return this.getEventManager().on.apply(this,arguments),this},off:function(t,l,o){return this.getEventManager().off.apply(this,arguments),this}}),t=u.init,(l=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body<"u"&&null!=document.body?t():setTimeout(l,9)})()}.call(typeof window<"u"?window:this)}}]);