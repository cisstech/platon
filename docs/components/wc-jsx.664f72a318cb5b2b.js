"use strict";(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[831],{2827:(b,f,e)=>{e.r(f),e.d(f,{JsxModule:()=>p});var c,s=e(4104),g=e(4553),d=e(4911),o=e(4966),_=e(6350),y=e(2892),t=e(5839),i=e(4361),m=e(1429),n=e(2996);let u=class E{static#t=c=this;static#e=this.NEXT_ID=0;constructor(a,h,l){this.injector=a,this.resourceLoader=h,this.changeDetector=l,this.boardId="jsx_graph"+ ++c.NEXT_ID}ngOnInit(){var a=this;return(0,g.Z)(function*(){yield(0,y.z)(a.resourceLoader.loadAllSync([["script","assets/vendors/jsxgraph/jsxgraphcore.js"],["style","assets/vendors/jsxgraph/jsxgraph.css"]])),JXG.Options=JXG.merge(JXG.Options,{board:{showCopyright:!1,keepAspectRatio:!0},elements:{highlight:!1,showInfobox:!1},point:{showInfobox:!1}}),a.createBoard()})()}ngOnDestroy(){this.destroyBoard()}onChangeState(){const a=this.changeDetector.changes(this);(a.includes("script")||a.includes("attributes"))&&this.createBoard(),a.includes("points")&&this.writePoints(),this.state.disabled?this.board.removeEventHandlers():this.board.hasPointerHandlers||this.board.addEventHandlers()}createBoard(){this.destroyBoard(),this.board=JXG.JSXGraph.initBoard(this.boardId,{axis:!0,...this.state.attributes||{}}),this.board.on("update",()=>{this.changeDetector.batch(this,()=>{this.readPoints()})});const a=decodeURIComponent(this.state.script);new Function("board",a)(this.board),this.readPoints()}destroyBoard(){this.board&&JXG.JSXGraph.freeBoard(this.board)}readPoints(){if(this.state.points={},this.board.objectsList)for(const a of this.board.objectsList)JXG.isPoint(a)&&a.name&&(this.state.points[a.name]={x:a.X(),y:a.Y()})}writePoints(){let a=!1;const h=Object.keys(this.state.points);for(const l of h){const v=this.board.objectsList.find(r=>JXG.isPoint(r)&&r.name===l);if(v){const r=this.state.points[l];v.setPosition(JXG.COORDS_BY_USER,[r.x,r.y]),a=!0}}a&&this.board.fullUpdate()}static#s=this.\u0275fac=function(h){return new(h||E)(o.Y36(o.zs3),o.Y36(_.l6),o.Y36(i.Z))};static#n=this.\u0275cmp=o.Xpm({type:E,selectors:[["wc-jsx"]],inputs:{state:"state"},decls:2,vars:2,consts:[[1,"jsxgraph-component",3,"id"],[3,"state","stateChange"]],template:function(h,l){1&h&&(o._UZ(0,"div",0),o.TgZ(1,"wc-base",1),o.NdJ("stateChange",function(r){return l.state=r}),o.qZA()),2&h&&(o.Q6J("id",l.boardId),o.xp6(1),o.Q6J("state",l.state))},dependencies:[n.H],styles:[".jsxgraph-component[_ngcontent-%COMP%]{max-width:400px;width:90vw;max-height:400px;height:90vw;margin:0 auto}"],changeDetection:0})};u=c=(0,d.gn)([(0,t._s)(m.d),(0,d.w6)("design:paramtypes",[o.zs3,_.l6,i.Z])],u);let p=(()=>{class C{constructor(){this.component=u}static#t=this.\u0275fac=function(l){return new(l||C)};static#e=this.\u0275mod=o.oAB({type:C});static#s=this.\u0275inj=o.cJS({imports:[s.Y]})}return C})()},2996:(b,f,e)=>{e.d(f,{H:()=>t});var s=e(4966),g=e(4266),d=e(6733),o=e(9986);const _=["container"];function y(i,m){if(1&i&&(s.ynx(0),s._UZ(1,"nge-monaco-viewer",1),s.ALo(2,"json"),s.BQk()),2&i){const n=s.oxw();s.xp6(1),s.Q6J("code",s.lcZ(2,1,n.state))}}let t=(()=>{class i{constructor(n,c){this.api=n,this.elementRef=c,this.stateChange=new s.vpe}ngOnInit(){const n=this.elementRef.nativeElement,c=n.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(c||""),this.observer=new MutationObserver(u=>{u.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(n.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(n){return n.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(n):n}onChangeAttributes(n){const p=Array.from(this.elementRef.nativeElement.parentElement.attributes),C=p.find(r=>"cid"===r.name);if(C){const $=document.querySelector(`script[id="${C.value}"]`);return void($&&this.stateChange.emit(this.parseValue($.textContent||"{}")))}if(p.find(r=>"state"===r.name)&&n)return;const h={},l=this.definition?.schema?.properties||{};let v=!1;for(const r of p)if(r.name in l){v=!0;try{h[r.name]=this.parseValue(r.value)}catch{console.warn(`Invalid value "${r.value}" for ${r.name} attribute`)}}v&&this.stateChange.emit(h)}static#t=this.\u0275fac=function(c){return new(c||i)(s.Y36(g.G),s.Y36(s.SBq))};static#e=this.\u0275cmp=s.Xpm({type:i,selectors:[["wc-base"]],viewQuery:function(c,u){if(1&c&&s.Gf(_,5),2&c){let p;s.iGM(p=s.CRH())&&(u.container=p.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(c,u){1&c&&s.YNc(0,y,3,3,"ng-container",0),2&c&&s.Q6J("ngIf",null==u.state?null:u.state.debug)},dependencies:[d.O5,o.Yu,d.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return i})()},4104:(b,f,e)=>{e.d(f,{Y:()=>o});var s=e(6733),g=e(9986),d=e(4966);let o=(()=>{class _{static#t=this.\u0275fac=function(i){return new(i||_)};static#e=this.\u0275mod=d.oAB({type:_});static#s=this.\u0275inj=d.cJS({imports:[s.ez,g.vS,s.ez]})}return _})()},4361:(b,f,e)=>{e.d(f,{Z:()=>o});var s=e(4553),g=e(4966),d=e(1887);let o=(()=>{class _{batch(t,i){const m=t.$__suspendChanges__$;t.$__suspendChanges__$=!0,i(),t.onChangeState&&t.onChangeState(),t.$__changeDetector__$||(t.$__changeDetector__$=t.injector.get(g.sBO)),t.$__changeDetector__$.detectChanges(),t.$__suspendChanges__$=m}ignore(t,i){return(0,s.Z)(function*(){const m=t.$__suspendChanges__$;t.$__suspendChanges__$=!0;const n=yield i();return t.$__changeDetector__$||(t.$__changeDetector__$=t.injector.get(g.sBO)),t.$__changeDetector__$.detectChanges(),t.$__suspendChanges__$=m,n})()}changes(t){if(!t.$__stateCopy__$)return t.$__stateCopy__$=(0,d.p$)(t.$__state__$),[];const i=[];return new Set(Object.keys(t.$__state__$).concat(Object.keys(t.$__stateCopy__$))).forEach(n=>{(0,d.vZ)(t.$__state__$[n],t.$__stateCopy__$[n])||i.push(n)}),t.$__stateCopy__$=(0,d.p$)(t.$__state__$),i}static#t=this.\u0275fac=function(i){return new(i||_)};static#e=this.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);