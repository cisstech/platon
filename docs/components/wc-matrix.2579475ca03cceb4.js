"use strict";(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[767],{4544:(A,v,s)=>{s.r(v),s.d(v,{MatrixModule:()=>B});var o=s(3226),C=s(2994),u=s(393),f=s(9984),_=s(4104),b=s(4048),y=s(8284),d=s(4911),t=s(4966),a=s(5839),m=s(8454),p=s(6733),x=s(2996),z=s(6785);const E=["template"];function w(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",7),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.done(c))})("mouseover",function(){const c=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.hover(c))}),t.qZA(),t.BQk()}if(2&r){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.ekj("on",n.isOn(e))}}function P(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"span"),t._uU(3),t.qZA(),t._UZ(4,"div",3),t.TgZ(5,"button",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.close())}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",5),t.YNc(9,w,2,2,"ng-container",6),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(3),t.AsE("Choisissez la taille de votre matrice: (",e.rows+1,", ",e.cols+1,")"),t.xp6(6),t.Q6J("ngForOf",e.cells)("ngForTrackBy",e.trackBy)}}let O=(()=>{class r{constructor(e,n){this.overlay=e,this.container=n,this.width=10,this.cells=Array.from({length:this.width*this.width},(i,c)=>c),this.cols=0,this.rows=0,this.resized=new t.vpe}ngOnDestroy(){this.resizer?.dispose()}isOn(e){const n=e%this.width;return Math.floor(e/this.width)<=this.rows&&n<=this.cols}hover(e){this.cols=e%this.width,this.rows=Math.floor(e/this.width)}done(e){this.resized.emit({cols:e%this.width+1,rows:Math.floor(e/this.width)+1}),this.close()}open(e){const{x:n,y:i}=e,c=this.overlay.position().flexibleConnectedTo({x:n,y:i}).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]);this.resizer=this.overlay.create({positionStrategy:c,hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.close()}),this.resizer.attach(new z.UE(this.template,this.container))}close(){this.resizer?.dispose(),this.resizer=void 0}trackBy(e){return e}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(C.aV),t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["wc-matrix-resizer"]],viewQuery:function(n,i){if(1&n&&t.Gf(E,5,t.Rgc),2&n){let c;t.iGM(c=t.CRH())&&(i.template=c.first)}},outputs:{resized:"resized"},decls:2,vars:0,consts:[["template",""],[1,"matrix-resizer"],[1,"matrix-resizer-header"],[1,"spacer"],["mat-icon-button","","matTooltip","Annuler",3,"click"],[1,"matrix-resizer-grid"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"matrix-resizer-box",3,"click","mouseover"]],template:function(n,i){1&n&&t.YNc(0,P,10,4,"ng-template",null,0,t.W1O)},dependencies:[p.sg,f.Hw,u.RK],styles:[".matrix-resizer[_ngcontent-%COMP%]{background-color:var(--brand-background-components)}.matrix-resizer-header[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:1;background-color:var(--brand-background-components);width:210px;height:32px;font-size:.8em}.matrix-resizer-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 8px}.matrix-resizer-header[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{height:32px;font-size:1.4em}.matrix-resizer-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(10,20px);grid-template-rows:repeat(10,20px);column-gap:1px;row-gap:1px}.matrix-resizer-box[_ngcontent-%COMP%]{border:1px solid #eee;transition:background-color .5s;cursor:pointer}.matrix-resizer-box[_ngcontent-%COMP%]:hover, .matrix-resizer-box.on[_ngcontent-%COMP%]{background-color:var(--brand-color-primary)}.spacer[_ngcontent-%COMP%]{flex:1}"]})}return r})();function g(r,l){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",6),t.NdJ("ngModelChange",function(i){const h=t.CHM(e).$implicit;return t.KtG(h.value=i)}),t.ALo(2,"css"),t.ALo(3,"css"),t.qZA(),t.BQk()}if(2&r){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.xi3(2,4,e.css,"class"))("ngStyle",t.xi3(3,7,e.css,"style"))("disabled",!(!n.state.disabled&&!e.disabled))("ngModel",e.value)}}let M=class T{get styles(){return{"--cols":this.state.cols,"--rows":this.state.rows}}constructor(l){this.injector=l}onChangeState(){const{cols:l,rows:e}=this.state;this.state.cells||(this.state.cells=[]);const n=this.state.cells.length,i=l*e;if(n<i)for(let c=n;c<i;c++)this.state.cells.push({value:"0"});else n>i&&(this.state.cells=this.state.cells.slice(0,i))}resize(l){this.state.cols=l.cols,this.state.rows=l.rows}trackBy(l){return l}static#t=this.\u0275fac=function(e){return new(e||T)(t.Y36(t.zs3))};static#e=this.\u0275cmp=t.Xpm({type:T,selectors:[["wc-matrix"]],hostVars:2,hostBindings:function(e,n){2&e&&t.Akn(n.styles)},inputs:{state:"state"},decls:8,vars:3,consts:[[1,"matrix"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-icon-button","","nz-tooltip","Redimensionner",3,"click"],[3,"resized"],["resizer",""],[3,"state","stateChange"],["type","text","tabindex","1",3,"ngClass","ngStyle","disabled","ngModel","ngModelChange"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0),t.YNc(1,g,4,10,"ng-container",1),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(h){t.CHM(i);const R=t.MAs(6);return t.KtG(R.open(h))}),t.TgZ(3,"mat-icon"),t._uU(4,"aspect_ratio"),t.qZA()(),t.TgZ(5,"wc-matrix-resizer",3,4),t.NdJ("resized",function(h){return n.resize(h)}),t.qZA(),t.TgZ(7,"wc-base",5),t.NdJ("stateChange",function(h){return n.state=h}),t.qZA()}2&e&&(t.xp6(1),t.Q6J("ngForOf",n.state.cells)("ngForTrackBy",n.trackBy),t.xp6(6),t.Q6J("state",n.state))},dependencies:[p.mk,p.sg,p.PC,x.H,o.Fj,o.JJ,o.On,f.Hw,b.SY,u.RK,O,y.j],styles:['[_nghost-%COMP%]{--cols: 3;--rows: 3;--row-size: 2em;--col-size: 4em;--gap: .5em}.matrix[_ngcontent-%COMP%]{display:grid;height:calc(var(--row-size) * var(--rows) + var(--gap) * var(--rows) + .2rem);width:calc(var(--col-size) * var(--cols) + var(--gap) * var(--cols) + .2rem);grid-template-rows:repeat(var(--rows),1fr);grid-template-columns:repeat(var(--cols),1fr);column-gap:var(--gap);row-gap:var(--gap);margin:1rem;vertical-align:middle;position:relative}.matrix[_ngcontent-%COMP%]:before, .matrix[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-6px;bottom:-6px;border:1px solid #000;width:6px}.matrix[_ngcontent-%COMP%]:before{left:-12px;border-right:0}.matrix[_ngcontent-%COMP%]:after{right:-12px;border-left:0}.matrix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;position:relative;width:var(--col-size);height:var(--row-size);border:none;border-radius:4px;text-align:center;border:1px solid #f0f0f0}.matrix[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{border:none}'],changeDetection:0})};M=(0,d.gn)([(0,a._s)(m.H),(0,d.w6)("design:paramtypes",[t.zs3])],M);let B=(()=>{class r{constructor(){this.component=M}static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.oAB({type:r});static#n=this.\u0275inj=t.cJS({imports:[_.Y,y.X,o.u5,C.U8,f.Ps,b.cg,u.ot]})}return r})()},2996:(A,v,s)=>{s.d(v,{H:()=>y});var o=s(4966),C=s(4266),u=s(6733),f=s(9986);const _=["container"];function b(d,t){if(1&d&&(o.ynx(0),o._UZ(1,"nge-monaco-viewer",1),o.ALo(2,"json"),o.BQk()),2&d){const a=o.oxw();o.xp6(1),o.Q6J("code",o.lcZ(2,1,a.state))}}let y=(()=>{class d{constructor(a,m){this.api=a,this.elementRef=m,this.stateChange=new o.vpe}ngOnInit(){const a=this.elementRef.nativeElement,m=a.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(m||""),this.observer=new MutationObserver(p=>{p.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(a.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(a){return a.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(a):a}onChangeAttributes(a){const x=Array.from(this.elementRef.nativeElement.parentElement.attributes),z=x.find(g=>"cid"===g.name);if(z){const M=document.querySelector(`script[id="${z.value}"]`);return void(M&&this.stateChange.emit(this.parseValue(M.textContent||"{}")))}if(x.find(g=>"state"===g.name)&&a)return;const w={},P=this.definition?.schema?.properties||{};let O=!1;for(const g of x)if(g.name in P){O=!0;try{w[g.name]=this.parseValue(g.value)}catch{console.warn(`Invalid value "${g.value}" for ${g.name} attribute`)}}O&&this.stateChange.emit(w)}static#t=this.\u0275fac=function(m){return new(m||d)(o.Y36(C.G),o.Y36(o.SBq))};static#e=this.\u0275cmp=o.Xpm({type:d,selectors:[["wc-base"]],viewQuery:function(m,p){if(1&m&&o.Gf(_,5),2&m){let x;o.iGM(x=o.CRH())&&(p.container=x.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(m,p){1&m&&o.YNc(0,b,3,3,"ng-container",0),2&m&&o.Q6J("ngIf",null==p.state?null:p.state.debug)},dependencies:[u.O5,f.Yu,u.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return d})()},4104:(A,v,s)=>{s.d(v,{Y:()=>f});var o=s(6733),C=s(9986),u=s(4966);let f=(()=>{class _{static#t=this.\u0275fac=function(d){return new(d||_)};static#e=this.\u0275mod=u.oAB({type:_});static#n=this.\u0275inj=u.cJS({imports:[o.ez,C.vS,o.ez]})}return _})()}}]);