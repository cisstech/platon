"use strict";(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[831],{2827:(b,p,e)=>{e.r(p),e.d(p,{JsxModule:()=>f});var c,s=e(4104),g=e(4553),d=e(4911),a=e(4966),h=e(6350),y=e(2892),t=e(5839),i=e(4361),m=e(1429),n=e(2996);let u=class E{static#t=c=this;static#e=this.NEXT_ID=0;constructor(o,_,l){this.injector=o,this.resourceLoader=_,this.changeDetector=l,this.boardId="jsx_graph"+ ++c.NEXT_ID,this.stateChange=new a.vpe}ngOnInit(){var o=this;return(0,g.Z)(function*(){yield(0,y.z)(o.resourceLoader.loadAllSync([["script","assets/vendors/jsxgraph/jsxgraphcore.js"],["style","assets/vendors/jsxgraph/jsxgraph.css"]])),JXG.Options=JXG.merge(JXG.Options,{board:{showCopyright:!1,keepAspectRatio:!0},elements:{highlight:!1,showInfobox:!1},point:{showInfobox:!1}}),o.createBoard()})()}ngOnDestroy(){this.destroyBoard()}onChangeState(){const o=this.changeDetector.changes(this);(o.includes("script")||o.includes("attributes"))&&this.createBoard(),o.includes("points")&&this.writePoints(),this.state.disabled?this.board.removeEventHandlers():this.board.hasPointerHandlers||this.board.addEventHandlers()}createBoard(){this.destroyBoard(),this.board=JXG.JSXGraph.initBoard(this.boardId,{axis:!0,...this.state.attributes||{}}),this.board.on("update",()=>{this.changeDetector.batch(this,()=>{this.readPoints()})});const o=decodeURIComponent(this.state.script);new Function("board",o)(this.board),this.readPoints()}destroyBoard(){this.board&&JXG.JSXGraph.freeBoard(this.board)}readPoints(){if(this.state.points={},this.board.objectsList)for(const o of this.board.objectsList)JXG.isPoint(o)&&o.name&&(this.state.points[o.name]={x:o.X(),y:o.Y()})}writePoints(){let o=!1;const _=Object.keys(this.state.points);for(const l of _){const v=this.board.objectsList.find(r=>JXG.isPoint(r)&&r.name===l);if(v){const r=this.state.points[l];v.setPosition(JXG.COORDS_BY_USER,[r.x,r.y]),o=!0}}o&&this.board.fullUpdate()}static#s=this.\u0275fac=function(_){return new(_||E)(a.Y36(a.zs3),a.Y36(h.l6),a.Y36(i.Z))};static#n=this.\u0275cmp=a.Xpm({type:E,selectors:[["wc-jsx"]],inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:2,vars:2,consts:[[1,"jsxgraph-component",3,"id"],[3,"state","stateChange"]],template:function(_,l){1&_&&(a._UZ(0,"div",0),a.TgZ(1,"wc-base",1),a.NdJ("stateChange",function(r){return l.state=r}),a.qZA()),2&_&&(a.Q6J("id",l.boardId),a.xp6(1),a.Q6J("state",l.state))},dependencies:[n.H],styles:[".jsxgraph-component[_ngcontent-%COMP%]{max-width:400px;width:90vw;max-height:400px;height:90vw;margin:0 auto}"],changeDetection:0})};u=c=(0,d.gn)([(0,t._s)(m.d),(0,d.w6)("design:paramtypes",[a.zs3,h.l6,i.Z])],u);let f=(()=>{class C{constructor(){this.component=u}static#t=this.\u0275fac=function(l){return new(l||C)};static#e=this.\u0275mod=a.oAB({type:C});static#s=this.\u0275inj=a.cJS({imports:[s.Y]})}return C})()},2996:(b,p,e)=>{e.d(p,{H:()=>t});var s=e(4966),g=e(4266),d=e(6733),a=e(9986);const h=["container"];function y(i,m){if(1&i&&(s.ynx(0),s._UZ(1,"nge-monaco-viewer",1),s.ALo(2,"json"),s.BQk()),2&i){const n=s.oxw();s.xp6(1),s.Q6J("code",s.lcZ(2,1,n.state))}}let t=(()=>{class i{constructor(n,c){this.api=n,this.elementRef=c,this.stateChange=new s.vpe}ngOnInit(){const n=this.elementRef.nativeElement,c=n.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(c||""),this.observer=new MutationObserver(u=>{u.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(n.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(n){return n.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(n):n}onChangeAttributes(n){const f=Array.from(this.elementRef.nativeElement.parentElement.attributes),C=f.find(r=>"cid"===r.name);if(C){const $=document.querySelector(`script[id="${C.value}"]`);return void($&&(console.log($.textContent),this.stateChange.emit(this.parseValue($.textContent||"{}"))))}if(f.find(r=>"state"===r.name)&&n)return;const _={},l=this.definition?.schema?.properties||{};let v=!1;for(const r of f)if(r.name in l){v=!0;try{_[r.name]=this.parseValue(r.value)}catch{console.warn(`Invalid value "${r.value}" for ${r.name} attribute`)}}v&&this.stateChange.emit(_)}static#t=this.\u0275fac=function(c){return new(c||i)(s.Y36(g.G),s.Y36(s.SBq))};static#e=this.\u0275cmp=s.Xpm({type:i,selectors:[["wc-base"]],viewQuery:function(c,u){if(1&c&&s.Gf(h,5),2&c){let f;s.iGM(f=s.CRH())&&(u.container=f.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(c,u){1&c&&s.YNc(0,y,3,3,"ng-container",0),2&c&&s.Q6J("ngIf",null==u.state?null:u.state.debug)},dependencies:[d.O5,a.Yu,d.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return i})()},4104:(b,p,e)=>{e.d(p,{Y:()=>a});var s=e(6733),g=e(9986),d=e(4966);let a=(()=>{class h{static#t=this.\u0275fac=function(i){return new(i||h)};static#e=this.\u0275mod=d.oAB({type:h});static#s=this.\u0275inj=d.cJS({imports:[s.ez,g.vS,s.ez]})}return h})()},4361:(b,p,e)=>{e.d(p,{Z:()=>a});var s=e(4553),g=e(4966),d=e(1887);let a=(()=>{class h{batch(t,i){const m=t.$__suspendChanges__$;t.$__suspendChanges__$=!0,i(),t.onChangeState&&t.onChangeState(),t.$__changeDetector__$||(t.$__changeDetector__$=t.injector.get(g.sBO)),t.$__changeDetector__$.detectChanges(),t.$__suspendChanges__$=m}ignore(t,i){return(0,s.Z)(function*(){const m=t.$__suspendChanges__$;t.$__suspendChanges__$=!0;const n=yield i();return t.$__changeDetector__$||(t.$__changeDetector__$=t.injector.get(g.sBO)),t.$__changeDetector__$.detectChanges(),t.$__suspendChanges__$=m,n})()}changes(t){if(!t.$__stateCopy__$)return t.$__stateCopy__$=(0,d.p$)(t.$__state__$),[];const i=[];return new Set(Object.keys(t.$__state__$).concat(Object.keys(t.$__stateCopy__$))).forEach(n=>{(0,d.vZ)(t.$__state__$[n],t.$__stateCopy__$[n])||i.push(n)}),t.$__stateCopy__$=(0,d.p$)(t.$__state__$),i}static#t=this.\u0275fac=function(i){return new(i||h)};static#e=this.\u0275prov=g.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);