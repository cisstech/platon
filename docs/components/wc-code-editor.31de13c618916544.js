(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[163],{4077:(Pe,X,G)=>{"use strict";G.r(X),G.d(X,{CodeEditorModule:()=>rt});var P=G(9986),w=G(4048),b=G(4104),m=G(4911),c=G(4966);G(7834),G(602),G(3229),G(1132).configure({autoescape:!1});var Qe=G(5839),Ze=G(4361),qe=G(6033),et=G(6733),tt=G(2996);const nt=["footer"];function it(S,r){if(1&S){const f=c.EpF();c.TgZ(0,"span",10),c.NdJ("click",function(){c.CHM(f);const N=c.oxw();return c.KtG(N.reset())}),c._UZ(1,"span",11),c.qZA()}}let Ve=class $e{constructor(r,f){this.injector=r,this.changeDetector=f,this.disposables=[],this.width=0,this.height=0,this.stateChange=new c.vpe,this.initialCode="",this.cursor={column:0,lineNumber:0},this.decorations=[]}ngAfterViewChecked(){if(!this.editor||!this.footer)return;const r=this.footer.nativeElement.getBoundingClientRect();if(!r)return;const{width:f,height:d}=r;(this.width!==f||this.height!==d)&&(this.editor?.layout(),this.width=f,this.height=d)}ngOnDestroy(){this.disposables.forEach(r=>r.dispose())}onCreateEditor(r){this.editor=r,r.setModel(this.model=this.model||monaco.editor.createModel(this.state.code||"",this.state.language||"plaintext")),this.detectOptionsChange(),this.model.updateOptions({tabSize:this.state.tabSize,insertSpaces:!0,trimAutoWhitespace:!0}),this.editor.updateOptions({autoIndent:"advanced",lineNumbers:"on",renderWhitespace:"all",quickSuggestions:!0,glyphMargin:!1,renderControlCharacters:!0,contextmenu:null==document.querySelector(".no-copy-paste"),minimap:{enabled:!0},scrollbar:{verticalScrollbarSize:4,verticalSliderSize:4}}),this.disposables.push(this.model),this.disposables.push(this.editor),this.disposables.push(this.model.onDidChangeContent(()=>{this.changeDetector.ignore(this,()=>{this.state.code=this.model?.getValue()||""})})),this.disposables.push(this.editor.onDidChangeCursorPosition(f=>{this.changeDetector.ignore(this,()=>{this.cursor=f.position})})),this.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS,()=>{},""),this.initialCode=this.state.code}onChangeState(){this.model&&(monaco.editor.setModelLanguage(this.model,this.state.language||"plaintext"),this.editor?.updateOptions({tabSize:this.state.tabSize,quickSuggestions:this.state.quickSuggestions}),this.model.setValue(this.state.code))}reset(){this.state.code=this.initialCode}goToLine(){if(!this.editor)return;const r=this.editor.getAction(P.BD);this.editor.focus(),r?.run()}quickCommand(){if(!this.editor)return;const r=this.editor.getAction(P.z_);this.editor.focus(),r?.run()}changeIndent(){if(!this.editor)return;const r=this.editor.getAction(P.UD);this.editor.focus(),r?.run()}detectOptionsChange(){if(!this.model)return;const r=this,f=this.model.updateOptions;this.model.updateOptions=function(d){f.apply(this,[d]),d.tabSize&&r.changeDetector.ignore(r,()=>{r.state.tabSize=d.tabSize||r.state.tabSize})}}static#e=this.\u0275fac=function(f){return new(f||$e)(c.Y36(c.zs3),c.Y36(Ze.Z))};static#t=this.\u0275cmp=c.Xpm({type:$e,selectors:[["wc-code-editor"]],viewQuery:function(f,d){if(1&f&&c.Gf(nt,7),2&f){let N;c.iGM(N=c.CRH())&&(d.footer=N.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:14,vars:11,consts:[[3,"ready"],["footer",""],["aria-label","Raccourcies","nz-tooltip","Raccourcies",1,"footer-item",3,"click"],[1,"footer-item-icon","codicon","codicon-light-bulb"],["class","footer-item","aria-label","Remettre le code initial","nz-tooltip","Remettre le code initial",3,"click",4,"ngIf"],[1,"spacer"],["nz-tooltip","Aller \xe0 la ligne/colonne",1,"footer-item",3,"click"],["nz-tooltip","Modifier l'indentation",1,"footer-item",3,"click"],["nz-tooltip","Langage",1,"footer-item"],[3,"state","stateChange"],["aria-label","Remettre le code initial","nz-tooltip","Remettre le code initial",1,"footer-item",3,"click"],[1,"footer-item-icon","codicon","codicon-sync"]],template:function(f,d){1&f&&(c.TgZ(0,"nge-monaco-editor",0),c.NdJ("ready",function(B){return d.onCreateEditor(B)}),c.qZA(),c.TgZ(1,"footer",null,1)(3,"span",2),c.NdJ("click",function(){return d.quickCommand()}),c._UZ(4,"span",3),c.qZA(),c.YNc(5,it,2,0,"span",4),c._UZ(6,"span",5),c.TgZ(7,"span",6),c.NdJ("click",function(){return d.goToLine()}),c._uU(8),c.qZA(),c.TgZ(9,"span",7),c.NdJ("click",function(){return d.changeIndent()}),c._uU(10),c.qZA(),c.TgZ(11,"span",8),c._uU(12),c.qZA()(),c.TgZ(13,"wc-base",9),c.NdJ("stateChange",function(B){return d.state=B}),c.qZA()),2&f&&(c.Udp("--editor-height",d.state.height+"px"),c.xp6(5),c.Q6J("ngIf",d.initialCode),c.xp6(2),c.uIk("aria-label","Ln "+d.cursor.lineNumber+",Col  "+d.cursor.column),c.xp6(1),c.AsE(" Ln ",d.cursor.lineNumber,", Col ",d.cursor.column," "),c.xp6(1),c.uIk("aria-label","Espaces:"+d.state.tabSize),c.xp6(1),c.hij(" Espaces: ",d.state.tabSize," "),c.xp6(1),c.uIk("aria-label",d.state.language),c.xp6(1),c.hij(" ",d.state.language," "),c.xp6(1),c.Q6J("state",d.state))},dependencies:[et.O5,tt.H,w.SY,P.RI],styles:["[_nghost-%COMP%]{display:block;height:100%}footer[_ngcontent-%COMP%]{height:22px;border:1px solid rgba(59,66,82,0);box-sizing:border-box;display:flex;align-items:center;background-color:#3b4252;color:#d8dee9;padding:.2rem 0;font-size:.8em}footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{cursor:pointer;padding:0 .6rem}footer[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]:hover{background-color:#d8dee933}footer[_ngcontent-%COMP%]   .footer-item-icon[_ngcontent-%COMP%]{vertical-align:text-bottom!important}.spacer[_ngcontent-%COMP%]{flex:1}"],changeDetection:0})};Ve=(0,m.gn)([(0,Qe._s)(qe.e),(0,m.w6)("design:paramtypes",[c.zs3,Ze.Z])],Ve);let rt=(()=>{class S{constructor(){this.component=Ve}static#e=this.\u0275fac=function(d){return new(d||S)};static#t=this.\u0275mod=c.oAB({type:S});static#n=this.\u0275inj=c.cJS({imports:[b.Y,w.cg,P.vS]})}return S})()},2996:(Pe,X,G)=>{"use strict";G.d(X,{H:()=>E});var P=G(4966),w=G(4266),b=G(6733),m=G(9986);const c=["container"];function k(K,V){if(1&K&&(P.ynx(0),P._UZ(1,"nge-monaco-viewer",1),P.ALo(2,"json"),P.BQk()),2&K){const R=P.oxw();P.xp6(1),P.Q6J("code",P.lcZ(2,1,R.state))}}let E=(()=>{class K{constructor(R,A){this.api=R,this.elementRef=A,this.stateChange=new P.vpe}ngOnInit(){const R=this.elementRef.nativeElement,A=R.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(A||""),this.observer=new MutationObserver(F=>{F.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(R.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(R){return R.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(R):R}onChangeAttributes(R){const t=Array.from(this.elementRef.nativeElement.parentElement.attributes),n=t.find(e=>"data-script-id"===e.name);if(n){const e=document.querySelector(`script[id="${n.value}"]`);return void(e&&this.stateChange.emit(this.parseValue(e.textContent||"{}")))}if(t.find(e=>"state"===e.name)&&R)return;const _={},p=this.definition?.schema?.properties||{};let v=!1;for(const e of t)if(e.name in p){v=!0;try{_[e.name]=this.parseValue(e.value)}catch{console.warn(`Invalid value "${e.value}" for ${e.name} attribute`)}}v&&this.stateChange.emit(_)}static#e=this.\u0275fac=function(A){return new(A||K)(P.Y36(w.G),P.Y36(P.SBq))};static#t=this.\u0275cmp=P.Xpm({type:K,selectors:[["wc-base"]],viewQuery:function(A,F){if(1&A&&P.Gf(c,5),2&A){let t;P.iGM(t=P.CRH())&&(F.container=t.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(A,F){1&A&&P.YNc(0,k,3,3,"ng-container",0),2&A&&P.Q6J("ngIf",null==F.state?null:F.state.debug)},dependencies:[b.O5,m.Yu,b.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return K})()},4104:(Pe,X,G)=>{"use strict";G.d(X,{Y:()=>m});var P=G(6733),w=G(9986),b=G(4966);let m=(()=>{class c{static#e=this.\u0275fac=function(K){return new(K||c)};static#t=this.\u0275mod=b.oAB({type:c});static#n=this.\u0275inj=b.cJS({imports:[P.ez,w.vS,P.ez]})}return c})()},4361:(Pe,X,G)=>{"use strict";G.d(X,{Z:()=>m});var P=G(4553),w=G(4966),b=G(1887);let m=(()=>{class c{batch(E,K){const V=E.$__suspendChanges__$;E.$__suspendChanges__$=!0,K(),E.onChangeState&&E.onChangeState(),E.$__changeDetector__$||(E.$__changeDetector__$=E.injector.get(w.sBO)),E.$__changeDetector__$.detectChanges(),E.$__suspendChanges__$=V}ignore(E,K){return(0,P.Z)(function*(){const V=E.$__suspendChanges__$;E.$__suspendChanges__$=!0;const R=yield K();return E.$__changeDetector__$||(E.$__changeDetector__$=E.injector.get(w.sBO)),E.$__changeDetector__$.detectChanges(),E.$__suspendChanges__$=V,R})()}changes(E){if(!E.$__stateCopy__$)return E.$__stateCopy__$=(0,b.p$)(E.$__state__$),[];const K=[];return new Set(Object.keys(E.$__state__$).concat(Object.keys(E.$__stateCopy__$))).forEach(R=>{(0,b.vZ)(E.$__state__$[R],E.$__stateCopy__$[R])||K.push(R)}),E.$__stateCopy__$=(0,b.p$)(E.$__state__$),K}static#e=this.\u0275fac=function(K){return new(K||c)};static#t=this.\u0275prov=w.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},3229:(Pe,X)=>{"use strict";!function(){function w(b){void 0===b&&(b={}),this.yy=b,this.EOF=1,this.options={},this.yyleng=0,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0}}w.prototype.parseError=function(b,m){if(!this.yy.parser)throw new Error(b);this.yy.parser.parseError(b,m)},w.prototype.setInput=function(b,m){return this.yy=m||this.yy||{},this._input=b,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},w.prototype.input=function(){var b=this._input[0];return this.yytext+=b,this.yyleng++,this.offset++,this.match+=b,this.matched+=b,b.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),b},w.prototype.unput=function(b){var m=b.length,c=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-m),this.offset-=m;var k=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var E=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===k.length?this.yylloc.first_column:0)+k[k.length-c.length].length-c[0].length:this.yylloc.first_column-m},this.options.ranges&&(this.yylloc.range=[E[0],E[0]+this.yyleng-m]),this.yyleng=this.yytext.length,this},w.prototype.more=function(){return this._more=!0,this},w.prototype.reject=function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},w.prototype.less=function(b){this.unput(this.match.slice(b))},w.prototype.pastInput=function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(b.length>20?"...":"")+b.substr(-20).replace(/\n/g,"")},w.prototype.upcomingInput=function(){var b=this.match;return b.length<20&&(b+=this._input.substr(0,20-b.length)),(b.substr(0,20)+(b.length>20?"...":"")).replace(/\n/g,"")},w.prototype.showPosition=function(){var b=this.pastInput(),m=new Array(b.length+1).join("-");return b+this.upcomingInput()+"\n"+m+"^"},w.prototype.test_match=function(b,m){var c,k,E;if(this.options.backtrack_lexer&&(E={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(E.yylloc.range=this.yylloc.range.slice(0))),(k=b[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=k.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:k?k[k.length-1].length-k[k.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],c=this.performAction.call(this,this.yy,this,m,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),c)return c;if(this._backtrack){for(var K in E)this[K]=E[K];return!1}return!1},w.prototype.next=function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,c,k,m=null;this._more||(this.yytext="",this.match="");for(var E=this._currentRules(),K=0;K<E.length;K++)if((c=this._input.match(this.rules[E[K]]))&&(!m||c[0].length>m[0].length)){if(m=c,k=K,this.options.backtrack_lexer){if(!1!==(b=this.test_match(c,E[K])))return b;if(this._backtrack){m=null;continue}return!1}if(!this.options.flex)break}return m?!1!==(b=this.test_match(m,E[k]))&&b:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},w.prototype.lex=function(){return this.next()||this.lex()},w.prototype.begin=function(b){this.conditionStack.push(b)},w.prototype.popState=function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},w.prototype._currentRules=function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},w.prototype.topState=function(b){return(b=this.conditionStack.length-1-Math.abs(b||0))>=0?this.conditionStack[b]:"INITIAL"},w.prototype.pushState=function(b){this.begin(b)},w.prototype.stateStackSize=function(){return this.conditionStack.length}}()},602:(Pe,X)=>{"use strict";!function(){function b(m,c){void 0===m&&(m={}),this.yy=m,this.lexer=c}b.prototype.trace=function(m){},b.prototype.parseError=function(m,c){if(!c.recoverable){var k=new Error(m);throw k.hash=c,k}this.trace(m)},b.prototype.parse=function(m,c){void 0===c&&(c="function"==typeof this.yy&&"function"==typeof this.yy.constructor?new this.yy(this,this.lexer):Object.create(this.yy));var k=this,E=[0],V=[null],R=[],A=this.table,F="",t=0,n=0,i=0,v=R.slice.call(arguments,1),e=Object.create(this.lexer),s={yy:c};e.setInput(m,s.yy),s.yy.lexer=e,s.yy.parser=this,typeof e.yylloc>"u"&&(e.yylloc={});var u=e.yylloc;R.push(u);var ce,a=e.options&&e.options.ranges;"function"==typeof s.yy.parseError&&(this.parseError=s.yy.parseError);for(var h,x,M,I,$,g,C,H,y=function(){var ce;return"number"!=typeof(ce=e.lex()||1)&&(ce=k.symbols_[ce]||ce),ce},T={};;){if(this.defaultActions[M=E[E.length-1]]?I=this.defaultActions[M]:((null===h||typeof h>"u")&&(h=y()),I=A[M]&&A[M][h]),typeof I>"u"||!I.length||!I[0]){var Z=null,le="";if(i)1!==x&&(Z=ue(M));else{for(var ie in Z=ue(M),H=[],A[M])g=Number(ie),this.terminals_[g]&&g>2&&H.push("'"+this.terminals_[g]+"'");le=e.showPosition?"Parse error on line "+(t+1)+":\n"+e.showPosition()+"\nExpecting "+H.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(t+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(le,{text:e.match,token:this.terminals_[h]||h,line:e.yylineno,loc:e.yylloc,expected:H,recoverable:null!==Z})}if(3==i){if(1===h||1===x)throw new Error(le||"Parsing halted while starting to recover from another error.");n=e.yyleng,F=e.yytext,t=e.yylineno,u=e.yylloc,h=y()}if(null===Z)throw new Error(le||"Parsing halted. No suitable error recovery rule available.");E.length=E.length-2*(ce=Z||0),V.length=V.length-ce,R.length=R.length-ce,x=2==h?null:h,h=2,I=A[M=E[E.length-1]]&&A[M][2],i=3}if(I[0]instanceof Array&&I.length>1)throw new Error("Parse Error: multiple actions possible at state: "+M+", token: "+h);switch(I[0]){case 1:E.push(h),V.push(e.yytext),R.push(e.yylloc),E.push(I[1]),h=null,x?(h=x,x=null):(n=e.yyleng,F=e.yytext,t=e.yylineno,u=e.yylloc,i>0&&i--);break;case 2:if(T.$=V[V.length-(C=this.productions_[I[1]][1])],T._$={first_line:R[R.length-(C||1)].first_line,last_line:R[R.length-1].last_line,first_column:R[R.length-(C||1)].first_column,last_column:R[R.length-1].last_column},a&&(T._$.range=[R[R.length-(C||1)].range[0],R[R.length-1].range[1]]),typeof($=this.performAction.apply(T,[F,n,t,s.yy,I[1],V,R].concat(v)))<"u")return $;C&&(E=E.slice(0,-1*C*2),V=V.slice(0,-1*C),R=R.slice(0,-1*C)),E.push(this.productions_[I[1]][0]),V.push(T.$),R.push(T._$),E.push(A[E[E.length-2]][E[E.length-1]]);break;case 3:return!0}}return!0;function ue(ce){for(var re=E.length-1,se=0;;){if(2..toString()in A[ce])return se;if(0===ce||re<2)return null;ce=E[re-=2],++se}}}}()},1132:function(Pe){typeof self<"u"&&self,Pe.exports=function(X){var G={};function P(w){if(G[w])return G[w].exports;var b=G[w]={i:w,l:!1,exports:{}};return X[w].call(b.exports,b,b.exports,P),b.l=!0,b.exports}return P.m=X,P.c=G,P.d=function(w,b,m){P.o(w,b)||Object.defineProperty(w,b,{configurable:!1,enumerable:!0,get:m})},P.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return P.d(b,"a",b),b},P.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},P.p="",P(P.s=11)}([function(X,k,P){"use strict";var w=Array.prototype,b=Object.prototype,m={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},c=/[&"'<>\\]/g;function E(g,C){return b.hasOwnProperty.call(g,C)}function K(g){return m[g]}function R(g,C,W){var H,Z,le;if(g instanceof Error&&(g=(Z=g).name+": "+Z.message),Object.setPrototypeOf?(H=new Error(g),Object.setPrototypeOf(H,R.prototype)):(H=this,Object.defineProperty(H,"message",{enumerable:!1,writable:!0,value:g})),Object.defineProperty(H,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(H,this.constructor),Z){var ie=Object.getOwnPropertyDescriptor(Z,"stack");(le=ie&&(ie.get||function(){return ie.value}))||(le=function(){return Z.stack})}else{var ue=new Error(g).stack;le=function(){return ue}}return Object.defineProperty(H,"stack",{get:function(){return le.call(H)}}),Object.defineProperty(H,"cause",{value:Z}),H.lineno=C,H.colno=W,H.firstUpdate=!0,H.Update=function(re){var se="("+(re||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?se+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(se+=" [Line "+this.lineno+"]")),se+="\n ",this.firstUpdate&&(se+=" "),this.message=se+(this.message||""),this.firstUpdate=!1,this},H}function F(g){return"[object Function]"===b.toString.call(g)}function t(g){return"[object Array]"===b.toString.call(g)}function n(g){return"[object String]"===b.toString.call(g)}function i(g){return"[object Object]"===b.toString.call(g)}function p(g){var C=function _(g){return g?"string"==typeof g?g.split("."):[g]:[]}(g);return function(H){for(var Z=H,le=0;le<C.length;le++){var ie=C[le];if(!E(Z,ie))return;Z=Z[ie]}return Z}}function e(g){return Array.prototype.slice.call(g)}function x(g,C,W){return Array.prototype.indexOf.call(g||[],C,W)}function M(g){var C=[];for(var W in g)E(g,W)&&C.push(W);return C}(k=X.exports={}).hasOwnProp=E,k._prettifyError=function V(g,C,W){if(W.Update||(W=new k.TemplateError(W)),W.Update(g),!C){var H=W;(W=new Error(H.message)).name=H.name}return W},Object.setPrototypeOf?Object.setPrototypeOf(R.prototype,Error.prototype):R.prototype=Object.create(Error.prototype,{constructor:{value:R}}),k.TemplateError=R,k.escape=function A(g){return g.replace(c,K)},k.isFunction=F,k.isArray=t,k.isString=n,k.isObject=i,k.getAttrGetter=p,k.groupBy=function v(g,C,W){for(var H={},Z=F(C)?C:p(C),le=0;le<g.length;le++){var ie=g[le],ue=Z(ie,le);if(void 0===ue&&!0===W)throw new TypeError('groupby: attribute "'+C+'" resolved to undefined');(H[ue]||(H[ue]=[])).push(ie)}return H},k.toArray=e,k.without=function s(g){var C=[];if(!g)return C;for(var W=g.length,H=e(arguments).slice(1),Z=-1;++Z<W;)-1===x(H,g[Z])&&C.push(g[Z]);return C},k.repeat=function u(g,C){for(var W="",H=0;H<C;H++)W+=g;return W},k.each=function a(g,C,W){if(null!=g)if(w.forEach&&g.forEach===w.forEach)g.forEach(C,W);else if(g.length===+g.length)for(var H=0,Z=g.length;H<Z;H++)C.call(W,g[H],H,g)},k.map=function l(g,C){var W=[];if(null==g)return W;if(w.map&&g.map===w.map)return g.map(C);for(var H=0;H<g.length;H++)W[W.length]=C(g[H],H);return g.length===+g.length&&(W.length=g.length),W},k.asyncIter=function y(g,C,W){var H=-1;!function Z(){++H<g.length?C(g[H],H,Z,W):W()}()},k.asyncFor=function h(g,C,W){var H=M(g||{}),Z=H.length,le=-1;!function ie(){le++;var ue=H[le];le<Z?C(ue,g[ue],le,Z,ie):W()}()},k.indexOf=x,k.keys=M,k._entries=function I(g){return M(g).map(function(C){return[C,g[C]]})},k._values=function D(g){return M(g).map(function(C){return g[C]})},k._assign=k.extend=function $(g,C){return g=g||{},M(C).forEach(function(W){g[W]=C[W]}),g},k.inOperator=function T(g,C){if(t(C)||n(C))return-1!==C.indexOf(g);if(i(C))return g in C;throw new Error('Cannot use "in" operator to search for "'+g+'" in unexpected types.')}},function(X,G,P){"use strict";function w(n,i){for(var _=0;_<i.length;_++){var p=i[_];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(n,m(p.key),p)}}function b(n,i,_){return i&&w(n.prototype,i),_&&w(n,_),Object.defineProperty(n,"prototype",{writable:!1}),n}function m(n){var i=function c(n,i){if("object"!=typeof n||null===n)return n;var _=n[Symbol.toPrimitive];if(void 0!==_){var p=_.call(n,i||"default");if("object"!=typeof p)return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(n)}(n,"string");return"symbol"==typeof i?i:String(i)}function k(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,E(n,i)}function E(n,i){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p})(n,i)}var K=P(16),V=P(0);function A(n,i,_){V.keys(_=_||{}).forEach(function(v){_[v]=function R(n,i){return"function"!=typeof n||"function"!=typeof i?i:function(){var p=this.parent;this.parent=n;var v=i.apply(this,arguments);return this.parent=p,v}}(n.prototype[v],_[v])});var p=function(v){function e(){return v.apply(this,arguments)||this}return k(e,v),b(e,[{key:"typename",get:function(){return i}}]),e}(n);return V._assign(p.prototype,_),p}var F=function(){function n(){this.init.apply(this,arguments)}return n.prototype.init=function(){},n.extend=function(p,v){return"object"==typeof p&&(v=p,p="anonymous"),A(this,p,v)},b(n,[{key:"typename",get:function(){return this.constructor.name}}]),n}(),t=function(n){function i(){var p,v;return(p=v=n.call(this)||this).init.apply(p,arguments),v}return k(i,n),i.prototype.init=function(){},i.extend=function(v,e){return"object"==typeof v&&(e=v,v="anonymous"),A(this,v,e)},b(i,[{key:"typename",get:function(){return this.constructor.name}}]),i}(K);X.exports={Obj:F,EmitterObj:t}},function(X,G,P){"use strict";var w=P(0),b=Array.from,m="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof b,c=function(){function l(h,x){this.variables=Object.create(null),this.parent=h,this.topLevel=!1,this.isolateWrites=x}var y=l.prototype;return y.set=function(x,M,I){var D=x.split("."),$=this.variables,T=this;if(I&&(T=this.resolve(D[0],!0)))T.set(x,M);else{for(var g=0;g<D.length-1;g++){var C=D[g];$[C]||($[C]={}),$=$[C]}$[D[D.length-1]]=M}},y.get=function(x){var M=this.variables[x];return void 0!==M?M:null},y.lookup=function(x){var M=this.parent,I=this.variables[x];return void 0!==I?I:M&&M.lookup(x)},y.resolve=function(x,M){var I=M&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[x]?this:I&&I.resolve(x)},y.push=function(x){return new l(this,x)},y.pop=function(){return this.parent},l}();function K(l){return l&&Object.prototype.hasOwnProperty.call(l,"__keywords")}function R(l){var y=l.length;return 0===y?0:K(l[y-1])?y-1:y}function A(l){if("string"!=typeof l)return l;this.val=l,this.length=l.length}(A.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}})).valueOf=function(){return this.val},A.prototype.toString=function(){return this.val},X.exports={Frame:c,makeMacro:function k(l,y,h){return function(){for(var M=arguments.length,I=new Array(M),D=0;D<M;D++)I[D]=arguments[D];var T,$=R(I),g=function V(l){var y=l.length;if(y){var h=l[y-1];if(K(h))return h}return{}}(I);if($>l.length)T=I.slice(0,l.length),I.slice(T.length,$).forEach(function(H,Z){Z<y.length&&(g[y[Z]]=H)}),T.push(g);else if($<l.length){T=I.slice(0,$);for(var C=$;C<l.length;C++){var W=l[C];T.push(g[W]),delete g[W]}T.push(g)}else T=I;return h.apply(this,T)}},makeKeywordArgs:function E(l){return l.__keywords=!0,l},numArgs:R,suppressValue:function n(l,y){return l=l??"",y&&!(l instanceof A)&&(l=w.escape(l.toString())),l},ensureDefined:function i(l,y,h){if(null==l)throw new w.TemplateError("attempted to output null or undefined value",y+1,h+1);return l},memberLookup:function _(l,y){if(null!=l)return"function"==typeof l[y]?function(){for(var h=arguments.length,x=new Array(h),M=0;M<h;M++)x[M]=arguments[M];return l[y].apply(l,x)}:l[y]},contextOrFrameLookup:function v(l,y,h){var x=y.lookup(h);return void 0!==x?x:l.lookup(h)},callWrap:function p(l,y,h,x){if(!l)throw new Error("Unable to call `"+y+"`, which is undefined or falsey");if("function"!=typeof l)throw new Error("Unable to call `"+y+"`, which is not a function");return l.apply(h,x)},handleError:function e(l,y,h){return l.lineno?l:new w.TemplateError(l,y,h)},isArray:w.isArray,keys:w.keys,SafeString:A,copySafeness:function F(l,y){return l instanceof A?new A(y):y.toString()},markSafe:function t(l){var y=typeof l;return"string"===y?new A(l):"function"!==y?l:function(x){var M=l.apply(this,arguments);return"string"==typeof M?new A(M):M}},asyncEach:function s(l,y,h,x){if(w.isArray(l)){var M=l.length;w.asyncIter(l,function(D,$,T){switch(y){case 1:h(D,$,M,T);break;case 2:h(D[0],D[1],$,M,T);break;case 3:h(D[0],D[1],D[2],$,M,T);break;default:D.push($,M,T),h.apply(this,D)}},x)}else w.asyncFor(l,function(D,$,T,g,C){h(D,$,T,g,C)},x)},asyncAll:function u(l,y,h,x){var I,D,M=0;function $(Z,le){M++,D[Z]=le,M===I&&x(null,D.join(""))}if(w.isArray(l))if(I=l.length,D=new Array(I),0===I)x(null,"");else for(var T=0;T<l.length;T++){var g=l[T];switch(y){case 1:h(g,T,I,$);break;case 2:h(g[0],g[1],T,I,$);break;case 3:h(g[0],g[1],g[2],T,I,$);break;default:g.push(T,I,$),h.apply(this,g)}}else{var C=w.keys(l||{});if(I=C.length,D=new Array(I),0===I)x(null,"");else for(var W=0;W<C.length;W++){var H=C[W];h(H,l[H],W,I,$)}}},inOperator:w.inOperator,fromIterator:function a(l){return"object"!=typeof l||null===l||w.isArray(l)?l:m&&Symbol.iterator in l?b(l):l}}},function(X,G,P){"use strict";function w(ee,te){for(var de=0;de<te.length;de++){var pe=te[de];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ee,m(pe.key),pe)}}function b(ee,te,de){return te&&w(ee.prototype,te),de&&w(ee,de),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function m(ee){var te=function c(ee,te){if("object"!=typeof ee||null===ee)return ee;var de=ee[Symbol.toPrimitive];if(void 0!==de){var pe=de.call(ee,te||"default");if("object"!=typeof pe)return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===te?String:Number)(ee)}(ee,"string");return"symbol"==typeof te?te:String(te)}function k(ee,te){ee.prototype=Object.create(te.prototype),ee.prototype.constructor=ee,E(ee,te)}function E(ee,te){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pe,ge){return pe.__proto__=ge,pe})(ee,te)}function R(ee,te,de){ee instanceof te&&de.push(ee),ee instanceof A&&ee.findAll(te,de)}var A=function(ee){function te(){return ee.apply(this,arguments)||this}k(te,ee);var de=te.prototype;return de.init=function(ge,be){for(var Te=arguments,Re=this,Be=arguments.length,Ye=new Array(Be>2?Be-2:0),Ke=2;Ke<Be;Ke++)Ye[Ke-2]=arguments[Ke];this.lineno=ge,this.colno=be,this.fields.forEach(function(Je,Ge){var Ue=Te[Ge+2];void 0===Ue&&(Ue=null),Re[Je]=Ue})},de.findAll=function(ge,be){var Te=this;return be=be||[],this instanceof t?this.children.forEach(function(Re){return R(Re,ge,be)}):this.fields.forEach(function(Re){return R(Te[Re],ge,be)}),be},de.iterFields=function(ge){var be=this;this.fields.forEach(function(Te){ge(be[Te],Te)})},te}(P(1).Obj),F=function(ee){function te(){return ee.apply(this,arguments)||this}return k(te,ee),b(te,[{key:"typename",get:function(){return"Value"}},{key:"fields",get:function(){return["value"]}}]),te}(A),t=function(ee){function te(){return ee.apply(this,arguments)||this}k(te,ee);var de=te.prototype;return de.init=function(ge,be,Te){ee.prototype.init.call(this,ge,be,Te||[])},de.addChild=function(ge){this.children.push(ge)},b(te,[{key:"typename",get:function(){return"NodeList"}},{key:"fields",get:function(){return["children"]}}]),te}(A),n=t.extend("Root"),i=F.extend("Literal"),_=F.extend("Symbol"),p=t.extend("Group"),v=t.extend("Array"),e=A.extend("Pair",{fields:["key","value"]}),s=t.extend("Dict"),u=A.extend("LookupVal",{fields:["target","val"]}),a=A.extend("If",{fields:["cond","body","else_"]}),l=a.extend("IfAsync"),y=A.extend("InlineIf",{fields:["cond","body","else_"]}),h=A.extend("For",{fields:["arr","name","body","else_"]}),x=h.extend("AsyncEach"),M=h.extend("AsyncAll"),I=A.extend("Macro",{fields:["name","args","body"]}),D=I.extend("Caller"),$=A.extend("Import",{fields:["template","target","withContext"]}),T=function(ee){function te(){return ee.apply(this,arguments)||this}return k(te,ee),te.prototype.init=function(ge,be,Te,Re,Be){ee.prototype.init.call(this,ge,be,Te,Re||new t,Be)},b(te,[{key:"typename",get:function(){return"FromImport"}},{key:"fields",get:function(){return["template","names","withContext"]}}]),te}(A),g=A.extend("FunCall",{fields:["name","args"]}),C=g.extend("Filter"),W=C.extend("FilterAsync",{fields:["name","args","symbol"]}),H=s.extend("KeywordArgs"),Z=A.extend("Block",{fields:["name","body"]}),le=A.extend("Super",{fields:["blockName","symbol"]}),ue=A.extend("TemplateRef",{fields:["template"]}).extend("Extends"),ce=A.extend("Include",{fields:["template","ignoreMissing"]}),re=A.extend("Set",{fields:["targets","value"]}),se=A.extend("Switch",{fields:["expr","cases","default"]}),J=A.extend("Case",{fields:["cond","body"]}),q=t.extend("Output"),Q=A.extend("Capture",{fields:["body"]}),he=i.extend("TemplateData"),ke=A.extend("UnaryOp",{fields:["target"]}),_e=A.extend("BinOp",{fields:["left","right"]}),we=_e.extend("In"),O=_e.extend("Is"),j=_e.extend("Or"),z=_e.extend("And"),Y=ke.extend("Not"),oe=_e.extend("Add"),ae=_e.extend("Concat"),ye=_e.extend("Sub"),fe=_e.extend("Mul"),Ee=_e.extend("Div"),Ae=_e.extend("FloorDiv"),xe=_e.extend("Mod"),Se=_e.extend("Pow"),We=ke.extend("Neg"),He=ke.extend("Pos"),ze=A.extend("Compare",{fields:["expr","ops"]}),De=A.extend("CompareOperand",{fields:["expr","type"]}),Fe=A.extend("CallExtension",{init:function(te,de,pe,ge){this.parent(),this.extName=te.__name||te,this.prop=de,this.args=pe||new t,this.contentArgs=ge||[],this.autoescape=te.autoescape},fields:["extName","prop","args","contentArgs"]}),je=Fe.extend("CallExtensionAsync");function Ie(ee,te,de){var pe=ee.split("\n");pe.forEach(function(ge,be){ge&&(de&&be>0||!de)&&process.stdout.write(" ".repeat(te)),process.stdout.write(ge+(be===pe.length-1?"":"\n"))})}X.exports={Node:A,Root:n,NodeList:t,Value:F,Literal:i,Symbol:_,Group:p,Array:v,Pair:e,Dict:s,Output:q,Capture:Q,TemplateData:he,If:a,IfAsync:l,InlineIf:y,For:h,AsyncEach:x,AsyncAll:M,Macro:I,Caller:D,Import:$,FromImport:T,FunCall:g,Filter:C,FilterAsync:W,KeywordArgs:H,Block:Z,Super:le,Extends:ue,Include:ce,Set:re,Switch:se,Case:J,LookupVal:u,BinOp:_e,In:we,Is:O,Or:j,And:z,Not:Y,Add:oe,Concat:ae,Sub:ye,Mul:fe,Div:Ee,FloorDiv:Ae,Mod:xe,Pow:Se,Neg:We,Pos:He,Compare:ze,CompareOperand:De,CallExtension:Fe,CallExtensionAsync:je,printNodes:function Me(ee,te){if(Ie(ee.typename+": ",te=te||0),ee instanceof t)Ie("\n"),ee.children.forEach(function(ge){Me(ge,te+2)});else if(ee instanceof Fe)Ie(ee.extName+"."+ee.prop+"\n"),ee.args&&Me(ee.args,te+2),ee.contentArgs&&ee.contentArgs.forEach(function(ge){Me(ge,te+2)});else{var de=[],pe=null;ee.iterFields(function(ge,be){ge instanceof A?de.push([be,ge]):(pe=pe||{})[be]=ge}),pe?Ie(JSON.stringify(pe,null,2)+"\n",null,!0):Ie("\n"),de.forEach(function(ge){var Te=ge[1];Ie("["+ge[0]+"] =>",te+2),Me(Te,te+4)})}}}},function(X,G){},function(X,G,P){"use strict";function w(i,_){i.prototype=Object.create(_.prototype),i.prototype.constructor=i,b(i,_)}function b(i,_){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,e){return v.__proto__=e,v})(i,_)}var m=P(8),c=P(17),k=P(3),K=P(0).TemplateError,R=P(2).Frame,A=P(1),t={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},n=function(i){function _(){return i.apply(this,arguments)||this}w(_,i);var p=_.prototype;return p.init=function(e,s){this.templateName=e,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this._scopeClosers="",this.inBlock=!1,this.throwOnUndefined=s},p.fail=function(e,s,u){throw void 0!==s&&(s+=1),void 0!==u&&(u+=1),new K(e,s,u)},p._pushBuffer=function(){var e=this._tmpid();return this.bufferStack.push(this.buffer),this.buffer=e,this._emit("var "+this.buffer+' = "";'),e},p._popBuffer=function(){this.buffer=this.bufferStack.pop()},p._emit=function(e){this.codebuf.push(e)},p._emitLine=function(e){this._emit(e+"\n")},p._emitLines=function(){for(var e=this,s=arguments.length,u=new Array(s),a=0;a<s;a++)u[a]=arguments[a];u.forEach(function(l){return e._emitLine(l)})},p._emitFuncBegin=function(e,s){this.buffer="output",this._scopeClosers="",this._emitLine("function "+s+"(env, context, frame, runtime, cb) {"),this._emitLine("var lineno = "+e.lineno+";"),this._emitLine("var colno = "+e.colno+";"),this._emitLine("var "+this.buffer+' = "";'),this._emitLine("try {")},p._emitFuncEnd=function(e){e||this._emitLine("cb(null, "+this.buffer+");"),this._closeScopeLevels(),this._emitLine("} catch (e) {"),this._emitLine("  cb(runtime.handleError(e, lineno, colno));"),this._emitLine("}"),this._emitLine("}"),this.buffer=null},p._addScopeLevel=function(){this._scopeClosers+="})"},p._closeScopeLevels=function(){this._emitLine(this._scopeClosers+";"),this._scopeClosers=""},p._withScopedSyntax=function(e){var s=this._scopeClosers;this._scopeClosers="",e.call(this),this._closeScopeLevels(),this._scopeClosers=s},p._makeCallback=function(e){var s=this._tmpid();return"function("+s+(e?","+e:"")+") {\nif("+s+") { cb("+s+"); return; }"},p._tmpid=function(){return this.lastId++,"t_"+this.lastId},p._templateName=function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},p._compileChildren=function(e,s){var u=this;e.children.forEach(function(a){u.compile(a,s)})},p._compileAggregate=function(e,s,u,a){var l=this;u&&this._emit(u),e.children.forEach(function(y,h){h>0&&l._emit(","),l.compile(y,s)}),a&&this._emit(a)},p._compileExpression=function(e,s){this.assertType(e,k.Literal,k.Symbol,k.Group,k.Array,k.Dict,k.FunCall,k.Caller,k.Filter,k.LookupVal,k.Compare,k.InlineIf,k.In,k.Is,k.And,k.Or,k.Not,k.Add,k.Concat,k.Sub,k.Mul,k.Div,k.FloorDiv,k.Mod,k.Pow,k.Neg,k.Pos,k.Compare,k.NodeList),this.compile(e,s)},p.assertType=function(e){for(var s=arguments.length,u=new Array(s>1?s-1:0),a=1;a<s;a++)u[a-1]=arguments[a];u.some(function(l){return e instanceof l})||this.fail("assertType: invalid type: "+e.typename,e.lineno,e.colno)},p.compileCallExtension=function(e,s,u){var a=this,l=e.args,y=e.contentArgs,h="boolean"!=typeof e.autoescape||e.autoescape;if(u||this._emit(this.buffer+" += runtime.suppressValue("),this._emit('env.getExtension("'+e.extName+'")["'+e.prop+'"]('),this._emit("context"),(l||y)&&this._emit(","),l&&(l instanceof k.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),l.children.forEach(function(M,I){a._compileExpression(M,s),(I!==l.children.length-1||y.length)&&a._emit(",")})),y.length&&y.forEach(function(M,I){if(I>0&&a._emit(","),M){a._emitLine("function(cb) {"),a._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var D=a._pushBuffer();a._withScopedSyntax(function(){a.compile(M,s),a._emitLine("cb(null, "+D+");")}),a._popBuffer(),a._emitLine("return "+D+";"),a._emitLine("}")}else a._emit("null")}),u){var x=this._tmpid();this._emitLine(", "+this._makeCallback(x)),this._emitLine(this.buffer+" += runtime.suppressValue("+x+", "+h+" && env.opts.autoescape);"),this._addScopeLevel()}else this._emit(")"),this._emit(", "+h+" && env.opts.autoescape);\n")},p.compileCallExtensionAsync=function(e,s){this.compileCallExtension(e,s,!0)},p.compileNodeList=function(e,s){this._compileChildren(e,s)},p.compileLiteral=function(e){if("string"==typeof e.value){var s=e.value.replace(/\\/g,"\\\\");s=(s=(s=(s=(s=s.replace(/"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t")).replace(/\u2028/g,"\\u2028"),this._emit('"'+s+'"')}else this._emit(null===e.value?"null":e.value.toString())},p.compileSymbol=function(e,s){var u=e.value,a=s.lookup(u);this._emit(a||'runtime.contextOrFrameLookup(context, frame, "'+u+'")')},p.compileGroup=function(e,s){this._compileAggregate(e,s,"(",")")},p.compileArray=function(e,s){this._compileAggregate(e,s,"[","]")},p.compileDict=function(e,s){this._compileAggregate(e,s,"{","}")},p.compilePair=function(e,s){var u=e.key,a=e.value;u instanceof k.Symbol?u=new k.Literal(u.lineno,u.colno,u.value):u instanceof k.Literal&&"string"==typeof u.value||this.fail("compilePair: Dict keys must be strings or names",u.lineno,u.colno),this.compile(u,s),this._emit(": "),this._compileExpression(a,s)},p.compileInlineIf=function(e,s){this._emit("("),this.compile(e.cond,s),this._emit("?"),this.compile(e.body,s),this._emit(":"),null!==e.else_?this.compile(e.else_,s):this._emit('""'),this._emit(")")},p.compileIn=function(e,s){this._emit("runtime.inOperator("),this.compile(e.left,s),this._emit(","),this.compile(e.right,s),this._emit(")")},p.compileIs=function(e,s){this._emit('env.getTest("'+(e.right.name?e.right.name.value:e.right.value)+'").call(context, '),this.compile(e.left,s),e.right.args&&(this._emit(","),this.compile(e.right.args,s)),this._emit(") === true")},p._binOpEmitter=function(e,s,u){this.compile(e.left,s),this._emit(u),this.compile(e.right,s)},p.compileOr=function(e,s){return this._binOpEmitter(e,s," || ")},p.compileAnd=function(e,s){return this._binOpEmitter(e,s," && ")},p.compileAdd=function(e,s){return this._binOpEmitter(e,s," + ")},p.compileConcat=function(e,s){return this._binOpEmitter(e,s,' + "" + ')},p.compileSub=function(e,s){return this._binOpEmitter(e,s," - ")},p.compileMul=function(e,s){return this._binOpEmitter(e,s," * ")},p.compileDiv=function(e,s){return this._binOpEmitter(e,s," / ")},p.compileMod=function(e,s){return this._binOpEmitter(e,s," % ")},p.compileNot=function(e,s){this._emit("!"),this.compile(e.target,s)},p.compileFloorDiv=function(e,s){this._emit("Math.floor("),this.compile(e.left,s),this._emit(" / "),this.compile(e.right,s),this._emit(")")},p.compilePow=function(e,s){this._emit("Math.pow("),this.compile(e.left,s),this._emit(", "),this.compile(e.right,s),this._emit(")")},p.compileNeg=function(e,s){this._emit("-"),this.compile(e.target,s)},p.compilePos=function(e,s){this._emit("+"),this.compile(e.target,s)},p.compileCompare=function(e,s){var u=this;this.compile(e.expr,s),e.ops.forEach(function(a){u._emit(" "+t[a.type]+" "),u.compile(a.expr,s)})},p.compileLookupVal=function(e,s){this._emit("runtime.memberLookup(("),this._compileExpression(e.target,s),this._emit("),"),this._compileExpression(e.val,s),this._emit(")")},p._getNodeName=function(e){switch(e.typename){case"Symbol":return e.value;case"FunCall":return"the return value of ("+this._getNodeName(e.name)+")";case"LookupVal":return this._getNodeName(e.target)+'["'+this._getNodeName(e.val)+'"]';case"Literal":return e.value.toString();default:return"--expression--"}},p.compileFunCall=function(e,s){this._emit("(lineno = "+e.lineno+", colno = "+e.colno+", "),this._emit("runtime.callWrap("),this._compileExpression(e.name,s),this._emit(', "'+this._getNodeName(e.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(e.args,s,"[","])"),this._emit(")")},p.compileFilter=function(e,s){var u=e.name;this.assertType(u,k.Symbol),this._emit('env.getFilter("'+u.value+'").call(context, '),this._compileAggregate(e.args,s),this._emit(")")},p.compileFilterAsync=function(e,s){var u=e.name,a=e.symbol.value;this.assertType(u,k.Symbol),s.set(a,a),this._emit('env.getFilter("'+u.value+'").call(context, '),this._compileAggregate(e.args,s),this._emitLine(", "+this._makeCallback(a)),this._addScopeLevel()},p.compileKeywordArgs=function(e,s){this._emit("runtime.makeKeywordArgs("),this.compileDict(e,s),this._emit(")")},p.compileSet=function(e,s){var u=this,a=[];e.targets.forEach(function(l){var h=s.lookup(l.value);null==h&&(h=u._tmpid(),u._emitLine("var "+h+";")),a.push(h)}),e.value?(this._emit(a.join(" = ")+" = "),this._compileExpression(e.value,s),this._emitLine(";")):(this._emit(a.join(" = ")+" = "),this.compile(e.body,s),this._emitLine(";")),e.targets.forEach(function(l,y){var h=a[y],x=l.value;u._emitLine('frame.set("'+x+'", '+h+", true);"),u._emitLine("if(frame.topLevel) {"),u._emitLine('context.setVariable("'+x+'", '+h+");"),u._emitLine("}"),"_"!==x.charAt(0)&&(u._emitLine("if(frame.topLevel) {"),u._emitLine('context.addExport("'+x+'", '+h+");"),u._emitLine("}"))})},p.compileSwitch=function(e,s){var u=this;this._emit("switch ("),this.compile(e.expr,s),this._emit(") {"),e.cases.forEach(function(a,l){u._emit("case "),u.compile(a.cond,s),u._emit(": "),u.compile(a.body,s),a.body.children.length&&u._emitLine("break;")}),e.default&&(this._emit("default:"),this.compile(e.default,s)),this._emit("}")},p.compileIf=function(e,s,u){var a=this;this._emit("if("),this._compileExpression(e.cond,s),this._emitLine(") {"),this._withScopedSyntax(function(){a.compile(e.body,s),u&&a._emit("cb()")}),e.else_?(this._emitLine("}\nelse {"),this._withScopedSyntax(function(){a.compile(e.else_,s),u&&a._emit("cb()")})):u&&(this._emitLine("}\nelse {"),this._emit("cb()")),this._emitLine("}")},p.compileIfAsync=function(e,s){this._emit("(function(cb) {"),this.compileIf(e,s,!0),this._emit("})("+this._makeCallback()),this._addScopeLevel()},p._emitLoopBindings=function(e,s,u,a){var l=this;[{name:"index",val:u+" + 1"},{name:"index0",val:u},{name:"revindex",val:a+" - "+u},{name:"revindex0",val:a+" - "+u+" - 1"},{name:"first",val:u+" === 0"},{name:"last",val:u+" === "+a+" - 1"},{name:"length",val:a}].forEach(function(h){l._emitLine('frame.set("loop.'+h.name+'", '+h.val+");")})},p.compileFor=function(e,s){var u=this,a=this._tmpid(),l=this._tmpid(),y=this._tmpid();if(s=s.push(),this._emitLine("frame = frame.push();"),this._emit("var "+y+" = "),this._compileExpression(e.arr,s),this._emitLine(";"),this._emit("if("+y+") {"),this._emitLine(y+" = runtime.fromIterator("+y+");"),e.name instanceof k.Array){this._emitLine("var "+a+";"),this._emitLine("if(runtime.isArray("+y+")) {"),this._emitLine("var "+l+" = "+y+".length;"),this._emitLine("for("+a+"=0; "+a+" < "+y+".length; "+a+"++) {"),e.name.children.forEach(function(T,g){var C=u._tmpid();u._emitLine("var "+C+" = "+y+"["+a+"]["+g+"];"),u._emitLine('frame.set("'+T+'", '+y+"["+a+"]["+g+"]);"),s.set(e.name.children[g].value,C)}),this._emitLoopBindings(e,y,a,l),this._withScopedSyntax(function(){u.compile(e.body,s)}),this._emitLine("}"),this._emitLine("} else {");var h=e.name.children,x=h[0],M=h[1],I=this._tmpid(),D=this._tmpid();s.set(x.value,I),s.set(M.value,D),this._emitLine(a+" = -1;"),this._emitLine("var "+l+" = runtime.keys("+y+").length;"),this._emitLine("for(var "+I+" in "+y+") {"),this._emitLine(a+"++;"),this._emitLine("var "+D+" = "+y+"["+I+"];"),this._emitLine('frame.set("'+x.value+'", '+I+");"),this._emitLine('frame.set("'+M.value+'", '+D+");"),this._emitLoopBindings(e,y,a,l),this._withScopedSyntax(function(){u.compile(e.body,s)}),this._emitLine("}"),this._emitLine("}")}else{var $=this._tmpid();s.set(e.name.value,$),this._emitLine("var "+l+" = "+y+".length;"),this._emitLine("for(var "+a+"=0; "+a+" < "+y+".length; "+a+"++) {"),this._emitLine("var "+$+" = "+y+"["+a+"];"),this._emitLine('frame.set("'+e.name.value+'", '+$+");"),this._emitLoopBindings(e,y,a,l),this._withScopedSyntax(function(){u.compile(e.body,s)}),this._emitLine("}")}this._emitLine("}"),e.else_&&(this._emitLine("if (!"+l+") {"),this.compile(e.else_,s),this._emitLine("}")),this._emitLine("frame = frame.pop();")},p._compileAsyncLoop=function(e,s,u){var a=this,l=this._tmpid(),y=this._tmpid(),h=this._tmpid(),x=u?"asyncAll":"asyncEach";if(s=s.push(),this._emitLine("frame = frame.push();"),this._emit("var "+h+" = runtime.fromIterator("),this._compileExpression(e.arr,s),this._emitLine(");"),e.name instanceof k.Array)this._emit("runtime."+x+"("+h+", "+e.name.children.length+", function("),e.name.children.forEach(function($){a._emit($.value+",")}),this._emit(l+","+y+",next) {"),e.name.children.forEach(function($){var T=$.value;s.set(T,T),a._emitLine('frame.set("'+T+'", '+T+");")});else{var I=e.name.value;this._emitLine("runtime."+x+"("+h+", 1, function("+I+", "+l+", "+y+",next) {"),this._emitLine('frame.set("'+I+'", '+I+");"),s.set(I,I)}this._emitLoopBindings(e,h,l,y),this._withScopedSyntax(function(){var $;u&&($=a._pushBuffer()),a.compile(e.body,s),a._emitLine("next("+l+($?","+$:"")+");"),u&&a._popBuffer()});var D=this._tmpid();this._emitLine("}, "+this._makeCallback(D)),this._addScopeLevel(),u&&this._emitLine(this.buffer+" += "+D+";"),e.else_&&(this._emitLine("if (!"+h+".length) {"),this.compile(e.else_,s),this._emitLine("}")),this._emitLine("frame = frame.pop();")},p.compileAsyncEach=function(e,s){this._compileAsyncLoop(e,s)},p.compileAsyncAll=function(e,s){this._compileAsyncLoop(e,s,!0)},p._compileMacro=function(e,s){var u=this,a=[],l=null,y="macro_"+this._tmpid(),h=void 0!==s;e.args.children.forEach(function(T,g){g===e.args.children.length-1&&T instanceof k.Dict?l=T:(u.assertType(T,k.Symbol),a.push(T))});var D,x=[].concat(a.map(function(T){return"l_"+T.value}),["kwargs"]),M=a.map(function(T){return'"'+T.value+'"'}),I=(l&&l.children||[]).map(function(T){return'"'+T.key.value+'"'});D=h?s.push(!0):new R,this._emitLines("var "+y+" = runtime.makeMacro(","["+M.join(", ")+"], ","["+I.join(", ")+"], ","function ("+x.join(", ")+") {","var callerFrame = frame;","frame = "+(h?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),a.forEach(function(T){u._emitLine('frame.set("'+T.value+'", l_'+T.value+");"),D.set(T.value,"l_"+T.value)}),l&&l.children.forEach(function(T){var g=T.key.value;u._emit('frame.set("'+g+'", '),u._emit('Object.prototype.hasOwnProperty.call(kwargs, "'+g+'")'),u._emit(' ? kwargs["'+g+'"] : '),u._compileExpression(T.value,D),u._emit(");")});var $=this._pushBuffer();return this._withScopedSyntax(function(){u.compile(e.body,D)}),this._emitLine("frame = "+(h?"frame.pop();":"callerFrame;")),this._emitLine("return new runtime.SafeString("+$+");"),this._emitLine("});"),this._popBuffer(),y},p.compileMacro=function(e,s){var u=this._compileMacro(e),a=e.name.value;s.set(a,u),s.parent?this._emitLine('frame.set("'+a+'", '+u+");"):("_"!==e.name.value.charAt(0)&&this._emitLine('context.addExport("'+a+'");'),this._emitLine('context.setVariable("'+a+'", '+u+");"))},p.compileCaller=function(e,s){this._emit("(function (){");var u=this._compileMacro(e,s);this._emit("return "+u+";})()")},p._compileGetTemplate=function(e,s,u,a){var l=this._tmpid(),y=this._templateName(),h=this._makeCallback(l),x=u?"true":"false",M=a?"true":"false";return this._emit("env.getTemplate("),this._compileExpression(e.template,s),this._emitLine(", "+x+", "+y+", "+M+", "+h),l},p.compileImport=function(e,s){var u=e.target.value,a=this._compileGetTemplate(e,s,!1,!1);this._addScopeLevel(),this._emitLine(a+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(a)),this._addScopeLevel(),s.set(u,a),this._emitLine(s.parent?'frame.set("'+u+'", '+a+");":'context.setVariable("'+u+'", '+a+");")},p.compileFromImport=function(e,s){var u=this,a=this._compileGetTemplate(e,s,!1,!1);this._addScopeLevel(),this._emitLine(a+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(a)),this._addScopeLevel(),e.names.children.forEach(function(l){var y,h,x=u._tmpid();l instanceof k.Pair?(y=l.key.value,h=l.value.value):h=y=l.value,u._emitLine("if(Object.prototype.hasOwnProperty.call("+a+', "'+y+'")) {'),u._emitLine("var "+x+" = "+a+"."+y+";"),u._emitLine("} else {"),u._emitLine("cb(new Error(\"cannot import '"+y+"'\")); return;"),u._emitLine("}"),s.set(h,x),u._emitLine(s.parent?'frame.set("'+h+'", '+x+");":'context.setVariable("'+h+'", '+x+");")})},p.compileBlock=function(e){var s=this._tmpid();this.inBlock||this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this._emit('context.getBlock("'+e.name.value+'")'),this.inBlock||this._emit(")"),this._emitLine("(env, context, frame, runtime, "+this._makeCallback(s)),this._emitLine(this.buffer+" += "+s+";"),this._addScopeLevel()},p.compileSuper=function(e,s){var u=e.blockName.value,a=e.symbol.value,l=this._makeCallback(a);this._emitLine('context.getSuper(env, "'+u+'", b_'+u+", frame, runtime, "+l),this._emitLine(a+" = runtime.markSafe("+a+");"),this._addScopeLevel(),s.set(a,a)},p.compileExtends=function(e,s){var u=this._tmpid(),a=this._compileGetTemplate(e,s,!0,!1);this._emitLine("parentTemplate = "+a),this._emitLine("for(var "+u+" in parentTemplate.blocks) {"),this._emitLine("context.addBlock("+u+", parentTemplate.blocks["+u+"]);"),this._emitLine("}"),this._addScopeLevel()},p.compileInclude=function(e,s){this._emitLine("var tasks = [];"),this._emitLine("tasks.push("),this._emitLine("function(callback) {");var u=this._compileGetTemplate(e,s,!1,e.ignoreMissing);this._emitLine("callback(null,"+u+");});"),this._emitLine("});");var a=this._tmpid();this._emitLine("tasks.push("),this._emitLine("function(template, callback){"),this._emitLine("template.render(context.getVariables(), frame, "+this._makeCallback(a)),this._emitLine("callback(null,"+a+");});"),this._emitLine("});"),this._emitLine("tasks.push("),this._emitLine("function(result, callback){"),this._emitLine(this.buffer+" += result;"),this._emitLine("callback(null);"),this._emitLine("});"),this._emitLine("env.waterfall(tasks, function(){"),this._addScopeLevel()},p.compileTemplateData=function(e,s){this.compileLiteral(e,s)},p.compileCapture=function(e,s){var u=this,a=this.buffer;this.buffer="output",this._emitLine("(function() {"),this._emitLine('var output = "";'),this._withScopedSyntax(function(){u.compile(e.body,s)}),this._emitLine("return output;"),this._emitLine("})()"),this.buffer=a},p.compileOutput=function(e,s){var u=this;e.children.forEach(function(l){l instanceof k.TemplateData?l.value&&(u._emit(u.buffer+" += "),u.compileLiteral(l,s),u._emitLine(";")):(u._emit(u.buffer+" += runtime.suppressValue("),u.throwOnUndefined&&u._emit("runtime.ensureDefined("),u.compile(l,s),u.throwOnUndefined&&u._emit(","+e.lineno+","+e.colno+")"),u._emit(", env.opts.autoescape);\n"))})},p.compileRoot=function(e,s){var u=this;s&&this.fail("compileRoot: root node can't have frame"),s=new R,this._emitFuncBegin(e,"root"),this._emitLine("var parentTemplate = null;"),this._compileChildren(e,s),this._emitLine("if(parentTemplate) {"),this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this._emitLine("} else {"),this._emitLine("cb(null, "+this.buffer+");"),this._emitLine("}"),this._emitFuncEnd(!0),this.inBlock=!0;var a=[],l=e.findAll(k.Block);l.forEach(function(y,h){var x=y.name.value;if(-1!==a.indexOf(x))throw new Error('Block "'+x+'" defined more than once.');a.push(x),u._emitFuncBegin(y,"b_"+x);var M=new R;u._emitLine("var frame = frame.push(true);"),u.compile(y.body,M),u._emitFuncEnd()}),this._emitLine("return {"),l.forEach(function(y,h){var x="b_"+y.name.value;u._emitLine(x+": "+x+",")}),this._emitLine("root: root\n};")},p.compile=function(e,s){var u=this["compile"+e.typename];u?u.call(this,e,s):this.fail("compile: Cannot compile node: "+e.typename,e.lineno,e.colno)},p.getCode=function(){return this.codebuf.join("")},_}(A.Obj);X.exports={compile:function(_,p,v,e,s){void 0===s&&(s={});var u=new n(e,s.throwOnUndefined),l=(v||[]).map(function(y){return y.preprocess}).filter(function(y){return!!y}).reduce(function(y,h){return h(y)},_);return u.compile(c.transform(m.parse(l,v,s),p,e)),u.getCode()},Compiler:n}},function(X,G,P){"use strict";function w(E,K){E.prototype=Object.create(K.prototype),E.prototype.constructor=E,b(E,K)}function b(E,K){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,A){return R.__proto__=A,R})(E,K)}var m=P(4),c=P(1);X.exports=function(E){function K(){return E.apply(this,arguments)||this}w(K,E);var V=K.prototype;return V.resolve=function(A,F){return m.resolve(m.dirname(A),F)},V.isRelative=function(A){return 0===A.indexOf("./")||0===A.indexOf("../")},K}(c.EmitterObj)},function(X,G,P){"use strict";function w(M,I){M.prototype=Object.create(I.prototype),M.prototype.constructor=M,b(M,I)}function b(M,I){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,T){return $.__proto__=T,$})(M,I)}var m=P(12),c=P(15),k=P(0),E=P(5),K=P(18),V=P(10),R=V.FileSystemLoader,A=V.WebLoader,F=V.PrecompiledLoader,t=P(20),n=P(21),i=P(1),_=i.Obj,p=i.EmitterObj,v=P(2),e=v.handleError,s=v.Frame,u=P(22);function a(M,I,D){m(function(){M(I,D)})}var l={type:"code",obj:{root:function(I,D,$,T,g){try{g(null,"")}catch(C){g(e(C,null,null))}}}},y=function(M){function I(){return M.apply(this,arguments)||this}w(I,M);var D=I.prototype;return D.init=function(T,g){var C=this;g=this.opts=g||{},this.opts.dev=!!g.dev,this.opts.autoescape=null==g.autoescape||g.autoescape,this.opts.throwOnUndefined=!!g.throwOnUndefined,this.opts.trimBlocks=!!g.trimBlocks,this.opts.lstripBlocks=!!g.lstripBlocks,this.loaders=[],T?this.loaders=k.isArray(T)?T:[T]:R?this.loaders=[new R("views")]:A&&(this.loaders=[new A("/views")]),typeof window<"u"&&window.nunjucksPrecompiled&&this.loaders.unshift(new F(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=n(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],k._entries(K).forEach(function(W){return C.addFilter(W[0],W[1])}),k._entries(t).forEach(function(W){return C.addTest(W[0],W[1])})},D._initLoaders=function(){var T=this;this.loaders.forEach(function(g){g.cache={},"function"==typeof g.on&&(g.on("update",function(C,W){g.cache[C]=null,T.emit("update",C,W,g)}),g.on("load",function(C,W){T.emit("load",C,W,g)}))})},D.invalidateCache=function(){this.loaders.forEach(function(T){T.cache={}})},D.addExtension=function(T,g){return g.__name=T,this.extensions[T]=g,this.extensionsList.push(g),this},D.removeExtension=function(T){var g=this.getExtension(T);g&&(this.extensionsList=k.without(this.extensionsList,g),delete this.extensions[T])},D.getExtension=function(T){return this.extensions[T]},D.hasExtension=function(T){return!!this.extensions[T]},D.addGlobal=function(T,g){return this.globals[T]=g,this},D.getGlobal=function(T){if(typeof this.globals[T]>"u")throw new Error("global not found: "+T);return this.globals[T]},D.addFilter=function(T,g,C){var W=g;return C&&this.asyncFilters.push(T),this.filters[T]=W,this},D.getFilter=function(T){if(!this.filters[T])throw new Error("filter not found: "+T);return this.filters[T]},D.addTest=function(T,g){return this.tests[T]=g,this},D.getTest=function(T){if(!this.tests[T])throw new Error("test not found: "+T);return this.tests[T]},D.resolveTemplate=function(T,g,C){return T.isRelative&&g&&T.isRelative(C)&&T.resolve?T.resolve(g,C):C},D.getTemplate=function(T,g,C,W,H){var re,Z=this,le=this,ie=null;if(T&&T.raw&&(T=T.raw),k.isFunction(C)&&(H=C,C=null,g=g||!1),k.isFunction(g)&&(H=g,g=!1),T instanceof x)ie=T;else{if("string"!=typeof T)throw new Error("template names must be a string: "+T);for(var ue=0;ue<this.loaders.length;ue++){var ce=this.loaders[ue];if(ie=ce.cache[this.resolveTemplate(ce,C,T)])break}}return ie?(g&&ie.compile(),H?void H(null,ie):ie):(k.asyncIter(this.loaders,function(J,q,Q,he){function ke(_e,we){_e?he(_e):we?(we.loader=J,he(null,we)):Q()}T=le.resolveTemplate(J,C,T),J.async?J.getSource(T,ke):ke(null,J.getSource(T))},function(q,Q){if(!Q&&!q&&!W&&(q=new Error("template not found: "+T)),q){if(H)return void H(q);throw q}var he;Q?(he=new x(Q.src,Z,Q.path,g),Q.noCache||(Q.loader.cache[T]=he)):he=new x(l,Z,"",g),H?H(null,he):re=he}),re)},D.express=function(T){return u(this,T)},D.render=function(T,g,C){k.isFunction(g)&&(C=g,g=null);var W=null;return this.getTemplate(T,function(H,Z){if(H&&C)a(C,H);else{if(H)throw H;W=Z.render(g,C)}}),W},D.renderString=function(T,g,C,W){return k.isFunction(C)&&(W=C,C={}),new x(T,this,(C=C||{}).path).render(g,W)},D.waterfall=function(T,g,C){return c(T,g,C)},I}(p),h=function(M){function I(){return M.apply(this,arguments)||this}w(I,M);var D=I.prototype;return D.init=function(T,g,C){var W=this;this.env=C||new y,this.ctx=k.extend({},T),this.blocks={},this.exported=[],k.keys(g).forEach(function(H){W.addBlock(H,g[H])})},D.lookup=function(T){return T in this.env.globals&&!(T in this.ctx)?this.env.globals[T]:this.ctx[T]},D.setVariable=function(T,g){this.ctx[T]=g},D.getVariables=function(){return this.ctx},D.addBlock=function(T,g){return this.blocks[T]=this.blocks[T]||[],this.blocks[T].push(g),this},D.getBlock=function(T){if(!this.blocks[T])throw new Error('unknown block "'+T+'"');return this.blocks[T][0]},D.getSuper=function(T,g,C,W,H,Z){var le=k.indexOf(this.blocks[g]||[],C),ie=this.blocks[g][le+1];if(-1===le||!ie)throw new Error('no super block available for "'+g+'"');ie(T,this,W,H,Z)},D.addExport=function(T){this.exported.push(T)},D.getExported=function(){var T=this,g={};return this.exported.forEach(function(C){g[C]=T.ctx[C]}),g},I}(_),x=function(M){function I(){return M.apply(this,arguments)||this}w(I,M);var D=I.prototype;return D.init=function(T,g,C,W){if(this.env=g||new y,k.isObject(T))switch(T.type){case"code":this.tmplProps=T.obj;break;case"string":this.tmplStr=T.obj;break;default:throw new Error("Unexpected template object type "+T.type+"; expected 'code', or 'string'")}else{if(!k.isString(T))throw new Error("src must be a string or an object describing the source");this.tmplStr=T}if(this.path=C,W)try{this._compile()}catch(H){throw k._prettifyError(this.path,this.env.opts.dev,H)}else this.compiled=!1},D.render=function(T,g,C){var W=this;"function"==typeof T?(C=T,T={}):"function"==typeof g&&(C=g,g=null);var H=!g;try{this.compile()}catch(re){var Z=k._prettifyError(this.path,this.env.opts.dev,re);if(C)return a(C,Z);throw Z}var le=new h(T||{},this.blocks,this.env),ie=g?g.push(!0):new s;ie.topLevel=!0;var ue=null,ce=!1;return this.rootRenderFunc(this.env,le,ie,v,function(re,se){if(!(ce&&C&&typeof se<"u"))if(re&&(re=k._prettifyError(W.path,W.env.opts.dev,re),ce=!0),C)H?a(C,re,se):C(re,se);else{if(re)throw re;ue=se}}),ue},D.getExported=function(T,g,C){"function"==typeof T&&(C=T,T={}),"function"==typeof g&&(C=g,g=null);try{this.compile()}catch(Z){if(C)return C(Z);throw Z}var W=g?g.push():new s;W.topLevel=!0;var H=new h(T||{},this.blocks,this.env);this.rootRenderFunc(this.env,H,W,v,function(Z){Z?C(Z,null):C(null,H.getExported())})},D.compile=function(){this.compiled||this._compile()},D._compile=function(){var T;if(this.tmplProps)T=this.tmplProps;else{var g=E.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);T=new Function(g)()}this.blocks=this._getBlocks(T),this.rootRenderFunc=T.root,this.compiled=!0},D._getBlocks=function(T){var g={};return k.keys(T).forEach(function(C){"b_"===C.slice(0,2)&&(g[C.slice(2)]=T[C])}),g},I}(_);X.exports={Environment:y,Template:x}},function(X,G,P){"use strict";function w(V,R){V.prototype=Object.create(R.prototype),V.prototype.constructor=V,b(V,R)}function b(V,R){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,t){return F.__proto__=t,F})(V,R)}var m=P(9),c=P(3),k=P(1).Obj,E=P(0),K=function(V){function R(){return V.apply(this,arguments)||this}w(R,V);var A=R.prototype;return A.init=function(t){this.tokens=t,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},A.nextToken=function(t){var n;if(this.peeked){if(t||this.peeked.type!==m.TOKEN_WHITESPACE)return n=this.peeked,this.peeked=null,n;this.peeked=null}if(n=this.tokens.nextToken(),!t)for(;n&&n.type===m.TOKEN_WHITESPACE;)n=this.tokens.nextToken();return n},A.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},A.pushToken=function(t){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=t},A.error=function(t,n,i){if(void 0===n||void 0===i){var _=this.peekToken()||{};n=_.lineno,i=_.colno}return void 0!==n&&(n+=1),void 0!==i&&(i+=1),new E.TemplateError(t,n,i)},A.fail=function(t,n,i){throw this.error(t,n,i)},A.skip=function(t){var n=this.nextToken();return!(!n||n.type!==t)||(this.pushToken(n),!1)},A.expect=function(t){var n=this.nextToken();return n.type!==t&&this.fail("expected "+t+", got "+n.type,n.lineno,n.colno),n},A.skipValue=function(t,n){var i=this.nextToken();return!(!i||i.type!==t||i.value!==n)||(this.pushToken(i),!1)},A.skipSymbol=function(t){return this.skipValue(m.TOKEN_SYMBOL,t)},A.advanceAfterBlockEnd=function(t){var n;return t||((n=this.peekToken())||this.fail("unexpected end of file"),n.type!==m.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),t=this.nextToken().value),(n=this.nextToken())&&n.type===m.TOKEN_BLOCK_END?"-"===n.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+t+" statement"),n},A.advanceAfterVariableEnd=function(){var t=this.nextToken();t&&t.type===m.TOKEN_VARIABLE_END?this.dropLeadingWhitespace="-"===t.value.charAt(t.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(t),this.fail("expected variable end"))},A.parseFor=function(){var n,i,t=this.peekToken();if(this.skipSymbol("for")?(n=new c.For(t.lineno,t.colno),i="endfor"):this.skipSymbol("asyncEach")?(n=new c.AsyncEach(t.lineno,t.colno),i="endeach"):this.skipSymbol("asyncAll")?(n=new c.AsyncAll(t.lineno,t.colno),i="endall"):this.fail("parseFor: expected for{Async}",t.lineno,t.colno),n.name=this.parsePrimary(),n.name instanceof c.Symbol||this.fail("parseFor: variable name expected for loop"),this.peekToken().type===m.TOKEN_COMMA){var p=n.name;for(n.name=new c.Array(p.lineno,p.colno),n.name.addChild(p);this.skip(m.TOKEN_COMMA);){var v=this.parsePrimary();n.name.addChild(v)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',t.lineno,t.colno),n.arr=this.parseExpression(),this.advanceAfterBlockEnd(t.value),n.body=this.parseUntilBlocks(i,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),n.else_=this.parseUntilBlocks(i)),this.advanceAfterBlockEnd(),n},A.parseMacro=function(){var t=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var n=this.parsePrimary(!0),i=this.parseSignature(),_=new c.Macro(t.lineno,t.colno,n,i);return this.advanceAfterBlockEnd(t.value),_.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),_},A.parseCall=function(){var t=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var n=this.parseSignature(!0)||new c.NodeList,i=this.parsePrimary();this.advanceAfterBlockEnd(t.value);var _=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var p=new c.Symbol(t.lineno,t.colno,"caller"),v=new c.Caller(t.lineno,t.colno,p,n,_),e=i.args.children;return e[e.length-1]instanceof c.KeywordArgs||e.push(new c.KeywordArgs),e[e.length-1].addChild(new c.Pair(t.lineno,t.colno,p,v)),new c.Output(t.lineno,t.colno,[i])},A.parseWithContext=function(){var t=this.peekToken(),n=null;return this.skipSymbol("with")?n=!0:this.skipSymbol("without")&&(n=!1),null!==n&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",t.lineno,t.colno)),n},A.parseImport=function(){var t=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",t.lineno,t.colno);var n=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',t.lineno,t.colno);var i=this.parseExpression(),_=this.parseWithContext(),p=new c.Import(t.lineno,t.colno,n,i,_);return this.advanceAfterBlockEnd(t.value),p},A.parseFrom=function(){var t=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var n=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",t.lineno,t.colno);for(var _,i=new c.NodeList;;){var p=this.peekToken();if(p.type===m.TOKEN_BLOCK_END){i.children.length||this.fail("parseFrom: Expected at least one import name",t.lineno,t.colno),"-"===p.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}i.children.length>0&&!this.skip(m.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",t.lineno,t.colno);var v=this.parsePrimary();if("_"===v.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",v.lineno,v.colno),this.skipSymbol("as")){var e=this.parsePrimary();i.addChild(new c.Pair(v.lineno,v.colno,v,e))}else i.addChild(v);_=this.parseWithContext()}return new c.FromImport(t.lineno,t.colno,n,i,_)},A.parseBlock=function(){var t=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",t.lineno,t.colno);var n=new c.Block(t.lineno,t.colno);n.name=this.parsePrimary(),n.name instanceof c.Symbol||this.fail("parseBlock: variable name expected",t.lineno,t.colno),this.advanceAfterBlockEnd(t.value),n.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(n.name.value);var i=this.peekToken();return i||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(i.value),n},A.parseExtends=function(){var t="extends",n=this.peekToken();this.skipSymbol(t)||this.fail("parseTemplateRef: expected "+t);var i=new c.Extends(n.lineno,n.colno);return i.template=this.parseExpression(),this.advanceAfterBlockEnd(n.value),i},A.parseInclude=function(){var t="include",n=this.peekToken();this.skipSymbol(t)||this.fail("parseInclude: expected "+t);var i=new c.Include(n.lineno,n.colno);return i.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(i.ignoreMissing=!0),this.advanceAfterBlockEnd(n.value),i},A.parseIf=function(){var n,t=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?n=new c.If(t.lineno,t.colno):this.skipSymbol("ifAsync")?n=new c.IfAsync(t.lineno,t.colno):this.fail("parseIf: expected if, elif, or elseif",t.lineno,t.colno),n.cond=this.parseExpression(),this.advanceAfterBlockEnd(t.value),n.body=this.parseUntilBlocks("elif","elseif","else","endif");var i=this.peekToken();switch(i&&i.value){case"elseif":case"elif":n.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),n.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":n.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return n},A.parseSet=function(){var t=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",t.lineno,t.colno);for(var i,n=new c.Set(t.lineno,t.colno,[]);(i=this.parsePrimary())&&(n.targets.push(i),this.skip(m.TOKEN_COMMA)););return this.skipValue(m.TOKEN_OPERATOR,"=")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(t.value)):this.skip(m.TOKEN_BLOCK_END)?(n.body=new c.Capture(t.lineno,t.colno,this.parseUntilBlocks("endset")),n.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",t.lineno,t.colno),n},A.parseSwitch=function(){var t="switch",n="endswitch",i="case",_="default",p=this.peekToken();!this.skipSymbol(t)&&!this.skipSymbol(i)&&!this.skipSymbol(_)&&this.fail('parseSwitch: expected "switch," "case" or "default"',p.lineno,p.colno);var v=this.parseExpression();this.advanceAfterBlockEnd(t),this.parseUntilBlocks(i,_,n);var u,e=this.peekToken(),s=[];do{this.skipSymbol(i);var a=this.parseExpression();this.advanceAfterBlockEnd(t);var l=this.parseUntilBlocks(i,_,n);s.push(new c.Case(e.line,e.col,a,l)),e=this.peekToken()}while(e&&e.value===i);switch(e.value){case _:this.advanceAfterBlockEnd(),u=this.parseUntilBlocks(n),this.advanceAfterBlockEnd();break;case n:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new c.Switch(p.lineno,p.colno,v,s,u)},A.parseStatement=function(){var t=this.peekToken();if(t.type!==m.TOKEN_SYMBOL&&this.fail("tag name expected",t.lineno,t.colno),this.breakOnBlocks&&-1!==E.indexOf(this.breakOnBlocks,t.value))return null;switch(t.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var i=0;i<this.extensions.length;i++){var _=this.extensions[i];if(-1!==E.indexOf(_.tags||[],t.value))return _.parse(this,c,m)}this.fail("unknown block tag: "+t.value,t.lineno,t.colno)}},A.parseRaw=function(t){for(var n="end"+(t=t||"raw"),i=new RegExp("([\\s\\S]*?){%\\s*("+t+"|"+n+")\\s*(?=%})%}"),_=1,p="",v=null,e=this.advanceAfterBlockEnd();(v=this.tokens._extractRegex(i))&&_>0;){var s=v[0],u=v[1],a=v[2];a===t?_+=1:a===n&&(_-=1),0===_?(p+=u,this.tokens.backN(s.length-u.length)):p+=s}return new c.Output(e.lineno,e.colno,[new c.TemplateData(e.lineno,e.colno,p)])},A.parsePostfix=function(t){for(var n,i=this.peekToken();i;){if(i.type===m.TOKEN_LEFT_PAREN)t=new c.FunCall(i.lineno,i.colno,t,this.parseSignature());else if(i.type===m.TOKEN_LEFT_BRACKET)(n=this.parseAggregate()).children.length>1&&this.fail("invalid index"),t=new c.LookupVal(i.lineno,i.colno,t,n.children[0]);else{if(i.type!==m.TOKEN_OPERATOR||"."!==i.value)break;this.nextToken();var _=this.nextToken();_.type!==m.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+_.value,_.lineno,_.colno),n=new c.Literal(_.lineno,_.colno,_.value),t=new c.LookupVal(i.lineno,i.colno,t,n)}i=this.peekToken()}return t},A.parseExpression=function(){return this.parseInlineIf()},A.parseInlineIf=function(){var t=this.parseOr();if(this.skipSymbol("if")){var n=this.parseOr(),i=t;(t=new c.InlineIf(t.lineno,t.colno)).body=i,t.cond=n,t.else_=this.skipSymbol("else")?this.parseOr():null}return t},A.parseOr=function(){for(var t=this.parseAnd();this.skipSymbol("or");){var n=this.parseAnd();t=new c.Or(t.lineno,t.colno,t,n)}return t},A.parseAnd=function(){for(var t=this.parseNot();this.skipSymbol("and");){var n=this.parseNot();t=new c.And(t.lineno,t.colno,t,n)}return t},A.parseNot=function(){var t=this.peekToken();return this.skipSymbol("not")?new c.Not(t.lineno,t.colno,this.parseNot()):this.parseIn()},A.parseIn=function(){for(var t=this.parseIs();;){var n=this.nextToken();if(!n)break;var i=n.type===m.TOKEN_SYMBOL&&"not"===n.value;if(i||this.pushToken(n),!this.skipSymbol("in")){i&&this.pushToken(n);break}var _=this.parseIs();t=new c.In(t.lineno,t.colno,t,_),i&&(t=new c.Not(t.lineno,t.colno,t))}return t},A.parseIs=function(){var t=this.parseCompare();if(this.skipSymbol("is")){var n=this.skipSymbol("not"),i=this.parseCompare();t=new c.Is(t.lineno,t.colno,t,i),n&&(t=new c.Not(t.lineno,t.colno,t))}return t},A.parseCompare=function(){for(var t=["==","===","!=","!==","<",">","<=",">="],n=this.parseConcat(),i=[];;){var _=this.nextToken();if(!_)break;if(-1===t.indexOf(_.value)){this.pushToken(_);break}i.push(new c.CompareOperand(_.lineno,_.colno,this.parseConcat(),_.value))}return i.length?new c.Compare(i[0].lineno,i[0].colno,n,i):n},A.parseConcat=function(){for(var t=this.parseAdd();this.skipValue(m.TOKEN_TILDE,"~");){var n=this.parseAdd();t=new c.Concat(t.lineno,t.colno,t,n)}return t},A.parseAdd=function(){for(var t=this.parseSub();this.skipValue(m.TOKEN_OPERATOR,"+");){var n=this.parseSub();t=new c.Add(t.lineno,t.colno,t,n)}return t},A.parseSub=function(){for(var t=this.parseMul();this.skipValue(m.TOKEN_OPERATOR,"-");){var n=this.parseMul();t=new c.Sub(t.lineno,t.colno,t,n)}return t},A.parseMul=function(){for(var t=this.parseDiv();this.skipValue(m.TOKEN_OPERATOR,"*");){var n=this.parseDiv();t=new c.Mul(t.lineno,t.colno,t,n)}return t},A.parseDiv=function(){for(var t=this.parseFloorDiv();this.skipValue(m.TOKEN_OPERATOR,"/");){var n=this.parseFloorDiv();t=new c.Div(t.lineno,t.colno,t,n)}return t},A.parseFloorDiv=function(){for(var t=this.parseMod();this.skipValue(m.TOKEN_OPERATOR,"//");){var n=this.parseMod();t=new c.FloorDiv(t.lineno,t.colno,t,n)}return t},A.parseMod=function(){for(var t=this.parsePow();this.skipValue(m.TOKEN_OPERATOR,"%");){var n=this.parsePow();t=new c.Mod(t.lineno,t.colno,t,n)}return t},A.parsePow=function(){for(var t=this.parseUnary();this.skipValue(m.TOKEN_OPERATOR,"**");){var n=this.parseUnary();t=new c.Pow(t.lineno,t.colno,t,n)}return t},A.parseUnary=function(t){var i,n=this.peekToken();return i=this.skipValue(m.TOKEN_OPERATOR,"-")?new c.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(m.TOKEN_OPERATOR,"+")?new c.Pos(n.lineno,n.colno,this.parseUnary(!0)):this.parsePrimary(),t||(i=this.parseFilter(i)),i},A.parsePrimary=function(t){var i,n=this.nextToken(),_=null;if(n?n.type===m.TOKEN_STRING?i=n.value:n.type===m.TOKEN_INT?i=parseInt(n.value,10):n.type===m.TOKEN_FLOAT?i=parseFloat(n.value):n.type===m.TOKEN_BOOLEAN?"true"===n.value?i=!0:"false"===n.value?i=!1:this.fail("invalid boolean: "+n.value,n.lineno,n.colno):n.type===m.TOKEN_NONE?i=null:n.type===m.TOKEN_REGEX&&(i=new RegExp(n.value.body,n.value.flags)):this.fail("expected expression, got end of file"),void 0!==i?_=new c.Literal(n.lineno,n.colno,i):n.type===m.TOKEN_SYMBOL?_=new c.Symbol(n.lineno,n.colno,n.value):(this.pushToken(n),_=this.parseAggregate()),t||(_=this.parsePostfix(_)),_)return _;throw this.error("unexpected token: "+n.value,n.lineno,n.colno)},A.parseFilterName=function(){for(var t=this.expect(m.TOKEN_SYMBOL),n=t.value;this.skipValue(m.TOKEN_OPERATOR,".");)n+="."+this.expect(m.TOKEN_SYMBOL).value;return new c.Symbol(t.lineno,t.colno,n)},A.parseFilterArgs=function(t){return this.peekToken().type===m.TOKEN_LEFT_PAREN?this.parsePostfix(t).args.children:[]},A.parseFilter=function(t){for(;this.skip(m.TOKEN_PIPE);){var n=this.parseFilterName();t=new c.Filter(n.lineno,n.colno,n,new c.NodeList(n.lineno,n.colno,[t].concat(this.parseFilterArgs(t))))}return t},A.parseFilterStatement=function(){var t=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var n=this.parseFilterName(),i=this.parseFilterArgs(n);this.advanceAfterBlockEnd(t.value);var _=new c.Capture(n.lineno,n.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var p=new c.Filter(n.lineno,n.colno,n,new c.NodeList(n.lineno,n.colno,[_].concat(i)));return new c.Output(n.lineno,n.colno,[p])},A.parseAggregate=function(){var n,t=this.nextToken();switch(t.type){case m.TOKEN_LEFT_PAREN:n=new c.Group(t.lineno,t.colno);break;case m.TOKEN_LEFT_BRACKET:n=new c.Array(t.lineno,t.colno);break;case m.TOKEN_LEFT_CURLY:n=new c.Dict(t.lineno,t.colno);break;default:return null}for(;;){var i=this.peekToken().type;if(i===m.TOKEN_RIGHT_PAREN||i===m.TOKEN_RIGHT_BRACKET||i===m.TOKEN_RIGHT_CURLY){this.nextToken();break}if(n.children.length>0&&(this.skip(m.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",t.lineno,t.colno)),n instanceof c.Dict){var _=this.parsePrimary();this.skip(m.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",t.lineno,t.colno);var p=this.parseExpression();n.addChild(new c.Pair(_.lineno,_.colno,_,p))}else{var v=this.parseExpression();n.addChild(v)}}return n},A.parseSignature=function(t,n){var i=this.peekToken();if(!n&&i.type!==m.TOKEN_LEFT_PAREN){if(t)return null;this.fail("expected arguments",i.lineno,i.colno)}i.type===m.TOKEN_LEFT_PAREN&&(i=this.nextToken());for(var _=new c.NodeList(i.lineno,i.colno),p=new c.KeywordArgs(i.lineno,i.colno),v=!1;;){if(i=this.peekToken(),!n&&i.type===m.TOKEN_RIGHT_PAREN){this.nextToken();break}if(n&&i.type===m.TOKEN_BLOCK_END)break;if(v&&!this.skip(m.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",i.lineno,i.colno);else{var e=this.parseExpression();this.skipValue(m.TOKEN_OPERATOR,"=")?p.addChild(new c.Pair(e.lineno,e.colno,e,this.parseExpression())):_.addChild(e)}v=!0}return p.children.length&&_.addChild(p),_},A.parseUntilBlocks=function(){for(var t=this.breakOnBlocks,n=arguments.length,i=new Array(n),_=0;_<n;_++)i[_]=arguments[_];this.breakOnBlocks=i;var p=this.parse();return this.breakOnBlocks=t,p},A.parseNodes=function(){for(var t,n=[];t=this.nextToken();)if(t.type===m.TOKEN_DATA){var i=t.value,_=this.peekToken(),p=_&&_.value;this.dropLeadingWhitespace&&(i=i.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),_&&(_.type===m.TOKEN_BLOCK_START&&"-"===p.charAt(p.length-1)||_.type===m.TOKEN_VARIABLE_START&&"-"===p.charAt(this.tokens.tags.VARIABLE_START.length)||_.type===m.TOKEN_COMMENT&&"-"===p.charAt(this.tokens.tags.COMMENT_START.length))&&(i=i.replace(/\s*$/,"")),n.push(new c.Output(t.lineno,t.colno,[new c.TemplateData(t.lineno,t.colno,i)]))}else if(t.type===m.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var v=this.parseStatement();if(!v)break;n.push(v)}else if(t.type===m.TOKEN_VARIABLE_START){var e=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),n.push(new c.Output(t.lineno,t.colno,[e]))}else t.type===m.TOKEN_COMMENT?this.dropLeadingWhitespace="-"===t.value.charAt(t.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail("Unexpected token at top-level: "+t.type,t.lineno,t.colno);return n},A.parse=function(){return new c.NodeList(0,0,this.parseNodes())},A.parseAsRoot=function(){return new c.Root(0,0,this.parseNodes())},R}(k);X.exports={parse:function(R,A,F){var t=new K(m.lex(R,F));return void 0!==A&&(t.extensions=A),t.parseAsRoot()},Parser:K}},function(X,G,P){"use strict";var w=P(0),b=" \n\t\r\xa0",m="()[]{}%*-+~/#,:|.<>=!",F="string",t="whitespace",n="data",i="block-start",_="block-end",p="variable-start",v="variable-end",e="comment",s="left-paren",u="right-paren",a="left-bracket",l="right-bracket",y="left-curly",h="right-curly",x="operator",M="comma",I="colon",D="tilde",$="pipe",g="float",C="boolean",W="none",H="symbol";function ie(ce,re,se,J){return{type:ce,value:re,lineno:se,colno:J}}var ue=function(){function ce(se,J){this.str=se,this.index=0,this.len=se.length,this.lineno=0,this.colno=0,this.in_code=!1;var q=(J=J||{}).tags||{};this.tags={BLOCK_START:q.blockStart||"{%",BLOCK_END:q.blockEnd||"%}",VARIABLE_START:q.variableStart||"{{",VARIABLE_END:q.variableEnd||"}}",COMMENT_START:q.commentStart||"{#",COMMENT_END:q.commentEnd||"#}"},this.trimBlocks=!!J.trimBlocks,this.lstripBlocks=!!J.lstripBlocks}var re=ce.prototype;return re.nextToken=function(){var Q,J=this.lineno,q=this.colno;if(this.in_code){var he=this.current();if(this.isFinished())return null;if('"'===he||"'"===he)return ie(F,this._parseString(he),J,q);if(Q=this._extract(b))return ie(t,Q,J,q);if((Q=this._extractString(this.tags.BLOCK_END))||(Q=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&("\n"===(he=this.current())?this.forward():"\r"===he&&(this.forward(),"\n"===(he=this.current())?this.forward():this.back())),ie(_,Q,J,q);if((Q=this._extractString(this.tags.VARIABLE_END))||(Q=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,ie(v,Q,J,q);if("r"===he&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var ke="";!this.isFinished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}ke+=this.current(),this.forward()}for(var _e=["g","i","m","y"],we="";!this.isFinished()&&-1!==_e.indexOf(this.current());)we+=this.current(),this.forward();return ie("regex",{body:ke,flags:we},J,q)}if(-1!==m.indexOf(he)){this.forward();var Y,j=["==","===","!=","!==","<=",">=","//","**"],z=he+this.current();switch(-1!==w.indexOf(j,z)&&(this.forward(),he=z,-1!==w.indexOf(j,z+this.current())&&(he=z+this.current(),this.forward())),he){case"(":Y=s;break;case")":Y=u;break;case"[":Y=a;break;case"]":Y=l;break;case"{":Y=y;break;case"}":Y=h;break;case",":Y=M;break;case":":Y=I;break;case"~":Y=D;break;case"|":Y=$;break;default:Y=x}return ie(Y,he,J,q)}if((Q=this._extractUntil(b+m)).match(/^[-+]?[0-9]+$/)){if("."===this.current()){this.forward();var oe=this._extract("0123456789");return ie(g,Q+"."+oe,J,q)}return ie("int",Q,J,q)}if(Q.match(/^(true|false)$/))return ie(C,Q,J,q);if("none"===Q)return ie(W,Q,J,q);if("null"===Q)return ie(W,Q,J,q);if(Q)return ie(H,Q,J,q);throw new Error("Unexpected value while parsing: "+Q)}var ae=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((Q=this._extractString(this.tags.BLOCK_START+"-"))||(Q=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,ie(i,Q,J,q);if((Q=this._extractString(this.tags.VARIABLE_START+"-"))||(Q=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,ie(p,Q,J,q);Q="";var ye,fe=!1;for(this._matches(this.tags.COMMENT_START)&&(fe=!0,Q=this._extractString(this.tags.COMMENT_START));null!==(ye=this._extractUntil(ae));){if(Q+=ye,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!fe){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=Q.length){var Ee=Q.slice(-this.colno);if(/^\s+$/.test(Ee)&&!(Q=Q.slice(0,-this.colno)).length)return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!fe)throw new Error("unexpected end of comment");Q+=this._extractString(this.tags.COMMENT_END);break}Q+=this.current(),this.forward()}if(null===ye&&fe)throw new Error("expected end of comment, got end of file");return ie(fe?e:n,Q,J,q)},re._parseString=function(J){this.forward();for(var q="";!this.isFinished()&&this.current()!==J;){var Q=this.current();if("\\"===Q){switch(this.forward(),this.current()){case"n":q+="\n";break;case"t":q+="\t";break;case"r":q+="\r";break;default:q+=this.current()}this.forward()}else q+=Q,this.forward()}return this.forward(),q},re._matches=function(J){return this.index+J.length>this.len?null:this.str.slice(this.index,this.index+J.length)===J},re._extractString=function(J){return this._matches(J)?(this.forwardN(J.length),J):null},re._extractUntil=function(J){return this._extractMatching(!0,J||"")},re._extract=function(J){return this._extractMatching(!1,J)},re._extractMatching=function(J,q){if(this.isFinished())return null;var Q=q.indexOf(this.current());if(J&&-1===Q||!J&&-1!==Q){var he=this.current();this.forward();for(var ke=q.indexOf(this.current());(J&&-1===ke||!J&&-1!==ke)&&!this.isFinished();)he+=this.current(),this.forward(),ke=q.indexOf(this.current());return he}return""},re._extractRegex=function(J){var q=this.currentStr().match(J);return q?(this.forwardN(q[0].length),q):null},re.isFinished=function(){return this.index>=this.len},re.forwardN=function(J){for(var q=0;q<J;q++)this.forward()},re.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},re.backN=function(J){for(var q=0;q<J;q++)this.back()},re.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var J=this.src.lastIndexOf("\n",this.index-1);this.colno=-1===J?this.index:this.index-J}else this.colno--},re.current=function(){return this.isFinished()?"":this.str.charAt(this.index)},re.currentStr=function(){return this.isFinished()?"":this.str.substr(this.index)},re.previous=function(){return this.str.charAt(this.index-1)},ce}();X.exports={lex:function(re,se){return new ue(re,se)},TOKEN_STRING:F,TOKEN_WHITESPACE:t,TOKEN_DATA:n,TOKEN_BLOCK_START:i,TOKEN_BLOCK_END:_,TOKEN_VARIABLE_START:p,TOKEN_VARIABLE_END:v,TOKEN_COMMENT:e,TOKEN_LEFT_PAREN:s,TOKEN_RIGHT_PAREN:u,TOKEN_LEFT_BRACKET:a,TOKEN_RIGHT_BRACKET:l,TOKEN_LEFT_CURLY:y,TOKEN_RIGHT_CURLY:h,TOKEN_OPERATOR:x,TOKEN_COMMA:M,TOKEN_COLON:I,TOKEN_TILDE:D,TOKEN_PIPE:$,TOKEN_INT:"int",TOKEN_FLOAT:g,TOKEN_BOOLEAN:C,TOKEN_NONE:W,TOKEN_SYMBOL:H,TOKEN_SPECIAL:"special",TOKEN_REGEX:"regex"}},function(X,G,P){"use strict";function w(K,V){K.prototype=Object.create(V.prototype),K.prototype.constructor=K,b(K,V)}function b(K,V){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,F){return A.__proto__=F,A})(K,V)}var m=P(6),k=P(19).PrecompiledLoader;X.exports={WebLoader:function(K){function V(A,F){var t;return(t=K.call(this)||this).baseURL=A||".",t.useCache=!!(F=F||{}).useCache,t.async=!!F.async,t}w(V,K);var R=V.prototype;return R.resolve=function(F,t){throw new Error("relative templates not support in the browser yet")},R.getSource=function(F,t){var _,n=this,i=this.useCache;return this.fetch(this.baseURL+"/"+F,function(p,v){if(p)if(t)t(p.content);else{if(404!==p.status)throw p.content;_=null}else n.emit("load",F,_={src:v,path:F,noCache:!i}),t&&t(null,_)}),_},R.fetch=function(F,t){if(typeof window>"u")throw new Error("WebLoader can only by used in a browser");var n=new XMLHttpRequest,i=!0;n.onreadystatechange=function(){4===n.readyState&&i&&(i=!1,0===n.status||200===n.status?t(null,n.responseText):t({status:n.status,content:n.responseText}))},F+=(-1===F.indexOf("?")?"?":"&")+"s="+(new Date).getTime(),n.open("GET",F,this.async),n.send()},V}(m),PrecompiledLoader:k}},function(X,G,P){"use strict";var i,w=P(0),b=P(7),m=b.Environment,c=b.Template,k=P(6),E=P(10),K=P(23),V=P(5),R=P(8),A=P(9),F=P(2),t=P(3),n=P(25);function _(p,v){var e;return v=v||{},w.isObject(p)&&(v=p,p=null),E.FileSystemLoader?e=new E.FileSystemLoader(p,{watch:v.watch,noCache:v.noCache}):E.WebLoader&&(e=new E.WebLoader(p,{useCache:v.web&&v.web.useCache,async:v.web&&v.web.async})),i=new m(e,v),v&&v.express&&i.express(v.express),i}X.exports={Environment:m,Template:c,Loader:k,FileSystemLoader:E.FileSystemLoader,NodeResolveLoader:E.NodeResolveLoader,PrecompiledLoader:E.PrecompiledLoader,WebLoader:E.WebLoader,compiler:V,parser:R,lexer:A,runtime:F,lib:w,nodes:t,installJinjaCompat:n,configure:_,reset:function(){i=void 0},compile:function(v,e,s,u){return i||_(),new c(v,e,s,u)},render:function(v,e,s){return i||_(),i.render(v,e,s)},renderString:function(v,e,s){return i||_(),i.renderString(v,e,s)},precompile:K?K.precompile:void 0,precompileString:K?K.precompileString:void 0}},function(X,G,P){"use strict";var w=P(13),b=[],m=[],c=w.makeRequestCallFromTimer(function k(){if(m.length)throw m.shift()});function E(V){var R;(R=b.length?b.pop():new K).task=V,w(R)}function K(){this.task=null}X.exports=E,K.prototype.call=function(){try{this.task.call()}catch(V){E.onerror?E.onerror(V):(m.push(V),c())}finally{this.task=null,b[b.length]=this}}},function(X,G,P){"use strict";(function(w){function b(n){m.length||k(),m[m.length]=n}X.exports=b;var k,m=[],E=0;function V(){for(;E<m.length;){var n=E;if(E+=1,m[n].call(),E>1024){for(var i=0,_=m.length-E;i<_;i++)m[i]=m[i+E];m.length-=E,E=0}}m.length=0,E=0}var R=typeof w<"u"?w:self,A=R.MutationObserver||R.WebKitMutationObserver;function t(n){return function(){var _=setTimeout(v,0),p=setInterval(v,50);function v(){clearTimeout(_),clearInterval(p),n()}}}k="function"==typeof A?function F(n){var i=1,_=new A(n),p=document.createTextNode("");return _.observe(p,{characterData:!0}),function(){p.data=i=-i}}(V):t(V),b.requestFlush=k,b.makeRequestCallFromTimer=t}).call(G,P(14))},function(X,G){var P;P=function(){return this}();try{P=P||Function("return this")()||(0,eval)("this")}catch{"object"==typeof window&&(P=window)}X.exports=P},function(X,G,P){var b;!function(m){"use strict";var c=function(){var R=Array.prototype.slice.call(arguments);"function"==typeof R[0]&&R[0].apply(null,R.splice(1))},k=function(R){"function"==typeof setImmediate?setImmediate(R):typeof process<"u"&&process.nextTick?process.nextTick(R):setTimeout(R,0)},K=Array.isArray||function(R){return"[object Array]"===Object.prototype.toString.call(R)},V=function(R,A,F){var t=F?k:c;if(A=A||function(){},!K(R)){var n=new Error("First argument to waterfall must be an array of functions");return A(n)}if(!R.length)return A();var i=function(_){return function(p){if(p)A.apply(null,arguments),A=function(){};else{var v=Array.prototype.slice.call(arguments,1),e=_.next();v.push(e?i(e):A),t(function(){_.apply(null,v)})}}};i(function(R){var A=function(F){var t=function(){return R.length&&R[F].apply(null,arguments),t.next()};return t.next=function(){return F<R.length-1?A(F+1):null},t};return A(0)}(R))()};void 0!==(b=function(){return V}.apply(G,[]))&&(X.exports=b)}()},function(X,G,P){"use strict";var m,w="object"==typeof Reflect?Reflect:null,b=w&&"function"==typeof w.apply?w.apply:function(l,y,h){return Function.prototype.apply.call(l,y,h)};m=w&&"function"==typeof w.ownKeys?w.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)};var k=Number.isNaN||function(l){return l!=l};function E(){E.init.call(this)}X.exports=E,X.exports.once=function e(a,l){return new Promise(function(y,h){function x(I){a.removeListener(l,M),h(I)}function M(){"function"==typeof a.removeListener&&a.removeListener("error",x),y([].slice.call(arguments))}u(a,l,M,{once:!0}),"error"!==l&&function s(a,l,y){"function"==typeof a.on&&u(a,"error",l,y)}(a,x,{once:!0})})},E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var K=10;function V(a){if("function"!=typeof a)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}function R(a){return void 0===a._maxListeners?E.defaultMaxListeners:a._maxListeners}function A(a,l,y,h){var x,M,I;if(V(y),void 0===(M=a._events)?(M=a._events=Object.create(null),a._eventsCount=0):(void 0!==M.newListener&&(a.emit("newListener",l,y.listener?y.listener:y),M=a._events),I=M[l]),void 0===I)I=M[l]=y,++a._eventsCount;else if("function"==typeof I?I=M[l]=h?[y,I]:[I,y]:h?I.unshift(y):I.push(y),(x=R(a))>0&&I.length>x&&!I.warned){I.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(l)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=a,D.type=l,D.count=I.length,function c(a){console&&console.warn&&console.warn(a)}(D)}return a}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t(a,l,y){var h={fired:!1,wrapFn:void 0,target:a,type:l,listener:y},x=F.bind(h);return x.listener=y,h.wrapFn=x,x}function n(a,l,y){var h=a._events;if(void 0===h)return[];var x=h[l];return void 0===x?[]:"function"==typeof x?y?[x.listener||x]:[x]:y?function v(a){for(var l=new Array(a.length),y=0;y<l.length;++y)l[y]=a[y].listener||a[y];return l}(x):_(x,x.length)}function i(a){var l=this._events;if(void 0!==l){var y=l[a];if("function"==typeof y)return 1;if(void 0!==y)return y.length}return 0}function _(a,l){for(var y=new Array(l),h=0;h<l;++h)y[h]=a[h];return y}function u(a,l,y,h){if("function"==typeof a.on)h.once?a.once(l,y):a.on(l,y);else{if("function"!=typeof a.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a);a.addEventListener(l,function x(M){h.once&&a.removeEventListener(l,x),y(M)})}}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return K},set:function(a){if("number"!=typeof a||a<0||k(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");K=a}}),E.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(l){if("number"!=typeof l||l<0||k(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},E.prototype.getMaxListeners=function(){return R(this)},E.prototype.emit=function(l){for(var y=[],h=1;h<arguments.length;h++)y.push(arguments[h]);var x="error"===l,M=this._events;if(void 0!==M)x=x&&void 0===M.error;else if(!x)return!1;if(x){var I;if(y.length>0&&(I=y[0]),I instanceof Error)throw I;var D=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw D.context=I,D}var $=M[l];if(void 0===$)return!1;if("function"==typeof $)b($,this,y);else{var T=$.length,g=_($,T);for(h=0;h<T;++h)b(g[h],this,y)}return!0},E.prototype.on=E.prototype.addListener=function(l,y){return A(this,l,y,!1)},E.prototype.prependListener=function(l,y){return A(this,l,y,!0)},E.prototype.once=function(l,y){return V(y),this.on(l,t(this,l,y)),this},E.prototype.prependOnceListener=function(l,y){return V(y),this.prependListener(l,t(this,l,y)),this},E.prototype.off=E.prototype.removeListener=function(l,y){var h,x,M,I,D;if(V(y),void 0===(x=this._events))return this;if(void 0===(h=x[l]))return this;if(h===y||h.listener===y)0==--this._eventsCount?this._events=Object.create(null):(delete x[l],x.removeListener&&this.emit("removeListener",l,h.listener||y));else if("function"!=typeof h){for(M=-1,I=h.length-1;I>=0;I--)if(h[I]===y||h[I].listener===y){D=h[I].listener,M=I;break}if(M<0)return this;0===M?h.shift():function p(a,l){for(;l+1<a.length;l++)a[l]=a[l+1];a.pop()}(h,M),1===h.length&&(x[l]=h[0]),void 0!==x.removeListener&&this.emit("removeListener",l,D||y)}return this},E.prototype.removeAllListeners=function(l){var y,h,x;if(void 0===(h=this._events))return this;if(void 0===h.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==h[l]&&(0==--this._eventsCount?this._events=Object.create(null):delete h[l]),this;if(0===arguments.length){var I,M=Object.keys(h);for(x=0;x<M.length;++x)"removeListener"!==(I=M[x])&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(y=h[l]))this.removeListener(l,y);else if(void 0!==y)for(x=y.length-1;x>=0;x--)this.removeListener(l,y[x]);return this},E.prototype.listeners=function(l){return n(this,l,!0)},E.prototype.rawListeners=function(l){return n(this,l,!1)},E.listenerCount=function(a,l){return"function"==typeof a.listenerCount?a.listenerCount(l):i.call(a,l)},E.prototype.listenerCount=i,E.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},function(X,G,P){"use strict";var w=P(3),b=P(0),m=0;function c(){return"hole_"+m++}function k(i,_){for(var p=null,v=0;v<i.length;v++){var e=_(i[v]);e!==i[v]&&(p||(p=i.slice()),p[v]=e)}return p||i}function E(i,_,p){if(!(i instanceof w.Node))return i;if(!p){var v=_(i);if(v&&v!==i)return v}if(i instanceof w.NodeList){var e=k(i.children,function(y){return E(y,_,p)});e!==i.children&&(i=new w[i.typename](i.lineno,i.colno,e))}else if(i instanceof w.CallExtension){var s=E(i.args,_,p),u=k(i.contentArgs,function(y){return E(y,_,p)});(s!==i.args||u!==i.contentArgs)&&(i=new w[i.typename](i.extName,i.prop,s,u))}else{var a=i.fields.map(function(y){return i[y]}),l=k(a,function(y){return E(y,_,p)});l!==a&&(i=new w[i.typename](i.lineno,i.colno),l.forEach(function(y,h){i[i.fields[h]]=y}))}return p&&_(i)||i}function K(i,_){return E(i,_,!0)}function V(i,_,p){var v=[],e=K(p?i[p]:i,function(s){var u;return s instanceof w.Block?s:((s instanceof w.Filter&&-1!==b.indexOf(_,s.name.value)||s instanceof w.CallExtensionAsync)&&(u=new w.Symbol(s.lineno,s.colno,c()),v.push(new w.FilterAsync(s.lineno,s.colno,s.name,s.args,u))),u)});return p?i[p]=e:i=e,v.length?(v.push(i),new w.NodeList(i.lineno,i.colno,v)):i}function t(i,_){return function F(i){return K(i,function(_){if(_ instanceof w.If||_ instanceof w.For){var p=!1;if(E(_,function(v){if(v instanceof w.FilterAsync||v instanceof w.IfAsync||v instanceof w.AsyncEach||v instanceof w.AsyncAll||v instanceof w.CallExtensionAsync)return p=!0,v}),p){if(_ instanceof w.If)return new w.IfAsync(_.lineno,_.colno,_.cond,_.body,_.else_);if(_ instanceof w.For&&!(_ instanceof w.AsyncAll))return new w.AsyncEach(_.lineno,_.colno,_.arr,_.name,_.body,_.else_)}}})}(function A(i){return E(i,function(_){if(_ instanceof w.Block){var p=!1,v=c();_.body=E(_.body,function(e){if(e instanceof w.FunCall&&"super"===e.name.value)return p=!0,new w.Symbol(e.lineno,e.colno,v)}),p&&_.body.children.unshift(new w.Super(0,0,_.name,new w.Symbol(0,0,v)))}})}(function R(i,_){return K(i,function(p){return p instanceof w.Output?V(p,_):p instanceof w.Set?V(p,_,"value"):p instanceof w.For?V(p,_,"arr"):p instanceof w.If?V(p,_,"cond"):p instanceof w.CallExtension?V(p,_,"args"):void 0})}(i,_)))}X.exports={transform:function n(i,_){return t(i,_||[])}}},function(X,m,P){"use strict";var w=P(0),b=P(2);function c(O,j){return null==O||!1===O?j:O}function k(O){return O!=O}function K(O){var j=(O=c(O,"")).toLowerCase();return b.copySafeness(O,j.charAt(0).toUpperCase()+j.slice(1))}function a(O){if(w.isString(O))return O.split("");if(w.isObject(O))return w._entries(O||{}).map(function(j){return{key:j[0],value:j[1]}});if(w.isArray(O))return O;throw new w.TemplateError("list filter: type not iterable")}function x(O){return function j(z,Y,oe){void 0===Y&&(Y="truthy");var ae=this,ye=ae.env.getTest(Y);return w.toArray(z).filter(function(Ee){return ye.call(ae,Ee,oe)===O})}}function le(O){return b.copySafeness(O,O.replace(/^\s*|\s*$/g,""))}(m=X.exports={}).abs=Math.abs,m.batch=function E(O,j,z){var Y,oe=[],ae=[];for(Y=0;Y<O.length;Y++)Y%j==0&&ae.length&&(oe.push(ae),ae=[]),ae.push(O[Y]);if(ae.length){if(z)for(Y=ae.length;Y<j;Y++)ae.push(z);oe.push(ae)}return oe},m.capitalize=K,m.center=function V(O,j){if((O=c(O,"")).length>=(j=j||80))return O;var z=j-O.length,Y=w.repeat(" ",z/2-z%2),oe=w.repeat(" ",z/2);return b.copySafeness(O,Y+O+oe)},m.default=function R(O,j,z){return z?O||j:void 0!==O?O:j},m.dictsort=function A(O,j,z){if(!w.isObject(O))throw new w.TemplateError("dictsort filter: val must be an object");var ae,Y=[];for(var oe in O)Y.push([oe,O[oe]]);if(void 0===z||"key"===z)ae=0;else{if("value"!==z)throw new w.TemplateError("dictsort filter: You can only sort by either key or value");ae=1}return Y.sort(function(ye,fe){var Ee=ye[ae],Ae=fe[ae];return j||(w.isString(Ee)&&(Ee=Ee.toUpperCase()),w.isString(Ae)&&(Ae=Ae.toUpperCase())),Ee>Ae?1:Ee===Ae?0:-1}),Y},m.dump=function F(O,j){return JSON.stringify(O,null,j)},m.escape=function t(O){return O instanceof b.SafeString?O:b.markSafe(w.escape((O=O??"").toString()))},m.safe=function n(O){return O instanceof b.SafeString?O:b.markSafe((O=O??"").toString())},m.first=function i(O){return O[0]},m.forceescape=function _(O){return b.markSafe(w.escape((O=O??"").toString()))},m.groupby=function p(O,j){return w.groupBy(O,j,this.env.opts.throwOnUndefined)},m.indent=function v(O,j,z){if(""===(O=c(O,"")))return"";j=j||4;var Y=O.split("\n"),oe=w.repeat(" ",j),ae=Y.map(function(ye,fe){return 0!==fe||z?""+oe+ye:ye}).join("\n");return b.copySafeness(O,ae)},m.join=function e(O,j,z){return j=j||"",z&&(O=w.map(O,function(Y){return Y[z]})),O.join(j)},m.last=function s(O){return O[O.length-1]},m.length=function u(O){var j=c(O,"");return void 0!==j?"function"==typeof Map&&j instanceof Map||"function"==typeof Set&&j instanceof Set?j.size:!w.isObject(j)||j instanceof b.SafeString?j.length:w.keys(j).length:0},m.list=a,m.lower=function l(O){return(O=c(O,"")).toLowerCase()},m.nl2br=function y(O){return null==O?"":b.copySafeness(O,O.replace(/\r\n|\n/g,"<br />\n"))},m.random=function h(O){return O[Math.floor(Math.random()*O.length)]},m.reject=x(!1),m.rejectattr=function M(O,j){return O.filter(function(z){return!z[j]})},m.select=x(!0),m.selectattr=function I(O,j){return O.filter(function(z){return!!z[j]})},m.replace=function D(O,j,z,Y){var oe=O;if(j instanceof RegExp)return O.replace(j,z);typeof Y>"u"&&(Y=-1);var ae="";if("number"==typeof j)j=""+j;else if("string"!=typeof j)return O;if("number"==typeof O&&(O=""+O),"string"!=typeof O&&!(O instanceof b.SafeString))return O;if(""===j)return ae=z+O.split("").join(z)+z,b.copySafeness(O,ae);var ye=O.indexOf(j);if(0===Y||-1===ye)return O;for(var fe=0,Ee=0;ye>-1&&(-1===Y||Ee<Y);)ae+=O.substring(fe,ye)+z,Ee++,ye=O.indexOf(j,fe=ye+j.length);return fe<O.length&&(ae+=O.substring(fe)),b.copySafeness(oe,ae)},m.reverse=function $(O){var j;return(j=w.isString(O)?a(O):w.map(O,function(z){return z})).reverse(),w.isString(O)?b.copySafeness(O,j.join("")):j},m.round=function T(O,j,z){j=j||0;var Y=Math.pow(10,j);return("ceil"===z?Math.ceil:"floor"===z?Math.floor:Math.round)(O*Y)/Y},m.slice=function g(O,j,z){for(var Y=Math.floor(O.length/j),oe=O.length%j,ae=[],ye=0,fe=0;fe<j;fe++){var Ee=ye+fe*Y;fe<oe&&ye++;var xe=O.slice(Ee,ye+(fe+1)*Y);z&&fe>=oe&&xe.push(z),ae.push(xe)}return ae},m.sum=function C(O,j,z){return void 0===z&&(z=0),j&&(O=w.map(O,function(Y){return Y[j]})),z+O.reduce(function(Y,oe){return Y+oe},0)},m.sort=b.makeMacro(["value","reverse","case_sensitive","attribute"],[],function(j,z,Y,oe){var ae=this,ye=w.map(j,function(Ee){return Ee}),fe=w.getAttrGetter(oe);return ye.sort(function(Ee,Ae){var xe=oe?fe(Ee):Ee,Se=oe?fe(Ae):Ae;if(ae.env.opts.throwOnUndefined&&oe&&(void 0===xe||void 0===Se))throw new TypeError('sort: attribute "'+oe+'" resolved to undefined');return!Y&&w.isString(xe)&&w.isString(Se)&&(xe=xe.toLowerCase(),Se=Se.toLowerCase()),xe<Se?z?1:-1:xe>Se?z?-1:1:0}),ye}),m.string=function W(O){return b.copySafeness(O,O)},m.striptags=function H(O,j){var oe,Y=le((O=c(O,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,""));return oe=j?Y.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):Y.replace(/\s+/gi," "),b.copySafeness(O,oe)},m.title=function Z(O){var j=(O=c(O,"")).split(" ").map(function(z){return K(z)});return b.copySafeness(O,j.join(" "))},m.trim=le,m.truncate=function ie(O,j,z,Y){var oe=O;if((O=c(O,"")).length<=(j=j||255))return O;if(z)O=O.substring(0,j);else{var ae=O.lastIndexOf(" ",j);-1===ae&&(ae=j),O=O.substring(0,ae)}return b.copySafeness(oe,O+=Y??"...")},m.upper=function ue(O){return(O=c(O,"")).toUpperCase()},m.urlencode=function ce(O){var j=encodeURIComponent;return w.isString(O)?j(O):(w.isArray(O)?O:w._entries(O)).map(function(Y){var ae=Y[1];return j(Y[0])+"="+j(ae)}).join("&")};var re=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,se=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,J=/^https?:\/\/.*$/,q=/^www\./,Q=/\.(?:org|net|com)(?:\:|\/|$)/;m.urlize=function he(O,j,z){k(j)&&(j=1/0);var Y=!0===z?' rel="nofollow"':"";return O.split(/(\s+)/).filter(function(ae){return ae&&ae.length}).map(function(ae){var ye=ae.match(re),fe=ye?ye[1]:ae,Ee=fe.substr(0,j);return J.test(fe)?'<a href="'+fe+'"'+Y+">"+Ee+"</a>":q.test(fe)?'<a href="http://'+fe+'"'+Y+">"+Ee+"</a>":se.test(fe)?'<a href="mailto:'+fe+'">'+fe+"</a>":Q.test(fe)?'<a href="http://'+fe+'"'+Y+">"+Ee+"</a>":ae}).join("")},m.wordcount=function ke(O){var j=(O=c(O,""))?O.match(/\w+/g):null;return j?j.length:null},m.float=function _e(O,j){var z=parseFloat(O);return k(z)?j:z};var we=b.makeMacro(["value","default","base"],[],function(j,z,Y){void 0===Y&&(Y=10);var oe=parseInt(j,Y);return k(oe)?z:oe});m.int=we,m.d=m.default,m.e=m.escape},function(X,G,P){"use strict";function w(k,E){k.prototype=Object.create(E.prototype),k.prototype.constructor=k,b(k,E)}function b(k,E){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,R){return V.__proto__=R,V})(k,E)}var m=P(6);X.exports={PrecompiledLoader:function(k){function E(V){var R;return(R=k.call(this)||this).precompiled=V||{},R}return w(E,k),E.prototype.getSource=function(R){return this.precompiled[R]?{src:{type:"code",obj:this.precompiled[R]},path:R}:null},E}(m)}},function(X,G,P){"use strict";var w=P(2).SafeString;G.callable=function b(h){return"function"==typeof h},G.defined=function m(h){return void 0!==h},G.divisibleby=function c(h,x){return h%x==0},G.escaped=function k(h){return h instanceof w},G.equalto=function E(h,x){return h===x},G.eq=G.equalto,G.sameas=G.equalto,G.even=function K(h){return h%2==0},G.falsy=function V(h){return!h},G.ge=function R(h,x){return h>=x},G.greaterthan=function A(h,x){return h>x},G.gt=G.greaterthan,G.le=function F(h,x){return h<=x},G.lessthan=function t(h,x){return h<x},G.lt=G.lessthan,G.lower=function n(h){return h.toLowerCase()===h},G.ne=function i(h,x){return h!==x},G.null=function _(h){return null===h},G.number=function p(h){return"number"==typeof h},G.odd=function v(h){return h%2==1},G.string=function e(h){return"string"==typeof h},G.truthy=function s(h){return!!h},G.undefined=function u(h){return void 0===h},G.upper=function a(h){return h.toUpperCase()===h},G.iterable=function l(h){return typeof Symbol<"u"?!!h[Symbol.iterator]:Array.isArray(h)||"string"==typeof h},G.mapping=function y(h){var x=null!=h&&"object"==typeof h&&!Array.isArray(h);return Set?x&&!(h instanceof Set):x}},function(X,G,P){"use strict";X.exports=function m(){return{range:function(k,E,K){typeof E>"u"?(E=k,k=0,K=1):K||(K=1);var V=[];if(K>0)for(var R=k;R<E;R+=K)V.push(R);else for(var A=k;A>E;A+=K)V.push(A);return V},cycler:function(){return function w(c){var k=-1;return{current:null,reset:function(){k=-1,this.current=null},next:function(){return++k>=c.length&&(k=0),this.current=c[k],this.current}}}(Array.prototype.slice.call(arguments))},joiner:function(k){return function b(c){c=c||",";var k=!0;return function(){var E=k?"":c;return k=!1,E}}(k)}}}},function(X,G,P){var w=P(4);X.exports=function(m,c){function k(E,K){if(this.name=E,this.path=E,this.defaultEngine=K.defaultEngine,this.ext=w.extname(E),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return k.prototype.render=function(K,V){m.render(this.name,K,V)},c.set("view",k),c.set("nunjucksEnv",m),m}},function(X,G,P){"use strict";var w=P(4),b=P(4),c=P(0)._prettifyError,k=P(5),K=P(7).Environment,V=P(24);function R(n,i){return!!Array.isArray(i)&&i.some(function(_){return n.match(_)})}function A(n,i){(i=i||{}).isString=!0;var _=i.env||new K([]),p=i.wrapper||V;if(!i.name)throw new Error('the "name" option is required when compiling a string');return p([t(n,i.name,_)],i)}function t(n,i,_){var e,p=(_=_||new K([])).asyncFilters,v=_.extensionsList;i=i.replace(/\\/g,"/");try{e=k.compile(n,p,v,i,_.opts)}catch(s){throw c(i,!1,s)}return{name:i,template:e}}X.exports={precompile:function F(n,i){var _=(i=i||{}).env||new K([]),p=i.wrapper||V;if(i.isString)return A(n,i);var v=w.existsSync(n)&&w.statSync(n),e=[],s=[];if(v.isFile())e.push(t(w.readFileSync(n,"utf-8"),i.name||n,_));else if(v.isDirectory()){!function u(y){w.readdirSync(y).forEach(function(h){var x=b.join(y,h),M=x.substr(b.join(n,"/").length),I=w.statSync(x);I&&I.isDirectory()?R(M+="/",i.exclude)||u(x):R(M,i.include)&&s.push(x)})}(n);for(var a=0;a<s.length;a++){var l=s[a].replace(b.join(n,"/"),"");try{e.push(t(w.readFileSync(s[a],"utf-8"),l,_))}catch(y){if(!i.force)throw y;console.error(y)}}}return p(e,i)},precompileString:A}},function(X,G,P){"use strict";X.exports=function w(b,m){var c="";m=m||{};for(var k=0;k<b.length;k++){var E=JSON.stringify(b[k].name);c+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+E+"] = (function() {\n"+b[k].template+"\n})();\n",m.asFunction&&(c+="return function(ctx, cb) { return nunjucks.render("+E+", ctx, cb); }\n"),c+="})();\n"}return c}},function(X,G,P){X.exports=function w(){"use strict";var A,F,b=this.runtime,m=this.lib,c=this.compiler.Compiler,k=this.parser.Parser,E=this.nodes,K=this.lexer,V=b.contextOrFrameLookup,R=b.memberLookup;function n(s){return{index:s.index,lineno:s.lineno,colno:s.colno}}if(c&&(A=c.prototype.assertType),k&&(F=k.prototype.parseAggregate),b.contextOrFrameLookup=function(u,a,l){var y=V.apply(this,arguments);if(void 0!==y)return y;switch(l){case"True":return!0;case"False":return!1;case"None":return null;default:return}},E&&c&&k){var i=E.Node.extend("Slice",{fields:["start","stop","step"],init:function(u,a,l,y,h){l=l||new E.Literal(u,a,null),y=y||new E.Literal(u,a,null),h=h||new E.Literal(u,a,1),this.parent(u,a,l,y,h)}});c.prototype.assertType=function(u){u instanceof i||A.apply(this,arguments)},c.prototype.compileSlice=function(u,a){this._emit("("),this._compileExpression(u.start,a),this._emit("),("),this._compileExpression(u.stop,a),this._emit("),("),this._compileExpression(u.step,a),this._emit(")")},k.prototype.parseAggregate=function(){var u=this,a=n(this.tokens);a.colno--,a.index--;try{return F.apply(this)}catch($){var l=n(this.tokens),y=function(){return m._assign(u.tokens,l),$};m._assign(this.tokens,a),this.peeked=!1;var h=this.peekToken();if(h.type!==K.TOKEN_LEFT_BRACKET)throw y();this.nextToken();for(var x=new i(h.lineno,h.colno),M=!1,I=0;I<=x.fields.length&&!this.skip(K.TOKEN_RIGHT_BRACKET);I++){if(I===x.fields.length){if(!M)break;this.fail("parseSlice: too many slice components",h.lineno,h.colno)}this.skip(K.TOKEN_COLON)?M=!0:(x[x.fields[I]]=this.parseExpression(),M=this.skip(K.TOKEN_COLON)||M)}if(!M)throw y();return new E.Array(h.lineno,h.colno,[x])}}}function _(s,u,a,l){s=s||[],null===u&&(u=l<0?s.length-1:0),null===a?a=l<0?-1:s.length:a<0&&(a+=s.length),u<0&&(u+=s.length);for(var y=[],h=u;!(h<0||h>s.length||l>0&&h>=a||l<0&&h<=a);h+=l)y.push(b.memberLookup(s,h));return y}function p(s,u){return Object.prototype.hasOwnProperty.call(s,u)}var v={pop:function(u){if(void 0===u)return this.pop();if(u>=this.length||u<0)throw new Error("KeyError");return this.splice(u,1)},append:function(u){return this.push(u)},remove:function(u){for(var a=0;a<this.length;a++)if(this[a]===u)return this.splice(a,1);throw new Error("ValueError")},count:function(u){for(var a=0,l=0;l<this.length;l++)this[l]===u&&a++;return a},index:function(u){var a;if(-1===(a=this.indexOf(u)))throw new Error("ValueError");return a},find:function(u){return this.indexOf(u)},insert:function(u,a){return this.splice(u,0,a)}},e={items:function(){return m._entries(this)},values:function(){return m._values(this)},keys:function(){return m.keys(this)},get:function(u,a){var l=this[u];return void 0===l&&(l=a),l},has_key:function(u){return p(this,u)},pop:function(u,a){var l=this[u];if(void 0===l&&void 0!==a)l=a;else{if(void 0===l)throw new Error("KeyError");delete this[u]}return l},popitem:function(){var u=m.keys(this);if(!u.length)throw new Error("KeyError");var a=u[0],l=this[a];return delete this[a],[a,l]},setdefault:function(u,a){return void 0===a&&(a=null),u in this||(this[u]=a),this[u]},update:function(u){return m._assign(this,u),null}};return e.iteritems=e.items,e.itervalues=e.values,e.iterkeys=e.keys,b.memberLookup=function(u,a,l){return 4===arguments.length?_.apply(this,arguments):m.isArray(u=u||{})&&p(v,a)?v[a].bind(u):m.isObject(u)&&p(e,a)?e[a].bind(u):R.apply(this,arguments)},function t(){b.contextOrFrameLookup=V,b.memberLookup=R,c&&(c.prototype.assertType=A),k&&(k.prototype.parseAggregate=F)}}}])}}]);