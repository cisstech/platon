"use strict";(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[450],{5171:(L,h,o)=>{o.r(h),o.d(h,{MatchListModule:()=>w});var d=o(707),f=o(4104),C=o(4553),g=o(4911),e=o(4966),P=o(9277),v=o(5839),m=o(4361),M=o(8231),u=o(6733),y=o(2996);const b=["container"];function O(i,t){1&i&&e.GkF(0)}const p=i=>({$implicit:i});function k(i,t){if(1&i&&(e.ynx(0),e.YNc(1,O,1,0,"ng-container",7),e.BQk()),2&i){const n=t.$implicit;e.oxw();const s=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(2,p,n))}}function j(i,t){1&i&&e.GkF(0)}function T(i,t){if(1&i&&(e.ynx(0),e.YNc(1,j,1,0,"ng-container",7),e.BQk()),2&i){const n=t.$implicit;e.oxw();const s=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(2,p,n))}}function x(i,t){if(1&i&&e._UZ(0,"nge-markdown",8),2&i){const n=t.$implicit;e.Q6J("id",n.id)("data",n.content)}}let r=class l{get sources(){return this.state.nodes.filter(t=>"source"===t.type)}get targets(){return this.state.nodes.filter(t=>"target"===t.type)}constructor(t,n){this.injector=t,this.changeDetector=n,this.width=0,this.height=0,this.selectedPoints=[]}ngOnInit(){var t=this;return(0,C.Z)(function*(){t.jsPlumb=P.jsPlumb.getInstance({Container:t.container.nativeElement,ConnectionsDetachable:!1,Endpoint:["Dot",{radius:6}],Connector:"StateMachine",PaintStyle:{strokeWidth:4,stroke:"#456"},HoverPaintStyle:{stroke:"#FF4500"},EndpointHoverStyle:{stroke:"#FF4500",fill:"#FF4500"},ConnectionOverlays:[["Arrow",{width:16,length:16,location:.98,id:"arrow"}]],DragOptions:{cursor:"pointer",zIndex:2e3}}),yield new Promise(n=>{t.jsPlumb.ready(()=>{t.addListeners(),n()})})})()}ngAfterViewChecked(){const{offsetWidth:t,offsetHeight:n}=this.container.nativeElement;(this.width!==t||this.height!==n)&&0!==this.width&&0!==this.height&&this.jsPlumb?.repaintEverything(),this.width=t,this.height=n}ngOnDestroy(){this.jsPlumb?.reset()}onChangeState(){this.jsPlumb.batch(()=>{this.jsPlumb.reset(!0),this.jsPlumb.setSuspendEvents(this.state.disabled),this.renderEndPoints(),this.renderConnections()})}trackBy(t,n){return n.id||t}renderEndPoints(){this.state.nodes.forEach(t=>{this.jsPlumb?.addEndpoint(t.id,{id:t.id,isSource:"source"===t.type,isTarget:"target"===t.type,anchor:"source"===t.type?"Right":"Left",maxConnections:this.state.disabled?0:-1})})}renderConnections(){this.state.links.forEach(t=>{!t.source||!t.target||this.jsPlumb?.connect({source:t.source,target:t.target,anchors:["RightMiddle","LeftMiddle"],cssClass:t.css})})}addListeners(){this.jsPlumb.bind("click",t=>{this.jsPlumb?.deleteConnection(t)}),this.jsPlumb.bind("connection",t=>{this.onCreateConnection(t.connection)}),this.jsPlumb.bind("connectionDetached",t=>{this.onRemoveConnection(t.connection)}),this.jsPlumb.bind("endpointClick",t=>{if(this.selectPoint(t),this.selectedPoints.length>=2){const s=this.selectedPoints.find(a=>a.isSource),c=this.selectedPoints.find(a=>a.isTarget);if(s&&c)this.unselectPoints(),this.state.links.push({source:s.getElement().id,target:c.getElement().id});else{const a=this.selectedPoints[1];this.unselectPoints(),this.selectPoint(a)}}})}selectPoint(t){const n=t.canvas;n.classList.remove("selected"),n.classList.add("selected"),this.selectedPoints.push(t)}unselectPoints(){this.selectedPoints.forEach(t=>{t.canvas.classList.remove("selected")}),this.selectedPoints=[]}indexOfConnection(t){const n=this.state.links;for(let s=0;s<this.state.links.length;s++){const c=n[s];if(c.source===t.sourceId&&c.target===t.targetId)return s}return-1}onCreateConnection(t){-1===this.indexOfConnection(t)&&this.changeDetector.ignore(this,()=>{this.state.links.push({source:t.sourceId,target:t.targetId})})}onRemoveConnection(t){const n=this.indexOfConnection(t);-1!==n&&this.changeDetector.ignore(this,()=>{this.state.links.splice(n,1)})}static#t=this.\u0275fac=function(n){return new(n||l)(e.Y36(e.zs3),e.Y36(m.Z))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["wc-match-list"]],viewQuery:function(n,s){if(1&n&&e.Gf(b,7),2&n){let c;e.iGM(c=e.CRH())&&(s.container=c.first)}},inputs:{state:"state"},decls:9,vars:7,consts:[[1,"match-list-container"],["container",""],[1,"match-list-sources"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"match-list-targets"],["nodeTemplate",""],[3,"state","stateChange"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id","data"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2),e.YNc(3,k,2,4,"ng-container",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,T,2,4,"ng-container",3),e.qZA()(),e.YNc(6,x,1,2,"ng-template",null,5,e.W1O),e.TgZ(8,"wc-base",6),e.NdJ("stateChange",function(a){return s.state=a}),e.qZA()),2&n&&(e.ekj("disabled",s.state.disabled),e.xp6(3),e.Q6J("ngForOf",s.sources)("ngForTrackBy",s.trackBy),e.xp6(2),e.Q6J("ngForOf",s.targets)("ngForTrackBy",s.trackBy),e.xp6(3),e.Q6J("state",s.state))},dependencies:[u.sg,u.tP,y.H,d.NgeMarkdownComponent],styles:[".match-list-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:8rem;align-items:center;position:relative;min-height:100px}.match-list-container.disabled[_ngcontent-%COMP%]{cursor:not-allowed;border:dashed 1px #ccc}.match-list-container[_ngcontent-%COMP%]  svg.jtk-connector{cursor:pointer}.match-list-container[_ngcontent-%COMP%]  .jtk-endpoint svg{cursor:pointer}.match-list-container[_ngcontent-%COMP%]  .jtk-endpoint.selected circle{fill:#ff4500;stroke:#ff4500}.match-list-container[_ngcontent-%COMP%]  svg.error-state, .match-list-container[_ngcontent-%COMP%]  svg.warning-state, .match-list-container[_ngcontent-%COMP%]  svg.success-state{background-color:unset!important;border:unset!important;border-radius:unset!important}.match-list-container[_ngcontent-%COMP%]  svg.error-state path{stroke:red}.match-list-container[_ngcontent-%COMP%]  svg.warning-state path{stroke:#ff0}.match-list-container[_ngcontent-%COMP%]  svg.success-state path{stroke:#0f0}.match-list-sources[_ngcontent-%COMP%]{text-align:end}.match-list-targets[_ngcontent-%COMP%]{text-align:start}nge-markdown[_ngcontent-%COMP%]{display:block;padding:1rem;border-bottom:1px solid #f5f5f5}nge-markdown[_ngcontent-%COMP%]  img{width:128px;object-fit:cover;height:auto}"],changeDetection:0})};r=(0,g.gn)([(0,v._s)(M.y),(0,g.w6)("design:paramtypes",[e.zs3,m.Z])],r);let w=(()=>{class i{constructor(){this.component=r}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[f.Y,d.NgeMarkdownModule]})}return i})()}}]);