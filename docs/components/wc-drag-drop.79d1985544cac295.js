"use strict";(self.webpackChunkcomponents=self.webpackChunkcomponents||[]).push([[929],{3070:(M,h,o)=>{o.r(h),o.d(h,{DragDropModule:()=>P});var r=o(707),C=o(4104),m=o(8284),v=o(4911),t=o(4966),y=o(5839),b=o(6287);let p=(()=>{class a{static#t=this.NODE_ID=0;constructor(e,n){this.el=e,this.renderer=n,this.events=[],this.dropped=new t.vpe,this.id="dnd-"+ ++a.NODE_ID}ngAfterContentInit(){const e=this.el.nativeElement;this.setDraggable(e),this.setDroppable(e)}ngOnDestroy(){this.events.forEach(e=>e())}setDraggable(e){this.renderer.setAttribute(e,"id",this.id),this.renderer.setProperty(e,"draggable",!0),e.addEventListener("dragstart",i=>!!i.dataTransfer&&(i.dataTransfer.effectAllowed="move",i.dataTransfer.setDragImage(this.el.nativeElement,this.el.nativeElement.offsetWidth/2,this.el.nativeElement.offsetHeight/2),i.dataTransfer.setData("dnd-id",e.id),this.renderer.addClass(e,"dnd-drag"),!1),!1),e.addEventListener("dragend",i=>(this.renderer.removeClass(e,"dnd-drag"),!1),!1)}setDroppable(e){this.addListener(e,"dragover",u=>(u.dataTransfer&&(u.dataTransfer.dropEffect="move",u.preventDefault(),this.renderer.addClass(e,"dnd-over")),!1)),this.addListener(e,"dragenter",()=>(this.renderer.removeClass(e,"dnd-over"),!1)),this.addListener(e,"dragleave",()=>(this.renderer.removeClass(e,"dnd-over"),!1)),this.addListener(e,"drop",u=>{if(!u.dataTransfer)return!1;u.preventDefault(),u.stopPropagation(),this.renderer.removeClass(e,"dnd-over");const T=u.dataTransfer.getData("dnd-id");return T&&this.dropped.emit({source:T,destination:this.id}),!1})}addListener(e,n,s){this.renderer.listen(e,n,s),this.events.push(()=>{e.removeEventListener(n,s,!1)})}static#e=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.SBq),t.Y36(t.Qsj))};static#n=this.\u0275dir=t.lG2({type:a,selectors:[["","dragNdrop",""]],outputs:{dropped:"dropped"}})}return a})(),E=(()=>{class a{constructor(){this.components={}}register(e,n){this.components[e]=n}unregister(e){delete this.components[e]}get(e){if(e)return this.components[e]}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac})}return a})();var d=o(6733),c=o(2996);function l(a,g){if(1&a&&t._UZ(0,"nge-markdown",4),2&a){const e=t.oxw();t.Q6J("data",e.state.content)}}function f(a,g){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",5),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clear())}),t._uU(2,"\xd7"),t.qZA(),t.BQk()}}let _=class O{constructor(g,e){this.injector=g,this.dragdrop=e}ngOnInit(){this.dragdrop.register(this.directive.id,this)}ngOnDestroy(){this.directive&&this.dragdrop.unregister(this.directive.id)}dropped(g){const{source:e,destination:n}=g;if(e!==n){const s=this.dragdrop.get(e),i=this.dragdrop.get(n);if(s.state.group!==i.state.group||s===i)return;if(i.state.draggable)return void(!s.state.draggable&&s.state.content===i.state.content&&(s.state.content=""));if(!s.state.draggable&&s.state.content&&i.state.content){const D=s.state.content;s.state.content=i.state.content,i.state.content=D}else i.state.content=s.state.content}}clear(){this.state.draggable||(this.state.content="")}static#t=this.\u0275fac=function(e){return new(e||O)(t.Y36(t.zs3),t.Y36(E))};static#e=this.\u0275cmp=t.Xpm({type:O,selectors:[["wc-drag-drop"]],viewQuery:function(e,n){if(1&e&&t.Gf(p,7),2&e){let s;t.iGM(s=t.CRH())&&(n.directive=s.first)}},inputs:{state:"state"},decls:6,vars:17,consts:[["dragNdrop","",1,"drag-drop-component",3,"ngClass","ngStyle","dropped"],[3,"data",4,"ngIf"],[4,"ngIf"],[3,"state","stateChange"],[3,"data"],[1,"btn-clear",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.NdJ("dropped",function(i){return n.dropped(i)}),t.ALo(1,"css"),t.ALo(2,"css"),t.YNc(3,l,1,1,"nge-markdown",1),t.qZA(),t.YNc(4,f,3,0,"ng-container",2),t.TgZ(5,"wc-base",3),t.NdJ("stateChange",function(i){return n.state=i}),t.qZA()),2&e&&(t.ekj("dragzone",n.state.draggable)("dropzone",!n.state.draggable)("disabled",n.state.disabled),t.Q6J("ngClass",t.xi3(1,11,n.state.css,"class"))("ngStyle",t.xi3(2,14,n.state.css,"style")),t.xp6(3),t.Q6J("ngIf",n.state.content),t.xp6(1),t.Q6J("ngIf",!n.state.draggable&&n.state.content),t.xp6(1),t.Q6J("state",n.state))},dependencies:[d.mk,d.O5,d.PC,c.H,r.NgeMarkdownComponent,p,m.j],styles:[".drag-drop-component[_ngcontent-%COMP%]{position:relative;cursor:move;display:inline-flex;padding:8px;box-sizing:border-box;min-width:3em;min-height:2em;vertical-align:middle;text-align:center;justify-content:center;align-items:center;border:2px solid transparent;border-radius:6px;margin:8px}.drag-drop-component.dnd-drag[_ngcontent-%COMP%]{opacity:.6}.drag-drop-component.dragzone[_ngcontent-%COMP%]{background-color:#faebd7}.drag-drop-component.dropzone[_ngcontent-%COMP%]{cursor:pointer;border:1px solid black}.drag-drop-component.dropzone[_ngcontent-%COMP%]:hover, .drag-drop-component.dropzone.dnd-over[_ngcontent-%COMP%]{border:2px solid black}.drag-drop-component.disabled[_ngcontent-%COMP%]{border:1px dashed;pointer-events:none;cursor:not-allowed}.drag-drop-component[_ngcontent-%COMP%]   nge-markdown[_ngcontent-%COMP%]{pointer-events:none}.btn-clear[_ngcontent-%COMP%]{font-size:1.5em;cursor:pointer}"],changeDetection:0})};_=(0,v.gn)([(0,y._s)(b.z),(0,v.w6)("design:paramtypes",[t.zs3,E])],_);let P=(()=>{class a{constructor(){this.component=_}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({providers:[E],imports:[C.Y,m.X,r.NgeMarkdownModule]})}return a})()},2996:(M,h,o)=>{o.d(h,{H:()=>b});var r=o(4966),C=o(4266),m=o(6733),v=o(9986);const t=["container"];function y(p,E){if(1&p&&(r.ynx(0),r._UZ(1,"nge-monaco-viewer",1),r.ALo(2,"json"),r.BQk()),2&p){const d=r.oxw();r.xp6(1),r.Q6J("code",r.lcZ(2,1,d.state))}}let b=(()=>{class p{constructor(d,c){this.api=d,this.elementRef=c,this.stateChange=new r.vpe}ngOnInit(){const d=this.elementRef.nativeElement,c=d.parentElement?.tagName.toLowerCase();this.definition=this.api.findBySelector(c||""),this.observer=new MutationObserver(l=>{l.forEach(this.onChangeAttributes.bind(this,!1))}),this.observer.observe(d.parentElement,{attributes:!0}),this.onChangeAttributes(!0)}ngOnDestroy(){this.observer?.disconnect()}parseValue(d){return d.trim().match(/^(true$|false$|\d+$|\[|\{)/)?JSON.parse(d):d}onChangeAttributes(d){const f=Array.from(this.elementRef.nativeElement.parentElement.attributes),_=f.find(n=>"cid"===n.name);if(_){const s=document.querySelector(`script[id="${_.value}"]`);return void(s&&this.stateChange.emit(this.parseValue(s.textContent||"{}")))}if(f.find(n=>"state"===n.name)&&d)return;const a={},g=this.definition?.schema?.properties||{};let e=!1;for(const n of f)if(n.name in g){e=!0;try{a[n.name]=this.parseValue(n.value)}catch{console.warn(`Invalid value "${n.value}" for ${n.name} attribute`)}}e&&this.stateChange.emit(a)}static#t=this.\u0275fac=function(c){return new(c||p)(r.Y36(C.G),r.Y36(r.SBq))};static#e=this.\u0275cmp=r.Xpm({type:p,selectors:[["wc-base"]],viewQuery:function(c,l){if(1&c&&r.Gf(t,5),2&c){let f;r.iGM(f=r.CRH())&&(l.container=f.first)}},inputs:{state:"state"},outputs:{stateChange:"stateChange"},decls:1,vars:1,consts:[[4,"ngIf"],["language","json",3,"code"]],template:function(c,l){1&c&&r.YNc(0,y,3,3,"ng-container",0),2&c&&r.Q6J("ngIf",null==l.state?null:l.state.debug)},dependencies:[m.O5,v.Yu,m.Ts],styles:["[_nghost-%COMP%]{display:block;margin:.5rem 0}div[_ngcontent-%COMP%]{display:none}"]})}return p})()},4104:(M,h,o)=>{o.d(h,{Y:()=>v});var r=o(6733),C=o(9986),m=o(4966);let v=(()=>{class t{static#t=this.\u0275fac=function(p){return new(p||t)};static#e=this.\u0275mod=m.oAB({type:t});static#n=this.\u0275inj=m.cJS({imports:[r.ez,C.vS,r.ez]})}return t})()}}]);